{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap abcadb1baa364bb82d19","webpack:///./src/runtime/Property.js","webpack:///./src/runtime/AnimatedProperty.js","webpack:///./src/runtime/Path.js","webpack:///./src/runtime/AnimatedPath.js","webpack:///./src/runtime/Transform.js","webpack:///./src/runtime/Group.js","webpack:///./src/runtime/BezierEasing.js","webpack:///./src/runtime/Bezier.js","webpack:///./src/runtime/ImageLayer.js","webpack:///./src/runtime/TextLayer.js","webpack:///./src/runtime/AE2Canvas.js","webpack:///./src/runtime/shim.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/runtime/Stroke.js","webpack:///./src/runtime/Rect.js","webpack:///./src/runtime/Ellipse.js","webpack:///./src/runtime/Polystar.js","webpack:///./src/runtime/Fill.js","webpack:///./src/runtime/GradientFill.js","webpack:///./src/runtime/Position.js","webpack:///./src/runtime/Merge.js","webpack:///./src/runtime/Trim.js","webpack:///./src/runtime/Comp.js"],"names":["Property","data","Array","frames","prototype","getValue","v","setKeyframes","time","reset","reversed","module","exports","require","BezierEasing","AnimatedProperty","call","frameCount","length","Object","create","lerp","a","b","t","arr","i","setEasing","nextFrame","easeIn","easing","lastFrame","easeOut","finished","started","pointer","onKeyframeChange","getValueAtTime","getElapsed","delta","duration","elapsed","Bezier","Path","closed","verticesCount","draw","ctx","trim","frame","vertices","start","end","getTrimValues","j","nextVertex","lastVertex","tv","startIndex","moveTo","endIndex","len","bezierCurveTo","actualTrim","totalLen","sumArray","trimAtLen","from","to","isStraight","startVertex","endVertex","bezier","getLength","map","e1","f1","g1","h1","j1","k1","e2","f2","g2","h2","j2","k2","s","add","reduce","startX","startY","ctrl1X","ctrl1Y","ctrl2X","ctrl2Y","endX","endY","AnimatedPath","actualVertices","actualLength","cp1x","cp1y","cp2x","cp2y","x","y","push","Position","Transform","position","positionX","positionY","anchor","scaleX","scaleY","skew","skewAxis","rotation","opacity","transform","deg2rad","globalAlpha","setRotation","setSkew","setScale","rad","c","Math","cos","sin","dx","dy","sx","sy","axis","tan","deg","PI","Stroke","Rect","Ellipse","Polystar","Fill","GradientFill","Merge","Trim","Group","bufferCtx","parentIn","parentOut","gradients","index","in","out","parent","fill","gradientFill","stroke","merge","groups","shapes","shape","type","isAnimated","masks","k","mask","parentFill","parentStroke","parentTrim","isBuffer","save","trimValues","getTrim","setColor","setStroke","setParentTransform","setTransform","clearRect","canvas","width","height","restore","beginPath","clip","drawShapes","drawGroups","closePath","setCompositeOperation","drawImage","console","log","definition","window","define","amd","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","Float32Array","mX1","mY1","mX2","mY2","arguments","Error","isNaN","isFinite","mSampleValues","A","aA1","aA2","B","C","calcBezier","aT","getSlope","newtonRaphsonIterate","aX","aGuessT","currentSlope","currentX","calcSampleValues","binarySubdivide","aA","aB","currentT","abs","getTForX","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","f","str","toString","css","path","steps","max","floor","arcLengths","ox","cubicN","oy","clen","iterator","sqrt","u","targetLength","low","high","lengthBefore","getValues","pct","d","t2","t3","ImageLayer","basePath","isLoaded","source","preload","cb","img","Image","onload","bind","src","TextLayer","baseFont","text","leading","fontSize","font","color","justification","textAlign","fillStyle","fillText","Comp","_animations","_animationsLength","_autoPlay","_rafId","Animation","options","error","pausedTime","baseWidth","baseHeight","ratio","markers","document","createElement","loop","devicePixelRatio","fluid","imageBasePath","onUpdate","onComplete","onStop","getContext","buffer","layers","numLayers","layer","resize","isPaused","isPlaying","drawFrame","play","stop","pause","compTime","gotoAndPlay","id","marker","getMarker","gotoAndStop","comment","warn","checkStopMarkers","setStep","step","getStep","update","then","stopMarker","onloadCB","destroy","indexOf","splice","parentNode","removeChild","w","clientWidth","scale","setGradients","name","stops","forEach","gradient","_reversed","bool","requestAnimationFrame","undefined","performance","now","autoPlay","auto","cancelAnimationFrame","root","global","fn","setTimeout","clearTimeout","offset","Date","join","cap","miterLimit","dashes","dash","gap","round","strokeColor","strokeWidth","strokeJoin","lineWidth","lineJoin","lineCap","strokeStyle","setLineDash","lineDashOffset","size","roundness","arcTo","h","ow","oh","starType","points","innerRadius","outerRadius","innerRoundness","outerRoundness","rotatePoint","translate","pInner","pOuter","pOuter1Tangent","pOuter2Tangent","pInner1Tangent","pInner2Tangent","outerOffset","innerOffset","rot","cx","cy","radians","nx","ny","startPoint","endPoint","radius","distX","distY","createRadialGradient","createLinearGradient","addColorStop","location","setMotionPath","motionpath","globalCompositeOperation","min","internalTime"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC7DA;;AAEA,SAASA,QAAT,CAAkBC,IAAlB,EAAwB;AACpB,QAAI,EAAEA,gBAAgBC,KAAlB,CAAJ,EAA8B,OAAO,IAAP;AAC9B,SAAKC,MAAL,GAAcF,IAAd;AACH;;AAEDD,SAASI,SAAT,CAAmBC,QAAnB,GAA8B,YAAY;AACtC,WAAO,KAAKF,MAAL,CAAY,CAAZ,EAAeG,CAAtB;AACH,CAFD;;AAIAN,SAASI,SAAT,CAAmBG,YAAnB,GAAkC,UAAUC,IAAV,EAAgB,CACjD,CADD;;AAGAR,SAASI,SAAT,CAAmBK,KAAnB,GAA2B,UAAUC,QAAV,EAAoB,CAC9C,CADD;;AAGAC,OAAOC,OAAP,GAAiBZ,QAAjB,C;;;;;;;ACjBA;;AAEA,IAAIA,WAAW,mBAAAa,CAAQ,CAAR,CAAf;AAAA,IACIC,eAAe,mBAAAD,CAAQ,CAAR,CADnB;;AAGA,SAASE,gBAAT,CAA0Bd,IAA1B,EAAgC;AAC5BD,aAASgB,IAAT,CAAc,IAAd,EAAoBf,IAApB;AACA,SAAKgB,UAAL,GAAkB,KAAKd,MAAL,CAAYe,MAA9B;AACH;;AAEDH,iBAAiBX,SAAjB,GAA6Be,OAAOC,MAAP,CAAcpB,SAASI,SAAvB,CAA7B;;AAEAW,iBAAiBX,SAAjB,CAA2BiB,IAA3B,GAAkC,UAAUC,CAAV,EAAaC,CAAb,EAAgBC,CAAhB,EAAmB;AACjD,QAAIF,aAAapB,KAAjB,EAAwB;AACpB,YAAIuB,MAAM,EAAV;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIJ,EAAEJ,MAAtB,EAA8BQ,GAA9B,EAAmC;AAC/BD,gBAAIC,CAAJ,IAASJ,EAAEI,CAAF,IAAOF,KAAKD,EAAEG,CAAF,IAAOJ,EAAEI,CAAF,CAAZ,CAAhB;AACH;AACD,eAAOD,GAAP;AACH,KAND,MAMO;AACH,eAAOH,IAAIE,KAAKD,IAAID,CAAT,CAAX;AACH;AACJ,CAVD;;AAYAP,iBAAiBX,SAAjB,CAA2BuB,SAA3B,GAAuC,YAAY;AAC/C,QAAI,KAAKC,SAAL,CAAeC,MAAnB,EAA2B;AACvB,aAAKC,MAAL,GAAc,IAAIhB,YAAJ,CAAiB,KAAKiB,SAAL,CAAeC,OAAf,CAAuB,CAAvB,CAAjB,EAA4C,KAAKD,SAAL,CAAeC,OAAf,CAAuB,CAAvB,CAA5C,EAAuE,KAAKJ,SAAL,CAAeC,MAAf,CAAsB,CAAtB,CAAvE,EAAiG,KAAKD,SAAL,CAAeC,MAAf,CAAsB,CAAtB,CAAjG,CAAd;AACH,KAFD,MAEO;AACH,aAAKC,MAAL,GAAc,IAAd;AACH;AACJ,CAND;;AAQAf,iBAAiBX,SAAjB,CAA2BC,QAA3B,GAAsC,UAAUG,IAAV,EAAgB;AAClD,QAAI,KAAKyB,QAAL,IAAiBzB,QAAQ,KAAKoB,SAAL,CAAeJ,CAA5C,EAA+C;AAC3C,eAAO,KAAKI,SAAL,CAAetB,CAAtB;AACH,KAFD,MAEO,IAAI,CAAC,KAAK4B,OAAN,IAAiB1B,QAAQ,KAAKuB,SAAL,CAAeP,CAA5C,EAA+C;AAClD,eAAO,KAAKO,SAAL,CAAezB,CAAtB;AACH,KAFM,MAEA;AACH,aAAK4B,OAAL,GAAe,IAAf;AACA,aAAKD,QAAL,GAAgB,KAAhB;AACA,YAAIzB,OAAO,KAAKoB,SAAL,CAAeJ,CAA1B,EAA6B;AACzB,gBAAI,KAAKW,OAAL,GAAe,CAAf,KAAqB,KAAKlB,UAA9B,EAA0C;AACtC,qBAAKgB,QAAL,GAAgB,IAAhB;AACH,aAFD,MAEO;AACH,qBAAKE,OAAL;AACA,qBAAKJ,SAAL,GAAiB,KAAK5B,MAAL,CAAY,KAAKgC,OAAL,GAAe,CAA3B,CAAjB;AACA,qBAAKP,SAAL,GAAiB,KAAKzB,MAAL,CAAY,KAAKgC,OAAjB,CAAjB;AACA,qBAAKC,gBAAL;AACH;AACJ,SATD,MASO,IAAI5B,OAAO,KAAKuB,SAAL,CAAeP,CAA1B,EAA6B;AAChC,gBAAI,KAAKW,OAAL,GAAe,CAAnB,EAAsB;AAClB,qBAAKD,OAAL,GAAe,KAAf;AACH,aAFD,MAEO;AACH,qBAAKC,OAAL;AACA,qBAAKJ,SAAL,GAAiB,KAAK5B,MAAL,CAAY,KAAKgC,OAAL,GAAe,CAA3B,CAAjB;AACA,qBAAKP,SAAL,GAAiB,KAAKzB,MAAL,CAAY,KAAKgC,OAAjB,CAAjB;AACA,qBAAKC,gBAAL;AACH;AACJ;AACD,eAAO,KAAKC,cAAL,CAAoB7B,IAApB,CAAP;AACH;AACJ,CA7BD;;AA+BAO,iBAAiBX,SAAjB,CAA2BG,YAA3B,GAA0C,UAAUC,IAAV,EAAgB;AACtD;;AAEA,QAAIA,OAAO,KAAKL,MAAL,CAAY,CAAZ,EAAeqB,CAA1B,EAA6B;AACzB,aAAKW,OAAL,GAAe,CAAf;AACA,aAAKP,SAAL,GAAiB,KAAKzB,MAAL,CAAY,KAAKgC,OAAjB,CAAjB;AACA,aAAKJ,SAAL,GAAiB,KAAK5B,MAAL,CAAY,KAAKgC,OAAL,GAAe,CAA3B,CAAjB;AACA,aAAKC,gBAAL;AACA;AACH;;AAED,QAAI5B,OAAO,KAAKL,MAAL,CAAY,KAAKc,UAAL,GAAkB,CAA9B,EAAiCO,CAA5C,EAA+C;AAC3C,aAAKW,OAAL,GAAe,KAAKlB,UAAL,GAAkB,CAAjC;AACA,aAAKW,SAAL,GAAiB,KAAKzB,MAAL,CAAY,KAAKgC,OAAjB,CAAjB;AACA,aAAKJ,SAAL,GAAiB,KAAK5B,MAAL,CAAY,KAAKgC,OAAL,GAAe,CAA3B,CAAjB;AACA,aAAKC,gBAAL;AACA;AACH;;AAED,SAAK,IAAIV,IAAI,CAAb,EAAgBA,IAAI,KAAKT,UAAzB,EAAqCS,GAArC,EAA0C;AACtC,YAAIlB,QAAQ,KAAKL,MAAL,CAAYuB,IAAI,CAAhB,EAAmBF,CAA3B,IAAgChB,QAAQ,KAAKL,MAAL,CAAYuB,CAAZ,EAAeF,CAA3D,EAA8D;AAC1D,iBAAKW,OAAL,GAAeT,CAAf;AACA,iBAAKK,SAAL,GAAiB,KAAK5B,MAAL,CAAYuB,IAAI,CAAhB,CAAjB;AACA,iBAAKE,SAAL,GAAiB,KAAKzB,MAAL,CAAYuB,CAAZ,CAAjB;AACA,iBAAKU,gBAAL;AACA;AACH;AACJ;AACJ,CA5BD;;AA8BArB,iBAAiBX,SAAjB,CAA2BgC,gBAA3B,GAA8C,YAAY;AACtD,SAAKT,SAAL;AACH,CAFD;;AAIAZ,iBAAiBX,SAAjB,CAA2BkC,UAA3B,GAAwC,UAAU9B,IAAV,EAAgB;AACpD,QAAI+B,QAAU/B,OAAO,KAAKuB,SAAL,CAAeP,CAApC;AAAA,QACIgB,WAAW,KAAKZ,SAAL,CAAeJ,CAAf,GAAmB,KAAKO,SAAL,CAAeP,CADjD;AAAA,QAEIiB,UAAUF,QAAQC,QAFtB;;AAIA,QAAIC,UAAU,CAAd,EAAiBA,UAAU,CAAV,CAAjB,KACK,IAAIA,UAAU,CAAd,EAAiBA,UAAU,CAAV,CAAjB,KACA,IAAI,KAAKX,MAAT,EAAiBW,UAAU,KAAKX,MAAL,CAAYW,OAAZ,CAAV;AACtB,WAAOA,OAAP;AACH,CATD;;AAWA1B,iBAAiBX,SAAjB,CAA2BiC,cAA3B,GAA4C,UAAU7B,IAAV,EAAgB;AACxD,WAAO,KAAKa,IAAL,CAAU,KAAKU,SAAL,CAAezB,CAAzB,EAA4B,KAAKsB,SAAL,CAAetB,CAA3C,EAA8C,KAAKgC,UAAL,CAAgB9B,IAAhB,CAA9C,CAAP;AACH,CAFD;;AAIAO,iBAAiBX,SAAjB,CAA2BK,KAA3B,GAAmC,UAAUC,QAAV,EAAoB;AACnD,SAAKuB,QAAL,GAAgB,KAAhB;AACA,SAAKC,OAAL,GAAe,KAAf;AACA,SAAKC,OAAL,GAAezB,WAAW,KAAKO,UAAL,GAAkB,CAA7B,GAAiC,CAAhD;AACA,SAAKW,SAAL,GAAiB,KAAKzB,MAAL,CAAY,KAAKgC,OAAjB,CAAjB;AACA,SAAKJ,SAAL,GAAiB,KAAK5B,MAAL,CAAY,KAAKgC,OAAL,GAAe,CAA3B,CAAjB;AACA,SAAKC,gBAAL;AACH,CAPD;;AASAzB,OAAOC,OAAP,GAAiBG,gBAAjB,C;;;;;;;ACzHA;;AAEA,IAAI2B,SAAS,mBAAA7B,CAAQ,CAAR,CAAb;;AAEA,SAAS8B,IAAT,CAAc1C,IAAd,EAAoB;AAChB;AACA,SAAK2C,MAAL,GAAc3C,KAAK2C,MAAnB;AACA,SAAKzC,MAAL,GAAcF,KAAKE,MAAnB;AACA,SAAK0C,aAAL,GAAqB,KAAK1C,MAAL,CAAY,CAAZ,EAAeG,CAAf,CAAiBY,MAAtC;AACH;;AAEDyB,KAAKvC,SAAL,CAAe0C,IAAf,GAAsB,UAAUC,GAAV,EAAevC,IAAf,EAAqBwC,IAArB,EAA2B;AAC7C,QAAIC,QAAQ,KAAK5C,QAAL,CAAcG,IAAd,CAAZ;AAAA,QACI0C,WAAWD,MAAM3C,CADrB;;AAGA,QAAI0C,IAAJ,EAAU;AACN,YAAKA,KAAKG,KAAL,KAAe,CAAf,IAAoBH,KAAKI,GAAL,KAAa,CAAlC,IACCJ,KAAKG,KAAL,KAAe,CAAf,IAAoBH,KAAKI,GAAL,KAAa,CADtC,EAC0C;AACtC;AACH,SAHD,MAGO;AACHJ,mBAAO,KAAKK,aAAL,CAAmBL,IAAnB,EAAyBC,KAAzB,CAAP;AACH;AACJ;;AAED,SAAK,IAAIK,IAAI,CAAb,EAAgBA,IAAIJ,SAAShC,MAA7B,EAAqCoC,GAArC,EAA0C;;AAEtC,YAAIC,aAAaL,SAASI,CAAT,CAAjB;AAAA,YACIE,aAAaN,SAASI,IAAI,CAAb,CADjB;;AAGA,YAAIN,IAAJ,EAAU;AACN,gBAAIS,EAAJ;;AAEA,gBAAIH,MAAM,CAAN,IAAWN,KAAKU,UAAL,KAAoB,CAAnC,EAAsC;AAClCX,oBAAIY,MAAJ,CAAWH,WAAW,CAAX,CAAX,EAA0BA,WAAW,CAAX,CAA1B;AACH,aAFD,MAGK,IAAIF,MAAMN,KAAKU,UAAL,GAAkB,CAAxB,IAA6BJ,MAAMN,KAAKY,QAAL,GAAgB,CAAvD,EAA0D;AAC3DH,qBAAK,KAAKT,IAAL,CAAUQ,UAAV,EAAsBD,UAAtB,EAAkCP,KAAKG,KAAvC,EAA8CH,KAAKI,GAAnD,EAAwDH,MAAMY,GAAN,CAAUP,IAAI,CAAd,CAAxD,CAAL;AACAP,oBAAIY,MAAJ,CAAWF,GAAGN,KAAH,CAAS,CAAT,CAAX,EAAwBM,GAAGN,KAAH,CAAS,CAAT,CAAxB;AACAJ,oBAAIe,aAAJ,CAAkBL,GAAGN,KAAH,CAAS,CAAT,CAAlB,EAA+BM,GAAGN,KAAH,CAAS,CAAT,CAA/B,EAA4CM,GAAGL,GAAH,CAAO,CAAP,CAA5C,EAAuDK,GAAGL,GAAH,CAAO,CAAP,CAAvD,EAAkEK,GAAGL,GAAH,CAAO,CAAP,CAAlE,EAA6EK,GAAGL,GAAH,CAAO,CAAP,CAA7E;AACH,aAJI,MAIE,IAAIE,MAAMN,KAAKU,UAAL,GAAkB,CAA5B,EAA+B;AAClCD,qBAAK,KAAKT,IAAL,CAAUQ,UAAV,EAAsBD,UAAtB,EAAkCP,KAAKG,KAAvC,EAA8C,CAA9C,EAAiDF,MAAMY,GAAN,CAAUP,IAAI,CAAd,CAAjD,CAAL;AACAP,oBAAIY,MAAJ,CAAWF,GAAGN,KAAH,CAAS,CAAT,CAAX,EAAwBM,GAAGN,KAAH,CAAS,CAAT,CAAxB;AACAJ,oBAAIe,aAAJ,CAAkBL,GAAGN,KAAH,CAAS,CAAT,CAAlB,EAA+BM,GAAGN,KAAH,CAAS,CAAT,CAA/B,EAA4CM,GAAGL,GAAH,CAAO,CAAP,CAA5C,EAAuDK,GAAGL,GAAH,CAAO,CAAP,CAAvD,EAAkEK,GAAGL,GAAH,CAAO,CAAP,CAAlE,EAA6EK,GAAGL,GAAH,CAAO,CAAP,CAA7E;AACH,aAJM,MAIA,IAAIE,MAAMN,KAAKY,QAAL,GAAgB,CAA1B,EAA6B;AAChCH,qBAAK,KAAKT,IAAL,CAAUQ,UAAV,EAAsBD,UAAtB,EAAkC,CAAlC,EAAqCP,KAAKI,GAA1C,EAA+CH,MAAMY,GAAN,CAAUP,IAAI,CAAd,CAA/C,CAAL;AACAP,oBAAIe,aAAJ,CAAkBL,GAAGN,KAAH,CAAS,CAAT,CAAlB,EAA+BM,GAAGN,KAAH,CAAS,CAAT,CAA/B,EAA4CM,GAAGL,GAAH,CAAO,CAAP,CAA5C,EAAuDK,GAAGL,GAAH,CAAO,CAAP,CAAvD,EAAkEK,GAAGL,GAAH,CAAO,CAAP,CAAlE,EAA6EK,GAAGL,GAAH,CAAO,CAAP,CAA7E;AACH,aAHM,MAGA,IAAIE,IAAIN,KAAKU,UAAL,GAAkB,CAAtB,IAA2BJ,IAAIN,KAAKY,QAAL,GAAgB,CAAnD,EAAsD;AACzDb,oBAAIe,aAAJ,CAAkBN,WAAW,CAAX,CAAlB,EAAiCA,WAAW,CAAX,CAAjC,EAAgDD,WAAW,CAAX,CAAhD,EAA+DA,WAAW,CAAX,CAA/D,EAA8EA,WAAW,CAAX,CAA9E,EAA6FA,WAAW,CAAX,CAA7F;AACH;AACJ,SApBD,MAoBO;AACH,gBAAID,MAAM,CAAV,EAAa;AACTP,oBAAIY,MAAJ,CAAWH,WAAW,CAAX,CAAX,EAA0BA,WAAW,CAAX,CAA1B;AACH;AACDT,gBAAIe,aAAJ,CAAkBN,WAAW,CAAX,CAAlB,EAAiCA,WAAW,CAAX,CAAjC,EAAgDD,WAAW,CAAX,CAAhD,EAA+DA,WAAW,CAAX,CAA/D,EAA8EA,WAAW,CAAX,CAA9E,EAA6FA,WAAW,CAAX,CAA7F;AACH;AACJ;;AAED,QAAI,CAACP,IAAD,IAAS,KAAKJ,MAAlB,EAA0B;AACtB,YAAI,CAACW,UAAL,EAAiB;AACjBR,YAAIe,aAAJ,CAAkBP,WAAW,CAAX,CAAlB,EAAiCA,WAAW,CAAX,CAAjC,EAAgDL,SAAS,CAAT,EAAY,CAAZ,CAAhD,EAAgEA,SAAS,CAAT,EAAY,CAAZ,CAAhE,EAAgFA,SAAS,CAAT,EAAY,CAAZ,CAAhF,EAAgGA,SAAS,CAAT,EAAY,CAAZ,CAAhG;AACH;AACJ,CAlDD;;AAoDAP,KAAKvC,SAAL,CAAeC,QAAf,GAA0B,YAAY;AAClC,WAAO,KAAKF,MAAL,CAAY,CAAZ,CAAP;AACH,CAFD;;AAIAwC,KAAKvC,SAAL,CAAeiD,aAAf,GAA+B,UAAUL,IAAV,EAAgBC,KAAhB,EAAuB;AAClD,QAAIvB,CAAJ;;AAEA,QAAIqC,aAAa;AACbL,oBAAY,CADC;AAEbE,kBAAU,CAFG;AAGbT,eAAO,CAHM;AAIbC,aAAK;AAJQ,KAAjB;;AAOJ;AACI,QAAIJ,KAAKG,KAAL,KAAe,CAAnB,EAAsB;AAClB,YAAIH,KAAKI,GAAL,KAAa,CAAjB,EAAoB;AAChB,mBAAOW,UAAP;AACH,SAFD,MAEO,IAAIf,KAAKI,GAAL,KAAa,CAAjB,EAAoB;AACvBW,uBAAWH,QAAX,GAAsBX,MAAMY,GAAN,CAAU3C,MAAhC;AACA6C,uBAAWX,GAAX,GAAiB,CAAjB;AACA,mBAAOW,UAAP;AACH;AACJ;;AAED,QAAIC,WAAW,KAAKC,QAAL,CAAchB,MAAMY,GAApB,CAAf;AAAA,QACIK,SADJ;;AAGAA,gBAAYF,WAAWhB,KAAKG,KAA5B;;AAEA,SAAKzB,IAAI,CAAT,EAAYA,IAAIuB,MAAMY,GAAN,CAAU3C,MAA1B,EAAkCQ,GAAlC,EAAuC;AACnC,YAAIwC,YAAY,CAAZ,IAAiBA,YAAYjB,MAAMY,GAAN,CAAUnC,CAAV,CAAjC,EAA+C;AAC3CqC,uBAAWL,UAAX,GAAwBhC,CAAxB;AACAqC,uBAAWZ,KAAX,GAAmBe,YAAYjB,MAAMY,GAAN,CAAUnC,CAAV,CAA/B;AACH;AACDwC,qBAAajB,MAAMY,GAAN,CAAUnC,CAAV,CAAb;AACH;;AAED,QAAIsB,KAAKI,GAAL,KAAa,CAAjB,EAAoB;AAChBW,mBAAWH,QAAX,GAAsBX,MAAMY,GAAN,CAAU3C,MAAhC;AACA6C,mBAAWX,GAAX,GAAiB,CAAjB;AACA,eAAOW,UAAP;AACH,KAJD,MAIO;AACHG,oBAAYF,WAAWhB,KAAKI,GAA5B;;AAEA,aAAK1B,IAAI,CAAT,EAAYA,IAAIuB,MAAMY,GAAN,CAAU3C,MAA1B,EAAkCQ,GAAlC,EAAuC;AACnC,gBAAIwC,YAAY,CAAZ,IAAiBA,YAAYjB,MAAMY,GAAN,CAAUnC,CAAV,CAAjC,EAA+C;AAC3CqC,2BAAWH,QAAX,GAAsBlC,CAAtB;AACAqC,2BAAWX,GAAX,GAAiBc,YAAYjB,MAAMY,GAAN,CAAUnC,CAAV,CAA7B;AACH;AACDwC,yBAAajB,MAAMY,GAAN,CAAUnC,CAAV,CAAb;AACH;AACJ;;AAED,WAAOqC,UAAP;AACH,CAnDD;;AAqDApB,KAAKvC,SAAL,CAAe4C,IAAf,GAAsB,UAAUQ,UAAV,EAAsBD,UAAtB,EAAkCY,IAAlC,EAAwCC,EAAxC,EAA4CP,GAA5C,EAAiD;;AAEnE,QAAIM,SAAS,CAAT,IAAcC,OAAO,CAAzB,EAA4B;AACxB,eAAO;AACHjB,mBAAOK,UADJ;AAEHJ,iBAAKG;AAFF,SAAP;AAIH;;AAED,QAAI,KAAKc,UAAL,CAAgBb,WAAW,CAAX,CAAhB,EAA+BA,WAAW,CAAX,CAA/B,EAA8CA,WAAW,CAAX,CAA9C,EAA6DA,WAAW,CAAX,CAA7D,EAA4ED,WAAW,CAAX,CAA5E,EAA2FA,WAAW,CAAX,CAA3F,EAA0GA,WAAW,CAAX,CAA1G,EAAyHA,WAAW,CAAX,CAAzH,CAAJ,EAA6I;AACzIe,sBAAc,CACV,KAAKjD,IAAL,CAAUmC,WAAW,CAAX,CAAV,EAAyBD,WAAW,CAAX,CAAzB,EAAwCY,IAAxC,CADU,EAEV,KAAK9C,IAAL,CAAUmC,WAAW,CAAX,CAAV,EAAyBD,WAAW,CAAX,CAAzB,EAAwCY,IAAxC,CAFU,EAGV,KAAK9C,IAAL,CAAUmC,WAAW,CAAX,CAAV,EAAyBD,WAAW,CAAX,CAAzB,EAAwCY,IAAxC,CAHU,EAIV,KAAK9C,IAAL,CAAUmC,WAAW,CAAX,CAAV,EAAyBD,WAAW,CAAX,CAAzB,EAAwCY,IAAxC,CAJU,EAKV,KAAK9C,IAAL,CAAUmC,WAAW,CAAX,CAAV,EAAyBD,WAAW,CAAX,CAAzB,EAAwCY,IAAxC,CALU,EAMV,KAAK9C,IAAL,CAAUmC,WAAW,CAAX,CAAV,EAAyBD,WAAW,CAAX,CAAzB,EAAwCY,IAAxC,CANU,CAAd;;AASAI,oBAAY,CACR,KAAKlD,IAAL,CAAUmC,WAAW,CAAX,CAAV,EAAyBD,WAAW,CAAX,CAAzB,EAAwCa,EAAxC,CADQ,EAER,KAAK/C,IAAL,CAAUmC,WAAW,CAAX,CAAV,EAAyBD,WAAW,CAAX,CAAzB,EAAwCa,EAAxC,CAFQ,EAGR,KAAK/C,IAAL,CAAUmC,WAAW,CAAX,CAAV,EAAyBD,WAAW,CAAX,CAAzB,EAAwCa,EAAxC,CAHQ,EAIR,KAAK/C,IAAL,CAAUmC,WAAW,CAAX,CAAV,EAAyBD,WAAW,CAAX,CAAzB,EAAwCa,EAAxC,CAJQ,EAKR,KAAK/C,IAAL,CAAUmC,WAAW,CAAX,CAAV,EAAyBD,WAAW,CAAX,CAAzB,EAAwCa,EAAxC,CALQ,EAMR,KAAK/C,IAAL,CAAUmC,WAAW,CAAX,CAAV,EAAyBD,WAAW,CAAX,CAAzB,EAAwCa,EAAxC,CANQ,CAAZ;AASH,KAnBD,MAmBO;AACH,aAAKI,MAAL,GAAc,IAAI9B,MAAJ,CAAW,CAACc,WAAW,CAAX,CAAD,EAAgBA,WAAW,CAAX,CAAhB,EAA+BA,WAAW,CAAX,CAA/B,EAA8CA,WAAW,CAAX,CAA9C,EAA6DD,WAAW,CAAX,CAA7D,EAA4EA,WAAW,CAAX,CAA5E,EAA2FA,WAAW,CAAX,CAA3F,EAA0GA,WAAW,CAAX,CAA1G,CAAX,CAAd;AACA,aAAKiB,MAAL,CAAYC,SAAZ,CAAsBZ,GAAtB;AACAM,eAAO,KAAKK,MAAL,CAAYE,GAAZ,CAAgBP,IAAhB,CAAP;AACAC,aAAK,KAAKI,MAAL,CAAYE,GAAZ,CAAgBN,EAAhB,CAAL;AACAA,aAAK,CAACA,KAAKD,IAAN,KAAe,IAAIA,IAAnB,CAAL;;AAEA,YAAIQ,EAAJ,EAAQC,EAAR,EAAYC,EAAZ,EAAgBC,EAAhB,EAAoBC,EAApB,EAAwBC,EAAxB,EACIC,EADJ,EACQC,EADR,EACYC,EADZ,EACgBC,EADhB,EACoBC,EADpB,EACwBC,EADxB,EAEIhB,WAFJ,EAGIC,SAHJ;;AAKAI,aAAK,CAAC,KAAKtD,IAAL,CAAUmC,WAAW,CAAX,CAAV,EAAyBA,WAAW,CAAX,CAAzB,EAAwCW,IAAxC,CAAD,EAAgD,KAAK9C,IAAL,CAAUmC,WAAW,CAAX,CAAV,EAAyBA,WAAW,CAAX,CAAzB,EAAwCW,IAAxC,CAAhD,CAAL;AACAS,aAAK,CAAC,KAAKvD,IAAL,CAAUmC,WAAW,CAAX,CAAV,EAAyBD,WAAW,CAAX,CAAzB,EAAwCY,IAAxC,CAAD,EAAgD,KAAK9C,IAAL,CAAUmC,WAAW,CAAX,CAAV,EAAyBD,WAAW,CAAX,CAAzB,EAAwCY,IAAxC,CAAhD,CAAL;AACAU,aAAK,CAAC,KAAKxD,IAAL,CAAUkC,WAAW,CAAX,CAAV,EAAyBA,WAAW,CAAX,CAAzB,EAAwCY,IAAxC,CAAD,EAAgD,KAAK9C,IAAL,CAAUkC,WAAW,CAAX,CAAV,EAAyBA,WAAW,CAAX,CAAzB,EAAwCY,IAAxC,CAAhD,CAAL;AACAW,aAAK,CAAC,KAAKzD,IAAL,CAAUsD,GAAG,CAAH,CAAV,EAAiBC,GAAG,CAAH,CAAjB,EAAwBT,IAAxB,CAAD,EAAgC,KAAK9C,IAAL,CAAUsD,GAAG,CAAH,CAAV,EAAiBC,GAAG,CAAH,CAAjB,EAAwBT,IAAxB,CAAhC,CAAL;AACAY,aAAK,CAAC,KAAK1D,IAAL,CAAUuD,GAAG,CAAH,CAAV,EAAiBC,GAAG,CAAH,CAAjB,EAAwBV,IAAxB,CAAD,EAAgC,KAAK9C,IAAL,CAAUuD,GAAG,CAAH,CAAV,EAAiBC,GAAG,CAAH,CAAjB,EAAwBV,IAAxB,CAAhC,CAAL;AACAa,aAAK,CAAC,KAAK3D,IAAL,CAAUyD,GAAG,CAAH,CAAV,EAAiBC,GAAG,CAAH,CAAjB,EAAwBZ,IAAxB,CAAD,EAAgC,KAAK9C,IAAL,CAAUyD,GAAG,CAAH,CAAV,EAAiBC,GAAG,CAAH,CAAjB,EAAwBZ,IAAxB,CAAhC,CAAL;;AAEAG,sBAAc,CAACS,GAAG,CAAH,CAAD,EAAQA,GAAG,CAAH,CAAR,EAAeD,GAAG,CAAH,CAAf,EAAsBA,GAAG,CAAH,CAAtB,EAA6BE,GAAG,CAAH,CAA7B,EAAoCA,GAAG,CAAH,CAApC,CAAd;AACAT,oBAAY,CAAChB,WAAW,CAAX,CAAD,EAAgBA,WAAW,CAAX,CAAhB,EAA+BsB,GAAG,CAAH,CAA/B,EAAsCA,GAAG,CAAH,CAAtC,EAA6CtB,WAAW,CAAX,CAA7C,EAA4DA,WAAW,CAAX,CAA5D,CAAZ;;AAEA0B,aAAK,CAAC,KAAK5D,IAAL,CAAUiD,YAAY,CAAZ,CAAV,EAA0BA,YAAY,CAAZ,CAA1B,EAA0CF,EAA1C,CAAD,EAAgD,KAAK/C,IAAL,CAAUiD,YAAY,CAAZ,CAAV,EAA0BA,YAAY,CAAZ,CAA1B,EAA0CF,EAA1C,CAAhD,CAAL;AACAc,aAAK,CAAC,KAAK7D,IAAL,CAAUiD,YAAY,CAAZ,CAAV,EAA0BC,UAAU,CAAV,CAA1B,EAAwCH,EAAxC,CAAD,EAA8C,KAAK/C,IAAL,CAAUiD,YAAY,CAAZ,CAAV,EAA0BC,UAAU,CAAV,CAA1B,EAAwCH,EAAxC,CAA9C,CAAL;AACAe,aAAK,CAAC,KAAK9D,IAAL,CAAUkD,UAAU,CAAV,CAAV,EAAwBA,UAAU,CAAV,CAAxB,EAAsCH,EAAtC,CAAD,EAA4C,KAAK/C,IAAL,CAAUkD,UAAU,CAAV,CAAV,EAAwBA,UAAU,CAAV,CAAxB,EAAsCH,EAAtC,CAA5C,CAAL;;AAEAgB,aAAK,CAAC,KAAK/D,IAAL,CAAU4D,GAAG,CAAH,CAAV,EAAiBC,GAAG,CAAH,CAAjB,EAAwBd,EAAxB,CAAD,EAA8B,KAAK/C,IAAL,CAAU4D,GAAG,CAAH,CAAV,EAAiBC,GAAG,CAAH,CAAjB,EAAwBd,EAAxB,CAA9B,CAAL;AACAiB,aAAK,CAAC,KAAKhE,IAAL,CAAU6D,GAAG,CAAH,CAAV,EAAiBC,GAAG,CAAH,CAAjB,EAAwBf,EAAxB,CAAD,EAA8B,KAAK/C,IAAL,CAAU6D,GAAG,CAAH,CAAV,EAAiBC,GAAG,CAAH,CAAjB,EAAwBf,EAAxB,CAA9B,CAAL;AACAkB,aAAK,CAAC,KAAKjE,IAAL,CAAU+D,GAAG,CAAH,CAAV,EAAiBC,GAAG,CAAH,CAAjB,EAAwBjB,EAAxB,CAAD,EAA8B,KAAK/C,IAAL,CAAU+D,GAAG,CAAH,CAAV,EAAiBC,GAAG,CAAH,CAAjB,EAAwBjB,EAAxB,CAA9B,CAAL;;AAEAE,sBAAc,CAACW,GAAG,CAAH,CAAD,EAAQA,GAAG,CAAH,CAAR,EAAeX,YAAY,CAAZ,CAAf,EAA+BA,YAAY,CAAZ,CAA/B,EAA+CA,YAAY,CAAZ,CAA/C,EAA+DA,YAAY,CAAZ,CAA/D,CAAd;AACAC,oBAAY,CAACc,GAAG,CAAH,CAAD,EAAQA,GAAG,CAAH,CAAR,EAAeD,GAAG,CAAH,CAAf,EAAsBA,GAAG,CAAH,CAAtB,EAA6BE,GAAG,CAAH,CAA7B,EAAoCA,GAAG,CAAH,CAApC,CAAZ;AAEH;;AAED,WAAO;AACHnC,eAAOmB,WADJ;AAEHlB,aAAKmB;AAFF,KAAP;AAIH,CAnED;;AAqEA5B,KAAKvC,SAAL,CAAeiB,IAAf,GAAsB,UAAUC,CAAV,EAAaC,CAAb,EAAgBC,CAAhB,EAAmB;AACrC,QAAI+D,IAAI,IAAI/D,CAAZ;AACA,WAAOF,IAAIiE,CAAJ,GAAQhE,IAAIC,CAAnB;AACH,CAHD;;AAKAmB,KAAKvC,SAAL,CAAe6D,QAAf,GAA0B,UAAUxC,GAAV,EAAe;AACrC,aAAS+D,GAAT,CAAalE,CAAb,EAAgBC,CAAhB,EAAmB;AACf,eAAOD,IAAIC,CAAX;AACH;;AAED,WAAOE,IAAIgE,MAAJ,CAAWD,GAAX,CAAP;AACH,CAND;;AAQA7C,KAAKvC,SAAL,CAAeiE,UAAf,GAA4B,UAAUqB,MAAV,EAAkBC,MAAlB,EAA0BC,MAA1B,EAAkCC,MAAlC,EAA0CC,MAA1C,EAAkDC,MAAlD,EAA0DC,IAA1D,EAAgEC,IAAhE,EAAsE;AAC9F,WAAOP,WAAWE,MAAX,IAAqBD,WAAWE,MAAhC,IAA0CG,SAASF,MAAnD,IAA6DG,SAASF,MAA7E;AACH,CAFD;;AAIApD,KAAKvC,SAAL,CAAeG,YAAf,GAA8B,UAAUC,IAAV,EAAgB,CAC7C,CADD;;AAGAmC,KAAKvC,SAAL,CAAeK,KAAf,GAAuB,UAAUC,QAAV,EAAoB,CAC1C,CADD;;AAGAC,OAAOC,OAAP,GAAiB+B,IAAjB,C;;;;;;;ACpNA;;AAEA,IAAIA,OAAO,mBAAA9B,CAAQ,CAAR,CAAX;AAAA,IACIC,eAAe,mBAAAD,CAAQ,CAAR,CADnB;;AAGA,SAASqF,YAAT,CAAsBjG,IAAtB,EAA4B;AACxB0C,SAAK3B,IAAL,CAAU,IAAV,EAAgBf,IAAhB;AACA,SAAKgB,UAAL,GAAkB,KAAKd,MAAL,CAAYe,MAA9B;AACH;;AAEDgF,aAAa9F,SAAb,GAAyBe,OAAOC,MAAP,CAAcuB,KAAKvC,SAAnB,CAAzB;;AAEA8F,aAAa9F,SAAb,CAAuBC,QAAvB,GAAkC,UAAUG,IAAV,EAAgB;AAC9C,QAAI,KAAKyB,QAAL,IAAiBzB,QAAQ,KAAKoB,SAAL,CAAeJ,CAA5C,EAA+C;AAC3C,eAAO,KAAKI,SAAZ;AACH,KAFD,MAEO,IAAI,CAAC,KAAKM,OAAN,IAAiB1B,QAAQ,KAAKuB,SAAL,CAAeP,CAA5C,EAA+C;AAClD,eAAO,KAAKO,SAAZ;AACH,KAFM,MAEA;AACH,aAAKG,OAAL,GAAe,IAAf;AACA,aAAKD,QAAL,GAAgB,KAAhB;AACA,YAAIzB,OAAO,KAAKoB,SAAL,CAAeJ,CAA1B,EAA6B;AACzB,gBAAI,KAAKW,OAAL,GAAe,CAAf,KAAqB,KAAKlB,UAA9B,EAA0C;AACtC,qBAAKgB,QAAL,GAAgB,IAAhB;AACH,aAFD,MAEO;AACH,qBAAKE,OAAL;AACA,qBAAKJ,SAAL,GAAiB,KAAK5B,MAAL,CAAY,KAAKgC,OAAL,GAAe,CAA3B,CAAjB;AACA,qBAAKP,SAAL,GAAiB,KAAKzB,MAAL,CAAY,KAAKgC,OAAjB,CAAjB;AACA,qBAAKC,gBAAL;AACH;AACJ,SATD,MASO,IAAI5B,OAAO,KAAKuB,SAAL,CAAeP,CAA1B,EAA6B;AAChC,gBAAI,KAAKW,OAAL,GAAe,CAAnB,EAAsB;AAClB,qBAAKD,OAAL,GAAe,KAAf;AACH,aAFD,MAEO;AACH,qBAAKC,OAAL;AACA,qBAAKJ,SAAL,GAAiB,KAAK5B,MAAL,CAAY,KAAKgC,OAAL,GAAe,CAA3B,CAAjB;AACA,qBAAKP,SAAL,GAAiB,KAAKzB,MAAL,CAAY,KAAKgC,OAAjB,CAAjB;AACA,qBAAKC,gBAAL;AACH;AACJ;AACD,eAAO,KAAKC,cAAL,CAAoB7B,IAApB,CAAP;AACH;AACJ,CA7BD;;AA+BA0F,aAAa9F,SAAb,CAAuBG,YAAvB,GAAsC,UAAUC,IAAV,EAAgB;AAClD,QAAIA,OAAO,KAAKL,MAAL,CAAY,CAAZ,EAAeqB,CAA1B,EAA6B;AACzB,aAAKW,OAAL,GAAe,CAAf;AACA,aAAKP,SAAL,GAAiB,KAAKzB,MAAL,CAAY,KAAKgC,OAAjB,CAAjB;AACA,aAAKJ,SAAL,GAAiB,KAAK5B,MAAL,CAAY,KAAKgC,OAAL,GAAe,CAA3B,CAAjB;AACA,aAAKC,gBAAL;AACA;AACH;;AAED,QAAI5B,OAAO,KAAKL,MAAL,CAAY,KAAKc,UAAL,GAAkB,CAA9B,EAAiCO,CAA5C,EAA+C;AAC3C,aAAKW,OAAL,GAAe,KAAKlB,UAAL,GAAkB,CAAjC;AACA,aAAKW,SAAL,GAAiB,KAAKzB,MAAL,CAAY,KAAKgC,OAAjB,CAAjB;AACA,aAAKJ,SAAL,GAAiB,KAAK5B,MAAL,CAAY,KAAKgC,OAAL,GAAe,CAA3B,CAAjB;AACA,aAAKC,gBAAL;AACA;AACH;;AAED,SAAK,IAAIV,IAAI,CAAb,EAAgBA,IAAI,KAAKT,UAAzB,EAAqCS,GAArC,EAA0C;AACtC,YAAIlB,QAAQ,KAAKL,MAAL,CAAYuB,IAAI,CAAhB,EAAmBF,CAA3B,IAAgChB,QAAQ,KAAKL,MAAL,CAAYuB,CAAZ,CAA5C,EAA4D;AACxD,iBAAKS,OAAL,GAAeT,CAAf;AACA,iBAAKK,SAAL,GAAiB,KAAK5B,MAAL,CAAYuB,IAAI,CAAhB,CAAjB;AACA,iBAAKE,SAAL,GAAiB,KAAKzB,MAAL,CAAYuB,CAAZ,CAAjB;AACA,iBAAKU,gBAAL;AACA;AACH;AACJ;AACJ,CA1BD;;AA4BA8D,aAAa9F,SAAb,CAAuBgC,gBAAvB,GAA0C,YAAY;AAClD,SAAKT,SAAL;AACH,CAFD;;AAIAuE,aAAa9F,SAAb,CAAuBiB,IAAvB,GAA8B,UAAUC,CAAV,EAAaC,CAAb,EAAgBC,CAAhB,EAAmB;AAC7C,WAAOF,IAAIE,KAAKD,IAAID,CAAT,CAAX;AACH,CAFD;;AAIA4E,aAAa9F,SAAb,CAAuBuB,SAAvB,GAAmC,YAAY;AAC3C,QAAI,KAAKI,SAAL,CAAeC,OAAf,IAA0B,KAAKJ,SAAL,CAAeC,MAA7C,EAAqD;AACjD,aAAKC,MAAL,GAAc,IAAIhB,YAAJ,CAAiB,KAAKiB,SAAL,CAAeC,OAAf,CAAuB,CAAvB,CAAjB,EAA4C,KAAKD,SAAL,CAAeC,OAAf,CAAuB,CAAvB,CAA5C,EAAuE,KAAKJ,SAAL,CAAeC,MAAf,CAAsB,CAAtB,CAAvE,EAAiG,KAAKD,SAAL,CAAeC,MAAf,CAAsB,CAAtB,CAAjG,CAAd;AACH,KAFD,MAEO;AACH,aAAKC,MAAL,GAAc,IAAd;AACH;AACJ,CAND;;AAQAoE,aAAa9F,SAAb,CAAuBiC,cAAvB,GAAwC,UAAU7B,IAAV,EAAgB;AACpD,QAAI+B,QAAU/B,OAAO,KAAKuB,SAAL,CAAeP,CAApC;AACA,QAAIgB,WAAW,KAAKZ,SAAL,CAAeJ,CAAf,GAAmB,KAAKO,SAAL,CAAeP,CAAjD;AACA,QAAIiB,UAAUF,QAAQC,QAAtB;AACA,QAAIC,UAAU,CAAd,EAAiBA,UAAU,CAAV,CAAjB,KACK,IAAIA,UAAU,CAAd,EAAiBA,UAAU,CAAV,CAAjB,KACA,IAAI,KAAKX,MAAT,EAAiBW,UAAU,KAAKX,MAAL,CAAYW,OAAZ,CAAV;AACtB,QAAI0D,iBAAiB,EAArB;AAAA,QACIC,eAAe,EADnB;;AAGA,SAAK,IAAI1E,IAAI,CAAb,EAAgBA,IAAI,KAAKmB,aAAzB,EAAwCnB,GAAxC,EAA6C;AACzC,YAAI2E,OAAO,KAAKhF,IAAL,CAAU,KAAKU,SAAL,CAAezB,CAAf,CAAiBoB,CAAjB,EAAoB,CAApB,CAAV,EAAkC,KAAKE,SAAL,CAAetB,CAAf,CAAiBoB,CAAjB,EAAoB,CAApB,CAAlC,EAA0De,OAA1D,CAAX;AAAA,YACI6D,OAAO,KAAKjF,IAAL,CAAU,KAAKU,SAAL,CAAezB,CAAf,CAAiBoB,CAAjB,EAAoB,CAApB,CAAV,EAAkC,KAAKE,SAAL,CAAetB,CAAf,CAAiBoB,CAAjB,EAAoB,CAApB,CAAlC,EAA0De,OAA1D,CADX;AAAA,YAEI8D,OAAO,KAAKlF,IAAL,CAAU,KAAKU,SAAL,CAAezB,CAAf,CAAiBoB,CAAjB,EAAoB,CAApB,CAAV,EAAkC,KAAKE,SAAL,CAAetB,CAAf,CAAiBoB,CAAjB,EAAoB,CAApB,CAAlC,EAA0De,OAA1D,CAFX;AAAA,YAGI+D,OAAO,KAAKnF,IAAL,CAAU,KAAKU,SAAL,CAAezB,CAAf,CAAiBoB,CAAjB,EAAoB,CAApB,CAAV,EAAkC,KAAKE,SAAL,CAAetB,CAAf,CAAiBoB,CAAjB,EAAoB,CAApB,CAAlC,EAA0De,OAA1D,CAHX;AAAA,YAIIgE,IAAI,KAAKpF,IAAL,CAAU,KAAKU,SAAL,CAAezB,CAAf,CAAiBoB,CAAjB,EAAoB,CAApB,CAAV,EAAkC,KAAKE,SAAL,CAAetB,CAAf,CAAiBoB,CAAjB,EAAoB,CAApB,CAAlC,EAA0De,OAA1D,CAJR;AAAA,YAKIiE,IAAI,KAAKrF,IAAL,CAAU,KAAKU,SAAL,CAAezB,CAAf,CAAiBoB,CAAjB,EAAoB,CAApB,CAAV,EAAkC,KAAKE,SAAL,CAAetB,CAAf,CAAiBoB,CAAjB,EAAoB,CAApB,CAAlC,EAA0De,OAA1D,CALR;;AAOA0D,uBAAeQ,IAAf,CAAoB,CAACN,IAAD,EAAOC,IAAP,EAAaC,IAAb,EAAmBC,IAAnB,EAAyBC,CAAzB,EAA4BC,CAA5B,CAApB;AACH;;AAED,SAAK,IAAIpD,IAAI,CAAb,EAAgBA,IAAI,KAAKT,aAAL,GAAqB,CAAzC,EAA4CS,GAA5C,EAAiD;AAC7C8C,qBAAaO,IAAb,CAAkB,KAAKtF,IAAL,CAAU,KAAKU,SAAL,CAAe8B,GAAf,CAAmBP,CAAnB,CAAV,EAAiC,KAAK1B,SAAL,CAAeiC,GAAf,CAAmBP,CAAnB,CAAjC,EAAwDb,OAAxD,CAAlB;AACH;;AAED,WAAO;AACHnC,WAAK6F,cADF;AAEHtC,aAAKuC;AAFF,KAAP;AAIH,CA7BD;;AA+BAF,aAAa9F,SAAb,CAAuBK,KAAvB,GAA+B,UAAUC,QAAV,EAAoB;AAC/C,SAAKuB,QAAL,GAAgB,KAAhB;AACA,SAAKC,OAAL,GAAe,KAAf;AACA,SAAKC,OAAL,GAAezB,WAAW,KAAKO,UAAL,GAAkB,CAA7B,GAAiC,CAAhD;AACA,SAAKW,SAAL,GAAiB,KAAKzB,MAAL,CAAY,KAAKgC,OAAjB,CAAjB;AACA,SAAKJ,SAAL,GAAiB,KAAK5B,MAAL,CAAY,KAAKgC,OAAL,GAAe,CAA3B,CAAjB;AACA,SAAKC,gBAAL;AACH,CAPD;;AASAzB,OAAOC,OAAP,GAAiBsF,YAAjB,C;;;;;;;AC/HA;;AAEA,IAAIlG,WAAW,mBAAAa,CAAQ,CAAR,CAAf;AAAA,IACIE,mBAAmB,mBAAAF,CAAQ,CAAR,CADvB;AAAA,IAEI+F,WAAW,mBAAA/F,CAAQ,EAAR,CAFf;;AAIA,SAASgG,SAAT,CAAmB5G,IAAnB,EAAyB;AACrB,QAAI,CAACA,IAAL,EAAW;;AAEX;;AAEA,QAAIA,KAAK6G,QAAT,EAAmB;AACf,YAAI7G,KAAK6G,QAAL,CAAc5F,MAAd,GAAuB,CAA3B,EAA8B;AAC1B,iBAAK4F,QAAL,GAAgB,IAAIF,QAAJ,CAAa3G,KAAK6G,QAAlB,CAAhB;AACH,SAFD,MAEO;AACH,iBAAKA,QAAL,GAAgB,IAAI9G,QAAJ,CAAaC,KAAK6G,QAAlB,CAAhB;AACH;AACJ;;AAED,QAAI7G,KAAK8G,SAAT,EAAoB,KAAKA,SAAL,GAAiB9G,KAAK8G,SAAL,CAAe7F,MAAf,GAAwB,CAAxB,GAA4B,IAAIH,gBAAJ,CAAqBd,KAAK8G,SAA1B,CAA5B,GAAmE,IAAI/G,QAAJ,CAAaC,KAAK8G,SAAlB,CAApF;AACpB,QAAI9G,KAAK+G,SAAT,EAAoB,KAAKA,SAAL,GAAiB/G,KAAK+G,SAAL,CAAe9F,MAAf,GAAwB,CAAxB,GAA4B,IAAIH,gBAAJ,CAAqBd,KAAK+G,SAA1B,CAA5B,GAAmE,IAAIhH,QAAJ,CAAaC,KAAK+G,SAAlB,CAApF;AACpB,QAAI/G,KAAKgH,MAAT,EAAiB,KAAKA,MAAL,GAAchH,KAAKgH,MAAL,CAAY/F,MAAZ,GAAqB,CAArB,GAAyB,IAAIH,gBAAJ,CAAqBd,KAAKgH,MAA1B,CAAzB,GAA6D,IAAIjH,QAAJ,CAAaC,KAAKgH,MAAlB,CAA3E;AACjB,QAAIhH,KAAKiH,MAAT,EAAiB,KAAKA,MAAL,GAAcjH,KAAKiH,MAAL,CAAYhG,MAAZ,GAAqB,CAArB,GAAyB,IAAIH,gBAAJ,CAAqBd,KAAKiH,MAA1B,CAAzB,GAA6D,IAAIlH,QAAJ,CAAaC,KAAKiH,MAAlB,CAA3E;AACjB,QAAIjH,KAAKkH,MAAT,EAAiB,KAAKA,MAAL,GAAclH,KAAKkH,MAAL,CAAYjG,MAAZ,GAAqB,CAArB,GAAyB,IAAIH,gBAAJ,CAAqBd,KAAKkH,MAA1B,CAAzB,GAA6D,IAAInH,QAAJ,CAAaC,KAAKkH,MAAlB,CAA3E;AACjB,QAAIlH,KAAKmH,IAAT,EAAe,KAAKA,IAAL,GAAYnH,KAAKmH,IAAL,CAAUlG,MAAV,GAAmB,CAAnB,GAAuB,IAAIH,gBAAJ,CAAqBd,KAAKmH,IAA1B,CAAvB,GAAyD,IAAIpH,QAAJ,CAAaC,KAAKmH,IAAlB,CAArE;AACf,QAAInH,KAAKoH,QAAT,EAAmB,KAAKA,QAAL,GAAgBpH,KAAKoH,QAAL,CAAcnG,MAAd,GAAuB,CAAvB,GAA2B,IAAIH,gBAAJ,CAAqBd,KAAKoH,QAA1B,CAA3B,GAAiE,IAAIrH,QAAJ,CAAaC,KAAKoH,QAAlB,CAAjF;AACnB,QAAIpH,KAAKqH,QAAT,EAAmB,KAAKA,QAAL,GAAgBrH,KAAKqH,QAAL,CAAcpG,MAAd,GAAuB,CAAvB,GAA2B,IAAIH,gBAAJ,CAAqBd,KAAKqH,QAA1B,CAA3B,GAAiE,IAAItH,QAAJ,CAAaC,KAAKqH,QAAlB,CAAjF;AACnB,QAAIrH,KAAKsH,OAAT,EAAkB,KAAKA,OAAL,GAAetH,KAAKsH,OAAL,CAAarG,MAAb,GAAsB,CAAtB,GAA0B,IAAIH,gBAAJ,CAAqBd,KAAKsH,OAA1B,CAA1B,GAA+D,IAAIvH,QAAJ,CAAaC,KAAKsH,OAAlB,CAA9E;AACrB;;AAEDV,UAAUzG,SAAV,CAAoBoH,SAApB,GAAgC,UAAUzE,GAAV,EAAevC,IAAf,EAAqB;;AAEjD,QAAIuG,SAAJ;AAAA,QAAeC,SAAf;AAAA,QACIC,SAAS,KAAKA,MAAL,GAAc,KAAKA,MAAL,CAAY5G,QAAZ,CAAqBG,IAArB,CAAd,GAA2C,CAAC,CAAD,EAAI,CAAJ,CADxD;AAAA,QAEI8G,WAAW,KAAKA,QAAL,GAAgB,KAAKG,OAAL,CAAa,KAAKH,QAAL,CAAcjH,QAAd,CAAuBG,IAAvB,CAAb,CAAhB,GAA6D,CAF5E;AAAA,QAGI4G,OAAO,KAAKA,IAAL,GAAY,KAAKK,OAAL,CAAa,KAAKL,IAAL,CAAU/G,QAAV,CAAmBG,IAAnB,CAAb,CAAZ,GAAqD,CAHhE;AAAA,QAII6G,WAAW,KAAKA,QAAL,GAAgB,KAAKI,OAAL,CAAa,KAAKJ,QAAL,CAAchH,QAAd,CAAuBG,IAAvB,CAAb,CAAhB,GAA6D,CAJ5E;AAAA,QAKI0G,SAAS,KAAKA,MAAL,GAAc,KAAKA,MAAL,CAAY7G,QAAZ,CAAqBG,IAArB,CAAd,GAA2C,CALxD;AAAA,QAMI2G,SAAS,KAAKA,MAAL,GAAc,KAAKA,MAAL,CAAY9G,QAAZ,CAAqBG,IAArB,CAAd,GAA2C,CANxD;AAAA,QAOI+G,UAAU,KAAKA,OAAL,GAAe,KAAKA,OAAL,CAAalH,QAAb,CAAsBG,IAAtB,IAA8BuC,IAAI2E,WAAjD,GAA+D3E,IAAI2E,WAPjF,CAFiD,CAS6C;;AAE9F,QAAI,KAAKZ,QAAT,EAAmB;AACf,YAAIA,WAAW,KAAKA,QAAL,CAAczG,QAAd,CAAuBG,IAAvB,EAA6BuC,GAA7B,CAAf;AACAgE,oBAAYD,SAAS,CAAT,CAAZ;AACAE,oBAAYF,SAAS,CAAT,CAAZ;AACH,KAJD,MAIO;AACHC,oBAAY,KAAKA,SAAL,GAAiB,KAAKA,SAAL,CAAe1G,QAAf,CAAwBG,IAAxB,CAAjB,GAAiD,CAA7D;AACAwG,oBAAY,KAAKA,SAAL,GAAiB,KAAKA,SAAL,CAAe3G,QAAf,CAAwBG,IAAxB,CAAjB,GAAiD,CAA7D;AACH;;AAED;;AAEA;AACAuC,QAAIyE,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0BT,YAAYE,OAAO,CAAP,CAAtC,EAAiDD,YAAYC,OAAO,CAAP,CAA7D;AACA,SAAKU,WAAL,CAAiB5E,GAAjB,EAAsBuE,QAAtB,EAAgCL,OAAO,CAAP,CAAhC,EAA2CA,OAAO,CAAP,CAA3C;AACA,SAAKW,OAAL,CAAa7E,GAAb,EAAkBqE,IAAlB,EAAwBC,QAAxB,EAAkCJ,OAAO,CAAP,CAAlC,EAA6CA,OAAO,CAAP,CAA7C;AACA,SAAKY,QAAL,CAAc9E,GAAd,EAAmBmE,MAAnB,EAA2BC,MAA3B,EAAmCF,OAAO,CAAP,CAAnC,EAA8CA,OAAO,CAAP,CAA9C;AACAlE,QAAI2E,WAAJ,GAAkBH,OAAlB;AACH,CA5BD;;AA8BAV,UAAUzG,SAAV,CAAoBuH,WAApB,GAAkC,UAAU5E,GAAV,EAAe+E,GAAf,EAAoBrB,CAApB,EAAuBC,CAAvB,EAA0B;AACxD,QAAIqB,IAAIC,KAAKC,GAAL,CAASH,GAAT,CAAR;AACA,QAAIvC,IAAIyC,KAAKE,GAAL,CAASJ,GAAT,CAAR;AACA,QAAIK,KAAK1B,IAAIsB,IAAItB,CAAR,GAAYlB,IAAImB,CAAzB;AACA,QAAI0B,KAAK1B,IAAInB,IAAIkB,CAAR,GAAYsB,IAAIrB,CAAzB;AACA3D,QAAIyE,SAAJ,CAAcO,CAAd,EAAiBxC,CAAjB,EAAoB,CAACA,CAArB,EAAwBwC,CAAxB,EAA2BI,EAA3B,EAA+BC,EAA/B;AACH,CAND;;AAQAvB,UAAUzG,SAAV,CAAoByH,QAApB,GAA+B,UAAU9E,GAAV,EAAesF,EAAf,EAAmBC,EAAnB,EAAuB7B,CAAvB,EAA0BC,CAA1B,EAA6B;AACxD3D,QAAIyE,SAAJ,CAAca,EAAd,EAAkB,CAAlB,EAAqB,CAArB,EAAwBC,EAAxB,EAA4B,CAAC7B,CAAD,GAAK4B,EAAL,GAAU5B,CAAtC,EAAyC,CAACC,CAAD,GAAK4B,EAAL,GAAU5B,CAAnD;AACH,CAFD;;AAIAG,UAAUzG,SAAV,CAAoBwH,OAApB,GAA8B,UAAU7E,GAAV,EAAeqE,IAAf,EAAqBmB,IAArB,EAA2B9B,CAA3B,EAA8BC,CAA9B,EAAiC;AAC3D,QAAIlF,IAAIwG,KAAKQ,GAAL,CAAS,CAACpB,IAAV,CAAR;AACA,SAAKO,WAAL,CAAiB5E,GAAjB,EAAsB,CAACwF,IAAvB,EAA6B9B,CAA7B,EAAgCC,CAAhC;AACA3D,QAAIyE,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoBhG,CAApB,EAAuB,CAAvB,EAA0B,CAACkF,CAAD,GAAKlF,CAA/B,EAAkC,CAAlC;AACA,SAAKmG,WAAL,CAAiB5E,GAAjB,EAAsBwF,IAAtB,EAA4B9B,CAA5B,EAA+BC,CAA/B;AACH,CALD;;AAOAG,UAAUzG,SAAV,CAAoBqH,OAApB,GAA8B,UAAUgB,GAAV,EAAe;AACzC,WAAOA,OAAOT,KAAKU,EAAL,GAAU,GAAjB,CAAP;AACH,CAFD;;AAIA7B,UAAUzG,SAAV,CAAoBG,YAApB,GAAmC,UAAUC,IAAV,EAAgB;AAC/C,QAAI,KAAKyG,MAAT,EAAiB,KAAKA,MAAL,CAAY1G,YAAZ,CAAyBC,IAAzB;AACjB,QAAI,KAAK8G,QAAT,EAAmB,KAAKA,QAAL,CAAc/G,YAAd,CAA2BC,IAA3B;AACnB,QAAI,KAAK4G,IAAT,EAAe,KAAKA,IAAL,CAAU7G,YAAV,CAAuBC,IAAvB;AACf,QAAI,KAAK6G,QAAT,EAAmB,KAAKA,QAAL,CAAc9G,YAAd,CAA2BC,IAA3B;AACnB,QAAI,KAAKsG,QAAT,EAAmB,KAAKA,QAAL,CAAcvG,YAAd,CAA2BC,IAA3B;AACnB,QAAI,KAAKuG,SAAT,EAAoB,KAAKA,SAAL,CAAexG,YAAf,CAA4BC,IAA5B;AACpB,QAAI,KAAKwG,SAAT,EAAoB,KAAKA,SAAL,CAAezG,YAAf,CAA4BC,IAA5B;AACpB,QAAI,KAAK0G,MAAT,EAAiB,KAAKA,MAAL,CAAY3G,YAAZ,CAAyBC,IAAzB;AACjB,QAAI,KAAK2G,MAAT,EAAiB,KAAKA,MAAL,CAAY5G,YAAZ,CAAyBC,IAAzB;AACjB,QAAI,KAAK+G,OAAT,EAAkB,KAAKA,OAAL,CAAahH,YAAb,CAA0BC,IAA1B;AACrB,CAXD;;AAaAqG,UAAUzG,SAAV,CAAoBK,KAApB,GAA4B,UAAUC,QAAV,EAAoB;AAC5C,QAAI,KAAKuG,MAAT,EAAiB,KAAKA,MAAL,CAAYxG,KAAZ,CAAkBC,QAAlB;AACjB,QAAI,KAAK4G,QAAT,EAAmB,KAAKA,QAAL,CAAc7G,KAAd,CAAoBC,QAApB;AACnB,QAAI,KAAK0G,IAAT,EAAe,KAAKA,IAAL,CAAU3G,KAAV,CAAgBC,QAAhB;AACf,QAAI,KAAK2G,QAAT,EAAmB,KAAKA,QAAL,CAAc5G,KAAd,CAAoBC,QAApB;AACnB,QAAI,KAAKoG,QAAT,EAAmB,KAAKA,QAAL,CAAcrG,KAAd,CAAoBC,QAApB;AACnB,QAAI,KAAKqG,SAAT,EAAoB,KAAKA,SAAL,CAAetG,KAAf,CAAqBC,QAArB;AACpB,QAAI,KAAKsG,SAAT,EAAoB,KAAKA,SAAL,CAAevG,KAAf,CAAqBC,QAArB;AACpB,QAAI,KAAKwG,MAAT,EAAiB,KAAKA,MAAL,CAAYzG,KAAZ,CAAkBC,QAAlB;AACjB,QAAI,KAAKyG,MAAT,EAAiB,KAAKA,MAAL,CAAY1G,KAAZ,CAAkBC,QAAlB;AACjB,QAAI,KAAK6G,OAAT,EAAkB,KAAKA,OAAL,CAAa9G,KAAb,CAAmBC,QAAnB;AACrB,CAXD;;AAaAC,OAAOC,OAAP,GAAiBiG,SAAjB,C;;;;;;;AC7GA;;AAEA,IAAI8B,SAAS,mBAAA9H,CAAQ,EAAR,CAAb;AAAA,IACI8B,OAAO,mBAAA9B,CAAQ,CAAR,CADX;AAAA,IAEI+H,OAAO,mBAAA/H,CAAQ,EAAR,CAFX;AAAA,IAGIgI,UAAU,mBAAAhI,CAAQ,EAAR,CAHd;AAAA,IAIIiI,WAAW,mBAAAjI,CAAQ,EAAR,CAJf;AAAA,IAKIqF,eAAe,mBAAArF,CAAQ,CAAR,CALnB;AAAA,IAMIkI,OAAO,mBAAAlI,CAAQ,EAAR,CANX;AAAA,IAOImI,eAAe,mBAAAnI,CAAQ,EAAR,CAPnB;AAAA,IAQIgG,YAAY,mBAAAhG,CAAQ,CAAR,CARhB;AAAA,IASIoI,QAAQ,mBAAApI,CAAQ,EAAR,CATZ;AAAA,IAUIqI,OAAO,mBAAArI,CAAQ,EAAR,CAVX;;AAYA,SAASsI,KAAT,CAAelJ,IAAf,EAAqBmJ,SAArB,EAAgCC,QAAhC,EAA0CC,SAA1C,EAAqDC,SAArD,EAAgE;;AAE5D,SAAKC,KAAL,GAAavJ,KAAKuJ,KAAlB;AACA,SAAKC,EAAL,GAAUxJ,KAAKwJ,EAAL,GAAUxJ,KAAKwJ,EAAf,GAAoBJ,QAA9B;AACA,SAAKK,GAAL,GAAWzJ,KAAKyJ,GAAL,GAAWzJ,KAAKyJ,GAAhB,GAAsBJ,SAAjC;;AAEA,QAAIrJ,KAAK0J,MAAT,EAAiB,KAAKA,MAAL,GAAc1J,KAAK0J,MAAnB;AACjB,QAAI1J,KAAK2J,IAAT,EAAe,KAAKA,IAAL,GAAY,IAAIb,IAAJ,CAAS9I,KAAK2J,IAAd,CAAZ;AACf,QAAI3J,KAAK4J,YAAT,EAAuB,KAAKD,IAAL,GAAY,IAAIZ,YAAJ,CAAiB/I,KAAK4J,YAAtB,EAAoCN,SAApC,CAAZ;AACvB,QAAItJ,KAAK6J,MAAT,EAAiB,KAAKA,MAAL,GAAc,IAAInB,MAAJ,CAAW1I,KAAK6J,MAAhB,CAAd;AACjB,QAAI7J,KAAK+C,IAAT,EAAe,KAAKA,IAAL,GAAY,IAAIkG,IAAJ,CAASjJ,KAAK+C,IAAd,CAAZ;AACf,QAAI/C,KAAK8J,KAAT,EAAgB,KAAKA,KAAL,GAAa,IAAId,KAAJ,CAAUhJ,KAAK8J,KAAf,CAAb;;AAEhB,SAAKvC,SAAL,GAAiB,IAAIX,SAAJ,CAAc5G,KAAKuH,SAAnB,CAAjB;AACA,SAAK4B,SAAL,GAAiBA,SAAjB;;AAEA,QAAInJ,KAAK+J,MAAT,EAAiB;AACb,aAAKA,MAAL,GAAc,EAAd;AACA,aAAK,IAAItI,IAAI,CAAb,EAAgBA,IAAIzB,KAAK+J,MAAL,CAAY9I,MAAhC,EAAwCQ,GAAxC,EAA6C;AACzC,iBAAKsI,MAAL,CAAYrD,IAAZ,CAAiB,IAAIwC,KAAJ,CAAUlJ,KAAK+J,MAAL,CAAYtI,CAAZ,CAAV,EAA0B,KAAK0H,SAA/B,EAA0C,KAAKK,EAA/C,EAAmD,KAAKC,GAAxD,EAA6DH,SAA7D,CAAjB;AACH;AACJ;;AAED,QAAItJ,KAAKgK,MAAT,EAAiB;AACb,aAAKA,MAAL,GAAc,EAAd;AACA,aAAK,IAAI3G,IAAI,CAAb,EAAgBA,IAAIrD,KAAKgK,MAAL,CAAY/I,MAAhC,EAAwCoC,GAAxC,EAA6C;AACzC,gBAAI4G,QAAQjK,KAAKgK,MAAL,CAAY3G,CAAZ,CAAZ;AACA,gBAAI4G,MAAMC,IAAN,KAAe,MAAnB,EAA2B;AACvB,oBAAID,MAAME,UAAV,EAAsB,KAAKH,MAAL,CAAYtD,IAAZ,CAAiB,IAAIT,YAAJ,CAAiBgE,KAAjB,CAAjB,EAAtB,KACK,KAAKD,MAAL,CAAYtD,IAAZ,CAAiB,IAAIhE,IAAJ,CAASuH,KAAT,CAAjB;AACR,aAHD,MAGO,IAAIA,MAAMC,IAAN,KAAe,MAAnB,EAA2B;AAC9B,qBAAKF,MAAL,CAAYtD,IAAZ,CAAiB,IAAIiC,IAAJ,CAASsB,KAAT,CAAjB;AACH,aAFM,MAEA,IAAIA,MAAMC,IAAN,KAAe,SAAnB,EAA8B;AACjC,qBAAKF,MAAL,CAAYtD,IAAZ,CAAiB,IAAIkC,OAAJ,CAAYqB,KAAZ,CAAjB;AACH,aAFM,MAEA,IAAIA,MAAMC,IAAN,KAAe,UAAnB,EAA+B;AAClC,qBAAKF,MAAL,CAAYtD,IAAZ,CAAiB,IAAImC,QAAJ,CAAaoB,KAAb,CAAjB;AACH;AACJ;AACJ;;AAED,QAAIjK,KAAKoK,KAAT,EAAgB;AACZ,aAAKA,KAAL,GAAa,EAAb;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIrK,KAAKoK,KAAL,CAAWnJ,MAA/B,EAAuCoJ,GAAvC,EAA4C;AACxC,gBAAIC,OAAOtK,KAAKoK,KAAL,CAAWC,CAAX,CAAX;AACA,gBAAIC,KAAKH,UAAT,EAAqB,KAAKC,KAAL,CAAW1D,IAAX,CAAgB,IAAIT,YAAJ,CAAiBqE,IAAjB,CAAhB,EAArB,KACK,KAAKF,KAAL,CAAW1D,IAAX,CAAgB,IAAIhE,IAAJ,CAAS4H,IAAT,CAAhB;AACR;AACJ;AACJ;;AAEDpB,MAAM/I,SAAN,CAAgB0C,IAAhB,GAAuB,UAAUC,GAAV,EAAevC,IAAf,EAAqBgK,UAArB,EAAiCC,YAAjC,EAA+CC,UAA/C,EAA2DC,QAA3D,EAAqE;;AAExF,QAAI,KAAKnD,SAAL,CAAeD,OAAf,IAA0B,KAAKC,SAAL,CAAeD,OAAf,CAAuBlH,QAAvB,CAAgCG,IAAhC,MAA0C,CAAxE,EAA2E;;AAE3E,QAAIkB,CAAJ;;AAEAqB,QAAI6H,IAAJ;AACA,SAAKxB,SAAL,CAAewB,IAAf;;AAEA;AACA,QAAIhB,OAAO,KAAKA,IAAL,IAAaY,UAAxB;AACA,QAAIV,SAAS,KAAKA,MAAL,IAAeW,YAA5B;AACA,QAAII,aAAa,KAAK7H,IAAL,GAAY,KAAKA,IAAL,CAAU8H,OAAV,CAAkBtK,IAAlB,CAAZ,GAAsCkK,UAAvD;;AAEA,QAAId,IAAJ,EAAUA,KAAKmB,QAAL,CAAchI,GAAd,EAAmBvC,IAAnB;AACV,QAAIsJ,MAAJ,EAAYA,OAAOkB,SAAP,CAAiBjI,GAAjB,EAAsBvC,IAAtB;;AAEZ,QAAI,CAACmK,QAAL,EAAe;AACX,YAAI,KAAKhB,MAAT,EAAiB,KAAKA,MAAL,CAAYsB,kBAAZ,CAA+BlI,GAA/B,EAAoCvC,IAApC;AACjB,aAAKgH,SAAL,CAAeA,SAAf,CAAyBzE,GAAzB,EAA8BvC,IAA9B;AACH;AACD,SAAKgH,SAAL,CAAeA,SAAf,CAAyB,KAAK4B,SAA9B,EAAyC5I,IAAzC;;AAEA,QAAI,KAAKuJ,KAAT,EAAgB;AACZ,aAAKX,SAAL,CAAewB,IAAf;AACA,aAAKxB,SAAL,CAAe8B,YAAf,CAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC,EAAqC,CAArC,EAAwC,CAAxC,EAA2C,CAA3C;AACA,aAAK9B,SAAL,CAAe+B,SAAf,CAAyB,CAAzB,EAA4B,CAA5B,EAA+B,KAAK/B,SAAL,CAAegC,MAAf,CAAsBC,KAArD,EAA4D,KAAKjC,SAAL,CAAegC,MAAf,CAAsBE,MAAlF;AACA,aAAKlC,SAAL,CAAemC,OAAf;;AAEA,YAAI3B,IAAJ,EAAUA,KAAKmB,QAAL,CAAc,KAAK3B,SAAnB,EAA8B5I,IAA9B;AACV,YAAIsJ,MAAJ,EAAYA,OAAOkB,SAAP,CAAiB,KAAK5B,SAAtB,EAAiC5I,IAAjC;AACf;;AAED,QAAI,KAAK6J,KAAT,EAAgB;AACZtH,YAAIyI,SAAJ;AACA,aAAK9J,IAAI,CAAT,EAAYA,IAAI,KAAK2I,KAAL,CAAWnJ,MAA3B,EAAmCQ,GAAnC,EAAwC;AACpC,iBAAK2I,KAAL,CAAW3I,CAAX,EAAcoB,IAAd,CAAmBC,GAAnB,EAAwBvC,IAAxB;AACH;AACDuC,YAAI0I,IAAJ;AACH;;AAED1I,QAAIyI,SAAJ;AACA,QAAI,KAAKvB,MAAT,EAAiB,KAAKyB,UAAL,CAAgB3I,GAAhB,EAAqBvC,IAArB,EAA2BoJ,IAA3B,EAAiCE,MAAjC,EAAyCe,UAAzC;;AAEjB;AACA,QAAIjB,IAAJ,EAAU7G,IAAI6G,IAAJ;AACV,QAAI,CAACe,QAAD,IAAab,MAAjB,EAAyB/G,IAAI+G,MAAJ;;AAEzB,QAAI,KAAKE,MAAT,EAAiB,KAAK2B,UAAL,CAAgB5I,GAAhB,EAAqBvC,IAArB,EAA2BoJ,IAA3B,EAAiCE,MAAjC,EAAyCe,UAAzC;;AAEjB9H,QAAIwI,OAAJ;AACA,SAAKnC,SAAL,CAAemC,OAAf;AACH,CApDD;;AAsDApC,MAAM/I,SAAN,CAAgBsL,UAAhB,GAA6B,UAAU3I,GAAV,EAAevC,IAAf,EAAqBoJ,IAArB,EAA2BE,MAA3B,EAAmCe,UAAnC,EAA+C;AACxE,QAAInJ,CAAJ;AACA,QAAI,KAAKqI,KAAT,EAAgB;AACZ,aAAKrI,IAAI,CAAT,EAAYA,IAAI,KAAKuI,MAAL,CAAY/I,MAA5B,EAAoCQ,GAApC,EAAyC;AACrC,iBAAKuI,MAAL,CAAYvI,CAAZ,EAAeoB,IAAf,CAAoB,KAAKsG,SAAzB,EAAoC5I,IAApC,EAA0CqK,UAA1C;AACA,iBAAKzB,SAAL,CAAewC,SAAf;AACA,gBAAIhC,IAAJ,EAAU,KAAKR,SAAL,CAAeQ,IAAf;AACV,gBAAIE,MAAJ,EAAY,KAAKV,SAAL,CAAeU,MAAf;AACZ,iBAAKV,SAAL,CAAeoC,SAAf;AACA,iBAAKzB,KAAL,CAAW8B,qBAAX,CAAiC,KAAKzC,SAAtC;AACH;;AAEDrG,YAAIwI,OAAJ;AACAxI,YAAI6H,IAAJ;AACA7H,YAAImI,YAAJ,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC;AACAnI,YAAI+I,SAAJ,CAAc,KAAK1C,SAAL,CAAegC,MAA7B,EAAqC,CAArC,EAAwC,CAAxC;AACArI,YAAIwI,OAAJ;AAEH,KAhBD,MAgBO;AACH,aAAK7J,IAAI,CAAT,EAAYA,IAAI,KAAKuI,MAAL,CAAY/I,MAA5B,EAAoCQ,GAApC,EAAyC;AACrC,iBAAKuI,MAAL,CAAYvI,CAAZ,EAAeoB,IAAf,CAAoBC,GAApB,EAAyBvC,IAAzB,EAA+BqK,UAA/B;AACH;AACD,YAAI,KAAKZ,MAAL,CAAY,KAAKA,MAAL,CAAY/I,MAAZ,GAAqB,CAAjC,EAAoC0B,MAAxC,EAAgD;AAC5CG,gBAAI6I,SAAJ;AACH;AACJ;AACJ,CA1BD;;AA6BAzC,MAAM/I,SAAN,CAAgBuL,UAAhB,GAA6B,UAAU5I,GAAV,EAAevC,IAAf,EAAqBoJ,IAArB,EAA2BE,MAA3B,EAAmCe,UAAnC,EAA+C;AACxEkB,YAAQC,GAAR,CAAYxL,IAAZ;AACA,QAAIkB,CAAJ;AACA,QAAI,KAAKqI,KAAT,EAAgB;AACZ,aAAKrI,IAAI,CAAT,EAAYA,IAAI,KAAKsI,MAAL,CAAY9I,MAA5B,EAAoCQ,GAApC,EAAyC;AACrC,gBAAIlB,QAAQ,KAAKwJ,MAAL,CAAYtI,CAAZ,EAAe+H,EAAvB,IAA6BjJ,QAAQ,KAAKwJ,MAAL,CAAYtI,CAAZ,EAAegI,GAAxD,EAA6D;AACzD,qBAAKM,MAAL,CAAYtI,CAAZ,EAAeoB,IAAf,CAAoB,KAAKsG,SAAzB,EAAoC5I,IAApC,EAA0CoJ,IAA1C,EAAgDE,MAAhD,EAAwDe,UAAxD,EAAoE,IAApE;AACA,qBAAKd,KAAL,CAAW8B,qBAAX,CAAiC,KAAKzC,SAAtC;AACH,aAHD,MAGO,IAAI5I,OAAO,KAAKwJ,MAAL,CAAYtI,CAAZ,EAAegI,GAA1B,EAA+B;AAClCqC,wBAAQC,GAAR,CAAY,UAAZ;AACA,qBAAKhC,MAAL,CAAYtI,CAAZ,EAAeoB,IAAf,CAAoB,KAAKsG,SAAzB,EAAoC,KAAKY,MAAL,CAAYtI,CAAZ,EAAegI,GAAnD,EAAwDE,IAAxD,EAA8DE,MAA9D,EAAsEe,UAAtE,EAAkF,IAAlF;AACH;AACJ;AACD9H,YAAI6H,IAAJ;AACA7H,YAAImI,YAAJ,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC;AACAnI,YAAI+I,SAAJ,CAAc,KAAK1C,SAAL,CAAegC,MAA7B,EAAqC,CAArC,EAAwC,CAAxC;AACArI,YAAIwI,OAAJ;AACA,aAAKnC,SAAL,CAAemC,OAAf;AACH,KAfD,MAgBK;AACD,aAAK7J,IAAI,CAAT,EAAYA,IAAI,KAAKsI,MAAL,CAAY9I,MAA5B,EAAoCQ,GAApC,EAAyC;AACrC,gBAAIlB,QAAQ,KAAKwJ,MAAL,CAAYtI,CAAZ,EAAe+H,EAAvB,IAA6BjJ,QAAQ,KAAKwJ,MAAL,CAAYtI,CAAZ,EAAegI,GAAxD,EAA6D;AACzD,qBAAKM,MAAL,CAAYtI,CAAZ,EAAeoB,IAAf,CAAoBC,GAApB,EAAyBvC,IAAzB,EAA+BoJ,IAA/B,EAAqCE,MAArC,EAA6Ce,UAA7C,EAAyD,KAAzD;AACH,aAFD,MAEO,IAAIrK,OAAO,KAAKwJ,MAAL,CAAYtI,CAAZ,EAAegI,GAA1B,EAA+B;AAClC,qBAAKM,MAAL,CAAYtI,CAAZ,EAAeoB,IAAf,CAAoB,KAAKsG,SAAzB,EAAoC,KAAKY,MAAL,CAAYtI,CAAZ,EAAegI,GAAnD,EAAwDE,IAAxD,EAA8DE,MAA9D,EAAsEe,UAAtE,EAAkF,IAAlF;AACH;AACJ;AACJ;AACJ,CA5BD;;AA8BA1B,MAAM/I,SAAN,CAAgB6K,kBAAhB,GAAqC,UAAUlI,GAAV,EAAevC,IAAf,EAAqB;AACtD,QAAI,KAAKmJ,MAAT,EAAiB,KAAKA,MAAL,CAAYsB,kBAAZ,CAA+BlI,GAA/B,EAAoCvC,IAApC;AACjB,SAAKgH,SAAL,CAAeA,SAAf,CAAyBzE,GAAzB,EAA8BvC,IAA9B;AACH,CAHD;;AAKA2I,MAAM/I,SAAN,CAAgBG,YAAhB,GAA+B,UAAUC,IAAV,EAAgB;AAC3C,SAAKgH,SAAL,CAAejH,YAAf,CAA4BC,IAA5B;;AAEA,QAAI,KAAKyJ,MAAT,EAAiB;AACb,aAAK,IAAIvI,IAAI,CAAb,EAAgBA,IAAI,KAAKuI,MAAL,CAAY/I,MAAhC,EAAwCQ,GAAxC,EAA6C;AACzC,iBAAKuI,MAAL,CAAYvI,CAAZ,EAAenB,YAAf,CAA4BC,IAA5B;AACH;AACJ;AACD,QAAI,KAAK6J,KAAT,EAAgB;AACZ,aAAK,IAAI/G,IAAI,CAAb,EAAgBA,IAAI,KAAK+G,KAAL,CAAWnJ,MAA/B,EAAuCoC,GAAvC,EAA4C;AACxC,iBAAK+G,KAAL,CAAW/G,CAAX,EAAc/C,YAAd,CAA2BC,IAA3B;AACH;AACJ;AACD,QAAI,KAAKwJ,MAAT,EAAiB;AACb,aAAK,IAAIM,IAAI,CAAb,EAAgBA,IAAI,KAAKN,MAAL,CAAY9I,MAAhC,EAAwCoJ,GAAxC,EAA6C;AACzC,iBAAKN,MAAL,CAAYM,CAAZ,EAAe/J,YAAf,CAA4BC,IAA5B;AACH;AACJ;;AAED,QAAI,KAAKoJ,IAAT,EAAe,KAAKA,IAAL,CAAUrJ,YAAV,CAAuBC,IAAvB;AACf,QAAI,KAAKsJ,MAAT,EAAiB,KAAKA,MAAL,CAAYvJ,YAAZ,CAAyBC,IAAzB;AACjB,QAAI,KAAKwC,IAAT,EAAe,KAAKA,IAAL,CAAUzC,YAAV,CAAuBC,IAAvB;AAClB,CAtBD;;AAwBA2I,MAAM/I,SAAN,CAAgBK,KAAhB,GAAwB,UAAUC,QAAV,EAAoB;AACxC,SAAK8G,SAAL,CAAe/G,KAAf,CAAqBC,QAArB;;AAEA,QAAI,KAAKuJ,MAAT,EAAiB;AACb,aAAK,IAAIvI,IAAI,CAAb,EAAgBA,IAAI,KAAKuI,MAAL,CAAY/I,MAAhC,EAAwCQ,GAAxC,EAA6C;AACzC,iBAAKuI,MAAL,CAAYvI,CAAZ,EAAejB,KAAf,CAAqBC,QAArB;AACH;AACJ;AACD,QAAI,KAAK2J,KAAT,EAAgB;AACZ,aAAK,IAAI/G,IAAI,CAAb,EAAgBA,IAAI,KAAK+G,KAAL,CAAWnJ,MAA/B,EAAuCoC,GAAvC,EAA4C;AACxC,iBAAK+G,KAAL,CAAW/G,CAAX,EAAc7C,KAAd,CAAoBC,QAApB;AACH;AACJ;AACD,QAAI,KAAKsJ,MAAT,EAAiB;AACb,aAAK,IAAIM,IAAI,CAAb,EAAgBA,IAAI,KAAKN,MAAL,CAAY9I,MAAhC,EAAwCoJ,GAAxC,EAA6C;AACzC,iBAAKN,MAAL,CAAYM,CAAZ,EAAe7J,KAAf,CAAqBC,QAArB;AACH;AACJ;AACD,QAAI,KAAKkJ,IAAT,EAAe,KAAKA,IAAL,CAAUnJ,KAAV,CAAgBC,QAAhB;AACf,QAAI,KAAKoJ,MAAT,EAAiB,KAAKA,MAAL,CAAYrJ,KAAZ,CAAkBC,QAAlB;AACjB,QAAI,KAAKsC,IAAT,EAAe,KAAKA,IAAL,CAAUvC,KAAV,CAAgBC,QAAhB;AAClB,CArBD;;AAuBAC,OAAOC,OAAP,GAAiBuI,KAAjB,C;;;;;;ACrOA;;;;;;;;AAQC,WAAU8C,UAAV,EAAsB;AACnB,QAAI,IAAJ,EAAiC;AAC7BtL,eAAOC,OAAP,GAAiBqL,YAAjB;AACH,KAFD,MAGK,IAAI,OAAOC,OAAOC,MAAd,KAAyB,UAAzB,IAAuCD,OAAOC,MAAP,CAAcC,GAAzD,EAA8D;AAC/DF,eAAOC,MAAP,CAAc,EAAd,EAAkBF,UAAlB;AACH,KAFI,MAEE;AACHC,eAAOpL,YAAP,GAAsBmL,YAAtB;AACH;AACJ,CATA,EASC,YAAY;;AAEV;AACA,QAAII,oBAAoB,CAAxB;AACA,QAAIC,mBAAmB,KAAvB;AACA,QAAIC,wBAAwB,SAA5B;AACA,QAAIC,6BAA6B,EAAjC;;AAEA,QAAIC,mBAAmB,EAAvB;AACA,QAAIC,kBAAkB,OAAOD,mBAAmB,GAA1B,CAAtB;;AAEA,QAAIE,wBAAwB,OAAOC,YAAP,KAAwB,UAApD;;AAEA,aAAS9L,YAAT,CAAuB+L,GAAvB,EAA4BC,GAA5B,EAAiCC,GAAjC,EAAsCC,GAAtC,EAA2C;;AAEvC;AACA,YAAIC,UAAU/L,MAAV,KAAqB,CAAzB,EAA4B;AACxB,kBAAM,IAAIgM,KAAJ,CAAU,oCAAV,CAAN;AACH;AACD,aAAK,IAAIxL,IAAE,CAAX,EAAcA,IAAE,CAAhB,EAAmB,EAAEA,CAArB,EAAwB;AACpB,gBAAI,OAAOuL,UAAUvL,CAAV,CAAP,KAAwB,QAAxB,IAAoCyL,MAAMF,UAAUvL,CAAV,CAAN,CAApC,IAA2D,CAAC0L,SAASH,UAAUvL,CAAV,CAAT,CAAhE,EAAwF;AACpF,sBAAM,IAAIwL,KAAJ,CAAU,4CAAV,CAAN;AACH;AACJ;AACD,YAAIL,MAAM,CAAN,IAAWA,MAAM,CAAjB,IAAsBE,MAAM,CAA5B,IAAiCA,MAAM,CAA3C,EAA8C;AAC1C,kBAAM,IAAIG,KAAJ,CAAU,gDAAV,CAAN;AACH;;AAED,YAAIG,gBAAgBV,wBAAwB,IAAIC,YAAJ,CAAiBH,gBAAjB,CAAxB,GAA6D,IAAIvM,KAAJ,CAAUuM,gBAAV,CAAjF;;AAEA,iBAASa,CAAT,CAAYC,GAAZ,EAAiBC,GAAjB,EAAsB;AAAE,mBAAO,MAAM,MAAMA,GAAZ,GAAkB,MAAMD,GAA/B;AAAqC;AAC7D,iBAASE,CAAT,CAAYF,GAAZ,EAAiBC,GAAjB,EAAsB;AAAE,mBAAO,MAAMA,GAAN,GAAY,MAAMD,GAAzB;AAA+B;AACvD,iBAASG,CAAT,CAAYH,GAAZ,EAAsB;AAAE,mBAAO,MAAMA,GAAb;AAAmB;;AAE3C;AACA,iBAASI,UAAT,CAAqBC,EAArB,EAAyBL,GAAzB,EAA8BC,GAA9B,EAAmC;AAC/B,mBAAO,CAAC,CAACF,EAAEC,GAAF,EAAOC,GAAP,IAAYI,EAAZ,GAAiBH,EAAEF,GAAF,EAAOC,GAAP,CAAlB,IAA+BI,EAA/B,GAAoCF,EAAEH,GAAF,CAArC,IAA6CK,EAApD;AACH;;AAED;AACA,iBAASC,QAAT,CAAmBD,EAAnB,EAAuBL,GAAvB,EAA4BC,GAA5B,EAAiC;AAC7B,mBAAO,MAAMF,EAAEC,GAAF,EAAOC,GAAP,CAAN,GAAkBI,EAAlB,GAAqBA,EAArB,GAA0B,MAAMH,EAAEF,GAAF,EAAOC,GAAP,CAAN,GAAoBI,EAA9C,GAAmDF,EAAEH,GAAF,CAA1D;AACH;;AAED,iBAASO,oBAAT,CAA+BC,EAA/B,EAAmCC,OAAnC,EAA4C;AACxC,iBAAK,IAAItM,IAAI,CAAb,EAAgBA,IAAI2K,iBAApB,EAAuC,EAAE3K,CAAzC,EAA4C;AACxC,oBAAIuM,eAAeJ,SAASG,OAAT,EAAkBnB,GAAlB,EAAuBE,GAAvB,CAAnB;AACA,oBAAIkB,iBAAiB,GAArB,EAA0B,OAAOD,OAAP;AAC1B,oBAAIE,WAAWP,WAAWK,OAAX,EAAoBnB,GAApB,EAAyBE,GAAzB,IAAgCgB,EAA/C;AACAC,2BAAWE,WAAWD,YAAtB;AACH;AACD,mBAAOD,OAAP;AACH;;AAED,iBAASG,gBAAT,GAA6B;AACzB,iBAAK,IAAIzM,IAAI,CAAb,EAAgBA,IAAI+K,gBAApB,EAAsC,EAAE/K,CAAxC,EAA2C;AACvC2L,8BAAc3L,CAAd,IAAmBiM,WAAWjM,IAAIgL,eAAf,EAAgCG,GAAhC,EAAqCE,GAArC,CAAnB;AACH;AACJ;;AAED,iBAASqB,eAAT,CAA0BL,EAA1B,EAA8BM,EAA9B,EAAkCC,EAAlC,EAAsC;AAClC,gBAAIJ,QAAJ;AAAA,gBAAcK,QAAd;AAAA,gBAAwB7M,IAAI,CAA5B;AACA,eAAG;AACC6M,2BAAWF,KAAK,CAACC,KAAKD,EAAN,IAAY,GAA5B;AACAH,2BAAWP,WAAWY,QAAX,EAAqB1B,GAArB,EAA0BE,GAA1B,IAAiCgB,EAA5C;AACA,oBAAIG,WAAW,GAAf,EAAoB;AAChBI,yBAAKC,QAAL;AACH,iBAFD,MAEO;AACHF,yBAAKE,QAAL;AACH;AACJ,aARD,QAQSvG,KAAKwG,GAAL,CAASN,QAAT,IAAqB3B,qBAArB,IAA8C,EAAE7K,CAAF,GAAM8K,0BAR7D;AASA,mBAAO+B,QAAP;AACH;;AAED,iBAASE,QAAT,CAAmBV,EAAnB,EAAuB;AACnB,gBAAIW,gBAAgB,GAApB;AACA,gBAAIC,gBAAgB,CAApB;AACA,gBAAIC,aAAanC,mBAAmB,CAApC;;AAEA,mBAAOkC,iBAAiBC,UAAjB,IAA+BvB,cAAcsB,aAAd,KAAgCZ,EAAtE,EAA0E,EAAEY,aAA5E,EAA2F;AACvFD,iCAAiBhC,eAAjB;AACH;AACD,cAAEiC,aAAF;;AAEA;AACA,gBAAIE,OAAO,CAACd,KAAKV,cAAcsB,aAAd,CAAN,KAAuCtB,cAAcsB,gBAAc,CAA5B,IAAiCtB,cAAcsB,aAAd,CAAxE,CAAX;AACA,gBAAIG,YAAYJ,gBAAgBG,OAAOnC,eAAvC;;AAEA,gBAAIqC,eAAelB,SAASiB,SAAT,EAAoBjC,GAApB,EAAyBE,GAAzB,CAAnB;AACA,gBAAIgC,gBAAgBzC,gBAApB,EAAsC;AAClC,uBAAOwB,qBAAqBC,EAArB,EAAyBe,SAAzB,CAAP;AACH,aAFD,MAEO,IAAIC,gBAAgB,GAApB,EAAyB;AAC5B,uBAAOD,SAAP;AACH,aAFM,MAEA;AACH,uBAAOV,gBAAgBL,EAAhB,EAAoBW,aAApB,EAAmCA,gBAAgBhC,eAAnD,CAAP;AACH;AACJ;;AAED,YAAIG,OAAOC,GAAP,IAAcC,OAAOC,GAAzB,EACImB;;AAEJ,YAAIa,IAAI,UAAUjB,EAAV,EAAc;AAClB,gBAAIlB,QAAQC,GAAR,IAAeC,QAAQC,GAA3B,EAAgC,OAAOe,EAAP,CADd,CACyB;AAC3C;AACA,gBAAIA,OAAO,CAAX,EAAc,OAAO,CAAP;AACd,gBAAIA,OAAO,CAAX,EAAc,OAAO,CAAP;AACd,mBAAOJ,WAAWc,SAASV,EAAT,CAAX,EAAyBjB,GAAzB,EAA8BE,GAA9B,CAAP;AACH,SAND;AAOA,YAAIiC,MAAM,kBAAgB,CAACpC,GAAD,EAAMC,GAAN,EAAWC,GAAX,EAAgBC,GAAhB,CAAhB,GAAqC,GAA/C;AACAgC,UAAEE,QAAF,GAAa,YAAY;AAAE,mBAAOD,GAAP;AAAa,SAAxC;;AAEA,eAAOD,CAAP;AACH;;AAED;AACAlO,iBAAaqO,GAAb,GAAmB;AACf,gBAAerO,aAAa,IAAb,EAAmB,GAAnB,EAAwB,IAAxB,EAA8B,GAA9B,CADA;AAEf,kBAAeA,aAAa,IAAb,EAAmB,GAAnB,EAAwB,IAAxB,EAA8B,GAA9B,CAFA;AAGf,mBAAeA,aAAa,IAAb,EAAmB,GAAnB,EAAwB,IAAxB,EAA8B,GAA9B,CAHA;AAIf,oBAAeA,aAAa,IAAb,EAAmB,GAAnB,EAAwB,IAAxB,EAA8B,GAA9B,CAJA;AAKf,uBAAeA,aAAa,IAAb,EAAmB,GAAnB,EAAwB,IAAxB,EAA8B,GAA9B;AALA,KAAnB;;AAQA,WAAOA,YAAP;AACH,CArIA,CAAD,C;;;;;;;ACRA;;AAEA,SAAS4B,MAAT,CAAgB0M,IAAhB,EAAsB;AAClB,SAAKA,IAAL,GAAYA,IAAZ;AACH;;AAED1M,OAAOtC,SAAP,CAAiBqE,SAAjB,GAA6B,UAAUZ,GAAV,EAAe;AACxC,SAAKwL,KAAL,GAAarH,KAAKsH,GAAL,CAAStH,KAAKuH,KAAL,CAAW1L,MAAM,EAAjB,CAAT,EAA+B,CAA/B,CAAb;AACA,SAAK2L,UAAL,GAAkB,IAAItP,KAAJ,CAAU,KAAKmP,KAAL,GAAa,CAAvB,CAAlB;AACA,SAAKG,UAAL,CAAgB,CAAhB,IAAqB,CAArB;;AAEA,QAAIC,KAAK,KAAKC,MAAL,CAAY,CAAZ,EAAe,KAAKN,IAAL,CAAU,CAAV,CAAf,EAA6B,KAAKA,IAAL,CAAU,CAAV,CAA7B,EAA2C,KAAKA,IAAL,CAAU,CAAV,CAA3C,EAAyD,KAAKA,IAAL,CAAU,CAAV,CAAzD,CAAT;AAAA,QACIO,KAAK,KAAKD,MAAL,CAAY,CAAZ,EAAe,KAAKN,IAAL,CAAU,CAAV,CAAf,EAA6B,KAAKA,IAAL,CAAU,CAAV,CAA7B,EAA2C,KAAKA,IAAL,CAAU,CAAV,CAA3C,EAAyD,KAAKA,IAAL,CAAU,CAAV,CAAzD,CADT;AAAA,QAEIQ,OAAO,CAFX;AAAA,QAGIC,WAAW,IAAI,KAAKR,KAHxB;;AAKA,SAAK,IAAI3N,IAAI,CAAb,EAAgBA,KAAK,KAAK2N,KAA1B,EAAiC3N,KAAK,CAAtC,EAAyC;AACrC,YAAI+E,IAAI,KAAKiJ,MAAL,CAAYhO,IAAImO,QAAhB,EAA0B,KAAKT,IAAL,CAAU,CAAV,CAA1B,EAAwC,KAAKA,IAAL,CAAU,CAAV,CAAxC,EAAsD,KAAKA,IAAL,CAAU,CAAV,CAAtD,EAAoE,KAAKA,IAAL,CAAU,CAAV,CAApE,CAAR;AAAA,YACI1I,IAAI,KAAKgJ,MAAL,CAAYhO,IAAImO,QAAhB,EAA0B,KAAKT,IAAL,CAAU,CAAV,CAA1B,EAAwC,KAAKA,IAAL,CAAU,CAAV,CAAxC,EAAsD,KAAKA,IAAL,CAAU,CAAV,CAAtD,EAAoE,KAAKA,IAAL,CAAU,CAAV,CAApE,CADR;;AAGA,YAAIjH,KAAKsH,KAAKhJ,CAAd;AAAA,YACI2B,KAAKuH,KAAKjJ,CADd;;AAGAkJ,gBAAQ5H,KAAK8H,IAAL,CAAU3H,KAAKA,EAAL,GAAUC,KAAKA,EAAzB,CAAR;AACA,aAAKoH,UAAL,CAAgB9N,CAAhB,IAAqBkO,IAArB;;AAEAH,aAAKhJ,CAAL;AACAkJ,aAAKjJ,CAAL;AACH;;AAED,SAAKxF,MAAL,GAAc0O,IAAd;AACH,CAzBD;;AA2BAlN,OAAOtC,SAAP,CAAiBsE,GAAjB,GAAuB,UAAUqL,CAAV,EAAa;AAChC,QAAIC,eAAeD,IAAI,KAAKP,UAAL,CAAgB,KAAKH,KAArB,CAAvB;AACA,QAAIY,MAAM,CAAV;AAAA,QACIC,OAAO,KAAKb,KADhB;AAAA,QAEI7F,QAAQ,CAFZ;;AAIA,WAAOyG,MAAMC,IAAb,EAAmB;AACf1G,gBAAQyG,OAAQ,CAACC,OAAOD,GAAR,IAAe,CAAhB,GAAqB,CAA5B,CAAR;AACA,YAAI,KAAKT,UAAL,CAAgBhG,KAAhB,IAAyBwG,YAA7B,EAA2C;AACvCC,kBAAMzG,QAAQ,CAAd;AAEH,SAHD,MAGO;AACH0G,mBAAO1G,KAAP;AACH;AACJ;AACD,QAAI,KAAKgG,UAAL,CAAgBhG,KAAhB,IAAyBwG,YAA7B,EAA2C;AACvCxG;AACH;;AAED,QAAI2G,eAAe,KAAKX,UAAL,CAAgBhG,KAAhB,CAAnB;AACA,QAAI2G,iBAAiBH,YAArB,EAAmC;AAC/B,eAAOxG,QAAQ,KAAK6F,KAApB;AACH,KAFD,MAEO;AACH,eAAO,CAAC7F,QAAQ,CAACwG,eAAeG,YAAhB,KAAiC,KAAKX,UAAL,CAAgBhG,QAAQ,CAAxB,IAA6B2G,YAA9D,CAAT,IAAwF,KAAKd,KAApG;AACH;AACJ,CAzBD;;AA2BA3M,OAAOtC,SAAP,CAAiBgQ,SAAjB,GAA6B,UAAU3N,OAAV,EAAmB;AAC5C,QAAIjB,IAAI,KAAKkD,GAAL,CAASjC,OAAT,CAAR;AAAA,QACIgE,IAAI,KAAKiJ,MAAL,CAAYlO,CAAZ,EAAe,KAAK4N,IAAL,CAAU,CAAV,CAAf,EAA6B,KAAKA,IAAL,CAAU,CAAV,CAA7B,EAA2C,KAAKA,IAAL,CAAU,CAAV,CAA3C,EAAyD,KAAKA,IAAL,CAAU,CAAV,CAAzD,CADR;AAAA,QAEI1I,IAAI,KAAKgJ,MAAL,CAAYlO,CAAZ,EAAe,KAAK4N,IAAL,CAAU,CAAV,CAAf,EAA6B,KAAKA,IAAL,CAAU,CAAV,CAA7B,EAA2C,KAAKA,IAAL,CAAU,CAAV,CAA3C,EAAyD,KAAKA,IAAL,CAAU,CAAV,CAAzD,CAFR;;AAIA,WAAO,CAAC3I,CAAD,EAAIC,CAAJ,CAAP;AACH,CAND;;AAQAhE,OAAOtC,SAAP,CAAiBsP,MAAjB,GAA0B,UAAUW,GAAV,EAAe/O,CAAf,EAAkBC,CAAlB,EAAqBwG,CAArB,EAAwBuI,CAAxB,EAA2B;AACjD,QAAIC,KAAKF,MAAMA,GAAf;AACA,QAAIG,KAAKD,KAAKF,GAAd;AACA,WAAO/O,IAAI,CAAC,CAACA,CAAD,GAAK,CAAL,GAAS+O,OAAO,IAAI/O,CAAJ,GAAQA,IAAI+O,GAAnB,CAAV,IAAqCA,GAAzC,GACD,CAAC,IAAI9O,CAAJ,GAAQ8O,OAAO,CAAC,CAAD,GAAK9O,CAAL,GAASA,IAAI,CAAJ,GAAQ8O,GAAxB,CAAT,IAAyCA,GADxC,GAED,CAACtI,IAAI,CAAJ,GAAQA,IAAI,CAAJ,GAAQsI,GAAjB,IAAwBE,EAFvB,GAGDD,IAAIE,EAHV;AAIH,CAPD;;AASA7P,OAAOC,OAAP,GAAiB8B,MAAjB,C;;;;;;;AC7EA;;AAEA,IAAImE,YAAY,mBAAAhG,CAAQ,CAAR,CAAhB;AACA,IAAI8B,OAAO,mBAAA9B,CAAQ,CAAR,CAAX;AACA,IAAIqF,eAAe,mBAAArF,CAAQ,CAAR,CAAnB;;AAEA,SAAS4P,UAAT,CAAoBxQ,IAApB,EAA0BoJ,QAA1B,EAAoCC,SAApC,EAA+CoH,QAA/C,EAAyD;;AAErD,SAAKC,QAAL,GAAgB,KAAhB;;AAEA,SAAKnH,KAAL,GAAavJ,KAAKuJ,KAAlB;AACA,SAAKoH,MAAL,GAAcF,WAAWzQ,KAAK2Q,MAA9B;AACA,SAAKnH,EAAL,GAAUxJ,KAAKwJ,EAAL,GAAUxJ,KAAKwJ,EAAf,GAAoBJ,QAA9B;AACA,SAAKK,GAAL,GAAWzJ,KAAKyJ,GAAL,GAAWzJ,KAAKyJ,GAAhB,GAAsBJ,SAAjC;;AAEA,QAAIrJ,KAAK0J,MAAT,EAAiB,KAAKA,MAAL,GAAc1J,KAAK0J,MAAnB;;AAEjB,SAAKnC,SAAL,GAAiB,IAAIX,SAAJ,CAAc5G,KAAKuH,SAAnB,CAAjB;;AAEA,QAAIvH,KAAKoK,KAAT,EAAgB;AACZ,aAAKA,KAAL,GAAa,EAAb;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIrK,KAAKoK,KAAL,CAAWnJ,MAA/B,EAAuCoJ,GAAvC,EAA4C;AACxC,gBAAIC,OAAOtK,KAAKoK,KAAL,CAAWC,CAAX,CAAX;AACA,gBAAIC,KAAKH,UAAT,EAAqB,KAAKC,KAAL,CAAW1D,IAAX,CAAgB,IAAIT,YAAJ,CAAiBqE,IAAjB,CAAhB,EAArB,KACK,KAAKF,KAAL,CAAW1D,IAAX,CAAgB,IAAIhE,IAAJ,CAAS4H,IAAT,CAAhB;AACR;AACJ;AACJ;;AAEDkG,WAAWrQ,SAAX,CAAqByQ,OAArB,GAA+B,UAAUC,EAAV,EAAc;AACzC,SAAKC,GAAL,GAAW,IAAIC,KAAJ,EAAX;AACA,SAAKD,GAAL,CAASE,MAAT,GAAkB,YAAY;AAC1B,aAAKN,QAAL,GAAgB,IAAhB;AACA,YAAI,OAAOG,EAAP,KAAc,UAAlB,EAA8B;AAC1BA;AACH;AACJ,KALiB,CAKhBI,IALgB,CAKX,IALW,CAAlB;;AAOA,SAAKH,GAAL,CAASI,GAAT,GAAe,KAAKP,MAApB;AACH,CAVD;;AAYAH,WAAWrQ,SAAX,CAAqB0C,IAArB,GAA4B,UAAUC,GAAV,EAAevC,IAAf,EAAqB;;AAE7C,QAAI,CAAC,KAAKmQ,QAAV,EAAoB;;AAEpB5N,QAAI6H,IAAJ;AACA,QAAI,KAAKjB,MAAT,EAAiB,KAAKA,MAAL,CAAYsB,kBAAZ,CAA+BlI,GAA/B,EAAoCvC,IAApC;AACjB,SAAKgH,SAAL,CAAeA,SAAf,CAAyBzE,GAAzB,EAA8BvC,IAA9B;;AAEA,QAAI,KAAK6J,KAAT,EAAgB;AACZtH,YAAIyI,SAAJ;AACA,aAAK,IAAI9J,IAAI,CAAb,EAAgBA,IAAI,KAAK2I,KAAL,CAAWnJ,MAA/B,EAAuCQ,GAAvC,EAA4C;AACxC,iBAAK2I,KAAL,CAAW3I,CAAX,EAAcoB,IAAd,CAAmBC,GAAnB,EAAwBvC,IAAxB;AACH;AACDuC,YAAI0I,IAAJ;AACH;;AAED1I,QAAI+I,SAAJ,CAAc,KAAKiF,GAAnB,EAAwB,CAAxB,EAA2B,CAA3B;;AAEAhO,QAAIwI,OAAJ;AACH,CAnBD;;AAqBAkF,WAAWrQ,SAAX,CAAqB6K,kBAArB,GAA0C,UAAUlI,GAAV,EAAevC,IAAf,EAAqB;AAC3D,QAAI,KAAKmJ,MAAT,EAAiB,KAAKA,MAAL,CAAYsB,kBAAZ,CAA+BlI,GAA/B,EAAoCvC,IAApC;AACjB,SAAKgH,SAAL,CAAeA,SAAf,CAAyBzE,GAAzB,EAA8BvC,IAA9B;AACH,CAHD;;AAKAiQ,WAAWrQ,SAAX,CAAqBG,YAArB,GAAoC,UAAUC,IAAV,EAAgB;AAChD,SAAKgH,SAAL,CAAejH,YAAf,CAA4BC,IAA5B;AACA,QAAI,KAAK6J,KAAT,EAAgB;AACZ,aAAK,IAAI/G,IAAI,CAAb,EAAgBA,IAAI,KAAK+G,KAAL,CAAWnJ,MAA/B,EAAuCoC,GAAvC,EAA4C;AACxC,iBAAK+G,KAAL,CAAW/G,CAAX,EAAc/C,YAAd,CAA2BC,IAA3B;AACH;AACJ;AACJ,CAPD;;AASAiQ,WAAWrQ,SAAX,CAAqBK,KAArB,GAA6B,UAAUC,QAAV,EAAoB;AAC7C,SAAK8G,SAAL,CAAe/G,KAAf,CAAqBC,QAArB;;AAEA,QAAI,KAAK2J,KAAT,EAAgB;AACZ,aAAK,IAAI/G,IAAI,CAAb,EAAgBA,IAAI,KAAK+G,KAAL,CAAWnJ,MAA/B,EAAuCoC,GAAvC,EAA4C;AACxC,iBAAK+G,KAAL,CAAW/G,CAAX,EAAc7C,KAAd,CAAoBC,QAApB;AACH;AACJ;AACJ,CARD;;AAUAC,OAAOC,OAAP,GAAiB6P,UAAjB,C;;;;;;;ACtFA;;AAEA,IAAI5J,YAAY,mBAAAhG,CAAQ,CAAR,CAAhB;AACA,IAAI8B,OAAO,mBAAA9B,CAAQ,CAAR,CAAX;AACA,IAAIqF,eAAe,mBAAArF,CAAQ,CAAR,CAAnB;;AAEA,SAASuQ,SAAT,CAAmBnR,IAAnB,EAAyBoJ,QAAzB,EAAmCC,SAAnC,EAA8C+H,QAA9C,EAAwD;AACpD,SAAK7H,KAAL,GAAavJ,KAAKuJ,KAAlB;AACA,SAAK8H,IAAL,GAAYrR,KAAKqR,IAAjB;AACA,SAAKC,OAAL,GAAetR,KAAKsR,OAApB;AACA,SAAKC,QAAL,GAAgBvR,KAAKuR,QAArB;AACA,SAAKC,IAAL,GAAYxR,KAAKwR,IAAjB;AACA,SAAKC,KAAL,GAAazR,KAAKyR,KAAlB;AACA,SAAKC,aAAL,GAAqB1R,KAAK0R,aAA1B;AACA,SAAKlI,EAAL,GAAUxJ,KAAKwJ,EAAL,GAAUxJ,KAAKwJ,EAAf,GAAoBJ,QAA9B;AACA,SAAKK,GAAL,GAAWzJ,KAAKyJ,GAAL,GAAWzJ,KAAKyJ,GAAhB,GAAsBJ,SAAjC;AACA,SAAK+H,QAAL,GAAgBA,QAAhB;;AAEA,QAAIpR,KAAK0J,MAAT,EAAiB,KAAKA,MAAL,GAAc1J,KAAK0J,MAAnB;AACjB,SAAKnC,SAAL,GAAiB,IAAIX,SAAJ,CAAc5G,KAAKuH,SAAnB,CAAjB;;AAEA,QAAIvH,KAAKoK,KAAT,EAAgB;AACZ,aAAKA,KAAL,GAAa,EAAb;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIrK,KAAKoK,KAAL,CAAWnJ,MAA/B,EAAuCoJ,GAAvC,EAA4C;AACxC,gBAAIC,OAAOtK,KAAKoK,KAAL,CAAWC,CAAX,CAAX;AACA,gBAAIC,KAAKH,UAAT,EAAqB,KAAKC,KAAL,CAAW1D,IAAX,CAAgB,IAAIT,YAAJ,CAAiBqE,IAAjB,CAAhB,EAArB,KACK,KAAKF,KAAL,CAAW1D,IAAX,CAAgB,IAAIhE,IAAJ,CAAS4H,IAAT,CAAhB;AACR;AACJ;AACJ;;AAED6G,UAAUhR,SAAV,CAAoB0C,IAApB,GAA2B,UAAUC,GAAV,EAAevC,IAAf,EAAqB;;AAE5CuC,QAAI6H,IAAJ;AACA,QAAI,KAAKjB,MAAT,EAAiB,KAAKA,MAAL,CAAYsB,kBAAZ,CAA+BlI,GAA/B,EAAoCvC,IAApC;AACjB,SAAKgH,SAAL,CAAeA,SAAf,CAAyBzE,GAAzB,EAA8BvC,IAA9B;;AAEA,QAAI,KAAK6J,KAAT,EAAgB;AACZtH,YAAIyI,SAAJ;AACA,aAAK,IAAI9J,IAAI,CAAb,EAAgBA,IAAI,KAAK2I,KAAL,CAAWnJ,MAA/B,EAAuCQ,GAAvC,EAA4C;AACxC,iBAAK2I,KAAL,CAAW3I,CAAX,EAAcoB,IAAd,CAAmBC,GAAnB,EAAwBvC,IAAxB;AACH;AACDuC,YAAI0I,IAAJ;AACH;;AAED1I,QAAI6O,SAAJ,GAAgB,KAAKD,aAArB;AACA5O,QAAI0O,IAAJ,GAAW,KAAKD,QAAL,GAAgB,KAAhB,GAAwB,KAAKH,QAA7B,IAAyC,KAAKI,IAAzD;AACA1O,QAAI8O,SAAJ,GAAgB,SAAS,KAAKH,KAAL,CAAW,CAAX,CAAT,GAAyB,IAAzB,GAAgC,KAAKA,KAAL,CAAW,CAAX,CAAhC,GAAgD,IAAhD,GAAuD,KAAKA,KAAL,CAAW,CAAX,CAAvD,GAAuE,GAAvF;AACA,SAAK,IAAIpO,IAAI,CAAb,EAAgBA,IAAI,KAAKgO,IAAL,CAAUpQ,MAA9B,EAAsCoC,GAAtC,EAA2C;AACvCP,YAAI+O,QAAJ,CAAa,KAAKR,IAAL,CAAUhO,CAAV,CAAb,EAA2B,CAA3B,EAA8BA,IAAI,KAAKiO,OAAvC;AACH;;AAEDxO,QAAIwI,OAAJ;AACH,CAtBD;;AAwBA6F,UAAUhR,SAAV,CAAoB6K,kBAApB,GAAyC,UAAUlI,GAAV,EAAevC,IAAf,EAAqB;AAC1D,QAAI,KAAKmJ,MAAT,EAAiB,KAAKA,MAAL,CAAYsB,kBAAZ,CAA+BlI,GAA/B,EAAoCvC,IAApC;AACjB,SAAKgH,SAAL,CAAeA,SAAf,CAAyBzE,GAAzB,EAA8BvC,IAA9B;AACH,CAHD;;AAKA4Q,UAAUhR,SAAV,CAAoBG,YAApB,GAAmC,UAAUC,IAAV,EAAgB;AAC/C,SAAKgH,SAAL,CAAejH,YAAf,CAA4BC,IAA5B;AACA,QAAI,KAAK6J,KAAT,EAAgB;AACZ,aAAK,IAAI/G,IAAI,CAAb,EAAgBA,IAAI,KAAK+G,KAAL,CAAWnJ,MAA/B,EAAuCoC,GAAvC,EAA4C;AACxC,iBAAK+G,KAAL,CAAW/G,CAAX,EAAc/C,YAAd,CAA2BC,IAA3B;AACH;AACJ;AACJ,CAPD;;AASA4Q,UAAUhR,SAAV,CAAoBK,KAApB,GAA4B,UAAUC,QAAV,EAAoB;AAC5C,SAAK8G,SAAL,CAAe/G,KAAf,CAAqBC,QAArB;;AAEA,QAAI,KAAK2J,KAAT,EAAgB;AACZ,aAAK,IAAI/G,IAAI,CAAb,EAAgBA,IAAI,KAAK+G,KAAL,CAAWnJ,MAA/B,EAAuCoC,GAAvC,EAA4C;AACxC,iBAAK+G,KAAL,CAAW/G,CAAX,EAAc7C,KAAd,CAAoBC,QAApB;AACH;AACJ;AACJ,CARD;;AAUAC,OAAOC,OAAP,GAAiBwQ,SAAjB,C;;;;;;;;;;;;AC/EA;;AAEA;;AAEA,IAAIjI,QAAQ,mBAAAtI,CAAQ,CAAR,CAAZ;AACA,IAAI4P,aAAa,mBAAA5P,CAAQ,CAAR,CAAjB;AACA,IAAIuQ,YAAY,mBAAAvQ,CAAQ,CAAR,CAAhB;AACA,IAAIkR,OAAO,mBAAAlR,CAAQ,EAAR,CAAX;;AAEA,IAAImR,cAAc,EAAlB;AAAA,IACIC,oBAAoB,CADxB;;AAGA,IAAIC,YAAY,KAAhB;AACA,IAAIC,MAAJ;;AAEA,SAASC,SAAT,CAAmBC,OAAnB,EAA4B;AACxB,QAAI,CAACA,QAAQpS,IAAb,EAAmB;AACf8L,gBAAQuG,KAAR,CAAc,SAAd;AACA;AACH;;AAED,SAAK/I,SAAL,GAAiB,EAAjB;AACA,SAAKgJ,UAAL,GAAkB,CAAlB;AACA,SAAK/P,QAAL,GAAgB6P,QAAQpS,IAAR,CAAauC,QAA7B;AACA,SAAKgQ,SAAL,GAAiBH,QAAQpS,IAAR,CAAaoL,KAA9B;AACA,SAAKoH,UAAL,GAAkBJ,QAAQpS,IAAR,CAAaqL,MAA/B;AACA,SAAKoH,KAAL,GAAaL,QAAQpS,IAAR,CAAaoL,KAAb,GAAqBgH,QAAQpS,IAAR,CAAaqL,MAA/C;AACA,SAAKqH,OAAL,GAAeN,QAAQpS,IAAR,CAAa0S,OAA5B;AACA,SAAKtB,QAAL,GAAgBgB,QAAQhB,QAAxB;;AAEA,SAAKjG,MAAL,GAAciH,QAAQjH,MAAR,IAAkBwH,SAASC,aAAT,CAAuB,QAAvB,CAAhC;AACA,SAAKC,IAAL,GAAYT,QAAQS,IAAR,IAAgB,KAA5B;AACA,SAAKC,gBAAL,GAAwBV,QAAQU,gBAAR,IAA4B7G,UAAUA,OAAO6G,gBAA7C,GAAgE7G,OAAO6G,gBAAvE,GAA0F,CAAlH;AACA,SAAKC,KAAL,GAAaX,QAAQW,KAAR,IAAiB,IAA9B;AACA,SAAKtS,QAAL,GAAgB2R,QAAQ3R,QAAR,IAAoB,KAApC;AACA,SAAKuS,aAAL,GAAqBZ,QAAQY,aAAR,IAAyB,EAA9C;AACA,SAAKC,QAAL,GAAgBb,QAAQa,QAAR,IAAoB,YAAY,CAC/C,CADD;AAEA,SAAKC,UAAL,GAAkBd,QAAQc,UAAR,IAAsB,YAAY,CACnD,CADD;AAEA,SAAKC,MAAL,GAAcf,QAAQe,MAAR,IAAkB,YAAY,CAC3C,CADD;;AAGA,SAAKrQ,GAAL,GAAW,KAAKqI,MAAL,CAAYiI,UAAZ,CAAuB,IAAvB,CAAX;;AAEA,SAAKjI,MAAL,CAAYC,KAAZ,GAAoB,KAAKmH,SAAzB;AACA,SAAKpH,MAAL,CAAYE,MAAZ,GAAqB,KAAKmH,UAA1B;;AAEA,SAAKa,MAAL,GAAcV,SAASC,aAAT,CAAuB,QAAvB,CAAd;AACA,SAAKS,MAAL,CAAYjI,KAAZ,GAAoB,KAAKmH,SAAzB;AACA,SAAKc,MAAL,CAAYhI,MAAZ,GAAqB,KAAKmH,UAA1B;AACA,SAAKrJ,SAAL,GAAiB,KAAKkK,MAAL,CAAYD,UAAZ,CAAuB,IAAvB,CAAjB;;AAEA,SAAKE,MAAL,GAAc,EAAd;AACA,SAAK,IAAI7R,IAAI,CAAb,EAAgBA,IAAI2Q,QAAQpS,IAAR,CAAasT,MAAb,CAAoBrS,MAAxC,EAAgDQ,GAAhD,EAAqD;AACjD,YAAI2Q,QAAQpS,IAAR,CAAasT,MAAb,CAAoB7R,CAApB,EAAuByI,IAAvB,KAAgC,QAApC,EAA8C;AAC1C,iBAAKoJ,MAAL,CAAY5M,IAAZ,CAAiB,IAAIwC,KAAJ,CAAUkJ,QAAQpS,IAAR,CAAasT,MAAb,CAAoB7R,CAApB,CAAV,EAAkC,KAAK0H,SAAvC,EAAkD,CAAlD,EAAqD,KAAK5G,QAA1D,EAAoE,KAAK+G,SAAzE,CAAjB;AACH,SAFD,MAEO,IAAI8I,QAAQpS,IAAR,CAAasT,MAAb,CAAoB7R,CAApB,EAAuByI,IAAvB,KAAgC,OAApC,EAA6C;AAChD,iBAAKoJ,MAAL,CAAY5M,IAAZ,CAAiB,IAAI8J,UAAJ,CAAe4B,QAAQpS,IAAR,CAAasT,MAAb,CAAoB7R,CAApB,CAAf,EAAuC,CAAvC,EAA0C,KAAKc,QAA/C,EAAyD,KAAKyQ,aAA9D,CAAjB;AACH,SAFM,MAEA,IAAIZ,QAAQpS,IAAR,CAAasT,MAAb,CAAoB7R,CAApB,EAAuByI,IAAvB,KAAgC,MAApC,EAA4C;AAC/C,iBAAKoJ,MAAL,CAAY5M,IAAZ,CAAiB,IAAIyK,SAAJ,CAAciB,QAAQpS,IAAR,CAAasT,MAAb,CAAoB7R,CAApB,CAAd,EAAsC,CAAtC,EAAyC,KAAKc,QAA9C,EAAwD,KAAK6O,QAA7D,CAAjB;AACH,SAFM,MAEA,IAAIgB,QAAQpS,IAAR,CAAasT,MAAb,CAAoB7R,CAApB,EAAuByI,IAAvB,KAAgC,MAApC,EAA4C;AAC/C,iBAAKoJ,MAAL,CAAY5M,IAAZ,CAAiB,IAAIoL,IAAJ,CAASM,QAAQpS,IAAR,CAAasT,MAAb,CAAoB7R,CAApB,CAAT,EAAiC,KAAK0H,SAAtC,EAAiD,CAAjD,EAAoD,KAAK5G,QAAzD,EAAmE,KAAK6O,QAAxE,EAAkF,KAAK9H,SAAvF,EAAkG,KAAK0J,aAAvG,EAAsH,KAAK5B,QAA3H,CAAjB;AACH;AACJ;AACD,SAAKmC,SAAL,GAAiB,KAAKD,MAAL,CAAYrS,MAA7B;;AAEA,SAAK,IAAIoC,IAAI,CAAb,EAAgBA,IAAI,KAAKiQ,MAAL,CAAYrS,MAAhC,EAAwCoC,GAAxC,EAA6C;AACzC,YAAImQ,QAAQ,KAAKF,MAAL,CAAYjQ,CAAZ,CAAZ;AACA,YAAImQ,MAAM9J,MAAV,EAAkB;AACd,iBAAK,IAAIW,IAAI,CAAb,EAAgBA,IAAI,KAAKiJ,MAAL,CAAYrS,MAAhC,EAAwCoJ,GAAxC,EAA6C;AACzC;AACA,oBAAImJ,MAAM9J,MAAN,KAAiB,KAAK4J,MAAL,CAAYjJ,CAAZ,EAAed,KAApC,EAA2C;AACvCiK,0BAAM9J,MAAN,GAAe,KAAK4J,MAAL,CAAYjJ,CAAZ,CAAf;AACH;AACJ;AACJ;AACJ;;AAED,SAAK7J,KAAL,CAAW,KAAKC,QAAhB;AACA,SAAKgT,MAAL;;AAEA,SAAKC,QAAL,GAAgB,KAAhB;AACA,SAAKC,SAAL,GAAiB,KAAjB;AACA,SAAKC,SAAL,GAAiB,IAAjB;;AAEA7B,gBAAYrL,IAAZ,CAAiB,IAAjB;AACAsL,wBAAoBD,YAAY9Q,MAAhC;AACH;;AAEDkR,UAAUhS,SAAV,GAAsB;;AAElB0T,UAAM,YAAY;AACd,YAAI,CAAC,KAAKF,SAAV,EAAqB;AACjB,gBAAI,CAAC,KAAKD,QAAV,EAAoB,KAAKlT,KAAL,CAAW,KAAKC,QAAhB;AACpB,iBAAKiT,QAAL,GAAgB,KAAhB;AACA,iBAAKpB,UAAL,GAAkB,CAAlB;AACA,iBAAKqB,SAAL,GAAiB,IAAjB;AACH;AACJ,KATiB;;AAWlBG,UAAM,YAAY;AACd,aAAKtT,KAAL,CAAW,KAAKC,QAAhB;AACA,aAAKkT,SAAL,GAAiB,KAAjB;AACA,aAAKC,SAAL,GAAiB,IAAjB;AACH,KAfiB;;AAiBlBG,WAAO,YAAY;AACf,YAAI,KAAKJ,SAAT,EAAoB;AAChB,iBAAKD,QAAL,GAAgB,IAAhB;AACA,iBAAKpB,UAAL,GAAkB,KAAK0B,QAAvB;AACA,iBAAKL,SAAL,GAAiB,KAAjB;AACH;AACJ,KAvBiB;;AAyBlBM,iBAAa,UAAUC,EAAV,EAAc;AACvB,YAAIC,SAAS,KAAKC,SAAL,CAAeF,EAAf,CAAb;AACA,YAAIC,MAAJ,EAAY;AACR,iBAAKH,QAAL,GAAgBG,OAAO5T,IAAvB;AACA,iBAAK+R,UAAL,GAAkB,CAAlB;AACA,iBAAKhS,YAAL,CAAkB,KAAK0T,QAAvB;AACA,iBAAKL,SAAL,GAAiB,IAAjB;AACH;AACJ,KAjCiB;;AAmClBU,iBAAa,UAAUH,EAAV,EAAc;AACvB,YAAIC,SAAS,KAAKC,SAAL,CAAeF,EAAf,CAAb;AACA,YAAIC,MAAJ,EAAY;AACR,iBAAKR,SAAL,GAAiB,KAAjB;AACA,iBAAKK,QAAL,GAAgBG,OAAO5T,IAAvB;AACA,iBAAKD,YAAL,CAAkB,KAAK0T,QAAvB;AACA,iBAAKJ,SAAL,GAAiB,IAAjB;AACH;AACJ,KA3CiB;;AA6ClBQ,eAAW,UAAUF,EAAV,EAAc;AACrB,YAAI,OAAOA,EAAP,KAAc,QAAlB,EAA4B;AACxB,mBAAO,KAAKxB,OAAL,CAAawB,EAAb,CAAP;AACH,SAFD,MAEO,IAAI,OAAOA,EAAP,KAAc,QAAlB,EAA4B;AAC/B,iBAAK,IAAIzS,IAAI,CAAb,EAAgBA,IAAI,KAAKiR,OAAL,CAAazR,MAAjC,EAAyCQ,GAAzC,EAA8C;AAC1C,oBAAI,KAAKiR,OAAL,CAAajR,CAAb,EAAgB6S,OAAhB,KAA4BJ,EAAhC,EAAoC;AAChC,2BAAO,KAAKxB,OAAL,CAAajR,CAAb,CAAP;AACH;AACJ;AACJ;AACDqK,gBAAQyI,IAAR,CAAa,kBAAb;AACH,KAxDiB;;AA0DlBC,sBAAkB,UAAUtQ,IAAV,EAAgBC,EAAhB,EAAoB;AAClC,aAAK,IAAI1C,IAAI,CAAb,EAAgBA,IAAI,KAAKiR,OAAL,CAAazR,MAAjC,EAAyCQ,GAAzC,EAA8C;AAC1C,gBAAI,KAAKiR,OAAL,CAAajR,CAAb,EAAgBqS,IAAhB,IAAwB,KAAKpB,OAAL,CAAajR,CAAb,EAAgBlB,IAAhB,GAAuB2D,IAA/C,IAAuD,KAAKwO,OAAL,CAAajR,CAAb,EAAgBlB,IAAhB,GAAuB4D,EAAlF,EAAsF;AAClF,uBAAO,KAAKuO,OAAL,CAAajR,CAAb,CAAP;AACH;AACJ;AACD,eAAO,KAAP;AACH,KAjEiB;;AAmElBgT,aAAS,UAAUC,IAAV,EAAgB;AACrB,aAAKf,SAAL,GAAiB,KAAjB;AACA,aAAKK,QAAL,GAAgBU,OAAO,KAAKnS,QAA5B;AACA,aAAK+P,UAAL,GAAkB,KAAK0B,QAAvB;AACA,aAAK1T,YAAL,CAAkB,KAAK0T,QAAvB;AACA,aAAKJ,SAAL,GAAiB,IAAjB;AACH,KAzEiB;;AA2ElBe,aAAS,YAAY;AACjB,eAAO,KAAKX,QAAL,GAAgB,KAAKzR,QAA5B;AACH,KA7EiB;;AA+ElBqS,YAAQ,UAAUrU,IAAV,EAAgB;AACpB,YAAI,CAAC,KAAKsU,IAAV,EAAgB,KAAKA,IAAL,GAAYtU,IAAZ;;AAEhB,YAAI+B,QAAQ/B,OAAO,KAAKsU,IAAxB;AACA,aAAKA,IAAL,GAAYtU,IAAZ;;AAEA,YAAI,KAAKoT,SAAT,EAAoB;AAChB,iBAAKK,QAAL,GAAgB,KAAKvT,QAAL,GAAgB,KAAKuT,QAAL,GAAgB1R,KAAhC,GAAwC,KAAK0R,QAAL,GAAgB1R,KAAxE;;AAEA,gBAAIwS,aAAa,KAAKN,gBAAL,CAAsB,KAAKR,QAAL,GAAgB1R,KAAtC,EAA6C,KAAK0R,QAAlD,CAAjB;;AAEA,gBAAI,KAAKA,QAAL,GAAgB,KAAKzR,QAArB,IAAiC,KAAK9B,QAAL,IAAiB,KAAKuT,QAAL,GAAgB,CAAtE,EAAyE;AACrE,qBAAKA,QAAL,GAAgB,KAAKvT,QAAL,GAAgB,CAAhB,GAAoB,KAAK8B,QAAL,GAAgB,CAApD;AACA,qBAAKoR,SAAL,GAAiB,KAAjB;AACA,qBAAKT,UAAL;AACA,oBAAI,KAAKL,IAAT,EAAe;AACX,yBAAKgB,IAAL;AACH;AACJ,aAPD,MAOO,IAAIiB,UAAJ,EAAgB;AACnB,qBAAKd,QAAL,GAAgBc,WAAWvU,IAA3B;AACA,qBAAK4S,MAAL,CAAY2B,UAAZ;AACAhJ,wBAAQC,GAAR,CAAY,MAAZ,EAAoB,KAAKiI,QAAzB;AACA,qBAAKnR,IAAL,CAAU,KAAKmR,QAAf;AACA,qBAAKD,KAAL;AACH,aANM,MAMA;AACH,qBAAKlR,IAAL,CAAU,KAAKmR,QAAf;AACH;AACD,iBAAKf,QAAL;AACH,SAtBD,MAsBO,IAAI,KAAKW,SAAT,EAAoB;AACvB,iBAAKA,SAAL,GAAiB,KAAjB;AACA,iBAAK/Q,IAAL,CAAU,KAAKmR,QAAf;AACA,iBAAKf,QAAL;AACH;AACJ,KAhHiB;;AAkHlBpQ,UAAM,UAAUtC,IAAV,EAAgB;AAClB,aAAKuC,GAAL,CAASoI,SAAT,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,KAAKqH,SAA9B,EAAyC,KAAKC,UAA9C;AACA,aAAK,IAAI/Q,IAAI,CAAb,EAAgBA,IAAI,KAAK8R,SAAzB,EAAoC9R,GAApC,EAAyC;AACrC,gBAAIlB,QAAQ,KAAK+S,MAAL,CAAY7R,CAAZ,EAAe+H,EAAvB,IAA6BjJ,QAAQ,KAAK+S,MAAL,CAAY7R,CAAZ,EAAegI,GAAxD,EAA6D;AACzD,qBAAK6J,MAAL,CAAY7R,CAAZ,EAAeoB,IAAf,CAAoB,KAAKC,GAAzB,EAA8BvC,IAA9B;AACH;AACJ;AACJ,KAzHiB;;AA2HlBqQ,aAAS,UAAUC,EAAV,EAAc;AACnB,aAAKkE,QAAL,GAAgBlE,EAAhB;AACA,aAAK,IAAIpP,IAAI,CAAb,EAAgBA,IAAI,KAAK8R,SAAzB,EAAoC9R,GAApC,EAAyC;AACrC,gBAAI,KAAK6R,MAAL,CAAY7R,CAAZ,aAA0B+O,UAA9B,EAA0C;AACtC,qBAAK8C,MAAL,CAAY7R,CAAZ,EAAemP,OAAf,CAAuB,KAAKI,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAAvB;AACH;AACJ;AACJ,KAlIiB;;AAoIlBD,YAAQ,YAAY;AAChB,aAAK,IAAIvP,IAAI,CAAb,EAAgBA,IAAI,KAAK8R,SAAzB,EAAoC9R,GAApC,EAAyC;AACrC,gBAAI,KAAK6R,MAAL,CAAY7R,CAAZ,aAA0B+O,UAA9B,EAA0C;AACtC,oBAAI,CAAC,KAAK8C,MAAL,CAAY7R,CAAZ,EAAeiP,QAApB,EAA8B;AAC1B;AACH;AACJ;AACJ;AACD,aAAKA,QAAL,GAAgB,IAAhB;AACA,YAAI,OAAO,KAAKqE,QAAZ,KAAyB,UAA7B,EAAyC;AACrC,iBAAKA,QAAL;AACH;AACJ,KAhJiB;;AAkJlBvU,WAAO,YAAY;AACf,aAAK8R,UAAL,GAAkB,CAAlB;AACA,aAAK0B,QAAL,GAAgB,KAAKvT,QAAL,GAAgB,KAAK8B,QAArB,GAAgC,CAAhD;AACA,aAAK,IAAId,IAAI,CAAb,EAAgBA,IAAI,KAAK8R,SAAzB,EAAoC9R,GAApC,EAAyC;AACrC,iBAAK6R,MAAL,CAAY7R,CAAZ,EAAejB,KAAf,CAAqB,KAAKC,QAA1B;AACH;AACJ,KAxJiB;;AA0JlBH,kBAAc,UAAUC,IAAV,EAAgB;AAC1B,aAAK,IAAIkB,IAAI,CAAb,EAAgBA,IAAI,KAAK8R,SAAzB,EAAoC9R,GAApC,EAAyC;AACrC,iBAAK6R,MAAL,CAAY7R,CAAZ,EAAenB,YAAf,CAA4BC,IAA5B;AACH;AACJ,KA9JiB;;AAgKlByU,aAAS,YAAY;AACjB,aAAKrB,SAAL,GAAiB,KAAjB;AACA,aAAKT,UAAL,GAAkB,IAAlB;AACA,YAAIzR,IAAIsQ,YAAYkD,OAAZ,CAAoB,IAApB,CAAR;AACA,YAAIxT,IAAI,CAAC,CAAT,EAAY;AACRsQ,wBAAYmD,MAAZ,CAAmBzT,CAAnB,EAAsB,CAAtB;AACAuQ,gCAAoBD,YAAY9Q,MAAhC;AACH;AACD,YAAI,KAAKkK,MAAL,CAAYgK,UAAhB,EAA4B,KAAKhK,MAAL,CAAYgK,UAAZ,CAAuBC,WAAvB,CAAmC,KAAKjK,MAAxC;AAC/B,KAzKiB;;AA2KlBsI,YAAQ,UAAU4B,CAAV,EAAa;AACjB,YAAI,KAAKtC,KAAT,EAAgB;AACZ,gBAAI3H,QAAQiK,KAAK,KAAKlK,MAAL,CAAYmK,WAAjB,IAAgC,KAAK/C,SAAjD;AACA,iBAAKpH,MAAL,CAAYC,KAAZ,GAAoBA,QAAQ,KAAK0H,gBAAjC;AACA,iBAAK3H,MAAL,CAAYE,MAAZ,GAAqBD,QAAQ,KAAKqH,KAAb,GAAqB,KAAKK,gBAA/C;;AAEA,iBAAKO,MAAL,CAAYjI,KAAZ,GAAoBA,QAAQ,KAAK0H,gBAAjC;AACA,iBAAKO,MAAL,CAAYhI,MAAZ,GAAqBD,QAAQ,KAAKqH,KAAb,GAAqB,KAAKK,gBAA/C;;AAEA,iBAAKyC,KAAL,GAAanK,QAAQ,KAAKmH,SAAb,GAAyB,KAAKO,gBAA3C;AACA,iBAAKhQ,GAAL,CAASyE,SAAT,CAAmB,KAAKgO,KAAxB,EAA+B,CAA/B,EAAkC,CAAlC,EAAqC,KAAKA,KAA1C,EAAiD,CAAjD,EAAoD,CAApD;AACA,iBAAKpM,SAAL,CAAe5B,SAAf,CAAyB,KAAKgO,KAA9B,EAAqC,CAArC,EAAwC,CAAxC,EAA2C,KAAKA,KAAhD,EAAuD,CAAvD,EAA0D,CAA1D;AACA,iBAAKjV,YAAL,CAAkB,KAAK0T,QAAvB;AACA,iBAAKJ,SAAL,GAAiB,IAAjB;AACH;AACJ,KA1LiB;;AA4LlB4B,kBAAc,UAAUC,IAAV,EAAgBC,KAAhB,EAAuB;AACjC,YAAI,CAAC,KAAKpM,SAAL,CAAemM,IAAf,CAAL,EAA2B;AACvB3J,oBAAQyI,IAAR,CAAa,yBAAyBkB,IAAzB,GAAgC,aAA7C;AACA;AACH;;AAED,aAAKnM,SAAL,CAAemM,IAAf,EAAqBE,OAArB,CAA6B,UAAUC,QAAV,EAAoB;AAC7CA,qBAASF,KAAT,GAAiBA,KAAjB;AACH,SAFD;AAGH,KArMiB;;AAuMlB,QAAIjV,QAAJ,GAAe;AACX,eAAO,KAAKoV,SAAZ;AACH,KAzMiB;;AA2MlB,QAAIpV,QAAJ,CAAaqV,IAAb,EAAmB;AACf,aAAKD,SAAL,GAAiBC,IAAjB;AACA,YAAI,KAAKxD,UAAT,EAAqB;AACjB,iBAAK0B,QAAL,GAAgB,KAAK1B,UAArB;AACH,SAFD,MAEO,IAAI,CAAC,KAAKqB,SAAV,EAAqB;AACxB,iBAAKK,QAAL,GAAgB,KAAKvT,QAAL,GAAgB,KAAK8B,QAArB,GAAgC,CAAhD;AACH;AACD,aAAKjC,YAAL,CAAkB,KAAK0T,QAAvB;AACH;;AAnNiB,CAAtB;;AAwNA,MAAMY,SAAS,UAAUrU,IAAV,EAAgB;AAC3B,QAAI0R,SAAJ,EAAe;AACXC,iBAAS,4EAAA6D,CAAsBnB,MAAtB,CAAT;AACH;AACDrU,WAAOA,SAASyV,SAAT,GAAqBzV,IAArB,GAA4B,0DAAA0V,CAAYC,GAAZ,EAAnC;;AAEA,SAAK,IAAIzU,IAAI,CAAb,EAAgBA,IAAIuQ,iBAApB,EAAuCvQ,GAAvC,EAA4C;AACxCsQ,oBAAYtQ,CAAZ,EAAemT,MAAf,CAAsBrU,IAAtB;AACH;AACJ,CATD;;AAWA,MAAM4V,WAAW,UAAUC,IAAV,EAAgB;AAC7BnE,gBAAYmE,IAAZ;AACAnE,gBAAYC,SAAS,4EAAA6D,CAAsBnB,MAAtB,CAArB,GAAqD,2EAAAyB,CAAqBnE,MAArB,CAArD;AACH,CAHD;;;;;;;;;AC7TA,oDAAMoE,OAAO,OAAOrK,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,GAAyC,OAAOsK,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,GAAyC,IAA/F;;AAEO,MAAMR,wBAAwBO,KAAKP,qBAAL,IAChC,UAAUS,EAAV,EAAc;AACX,WAAOF,KAAKG,UAAL,CAAgBD,EAAhB,EAAoB,EAApB,CAAP;AACH,CAHE;AAAA;AAAA;;AAKA,MAAMH,uBAAuBC,KAAKD,oBAAL,IAC/B,UAAUnC,EAAV,EAAc;AACX,WAAOoC,KAAKI,YAAL,CAAkBxC,EAAlB,CAAP;AACH,CAHE;AAAA;AAAA;;AAKA,MAAM+B,cAAeK,KAAKL,WAAL,IAAoB;AAC5CU,YAAQC,KAAKV,GAAL,EADoC;AAE5CA,SAAK,SAASA,GAAT,GAAc;AACf,eAAOU,KAAKV,GAAL,KAAa,KAAKS,MAAzB;AAEH;AAL2C,CAAzC,C;;;;;;;;;ACZP;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;ACpBA;;AAEA,IAAI5W,WAAW,mBAAAa,CAAQ,CAAR,CAAf;AAAA,IACIE,mBAAmB,mBAAAF,CAAQ,CAAR,CADvB;;AAGA,SAAS8H,MAAT,CAAgB1I,IAAhB,EAAsB;AAClB,QAAIA,IAAJ,EAAU;AACN,aAAK6W,IAAL,GAAY7W,KAAK6W,IAAjB;AACA,aAAKC,GAAL,GAAW9W,KAAK8W,GAAhB;;AAEA,YAAI9W,KAAK+W,UAAT,EAAqB;AACjB,gBAAI/W,KAAK+W,UAAL,CAAgB9V,MAAhB,GAAyB,CAA7B,EAAgC,KAAK8V,UAAL,GAAkB,IAAIjW,gBAAJ,CAAqBd,KAAK+W,UAA1B,CAAlB,CAAhC,KACK,KAAKA,UAAL,GAAkB,IAAIhX,QAAJ,CAAaC,KAAK+W,UAAlB,CAAlB;AACR;;AAED,YAAI/W,KAAKyR,KAAL,CAAWxQ,MAAX,GAAoB,CAAxB,EAA2B,KAAKwQ,KAAL,GAAa,IAAI3Q,gBAAJ,CAAqBd,KAAKyR,KAA1B,CAAb,CAA3B,KACK,KAAKA,KAAL,GAAa,IAAI1R,QAAJ,CAAaC,KAAKyR,KAAlB,CAAb;;AAEL,YAAIzR,KAAKsH,OAAL,CAAarG,MAAb,GAAsB,CAA1B,EAA6B,KAAKqG,OAAL,GAAe,IAAIxG,gBAAJ,CAAqBd,KAAKsH,OAA1B,CAAf,CAA7B,KACK,KAAKA,OAAL,GAAe,IAAIvH,QAAJ,CAAaC,KAAKsH,OAAlB,CAAf;;AAEL,YAAItH,KAAKoL,KAAL,CAAWnK,MAAX,GAAoB,CAAxB,EAA2B,KAAKmK,KAAL,GAAa,IAAItK,gBAAJ,CAAqBd,KAAKoL,KAA1B,CAAb,CAA3B,KACK,KAAKA,KAAL,GAAa,IAAIrL,QAAJ,CAAaC,KAAKoL,KAAlB,CAAb;;AAEL,YAAIpL,KAAKgX,MAAT,EAAiB;AACb,iBAAKA,MAAL,GAAc,EAAd;;AAEA,gBAAIhX,KAAKgX,MAAL,CAAYC,IAAZ,CAAiBhW,MAAjB,GAA0B,CAA9B,EAAiC,KAAK+V,MAAL,CAAYC,IAAZ,GAAmB,IAAInW,gBAAJ,CAAqBd,KAAKgX,MAAL,CAAYC,IAAjC,CAAnB,CAAjC,KACK,KAAKD,MAAL,CAAYC,IAAZ,GAAmB,IAAIlX,QAAJ,CAAaC,KAAKgX,MAAL,CAAYC,IAAzB,CAAnB;;AAEL,gBAAIjX,KAAKgX,MAAL,CAAYE,GAAZ,CAAgBjW,MAAhB,GAAyB,CAA7B,EAAgC,KAAK+V,MAAL,CAAYE,GAAZ,GAAkB,IAAIpW,gBAAJ,CAAqBd,KAAKgX,MAAL,CAAYE,GAAjC,CAAlB,CAAhC,KACK,KAAKF,MAAL,CAAYE,GAAZ,GAAkB,IAAInX,QAAJ,CAAaC,KAAKgX,MAAL,CAAYE,GAAzB,CAAlB;;AAEL,gBAAIlX,KAAKgX,MAAL,CAAYL,MAAZ,CAAmB1V,MAAnB,GAA4B,CAAhC,EAAmC,KAAK+V,MAAL,CAAYL,MAAZ,GAAqB,IAAI7V,gBAAJ,CAAqBd,KAAKgX,MAAL,CAAYL,MAAjC,CAArB,CAAnC,KACK,KAAKK,MAAL,CAAYL,MAAZ,GAAqB,IAAI5W,QAAJ,CAAaC,KAAKgX,MAAL,CAAYL,MAAzB,CAArB;AACR;AACJ;AACJ;;AAEDjO,OAAOvI,SAAP,CAAiBC,QAAjB,GAA4B,UAAUG,IAAV,EAAgB;AACxC,QAAIkR,QAAQ,KAAKA,KAAL,CAAWrR,QAAX,CAAoBG,IAApB,CAAZ;AACA,QAAI+G,UAAU,KAAKA,OAAL,CAAalH,QAAb,CAAsBG,IAAtB,CAAd;AACAkR,UAAM,CAAN,IAAW1J,KAAKoP,KAAL,CAAW1F,MAAM,CAAN,CAAX,CAAX;AACAA,UAAM,CAAN,IAAW1J,KAAKoP,KAAL,CAAW1F,MAAM,CAAN,CAAX,CAAX;AACAA,UAAM,CAAN,IAAW1J,KAAKoP,KAAL,CAAW1F,MAAM,CAAN,CAAX,CAAX;AACA,QAAInM,IAAImM,MAAMoF,IAAN,CAAW,IAAX,CAAR;;AAEA,WAAO,UAAUvR,CAAV,GAAc,IAAd,GAAqBgC,OAArB,GAA+B,GAAtC;AACH,CATD;;AAWAoB,OAAOvI,SAAP,CAAiB4K,SAAjB,GAA6B,UAAUjI,GAAV,EAAevC,IAAf,EAAqB;AAC9C,QAAI6W,cAAc,KAAKhX,QAAL,CAAcG,IAAd,CAAlB;AACA,QAAI8W,cAAc,KAAKjM,KAAL,CAAWhL,QAAX,CAAoBG,IAApB,CAAlB;AACA,QAAI+W,aAAa,KAAKT,IAAtB;AACA,QAAIS,eAAe,OAAnB,EAA4B,IAAIP,aAAa,KAAKA,UAAL,CAAgB3W,QAAhB,CAAyBG,IAAzB,CAAjB;;AAE5BuC,QAAIyU,SAAJ,GAAgBF,WAAhB;AACAvU,QAAI0U,QAAJ,GAAeF,UAAf;AACA,QAAIP,UAAJ,EAAgBjU,IAAIiU,UAAJ,GAAiBA,UAAjB;AAChBjU,QAAI2U,OAAJ,GAAc,KAAKX,GAAnB;AACAhU,QAAI4U,WAAJ,GAAkBN,WAAlB;;AAEA,QAAI,KAAKJ,MAAT,EAAiB;AACblU,YAAI6U,WAAJ,CAAgB,CACZ,KAAKX,MAAL,CAAYC,IAAZ,CAAiB7W,QAAjB,CAA0BG,IAA1B,CADY,EAEZ,KAAKyW,MAAL,CAAYE,GAAZ,CAAgB9W,QAAhB,CAAyBG,IAAzB,CAFY,CAAhB;AAIAuC,YAAI8U,cAAJ,GAAqB,KAAKZ,MAAL,CAAYL,MAAZ,CAAmBvW,QAAnB,CAA4BG,IAA5B,CAArB;AACH;AACJ,CAnBD;;AAqBAmI,OAAOvI,SAAP,CAAiBG,YAAjB,GAAgC,UAAUC,IAAV,EAAgB;AAC5C,SAAKkR,KAAL,CAAWnR,YAAX,CAAwBC,IAAxB;AACA,SAAK+G,OAAL,CAAahH,YAAb,CAA0BC,IAA1B;AACA,SAAK6K,KAAL,CAAW9K,YAAX,CAAwBC,IAAxB;AACA,QAAI,KAAKwW,UAAT,EAAqB,KAAKA,UAAL,CAAgBzW,YAAhB,CAA6BC,IAA7B;AACrB,QAAI,KAAKyW,MAAT,EAAiB;AACb,aAAKA,MAAL,CAAYC,IAAZ,CAAiB3W,YAAjB,CAA8BC,IAA9B;AACA,aAAKyW,MAAL,CAAYE,GAAZ,CAAgB5W,YAAhB,CAA6BC,IAA7B;AACA,aAAKyW,MAAL,CAAYL,MAAZ,CAAmBrW,YAAnB,CAAgCC,IAAhC;AACH;AACJ,CAVD;;AAYAmI,OAAOvI,SAAP,CAAiBK,KAAjB,GAAyB,UAAUC,QAAV,EAAoB;AACzC,SAAKgR,KAAL,CAAWjR,KAAX,CAAiBC,QAAjB;AACA,SAAK6G,OAAL,CAAa9G,KAAb,CAAmBC,QAAnB;AACA,SAAK2K,KAAL,CAAW5K,KAAX,CAAiBC,QAAjB;AACA,QAAI,KAAKsW,UAAT,EAAqB,KAAKA,UAAL,CAAgBvW,KAAhB,CAAsBC,QAAtB;AACrB,QAAI,KAAKuW,MAAT,EAAiB;AACb,aAAKA,MAAL,CAAYC,IAAZ,CAAiBzW,KAAjB,CAAuBC,QAAvB;AACA,aAAKuW,MAAL,CAAYE,GAAZ,CAAgB1W,KAAhB,CAAsBC,QAAtB;AACA,aAAKuW,MAAL,CAAYL,MAAZ,CAAmBnW,KAAnB,CAAyBC,QAAzB;AACH;AACJ,CAVD;;AAYAC,OAAOC,OAAP,GAAiB+H,MAAjB,C;;;;;;;AC/FA;;AAEA,IAAI3I,WAAW,mBAAAa,CAAQ,CAAR,CAAf;AAAA,IACIE,mBAAmB,mBAAAF,CAAQ,CAAR,CADvB;;AAGA,SAAS+H,IAAT,CAAc3I,IAAd,EAAoB;AAChB;AACA,SAAK2C,MAAL,GAAc,IAAd;;AAEA,SAAKkV,IAAL,GAAY7X,KAAK6X,IAAL,CAAU5W,MAAV,GAAmB,CAAnB,GAAuB,IAAIH,gBAAJ,CAAqBd,KAAK6X,IAA1B,CAAvB,GAAyD,IAAI9X,QAAJ,CAAaC,KAAK6X,IAAlB,CAArE;;AAEA;AACA,QAAI7X,KAAK6G,QAAT,EAAmB,KAAKA,QAAL,GAAgB7G,KAAK6G,QAAL,CAAc5F,MAAd,GAAuB,CAAvB,GAA2B,IAAIH,gBAAJ,CAAqBd,KAAK6G,QAA1B,CAA3B,GAAiE,IAAI9G,QAAJ,CAAaC,KAAK6G,QAAlB,CAAjF;AACnB,QAAI7G,KAAK8X,SAAT,EAAoB,KAAKA,SAAL,GAAiB9X,KAAK8X,SAAL,CAAe7W,MAAf,GAAwB,CAAxB,GAA4B,IAAIH,gBAAJ,CAAqBd,KAAK8X,SAA1B,CAA5B,GAAmE,IAAI/X,QAAJ,CAAaC,KAAK8X,SAAlB,CAApF;AACvB;;AAEDnP,KAAKxI,SAAL,CAAe0C,IAAf,GAAsB,UAAUC,GAAV,EAAevC,IAAf,EAAqBwC,IAArB,EAA2B;;AAE7C,QAAI8U,OAAO,KAAKA,IAAL,CAAUzX,QAAV,CAAmBG,IAAnB,CAAX;AAAA,QACIsG,WAAW,KAAKA,QAAL,GAAgB,KAAKA,QAAL,CAAczG,QAAd,CAAuBG,IAAvB,CAAhB,GAA+C,CAAC,CAAD,EAAI,CAAJ,CAD9D;AAAA,QAEIuX,YAAY,KAAKA,SAAL,GAAiB,KAAKA,SAAL,CAAe1X,QAAf,CAAwBG,IAAxB,CAAjB,GAAiD,CAFjE;;AAIA,QAAIsX,KAAK,CAAL,IAAU,IAAIC,SAAlB,EAA6BA,YAAYD,KAAK,CAAL,IAAU,CAAtB;AAC7B,QAAIA,KAAK,CAAL,IAAU,IAAIC,SAAlB,EAA6BA,YAAYD,KAAK,CAAL,IAAU,CAAtB;;AAE7B,QAAIrR,IAAIK,SAAS,CAAT,IAAcgR,KAAK,CAAL,IAAU,CAAhC;AAAA,QACIpR,IAAII,SAAS,CAAT,IAAcgR,KAAK,CAAL,IAAU,CADhC;;AAGA,QAAI9U,IAAJ,EAAU;AACN,YAAIS,EAAJ;AACAT,eAAO,KAAKK,aAAL,CAAmBL,IAAnB,CAAP;AACA;AACH,KAJD,MAIO;AACHD,YAAIY,MAAJ,CAAW8C,IAAIsR,SAAf,EAA0BrR,CAA1B;AACA3D,YAAIiV,KAAJ,CAAUvR,IAAIqR,KAAK,CAAL,CAAd,EAAuBpR,CAAvB,EAA0BD,IAAIqR,KAAK,CAAL,CAA9B,EAAuCpR,IAAIoR,KAAK,CAAL,CAA3C,EAAoDC,SAApD;AACAhV,YAAIiV,KAAJ,CAAUvR,IAAIqR,KAAK,CAAL,CAAd,EAAuBpR,IAAIoR,KAAK,CAAL,CAA3B,EAAoCrR,CAApC,EAAuCC,IAAIoR,KAAK,CAAL,CAA3C,EAAoDC,SAApD;AACAhV,YAAIiV,KAAJ,CAAUvR,CAAV,EAAaC,IAAIoR,KAAK,CAAL,CAAjB,EAA0BrR,CAA1B,EAA6BC,CAA7B,EAAgCqR,SAAhC;AACAhV,YAAIiV,KAAJ,CAAUvR,CAAV,EAAaC,CAAb,EAAgBD,IAAIqR,KAAK,CAAL,CAApB,EAA6BpR,CAA7B,EAAgCqR,SAAhC;AACH;AAEJ,CAxBD;;AA0BAnP,KAAKxI,SAAL,CAAeG,YAAf,GAA8B,UAAUC,IAAV,EAAgB;AAC1C,SAAKsX,IAAL,CAAUvX,YAAV,CAAuBC,IAAvB;AACA,QAAI,KAAKsG,QAAT,EAAmB,KAAKA,QAAL,CAAcvG,YAAd,CAA2BC,IAA3B;AACnB,QAAI,KAAKuX,SAAT,EAAoB,KAAKA,SAAL,CAAexX,YAAf,CAA4BC,IAA5B;AACvB,CAJD;;AAMAoI,KAAKxI,SAAL,CAAeK,KAAf,GAAuB,UAAUC,QAAV,EAAoB;AACvC,SAAKoX,IAAL,CAAUrX,KAAV,CAAgBC,QAAhB;AACA,QAAI,KAAKoG,QAAT,EAAmB,KAAKA,QAAL,CAAcrG,KAAd,CAAoBC,QAApB;AACnB,QAAI,KAAKqX,SAAT,EAAoB,KAAKA,SAAL,CAAetX,KAAf,CAAqBC,QAArB;AACvB,CAJD;;AAMAC,OAAOC,OAAP,GAAiBgI,IAAjB,C;;;;;;;ACtDA;;AAEA,IAAIjG,OAAO,mBAAA9B,CAAQ,CAAR,CAAX;AAAA,IACIb,WAAW,mBAAAa,CAAQ,CAAR,CADf;AAAA,IAEIE,mBAAmB,mBAAAF,CAAQ,CAAR,CAFvB;;AAIA,SAASgI,OAAT,CAAiB5I,IAAjB,EAAuB;AACnB;AACA,SAAK2C,MAAL,GAAc,IAAd;;AAEA,SAAKkV,IAAL,GAAY7X,KAAK6X,IAAL,CAAU5W,MAAV,GAAmB,CAAnB,GAAuB,IAAIH,gBAAJ,CAAqBd,KAAK6X,IAA1B,CAAvB,GAAyD,IAAI9X,QAAJ,CAAaC,KAAK6X,IAAlB,CAArE;AACA;AACA,QAAI7X,KAAK6G,QAAT,EAAmB,KAAKA,QAAL,GAAgB7G,KAAK6G,QAAL,CAAc5F,MAAd,GAAuB,CAAvB,GAA2B,IAAIH,gBAAJ,CAAqBd,KAAK6G,QAA1B,CAA3B,GAAiE,IAAI9G,QAAJ,CAAaC,KAAK6G,QAAlB,CAAjF;AACtB;;AAED+B,QAAQzI,SAAR,GAAoBe,OAAOC,MAAP,CAAcuB,KAAKvC,SAAnB,CAApB;;AAEAyI,QAAQzI,SAAR,CAAkB0C,IAAlB,GAAyB,UAAUC,GAAV,EAAevC,IAAf,EAAqBwC,IAArB,EAA2B;;AAEhD,QAAI8U,OAAO,KAAKA,IAAL,CAAUzX,QAAV,CAAmBG,IAAnB,CAAX;AACA,QAAIsG,WAAW,KAAKA,QAAL,GAAgB,KAAKA,QAAL,CAAczG,QAAd,CAAuBG,IAAvB,CAAhB,GAA+C,CAAC,CAAD,EAAI,CAAJ,CAA9D;;AAEA,QAAIkB,CAAJ,EAAO4B,CAAP;;AAEA,QAAIgS,IAAIwC,KAAK,CAAL,IAAU,CAAlB;AAAA,QACIG,IAAIH,KAAK,CAAL,IAAU,CADlB;AAAA,QAEIrR,IAAIK,SAAS,CAAT,IAAcwO,CAFtB;AAAA,QAGI5O,IAAII,SAAS,CAAT,IAAcmR,CAHtB;AAAA,QAIIC,KAAK5C,IAAI,QAJb;AAAA,QAKI6C,KAAKF,IAAI,QALb;;AAOA,QAAI/U,WAAW,CACX,CAACuD,IAAI6O,CAAJ,GAAQ4C,EAAT,EAAaxR,CAAb,EAAgBD,IAAI6O,CAAJ,GAAQ4C,EAAxB,EAA4BxR,CAA5B,EAA+BD,IAAI6O,CAAnC,EAAsC5O,CAAtC,CADW,EAEX,CAACD,IAAI6O,CAAJ,GAAQA,CAAT,EAAY5O,IAAIuR,CAAJ,GAAQE,EAApB,EAAwB1R,IAAI6O,CAAJ,GAAQA,CAAhC,EAAmC5O,IAAIuR,CAAJ,GAAQE,EAA3C,EAA+C1R,IAAI6O,CAAJ,GAAQA,CAAvD,EAA0D5O,IAAIuR,CAA9D,CAFW,EAGX,CAACxR,IAAI6O,CAAJ,GAAQ4C,EAAT,EAAaxR,IAAIuR,CAAJ,GAAQA,CAArB,EAAwBxR,IAAI6O,CAAJ,GAAQ4C,EAAhC,EAAoCxR,IAAIuR,CAAJ,GAAQA,CAA5C,EAA+CxR,IAAI6O,CAAnD,EAAsD5O,IAAIuR,CAAJ,GAAQA,CAA9D,CAHW,EAIX,CAACxR,CAAD,EAAIC,IAAIuR,CAAJ,GAAQE,EAAZ,EAAgB1R,CAAhB,EAAmBC,IAAIuR,CAAJ,GAAQE,EAA3B,EAA+B1R,CAA/B,EAAkCC,IAAIuR,CAAtC,CAJW,CAAf;;AAOA,QAAIjV,IAAJ,EAAU;AACN,YAAIS,EAAJ;AAAA,YACII,MAAMyR,IAAI2C,CADd;;AAGAjV,eAAO,KAAKK,aAAL,CAAmBL,IAAnB,CAAP;;AAEA,aAAKtB,IAAI,CAAT,EAAYA,IAAI,CAAhB,EAAmBA,GAAnB,EAAwB;AACpB4B,gBAAI5B,IAAI,CAAR;AACA,gBAAI4B,IAAI,CAAR,EAAWA,IAAI,CAAJ;AACX,gBAAI5B,IAAIsB,KAAKU,UAAT,IAAuBhC,IAAIsB,KAAKY,QAApC,EAA8C;AAC1Cb,oBAAIe,aAAJ,CAAkBZ,SAASxB,CAAT,EAAY,CAAZ,CAAlB,EAAkCwB,SAASxB,CAAT,EAAY,CAAZ,CAAlC,EAAkDwB,SAASI,CAAT,EAAY,CAAZ,CAAlD,EAAkEJ,SAASI,CAAT,EAAY,CAAZ,CAAlE,EAAkFJ,SAASI,CAAT,EAAY,CAAZ,CAAlF,EAAkGJ,SAASI,CAAT,EAAY,CAAZ,CAAlG;AACH,aAFD,MAEO,IAAI5B,MAAMsB,KAAKU,UAAX,IAAyBhC,MAAMsB,KAAKY,QAAxC,EAAkD;AACrDH,qBAAK,KAAKT,IAAL,CAAUE,SAASxB,CAAT,CAAV,EAAuBwB,SAASI,CAAT,CAAvB,EAAoCN,KAAKG,KAAzC,EAAgDH,KAAKI,GAArD,EAA0DS,GAA1D,CAAL;AACAd,oBAAIY,MAAJ,CAAWF,GAAGN,KAAH,CAAS,CAAT,CAAX,EAAwBM,GAAGN,KAAH,CAAS,CAAT,CAAxB;AACAJ,oBAAIe,aAAJ,CAAkBL,GAAGN,KAAH,CAAS,CAAT,CAAlB,EAA+BM,GAAGN,KAAH,CAAS,CAAT,CAA/B,EAA4CM,GAAGL,GAAH,CAAO,CAAP,CAA5C,EAAuDK,GAAGL,GAAH,CAAO,CAAP,CAAvD,EAAkEK,GAAGL,GAAH,CAAO,CAAP,CAAlE,EAA6EK,GAAGL,GAAH,CAAO,CAAP,CAA7E;AACH,aAJM,MAIA,IAAI1B,MAAMsB,KAAKU,UAAf,EAA2B;AAC9BD,qBAAK,KAAKT,IAAL,CAAUE,SAASxB,CAAT,CAAV,EAAuBwB,SAASI,CAAT,CAAvB,EAAoCN,KAAKG,KAAzC,EAAgD,CAAhD,EAAmDU,GAAnD,CAAL;AACAd,oBAAIY,MAAJ,CAAWF,GAAGN,KAAH,CAAS,CAAT,CAAX,EAAwBM,GAAGN,KAAH,CAAS,CAAT,CAAxB;AACAJ,oBAAIe,aAAJ,CAAkBL,GAAGN,KAAH,CAAS,CAAT,CAAlB,EAA+BM,GAAGN,KAAH,CAAS,CAAT,CAA/B,EAA4CM,GAAGL,GAAH,CAAO,CAAP,CAA5C,EAAuDK,GAAGL,GAAH,CAAO,CAAP,CAAvD,EAAkEK,GAAGL,GAAH,CAAO,CAAP,CAAlE,EAA6EK,GAAGL,GAAH,CAAO,CAAP,CAA7E;AACH,aAJM,MAIA,IAAI1B,MAAMsB,KAAKY,QAAf,EAAyB;AAC5BH,qBAAK,KAAKT,IAAL,CAAUE,SAASxB,CAAT,CAAV,EAAuBwB,SAASI,CAAT,CAAvB,EAAoC,CAApC,EAAuCN,KAAKI,GAA5C,EAAiDS,GAAjD,CAAL;AACAd,oBAAIe,aAAJ,CAAkBL,GAAGN,KAAH,CAAS,CAAT,CAAlB,EAA+BM,GAAGN,KAAH,CAAS,CAAT,CAA/B,EAA4CM,GAAGL,GAAH,CAAO,CAAP,CAA5C,EAAuDK,GAAGL,GAAH,CAAO,CAAP,CAAvD,EAAkEK,GAAGL,GAAH,CAAO,CAAP,CAAlE,EAA6EK,GAAGL,GAAH,CAAO,CAAP,CAA7E;AACH;AACJ;AACJ,KAxBD,MAwBO;AACHL,YAAIY,MAAJ,CAAWT,SAAS,CAAT,EAAY,CAAZ,CAAX,EAA2BA,SAAS,CAAT,EAAY,CAAZ,CAA3B;AACA,aAAKxB,IAAI,CAAT,EAAYA,IAAI,CAAhB,EAAmBA,GAAnB,EAAwB;AACpB4B,gBAAI5B,IAAI,CAAR;AACA,gBAAI4B,IAAI,CAAR,EAAWA,IAAI,CAAJ;AACXP,gBAAIe,aAAJ,CAAkBZ,SAASxB,CAAT,EAAY,CAAZ,CAAlB,EAAkCwB,SAASxB,CAAT,EAAY,CAAZ,CAAlC,EAAkDwB,SAASI,CAAT,EAAY,CAAZ,CAAlD,EAAkEJ,SAASI,CAAT,EAAY,CAAZ,CAAlE,EAAkFJ,SAASI,CAAT,EAAY,CAAZ,CAAlF,EAAkGJ,SAASI,CAAT,EAAY,CAAZ,CAAlG;AACH;AACJ;AACJ,CArDD;;AAuDAuF,QAAQzI,SAAR,CAAkBiD,aAAlB,GAAkC,UAAUL,IAAV,EAAgB;AAC9C,QAAIU,aAAasE,KAAKuH,KAAL,CAAWvM,KAAKG,KAAL,GAAa,CAAxB,CAAjB;AAAA,QACIS,WAAWoE,KAAKuH,KAAL,CAAWvM,KAAKI,GAAL,GAAW,CAAtB,CADf;AAAA,QAEID,QAAQ,CAACH,KAAKG,KAAL,GAAaO,aAAa,IAA3B,IAAmC,CAF/C;AAAA,QAGIN,MAAM,CAACJ,KAAKI,GAAL,GAAWQ,WAAW,IAAvB,IAA+B,CAHzC;;AAKA,WAAO;AACHF,oBAAYA,UADT;AAEHE,kBAAYA,QAFT;AAGHT,eAAYA,KAHT;AAIHC,aAAYA;AAJT,KAAP;AAMH,CAZD;;AAcAyF,QAAQzI,SAAR,CAAkBG,YAAlB,GAAiC,UAAUC,IAAV,EAAgB;AAC7C,SAAKsX,IAAL,CAAUvX,YAAV,CAAuBC,IAAvB;AACA,QAAI,KAAKsG,QAAT,EAAmB,KAAKA,QAAL,CAAcvG,YAAd,CAA2BC,IAA3B;AACtB,CAHD;;AAKAqI,QAAQzI,SAAR,CAAkBK,KAAlB,GAA0B,UAAUC,QAAV,EAAoB;AAC1C,SAAKoX,IAAL,CAAUrX,KAAV,CAAgBC,QAAhB;AACA,QAAI,KAAKoG,QAAT,EAAmB,KAAKA,QAAL,CAAcrG,KAAd,CAAoBC,QAApB;AACtB,CAHD;;AAKAC,OAAOC,OAAP,GAAiBiI,OAAjB,C;;;;;;;AChGA;;AAEA,IAAI7I,WAAW,mBAAAa,CAAQ,CAAR,CAAf;AAAA,IACIE,mBAAmB,mBAAAF,CAAQ,CAAR,CADvB;;AAGA,SAASiI,QAAT,CAAkB7I,IAAlB,EAAwB;AACpB;AACA,SAAK2C,MAAL,GAAc,IAAd,CAFoB,CAEA;;AAEpB,SAAKwV,QAAL,GAAgBnY,KAAKmY,QAArB;AACA,SAAKC,MAAL,GAAcpY,KAAKoY,MAAL,CAAYnX,MAAZ,GAAqB,CAArB,GAAyB,IAAIH,gBAAJ,CAAqBd,KAAKoY,MAA1B,CAAzB,GAA6D,IAAIrY,QAAJ,CAAaC,KAAKoY,MAAlB,CAA3E;AACA,SAAKC,WAAL,GAAmBrY,KAAKqY,WAAL,CAAiBpX,MAAjB,GAA0B,CAA1B,GAA8B,IAAIH,gBAAJ,CAAqBd,KAAKqY,WAA1B,CAA9B,GAAuE,IAAItY,QAAJ,CAAaC,KAAKqY,WAAlB,CAA1F;AACA,SAAKC,WAAL,GAAmBtY,KAAKsY,WAAL,CAAiBrX,MAAjB,GAA0B,CAA1B,GAA8B,IAAIH,gBAAJ,CAAqBd,KAAKsY,WAA1B,CAA9B,GAAuE,IAAIvY,QAAJ,CAAaC,KAAKsY,WAAlB,CAA1F;;AAEA;AACA,QAAItY,KAAK6G,QAAT,EAAmB,KAAKA,QAAL,GAAgB7G,KAAK6G,QAAL,CAAc5F,MAAd,GAAuB,CAAvB,GAA2B,IAAIH,gBAAJ,CAAqBd,KAAK6G,QAA1B,CAA3B,GAAiE,IAAI9G,QAAJ,CAAaC,KAAK6G,QAAlB,CAAjF;AACnB,QAAI7G,KAAKqH,QAAT,EAAmB,KAAKA,QAAL,GAAgBrH,KAAKqH,QAAL,CAAcpG,MAAd,GAAuB,CAAvB,GAA2B,IAAIH,gBAAJ,CAAqBd,KAAKqH,QAA1B,CAA3B,GAAiE,IAAItH,QAAJ,CAAaC,KAAKqH,QAAlB,CAAjF;AACnB,QAAIrH,KAAKuY,cAAT,EAAyB,KAAKA,cAAL,GAAsBvY,KAAKuY,cAAL,CAAoBtX,MAApB,GAA6B,CAA7B,GAAiC,IAAIH,gBAAJ,CAAqBd,KAAKuY,cAA1B,CAAjC,GAA6E,IAAIxY,QAAJ,CAAaC,KAAKuY,cAAlB,CAAnG;AACzB,QAAIvY,KAAKwY,cAAT,EAAyB,KAAKA,cAAL,GAAsBxY,KAAKwY,cAAL,CAAoBvX,MAApB,GAA6B,CAA7B,GAAiC,IAAIH,gBAAJ,CAAqBd,KAAKwY,cAA1B,CAAjC,GAA6E,IAAIzY,QAAJ,CAAaC,KAAKwY,cAAlB,CAAnG;AAC5B;;AAED3P,SAAS1I,SAAT,CAAmB0C,IAAnB,GAA0B,UAAUC,GAAV,EAAevC,IAAf,EAAqB;;AAE3C,QAAI6X,SAAS,KAAKA,MAAL,CAAYhY,QAAZ,CAAqBG,IAArB,CAAb;AAAA,QACI8X,cAAc,KAAKA,WAAL,CAAiBjY,QAAjB,CAA0BG,IAA1B,CADlB;AAAA,QAEI+X,cAAc,KAAKA,WAAL,CAAiBlY,QAAjB,CAA0BG,IAA1B,CAFlB;AAAA,QAGIsG,WAAW,KAAKA,QAAL,GAAgB,KAAKA,QAAL,CAAczG,QAAd,CAAuBG,IAAvB,CAAhB,GAA+C,CAAC,CAAD,EAAI,CAAJ,CAH9D;AAAA,QAII8G,WAAW,KAAKA,QAAL,GAAgB,KAAKA,QAAL,CAAcjH,QAAd,CAAuBG,IAAvB,CAAhB,GAA+C,CAJ9D;AAAA,QAKIgY,iBAAiB,KAAKA,cAAL,GAAsB,KAAKA,cAAL,CAAoBnY,QAApB,CAA6BG,IAA7B,CAAtB,GAA2D,CALhF;AAAA,QAMIiY,iBAAiB,KAAKA,cAAL,GAAsB,KAAKA,cAAL,CAAoBpY,QAApB,CAA6BG,IAA7B,CAAtB,GAA2D,CANhF;;AAQA8G,eAAW,KAAKG,OAAL,CAAaH,QAAb,CAAX;AACA,QAAInE,QAAQ,KAAKuV,WAAL,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0B,IAAIH,WAA9B,EAA2CjR,QAA3C,CAAZ;;AAEAvE,QAAI6H,IAAJ;AACA7H,QAAIyI,SAAJ;AACAzI,QAAI4V,SAAJ,CAAc7R,SAAS,CAAT,CAAd,EAA2BA,SAAS,CAAT,CAA3B;AACA/D,QAAIY,MAAJ,CAAWR,MAAM,CAAN,CAAX,EAAqBA,MAAM,CAAN,CAArB;;AAEA,SAAK,IAAIzB,IAAI,CAAb,EAAgBA,IAAI2W,MAApB,EAA4B3W,GAA5B,EAAiC;;AAE7B,YAAIkX,MAAJ,EACIC,MADJ,EAEIC,cAFJ,EAGIC,cAHJ,EAIIC,cAJJ,EAKIC,cALJ,EAMIC,WANJ,EAOIC,WAPJ,EAQIC,GARJ;;AAUAA,cAAMpR,KAAKU,EAAL,GAAU2P,MAAV,GAAmB,CAAzB;;AAEAO,iBAAS,KAAKF,WAAL,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0B,IAAIJ,WAA9B,EAA4Cc,OAAO1X,IAAI,CAAX,IAAgB0X,MAAM,CAAvB,GAA4B9R,QAAvE,CAAT;AACAuR,iBAAS,KAAKH,WAAL,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0B,IAAIH,WAA9B,EAA4Ca,OAAO1X,IAAI,CAAX,CAAD,GAAkB4F,QAA7D,CAAT;;AAEA;AACA,YAAI,CAAC4R,WAAL,EAAkBA,cAAc,CAAC/V,MAAM,CAAN,IAAWyV,OAAO,CAAP,CAAZ,IAAyBH,cAAzB,GAA0C,GAA1C,GAAgD,QAA9D;AAClB,YAAI,CAACU,WAAL,EAAkBA,cAAc,CAAChW,MAAM,CAAN,IAAWyV,OAAO,CAAP,CAAZ,IAAyBJ,cAAzB,GAA0C,GAA1C,GAAgD,QAA9D;;AAElBM,yBAAiB,KAAKJ,WAAL,CAAiB,CAAjB,EAAoB,CAApB,EAAuBQ,WAAvB,EAAoC,IAAIX,WAAxC,EAAsDa,MAAM1X,CAAP,GAAY4F,QAAjE,CAAjB;AACA0R,yBAAiB,KAAKN,WAAL,CAAiB,CAAjB,EAAoB,CAApB,EAAuBS,cAAc,CAAC,CAAtC,EAAyC,IAAIb,WAA7C,EAA2Dc,OAAO1X,IAAI,CAAX,IAAgB0X,MAAM,CAAvB,GAA4B9R,QAAtF,CAAjB;AACA2R,yBAAiB,KAAKP,WAAL,CAAiB,CAAjB,EAAoB,CAApB,EAAuBS,WAAvB,EAAoC,IAAIb,WAAxC,EAAsDc,OAAO1X,IAAI,CAAX,IAAgB0X,MAAM,CAAvB,GAA4B9R,QAAjF,CAAjB;AACAyR,yBAAiB,KAAKL,WAAL,CAAiB,CAAjB,EAAoB,CAApB,EAAuBQ,cAAc,CAAC,CAAtC,EAAyC,IAAIX,WAA7C,EAA2Da,OAAO1X,IAAI,CAAX,CAAD,GAAkB4F,QAA5E,CAAjB;;AAEA,YAAI,KAAK8Q,QAAL,KAAkB,CAAtB,EAAyB;AACrB;AACArV,gBAAIe,aAAJ,CAAkBgV,eAAe,CAAf,CAAlB,EAAqCA,eAAe,CAAf,CAArC,EAAwDE,eAAe,CAAf,CAAxD,EAA2EA,eAAe,CAAf,CAA3E,EAA8FJ,OAAO,CAAP,CAA9F,EAAyGA,OAAO,CAAP,CAAzG;AACA7V,gBAAIe,aAAJ,CAAkBmV,eAAe,CAAf,CAAlB,EAAqCA,eAAe,CAAf,CAArC,EAAwDF,eAAe,CAAf,CAAxD,EAA2EA,eAAe,CAAf,CAA3E,EAA8FF,OAAO,CAAP,CAA9F,EAAyGA,OAAO,CAAP,CAAzG;AACH,SAJD,MAIO;AACH;AACA9V,gBAAIe,aAAJ,CAAkBgV,eAAe,CAAf,CAAlB,EAAqCA,eAAe,CAAf,CAArC,EAAwDC,eAAe,CAAf,CAAxD,EAA2EA,eAAe,CAAf,CAA3E,EAA8FF,OAAO,CAAP,CAA9F,EAAyGA,OAAO,CAAP,CAAzG;AACH;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEH;;AAED9V,QAAIwI,OAAJ;AACH,CArED;;AAuEAzC,SAAS1I,SAAT,CAAmBsY,WAAnB,GAAiC,UAAUW,EAAV,EAAcC,EAAd,EAAkB7S,CAAlB,EAAqBC,CAArB,EAAwB6S,OAAxB,EAAiC;AAC9D,QAAItR,MAAMD,KAAKC,GAAL,CAASsR,OAAT,CAAV;AAAA,QACIrR,MAAMF,KAAKE,GAAL,CAASqR,OAAT,CADV;AAAA,QAEIC,KAAMvR,OAAOxB,IAAI4S,EAAX,CAAD,GAAoBnR,OAAOxB,IAAI4S,EAAX,CAApB,GAAsCD,EAF/C;AAAA,QAGII,KAAMvR,OAAOzB,IAAI4S,EAAX,CAAD,GAAoBpR,OAAOvB,IAAI4S,EAAX,CAApB,GAAsCA,EAH/C;AAIA,WAAO,CAACE,EAAD,EAAKC,EAAL,CAAP;AACH,CAND;;AAQA3Q,SAAS1I,SAAT,CAAmBqH,OAAnB,GAA6B,UAAUgB,GAAV,EAAe;AACxC,WAAOA,OAAOT,KAAKU,EAAL,GAAU,GAAjB,CAAP;AACH,CAFD;;AAIAI,SAAS1I,SAAT,CAAmBG,YAAnB,GAAkC,UAAUC,IAAV,EAAgB;AAC9C,SAAK6X,MAAL,CAAY9X,YAAZ,CAAyBC,IAAzB;AACA,SAAK8X,WAAL,CAAiB/X,YAAjB,CAA8BC,IAA9B;AACA,SAAK+X,WAAL,CAAiBhY,YAAjB,CAA8BC,IAA9B;AACA,QAAI,KAAKsG,QAAT,EAAmB,KAAKA,QAAL,CAAcvG,YAAd,CAA2BC,IAA3B;AACnB,QAAI,KAAK8G,QAAT,EAAmB,KAAKA,QAAL,CAAc/G,YAAd,CAA2BC,IAA3B;AACnB,QAAI,KAAKgY,cAAT,EAAyB,KAAKA,cAAL,CAAoBjY,YAApB,CAAiCC,IAAjC;AACzB,QAAI,KAAKiY,cAAT,EAAyB,KAAKA,cAAL,CAAoBlY,YAApB,CAAiCC,IAAjC;AAC5B,CARD;;AAUAsI,SAAS1I,SAAT,CAAmBK,KAAnB,GAA2B,UAAUC,QAAV,EAAoB;AAC3C,SAAK2X,MAAL,CAAY5X,KAAZ,CAAkBC,QAAlB;AACA,SAAK4X,WAAL,CAAiB7X,KAAjB,CAAuBC,QAAvB;AACA,SAAK6X,WAAL,CAAiB9X,KAAjB,CAAuBC,QAAvB;AACA,QAAI,KAAKoG,QAAT,EAAmB,KAAKA,QAAL,CAAcrG,KAAd,CAAoBC,QAApB;AACnB,QAAI,KAAK4G,QAAT,EAAmB,KAAKA,QAAL,CAAc7G,KAAd,CAAoBC,QAApB;AACnB,QAAI,KAAK8X,cAAT,EAAyB,KAAKA,cAAL,CAAoB/X,KAApB,CAA0BC,QAA1B;AACzB,QAAI,KAAK+X,cAAT,EAAyB,KAAKA,cAAL,CAAoBhY,KAApB,CAA0BC,QAA1B;AAC5B,CARD;;AAUAC,OAAOC,OAAP,GAAiBkI,QAAjB,C;;;;;;;AC5HA;;AAEA,IAAI9I,WAAW,mBAAAa,CAAQ,CAAR,CAAf;AAAA,IACIE,mBAAmB,mBAAAF,CAAQ,CAAR,CADvB;;AAGA,SAASkI,IAAT,CAAc9I,IAAd,EAAoB;AAChB,SAAKyR,KAAL,GAAazR,KAAKyR,KAAL,CAAWxQ,MAAX,GAAoB,CAApB,GAAwB,IAAIH,gBAAJ,CAAqBd,KAAKyR,KAA1B,CAAxB,GAA2D,IAAI1R,QAAJ,CAAaC,KAAKyR,KAAlB,CAAxE;AACA,QAAIzR,KAAKsH,OAAT,EAAkB,KAAKA,OAAL,GAAetH,KAAKsH,OAAL,CAAarG,MAAb,GAAsB,CAAtB,GAA0B,IAAIH,gBAAJ,CAAqBd,KAAKsH,OAA1B,CAA1B,GAA+D,IAAIvH,QAAJ,CAAaC,KAAKsH,OAAlB,CAA9E;AACrB;;AAEDwB,KAAK3I,SAAL,CAAeC,QAAf,GAA0B,UAAUG,IAAV,EAAgB;AACtC,QAAIkR,QAAQ,KAAKA,KAAL,CAAWrR,QAAX,CAAoBG,IAApB,CAAZ;AACA,QAAI+G,UAAU,KAAKA,OAAL,GAAe,KAAKA,OAAL,CAAalH,QAAb,CAAsBG,IAAtB,CAAf,GAA6C,CAA3D;AACA,WAAO,UAAUwH,KAAKoP,KAAL,CAAW1F,MAAM,CAAN,CAAX,CAAV,GAAiC,IAAjC,GAAwC1J,KAAKoP,KAAL,CAAW1F,MAAM,CAAN,CAAX,CAAxC,GAA+D,IAA/D,GAAsE1J,KAAKoP,KAAL,CAAW1F,MAAM,CAAN,CAAX,CAAtE,GAA6F,IAA7F,GAAoGnK,OAApG,GAA8G,GAArH;AACH,CAJD;;AAMAwB,KAAK3I,SAAL,CAAe2K,QAAf,GAA0B,UAAUhI,GAAV,EAAevC,IAAf,EAAqB;AAC3C,QAAIkR,QAAQ,KAAKrR,QAAL,CAAcG,IAAd,CAAZ;AACAuC,QAAI8O,SAAJ,GAAgBH,KAAhB;AACH,CAHD;;AAKA3I,KAAK3I,SAAL,CAAeG,YAAf,GAA8B,UAAUC,IAAV,EAAgB;AAC1C,SAAKkR,KAAL,CAAWnR,YAAX,CAAwBC,IAAxB;AACA,QAAI,KAAK+G,OAAT,EAAkB,KAAKA,OAAL,CAAahH,YAAb,CAA0BC,IAA1B;AACrB,CAHD;;AAKAuI,KAAK3I,SAAL,CAAeK,KAAf,GAAuB,UAAUC,QAAV,EAAoB;AACvC,SAAKgR,KAAL,CAAWjR,KAAX,CAAiBC,QAAjB;AACA,QAAI,KAAK6G,OAAT,EAAkB,KAAKA,OAAL,CAAa9G,KAAb,CAAmBC,QAAnB;AACrB,CAHD;;AAKAC,OAAOC,OAAP,GAAiBmI,IAAjB,C;;;;;;;AC/BA;;AAEA,IAAI/I,WAAW,mBAAAa,CAAQ,CAAR,CAAf;AAAA,IACIE,mBAAmB,mBAAAF,CAAQ,CAAR,CADvB;;AAGA,SAASmI,YAAT,CAAsB/I,IAAtB,EAA4BsJ,SAA5B,EAAuC;AACnC,QAAI,CAACA,UAAUtJ,KAAKyV,IAAf,CAAL,EAA2BnM,UAAUtJ,KAAKyV,IAAf,IAAuB,EAAvB;AAC3BnM,cAAUtJ,KAAKyV,IAAf,EAAqB/O,IAArB,CAA0B,IAA1B;;AAEA,SAAKgP,KAAL,GAAa1V,KAAK0V,KAAlB;AACA,SAAKxL,IAAL,GAAYlK,KAAKkK,IAAjB;AACA,SAAKuP,UAAL,GAAkBzZ,KAAKyZ,UAAL,CAAgBxY,MAAhB,GAAyB,CAAzB,GAA6B,IAAIH,gBAAJ,CAAqBd,KAAKyZ,UAA1B,CAA7B,GAAqE,IAAI1Z,QAAJ,CAAaC,KAAKyZ,UAAlB,CAAvF;AACA,SAAKC,QAAL,GAAgB1Z,KAAK0Z,QAAL,CAAczY,MAAd,GAAuB,CAAvB,GAA2B,IAAIH,gBAAJ,CAAqBd,KAAK0Z,QAA1B,CAA3B,GAAiE,IAAI3Z,QAAJ,CAAaC,KAAK0Z,QAAlB,CAAjF;AACA,QAAI1Z,KAAKsH,OAAT,EAAkB,KAAKA,OAAL,GAAetH,KAAKsH,OAAL,CAAarG,MAAb,GAAsB,CAAtB,GAA0B,IAAIH,gBAAJ,CAAqBd,KAAKsH,OAA1B,CAA1B,GAA+D,IAAIvH,QAAJ,CAAaC,KAAKsH,OAAlB,CAA9E;AACrB;;AAEDyB,aAAa5I,SAAb,CAAuB2K,QAAvB,GAAkC,UAAUhI,GAAV,EAAevC,IAAf,EAAqB;AACnD,QAAIkZ,aAAa,KAAKA,UAAL,CAAgBrZ,QAAhB,CAAyBG,IAAzB,CAAjB;AACA,QAAImZ,WAAW,KAAKA,QAAL,CAActZ,QAAd,CAAuBG,IAAvB,CAAf;AACA,QAAIoZ,SAAS,CAAb;;AAEA,QAAI,KAAKzP,IAAL,KAAc,QAAlB,EAA4B;AACxB,YAAI0P,QAAQH,WAAW,CAAX,IAAgBC,SAAS,CAAT,CAA5B;AACA,YAAIG,QAAQJ,WAAW,CAAX,IAAgBC,SAAS,CAAT,CAA5B;AACAC,iBAAS5R,KAAK8H,IAAL,CAAU+J,QAAQA,KAAR,GAAgBC,QAAQA,KAAlC,CAAT;AACH;;AAED,QAAIjE,WAAW,KAAK1L,IAAL,KAAc,QAAd,GACXpH,IAAIgX,oBAAJ,CAAyBL,WAAW,CAAX,CAAzB,EAAwCA,WAAW,CAAX,CAAxC,EAAuD,CAAvD,EAA0DA,WAAW,CAAX,CAA1D,EAAyEA,WAAW,CAAX,CAAzE,EAAwFE,MAAxF,CADW,GAEX7W,IAAIiX,oBAAJ,CAAyBN,WAAW,CAAX,CAAzB,EAAwCA,WAAW,CAAX,CAAxC,EAAuDC,SAAS,CAAT,CAAvD,EAAoEA,SAAS,CAAT,CAApE,CAFJ;;AAIA,QAAIpS,UAAU,KAAKA,OAAL,GAAe,KAAKA,OAAL,CAAalH,QAAb,CAAsBG,IAAtB,CAAf,GAA6C,CAA3D;;AAEA,SAAK,IAAIkB,IAAI,CAAb,EAAgBA,IAAI,KAAKiU,KAAL,CAAWzU,MAA/B,EAAuCQ,GAAvC,EAA4C;AACxC,YAAIqS,OAAO,KAAK4B,KAAL,CAAWjU,CAAX,CAAX;AACA,YAAIgQ,QAAQqC,KAAKrC,KAAjB;AACAmE,iBAASoE,YAAT,CAAsBlG,KAAKmG,QAA3B,EAAqC,UAAUxI,MAAM,CAAN,CAAV,GAAqB,IAArB,GAA4BA,MAAM,CAAN,CAA5B,GAAuC,IAAvC,GAA8CA,MAAM,CAAN,CAA9C,GAAyD,IAAzD,GAAgEA,MAAM,CAAN,IAAWnK,OAA3E,GAAqF,GAA1H;AACH;;AAEDxE,QAAI8O,SAAJ,GAAgBgE,QAAhB;AACH,CAxBD;;AA0BA7M,aAAa5I,SAAb,CAAuBG,YAAvB,GAAsC,UAAUC,IAAV,EAAgB;AAClD,QAAI,KAAK+G,OAAT,EAAkB,KAAKA,OAAL,CAAahH,YAAb,CAA0BC,IAA1B;AAClB,SAAKkZ,UAAL,CAAgBnZ,YAAhB,CAA6BC,IAA7B;AACA,SAAKmZ,QAAL,CAAcpZ,YAAd,CAA2BC,IAA3B;AACH,CAJD;;AAMAwI,aAAa5I,SAAb,CAAuBK,KAAvB,GAA+B,UAAUC,QAAV,EAAoB;AAC/C,QAAI,KAAK6G,OAAT,EAAkB,KAAKA,OAAL,CAAahH,YAAb,CAA0BG,QAA1B;AAClB,SAAKgZ,UAAL,CAAgBnZ,YAAhB,CAA6BG,QAA7B;AACA,SAAKiZ,QAAL,CAAcpZ,YAAd,CAA2BG,QAA3B;AACH,CAJD;;AAMAC,OAAOC,OAAP,GAAiBoI,YAAjB,C;;;;;;;ACtDA;;AAEA,IAAItG,SAAS,mBAAA7B,CAAQ,CAAR,CAAb;AAAA,IACIE,mBAAmB,mBAAAF,CAAQ,CAAR,CADvB;;AAGA,SAAS+F,QAAT,CAAkB3G,IAAlB,EAAwB;AACpBc,qBAAiBC,IAAjB,CAAsB,IAAtB,EAA4Bf,IAA5B;AACH;;AAED2G,SAASxG,SAAT,GAAqBe,OAAOC,MAAP,CAAcL,iBAAiBX,SAA/B,CAArB;;AAEAwG,SAASxG,SAAT,CAAmBgC,gBAAnB,GAAsC,YAAY;AAC9C,SAAKT,SAAL;AACA,SAAKwY,aAAL;AACH,CAHD;;AAKAvT,SAASxG,SAAT,CAAmBiC,cAAnB,GAAoC,UAAU7B,IAAV,EAAgB;AAChD,QAAI,KAAK4Z,UAAT,EAAqB;AACjB,eAAO,KAAKA,UAAL,CAAgBhK,SAAhB,CAA0B,KAAK9N,UAAL,CAAgB9B,IAAhB,CAA1B,CAAP;AACH,KAFD,MAEO;AACH,eAAO,KAAKa,IAAL,CAAU,KAAKU,SAAL,CAAezB,CAAzB,EAA4B,KAAKsB,SAAL,CAAetB,CAA3C,EAA8C,KAAKgC,UAAL,CAAgB9B,IAAhB,CAA9C,CAAP;AACH;AACJ,CAND;;AAQAoG,SAASxG,SAAT,CAAmB+Z,aAAnB,GAAmC,YAAY;AAC3C,QAAI,KAAKpY,SAAL,CAAeqY,UAAnB,EAA+B;AAC3B,aAAKA,UAAL,GAAkB,IAAI1X,MAAJ,CAAW,KAAKX,SAAL,CAAeqY,UAA1B,CAAlB;AACA,aAAKA,UAAL,CAAgB3V,SAAhB,CAA0B,KAAK1C,SAAL,CAAe8B,GAAzC;AACH,KAHD,MAGO;AACH,aAAKuW,UAAL,GAAkB,IAAlB;AACH;AACJ,CAPD;;AASAzZ,OAAOC,OAAP,GAAiBgG,QAAjB,C;;;;;;;ACjCA;;AAEA,SAASqC,KAAT,CAAehJ,IAAf,EAAqB;AACjB,SAAKkK,IAAL,GAAYlK,KAAKkK,IAAjB;AACH;;AAEDlB,MAAM7I,SAAN,CAAgByL,qBAAhB,GAAwC,UAAU9I,GAAV,EAAe;AACnD,YAAQ,KAAKoH,IAAb;AACI,aAAK,CAAL;AACIpH,gBAAIsX,wBAAJ,GAA+B,aAA/B;AACA;AACJ,aAAK,CAAL;AACItX,gBAAIsX,wBAAJ,GAA+B,YAA/B;AACA;AACJ,aAAK,CAAL;AACItX,gBAAIsX,wBAAJ,GAA+B,WAA/B;AACA;AACJ,aAAK,CAAL;AACItX,gBAAIsX,wBAAJ,GAA+B,KAA/B;AACA;AACJ;AACItX,gBAAIsX,wBAAJ,GAA+B,aAA/B;AAdR;AAgBH,CAjBD;;AAmBA1Z,OAAOC,OAAP,GAAiBqI,KAAjB,C;;;;;;;ACzBA;;AAEA,IAAIjJ,WAAW,mBAAAa,CAAQ,CAAR,CAAf;AAAA,IACIE,mBAAmB,mBAAAF,CAAQ,CAAR,CADvB;;AAGA,SAASqI,IAAT,CAAcjJ,IAAd,EAAoB;;AAEhB,SAAKkK,IAAL,GAAYlK,KAAKkK,IAAjB;;AAEA,QAAIlK,KAAKkD,KAAT,EAAgB,KAAKA,KAAL,GAAalD,KAAKkD,KAAL,CAAWjC,MAAX,GAAoB,CAApB,GAAwB,IAAIH,gBAAJ,CAAqBd,KAAKkD,KAA1B,CAAxB,GAA2D,IAAInD,QAAJ,CAAaC,KAAKkD,KAAlB,CAAxE;AAChB,QAAIlD,KAAKmD,GAAT,EAAc,KAAKA,GAAL,GAAWnD,KAAKmD,GAAL,CAASlC,MAAT,GAAkB,CAAlB,GAAsB,IAAIH,gBAAJ,CAAqBd,KAAKmD,GAA1B,CAAtB,GAAuD,IAAIpD,QAAJ,CAAaC,KAAKmD,GAAlB,CAAlE;AACd;AAEH;;AAED8F,KAAK9I,SAAL,CAAe0K,OAAf,GAAyB,UAAUtK,IAAV,EAAgB;AACrC,QAAI2C,QAAQ,KAAKA,KAAL,GAAa,KAAKA,KAAL,CAAW9C,QAAX,CAAoBG,IAApB,CAAb,GAAyC,CAArD;AAAA,QACI4C,MAAM,KAAKA,GAAL,GAAW,KAAKA,GAAL,CAAS/C,QAAT,CAAkBG,IAAlB,CAAX,GAAqC,CAD/C;;AAGA,QAAIwC,OAAO;AACPG,eAAO6E,KAAKsS,GAAL,CAASnX,KAAT,EAAgBC,GAAhB,CADA;AAEPA,aAAK4E,KAAKsH,GAAL,CAASnM,KAAT,EAAgBC,GAAhB;AAFE,KAAX;;AAKA,QAAIJ,KAAKG,KAAL,KAAe,CAAf,IAAoBH,KAAKI,GAAL,KAAa,CAArC,EAAwC;AACpC,eAAO,IAAP;AACH,KAFD,MAEO;AACH,eAAOJ,IAAP;AACH;AACJ,CAdD;;AAgBAkG,KAAK9I,SAAL,CAAeG,YAAf,GAA8B,UAAUC,IAAV,EAAgB;AAC1C,QAAI,KAAK2C,KAAT,EAAgB,KAAKA,KAAL,CAAW5C,YAAX,CAAwBC,IAAxB;AAChB,QAAI,KAAK4C,GAAT,EAAc,KAAKA,GAAL,CAAS7C,YAAT,CAAsBC,IAAtB;AACd;AACH,CAJD;;AAMA0I,KAAK9I,SAAL,CAAeK,KAAf,GAAuB,UAAUC,QAAV,EAAoB;AACvC,QAAI,KAAKyC,KAAT,EAAgB,KAAKA,KAAL,CAAW1C,KAAX,CAAiBC,QAAjB;AAChB,QAAI,KAAK0C,GAAT,EAAc,KAAKA,GAAL,CAAS3C,KAAT,CAAeC,QAAf;AACd;AACH,CAJD;;AAMAC,OAAOC,OAAP,GAAiBsI,IAAjB,C;;;;;;;AC3CA;;AAEA,IAAIvG,OAAO,mBAAA9B,CAAQ,CAAR,CAAX;AACA,IAAIqF,eAAe,mBAAArF,CAAQ,CAAR,CAAnB;AACA,IAAIgG,YAAY,mBAAAhG,CAAQ,CAAR,CAAhB;AACA,IAAI4P,aAAa,mBAAA5P,CAAQ,CAAR,CAAjB;AACA,IAAIuQ,YAAY,mBAAAvQ,CAAQ,CAAR,CAAhB;AACA,IAAIsI,QAAQ,mBAAAtI,CAAQ,CAAR,CAAZ;;AAEA,SAASkR,IAAT,CAAc9R,IAAd,EAAoBmJ,SAApB,EAA+BC,QAA/B,EAAyCC,SAAzC,EAAoD+H,QAApD,EAA8D9H,SAA9D,EAAyE0J,aAAzE,EAAwF;AACpF,SAAKzJ,KAAL,GAAavJ,KAAKuJ,KAAlB;AACA,SAAKC,EAAL,GAAUxJ,KAAKwJ,EAAL,GAAUxJ,KAAKwJ,EAAf,GAAoBJ,QAA9B;AACA,SAAKK,GAAL,GAAWzJ,KAAKyJ,GAAL,GAAWzJ,KAAKyJ,GAAhB,GAAsBJ,SAAjC;;AAEA,QAAIrJ,KAAK0J,MAAT,EAAiB,KAAKA,MAAL,GAAc1J,KAAK0J,MAAnB;;AAEjB,SAAKnC,SAAL,GAAiB,IAAIX,SAAJ,CAAc5G,KAAKuH,SAAnB,CAAjB;;AAEA,QAAIvH,KAAKoK,KAAT,EAAgB;AACZ,aAAKA,KAAL,GAAa,EAAb;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIrK,KAAKoK,KAAL,CAAWnJ,MAA/B,EAAuCoJ,GAAvC,EAA4C;AACxC,gBAAIC,OAAOtK,KAAKoK,KAAL,CAAWC,CAAX,CAAX;AACA,gBAAIC,KAAKH,UAAT,EAAqB,KAAKC,KAAL,CAAW1D,IAAX,CAAgB,IAAIT,YAAJ,CAAiBqE,IAAjB,CAAhB,EAArB,KACK,KAAKF,KAAL,CAAW1D,IAAX,CAAgB,IAAIhE,IAAJ,CAAS4H,IAAT,CAAhB;AACR;AACJ;;AAED,SAAKgJ,MAAL,GAAc,EAAd;AACA,SAAK,IAAI7R,IAAI,CAAb,EAAgBA,IAAIzB,KAAKsT,MAAL,CAAYrS,MAAhC,EAAwCQ,GAAxC,EAA6C;AACzC,YAAIzB,KAAKsT,MAAL,CAAY7R,CAAZ,EAAeyI,IAAf,KAAwB,QAA5B,EAAsC;AAClC,iBAAKoJ,MAAL,CAAY5M,IAAZ,CAAiB,IAAIwC,KAAJ,CAAUlJ,KAAKsT,MAAL,CAAY7R,CAAZ,CAAV,EAA0B0H,SAA1B,EAAqC,CAArC,EAAwC,KAAK5G,QAA7C,EAAuD+G,SAAvD,CAAjB;AACH,SAFD,MAEO,IAAItJ,KAAKsT,MAAL,CAAY7R,CAAZ,EAAeyI,IAAf,KAAwB,OAA5B,EAAqC;AACxC,iBAAKoJ,MAAL,CAAY5M,IAAZ,CAAiB,IAAI8J,UAAJ,CAAexQ,KAAKsT,MAAL,CAAY7R,CAAZ,CAAf,EAA+B,CAA/B,EAAkC,KAAKc,QAAvC,EAAiDyQ,aAAjD,CAAjB;AACH,SAFM,MAEA,IAAIhT,KAAKsT,MAAL,CAAY7R,CAAZ,EAAeyI,IAAf,KAAwB,MAA5B,EAAoC;AACvC,iBAAKoJ,MAAL,CAAY5M,IAAZ,CAAiB,IAAIyK,SAAJ,CAAcnR,KAAKsT,MAAL,CAAY7R,CAAZ,CAAd,EAA8B,CAA9B,EAAiC,KAAKc,QAAtC,EAAgD6O,QAAhD,CAAjB;AACH,SAFM,MAEA,IAAIpR,KAAKsT,MAAL,CAAY7R,CAAZ,EAAeyI,IAAf,KAAwB,MAA5B,EAAoC;AACvC,iBAAKoJ,MAAL,CAAY5M,IAAZ,CAAiB,IAAIoL,IAAJ,CAAS9R,KAAKsT,MAAL,CAAY7R,CAAZ,CAAT,EAAyB0H,SAAzB,EAAoC,CAApC,EAAuC,KAAK5G,QAA5C,EAAsD,KAAK6O,QAA3D,EAAqE9H,SAArE,EAAgF0J,aAAhF,EAA+F5B,QAA/F,CAAjB;AACH;AACJ;AACD,SAAKmC,SAAL,GAAiB,KAAKD,MAAL,CAAYrS,MAA7B;AACH;;AAED6Q,KAAK3R,SAAL,CAAe0C,IAAf,GAAsB,UAAUC,GAAV,EAAevC,IAAf,EAAqB;;AAEvCuC,QAAI6H,IAAJ;;AAEA,QAAIlJ,CAAJ;;AAEA,QAAI,KAAKiI,MAAT,EAAiB,KAAKA,MAAL,CAAYsB,kBAAZ,CAA+BlI,GAA/B,EAAoCvC,IAApC;AACjB,SAAKgH,SAAL,CAAeA,SAAf,CAAyBzE,GAAzB,EAA8BvC,IAA9B;;AAEA,QAAI,KAAK6J,KAAT,EAAgB;AACZtH,YAAIyI,SAAJ;AACA,aAAK9J,IAAI,CAAT,EAAYA,IAAI,KAAK2I,KAAL,CAAWnJ,MAA3B,EAAmCQ,GAAnC,EAAwC;AACpC,iBAAK2I,KAAL,CAAW3I,CAAX,EAAcoB,IAAd,CAAmBC,GAAnB,EAAwBvC,IAAxB;AACH;AACDuC,YAAI0I,IAAJ;AACH;;AAED,QAAI8O,eAAe/Z,OAAO,KAAKiJ,EAA/B;AACA,SAAK/H,IAAI,CAAT,EAAYA,IAAI,KAAK8R,SAArB,EAAgC9R,GAAhC,EAAqC;AACjC,YAAI6Y,gBAAgB,KAAKhH,MAAL,CAAY7R,CAAZ,EAAe+H,EAA/B,IAAqC8Q,gBAAgB,KAAKhH,MAAL,CAAY7R,CAAZ,EAAegI,GAAxE,EAA6E;AACzE,iBAAK6J,MAAL,CAAY7R,CAAZ,EAAeoB,IAAf,CAAoBC,GAApB,EAAyBwX,YAAzB;AACH;AACJ;;AAEDxX,QAAIwI,OAAJ;AAEH,CA1BD;;AA4BAwG,KAAK3R,SAAL,CAAe6K,kBAAf,GAAoC,UAAUlI,GAAV,EAAevC,IAAf,EAAqB;AACrD,QAAI,KAAKmJ,MAAT,EAAiB,KAAKA,MAAL,CAAYsB,kBAAZ,CAA+BlI,GAA/B,EAAoCvC,IAApC;AACjB,SAAKgH,SAAL,CAAeA,SAAf,CAAyBzE,GAAzB,EAA8BvC,IAA9B;AACA,SAAK,IAAIkB,IAAI,CAAb,EAAgBA,IAAI,KAAK8R,SAAzB,EAAoC9R,GAApC,EAAyC;AACrC,aAAK6R,MAAL,CAAY7R,CAAZ,EAAeuJ,kBAAf,CAAkClI,GAAlC,EAAuCvC,IAAvC;AACH;AACJ,CAND;;AAQAuR,KAAK3R,SAAL,CAAeG,YAAf,GAA8B,UAAUC,IAAV,EAAgB;AAC1C,SAAKgH,SAAL,CAAejH,YAAf,CAA4BC,IAA5B;AACA,SAAK,IAAIkB,IAAI,CAAb,EAAgBA,IAAI,KAAK8R,SAAzB,EAAoC9R,GAApC,EAAyC;AACrC,aAAK6R,MAAL,CAAY7R,CAAZ,EAAenB,YAAf,CAA4BC,IAA5B;AACH;AACJ,CALD;;AAOAuR,KAAK3R,SAAL,CAAeK,KAAf,GAAuB,UAAUC,QAAV,EAAoB;AACvC,SAAK8G,SAAL,CAAe/G,KAAf,CAAqBC,QAArB;AACA,SAAK,IAAIgB,IAAI,CAAb,EAAgBA,IAAI,KAAK8R,SAAzB,EAAoC9R,GAApC,EAAyC;AACrC,aAAK6R,MAAL,CAAY7R,CAAZ,EAAejB,KAAf,CAAqB,KAAKC,QAA1B;AACH;AACJ,CALD;;AAOAC,OAAOC,OAAP,GAAiBmR,IAAjB,C","file":"ae2canvas.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AE2Canvas\"] = factory();\n\telse\n\t\troot[\"AE2Canvas\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap abcadb1baa364bb82d19","'use strict';\r\n\r\nfunction Property(data) {\r\n    if (!(data instanceof Array)) return null;\r\n    this.frames = data;\r\n}\r\n\r\nProperty.prototype.getValue = function () {\r\n    return this.frames[0].v;\r\n};\r\n\r\nProperty.prototype.setKeyframes = function (time) {\r\n};\r\n\r\nProperty.prototype.reset = function (reversed) {\r\n};\r\n\r\nmodule.exports = Property;\n\n\n// WEBPACK FOOTER //\n// ./src/runtime/Property.js","'use strict';\r\n\r\nvar Property = require('./Property'),\r\n    BezierEasing = require('./BezierEasing');\r\n\r\nfunction AnimatedProperty(data) {\r\n    Property.call(this, data);\r\n    this.frameCount = this.frames.length;\r\n}\r\n\r\nAnimatedProperty.prototype = Object.create(Property.prototype);\r\n\r\nAnimatedProperty.prototype.lerp = function (a, b, t) {\r\n    if (a instanceof Array) {\r\n        var arr = [];\r\n        for (var i = 0; i < a.length; i++) {\r\n            arr[i] = a[i] + t * (b[i] - a[i]);\r\n        }\r\n        return arr;\r\n    } else {\r\n        return a + t * (b - a);\r\n    }\r\n};\r\n\r\nAnimatedProperty.prototype.setEasing = function () {\r\n    if (this.nextFrame.easeIn) {\r\n        this.easing = new BezierEasing(this.lastFrame.easeOut[0], this.lastFrame.easeOut[1], this.nextFrame.easeIn[0], this.nextFrame.easeIn[1]);\r\n    } else {\r\n        this.easing = null;\r\n    }\r\n};\r\n\r\nAnimatedProperty.prototype.getValue = function (time) {\r\n    if (this.finished && time >= this.nextFrame.t) {\r\n        return this.nextFrame.v;\r\n    } else if (!this.started && time <= this.lastFrame.t) {\r\n        return this.lastFrame.v;\r\n    } else {\r\n        this.started = true;\r\n        this.finished = false;\r\n        if (time > this.nextFrame.t) {\r\n            if (this.pointer + 1 === this.frameCount) {\r\n                this.finished = true;\r\n            } else {\r\n                this.pointer++;\r\n                this.lastFrame = this.frames[this.pointer - 1];\r\n                this.nextFrame = this.frames[this.pointer];\r\n                this.onKeyframeChange();\r\n            }\r\n        } else if (time < this.lastFrame.t) {\r\n            if (this.pointer < 2) {\r\n                this.started = false;\r\n            } else {\r\n                this.pointer--;\r\n                this.lastFrame = this.frames[this.pointer - 1];\r\n                this.nextFrame = this.frames[this.pointer];\r\n                this.onKeyframeChange();\r\n            }\r\n        }\r\n        return this.getValueAtTime(time);\r\n    }\r\n};\r\n\r\nAnimatedProperty.prototype.setKeyframes = function (time) {\r\n    //console.log(time, this.frames[this.frameCount - 2].t, this.frames[this.frameCount - 1].t);\r\n\r\n    if (time < this.frames[0].t) {\r\n        this.pointer = 1;\r\n        this.nextFrame = this.frames[this.pointer];\r\n        this.lastFrame = this.frames[this.pointer - 1];\r\n        this.onKeyframeChange();\r\n        return;\r\n    }\r\n\r\n    if (time > this.frames[this.frameCount - 1].t) {\r\n        this.pointer = this.frameCount - 1;\r\n        this.nextFrame = this.frames[this.pointer];\r\n        this.lastFrame = this.frames[this.pointer - 1];\r\n        this.onKeyframeChange();\r\n        return;\r\n    }\r\n\r\n    for (var i = 1; i < this.frameCount; i++) {\r\n        if (time >= this.frames[i - 1].t && time <= this.frames[i].t) {\r\n            this.pointer = i;\r\n            this.lastFrame = this.frames[i - 1];\r\n            this.nextFrame = this.frames[i];\r\n            this.onKeyframeChange();\r\n            return;\r\n        }\r\n    }\r\n};\r\n\r\nAnimatedProperty.prototype.onKeyframeChange = function () {\r\n    this.setEasing();\r\n};\r\n\r\nAnimatedProperty.prototype.getElapsed = function (time) {\r\n    var delta = ( time - this.lastFrame.t ),\r\n        duration = this.nextFrame.t - this.lastFrame.t,\r\n        elapsed = delta / duration;\r\n\r\n    if (elapsed > 1) elapsed = 1;\r\n    else if (elapsed < 0) elapsed = 0;\r\n    else if (this.easing) elapsed = this.easing(elapsed);\r\n    return elapsed;\r\n};\r\n\r\nAnimatedProperty.prototype.getValueAtTime = function (time) {\r\n    return this.lerp(this.lastFrame.v, this.nextFrame.v, this.getElapsed(time));\r\n};\r\n\r\nAnimatedProperty.prototype.reset = function (reversed) {\r\n    this.finished = false;\r\n    this.started = false;\r\n    this.pointer = reversed ? this.frameCount - 1 : 1;\r\n    this.nextFrame = this.frames[this.pointer];\r\n    this.lastFrame = this.frames[this.pointer - 1];\r\n    this.onKeyframeChange();\r\n};\r\n\r\nmodule.exports = AnimatedProperty;\n\n\n// WEBPACK FOOTER //\n// ./src/runtime/AnimatedProperty.js","'use strict';\r\n\r\nvar Bezier = require('./Bezier');\r\n\r\nfunction Path(data) {\r\n    //this.name = data.name;\r\n    this.closed = data.closed;\r\n    this.frames = data.frames;\r\n    this.verticesCount = this.frames[0].v.length;\r\n}\r\n\r\nPath.prototype.draw = function (ctx, time, trim) {\r\n    var frame = this.getValue(time),\r\n        vertices = frame.v;\r\n\r\n    if (trim) {\r\n        if ((trim.start === 0 && trim.end === 0) ||\r\n            (trim.start === 1 && trim.end === 1)) {\r\n            return;\r\n        } else {\r\n            trim = this.getTrimValues(trim, frame);\r\n        }\r\n    }\r\n\r\n    for (var j = 1; j < vertices.length; j++) {\r\n\r\n        var nextVertex = vertices[j],\r\n            lastVertex = vertices[j - 1];\r\n\r\n        if (trim) {\r\n            var tv;\r\n\r\n            if (j === 1 && trim.startIndex !== 0) {\r\n                ctx.moveTo(lastVertex[4], lastVertex[5]);\r\n            }\r\n            else if (j === trim.startIndex + 1 && j === trim.endIndex + 1) {\r\n                tv = this.trim(lastVertex, nextVertex, trim.start, trim.end, frame.len[j - 1]);\r\n                ctx.moveTo(tv.start[4], tv.start[5]);\r\n                ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5]);\r\n            } else if (j === trim.startIndex + 1) {\r\n                tv = this.trim(lastVertex, nextVertex, trim.start, 1, frame.len[j - 1]);\r\n                ctx.moveTo(tv.start[4], tv.start[5]);\r\n                ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5]);\r\n            } else if (j === trim.endIndex + 1) {\r\n                tv = this.trim(lastVertex, nextVertex, 0, trim.end, frame.len[j - 1]);\r\n                ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5]);\r\n            } else if (j > trim.startIndex + 1 && j < trim.endIndex + 1) {\r\n                ctx.bezierCurveTo(lastVertex[0], lastVertex[1], nextVertex[2], nextVertex[3], nextVertex[4], nextVertex[5]);\r\n            }\r\n        } else {\r\n            if (j === 1) {\r\n                ctx.moveTo(lastVertex[4], lastVertex[5]);\r\n            }\r\n            ctx.bezierCurveTo(lastVertex[0], lastVertex[1], nextVertex[2], nextVertex[3], nextVertex[4], nextVertex[5]);\r\n        }\r\n    }\r\n\r\n    if (!trim && this.closed) {\r\n        if (!nextVertex) debugger;\r\n        ctx.bezierCurveTo(nextVertex[0], nextVertex[1], vertices[0][2], vertices[0][3], vertices[0][4], vertices[0][5]);\r\n    }\r\n};\r\n\r\nPath.prototype.getValue = function () {\r\n    return this.frames[0];\r\n};\r\n\r\nPath.prototype.getTrimValues = function (trim, frame) {\r\n    var i;\r\n\r\n    var actualTrim = {\r\n        startIndex: 0,\r\n        endIndex: 0,\r\n        start: 0,\r\n        end: 0\r\n    };\r\n\r\n// TODO clean up\r\n    if (trim.start === 0) {\r\n        if (trim.end === 0) {\r\n            return actualTrim;\r\n        } else if (trim.end === 1) {\r\n            actualTrim.endIndex = frame.len.length;\r\n            actualTrim.end = 1;\r\n            return actualTrim;\r\n        }\r\n    }\r\n\r\n    var totalLen = this.sumArray(frame.len),\r\n        trimAtLen;\r\n\r\n    trimAtLen = totalLen * trim.start;\r\n\r\n    for (i = 0; i < frame.len.length; i++) {\r\n        if (trimAtLen > 0 && trimAtLen < frame.len[i]) {\r\n            actualTrim.startIndex = i;\r\n            actualTrim.start = trimAtLen / frame.len[i];\r\n        }\r\n        trimAtLen -= frame.len[i];\r\n    }\r\n\r\n    if (trim.end === 1) {\r\n        actualTrim.endIndex = frame.len.length;\r\n        actualTrim.end = 1;\r\n        return actualTrim;\r\n    } else {\r\n        trimAtLen = totalLen * trim.end;\r\n\r\n        for (i = 0; i < frame.len.length; i++) {\r\n            if (trimAtLen > 0 && trimAtLen < frame.len[i]) {\r\n                actualTrim.endIndex = i;\r\n                actualTrim.end = trimAtLen / frame.len[i];\r\n            }\r\n            trimAtLen -= frame.len[i];\r\n        }\r\n    }\r\n\r\n    return actualTrim;\r\n};\r\n\r\nPath.prototype.trim = function (lastVertex, nextVertex, from, to, len) {\r\n\r\n    if (from === 0 && to === 1) {\r\n        return {\r\n            start: lastVertex,\r\n            end: nextVertex\r\n        };\r\n    }\r\n\r\n    if (this.isStraight(lastVertex[4], lastVertex[5], lastVertex[0], lastVertex[1], nextVertex[2], nextVertex[3], nextVertex[4], nextVertex[5])) {\r\n        startVertex = [\r\n            this.lerp(lastVertex[0], nextVertex[0], from),\r\n            this.lerp(lastVertex[1], nextVertex[1], from),\r\n            this.lerp(lastVertex[2], nextVertex[2], from),\r\n            this.lerp(lastVertex[3], nextVertex[3], from),\r\n            this.lerp(lastVertex[4], nextVertex[4], from),\r\n            this.lerp(lastVertex[5], nextVertex[5], from)\r\n        ];\r\n\r\n        endVertex = [\r\n            this.lerp(lastVertex[0], nextVertex[0], to),\r\n            this.lerp(lastVertex[1], nextVertex[1], to),\r\n            this.lerp(lastVertex[2], nextVertex[2], to),\r\n            this.lerp(lastVertex[3], nextVertex[3], to),\r\n            this.lerp(lastVertex[4], nextVertex[4], to),\r\n            this.lerp(lastVertex[5], nextVertex[5], to)\r\n        ];\r\n\r\n    } else {\r\n        this.bezier = new Bezier([lastVertex[4], lastVertex[5], lastVertex[0], lastVertex[1], nextVertex[2], nextVertex[3], nextVertex[4], nextVertex[5]]);\r\n        this.bezier.getLength(len);\r\n        from = this.bezier.map(from);\r\n        to = this.bezier.map(to);\r\n        to = (to - from) / (1 - from);\r\n\r\n        var e1, f1, g1, h1, j1, k1,\r\n            e2, f2, g2, h2, j2, k2,\r\n            startVertex,\r\n            endVertex;\r\n\r\n        e1 = [this.lerp(lastVertex[4], lastVertex[0], from), this.lerp(lastVertex[5], lastVertex[1], from)];\r\n        f1 = [this.lerp(lastVertex[0], nextVertex[2], from), this.lerp(lastVertex[1], nextVertex[3], from)];\r\n        g1 = [this.lerp(nextVertex[2], nextVertex[4], from), this.lerp(nextVertex[3], nextVertex[5], from)];\r\n        h1 = [this.lerp(e1[0], f1[0], from), this.lerp(e1[1], f1[1], from)];\r\n        j1 = [this.lerp(f1[0], g1[0], from), this.lerp(f1[1], g1[1], from)];\r\n        k1 = [this.lerp(h1[0], j1[0], from), this.lerp(h1[1], j1[1], from)];\r\n\r\n        startVertex = [j1[0], j1[1], h1[0], h1[1], k1[0], k1[1]];\r\n        endVertex = [nextVertex[0], nextVertex[1], g1[0], g1[1], nextVertex[4], nextVertex[5]];\r\n\r\n        e2 = [this.lerp(startVertex[4], startVertex[0], to), this.lerp(startVertex[5], startVertex[1], to)];\r\n        f2 = [this.lerp(startVertex[0], endVertex[2], to), this.lerp(startVertex[1], endVertex[3], to)];\r\n        g2 = [this.lerp(endVertex[2], endVertex[4], to), this.lerp(endVertex[3], endVertex[5], to)];\r\n\r\n        h2 = [this.lerp(e2[0], f2[0], to), this.lerp(e2[1], f2[1], to)];\r\n        j2 = [this.lerp(f2[0], g2[0], to), this.lerp(f2[1], g2[1], to)];\r\n        k2 = [this.lerp(h2[0], j2[0], to), this.lerp(h2[1], j2[1], to)];\r\n\r\n        startVertex = [e2[0], e2[1], startVertex[2], startVertex[3], startVertex[4], startVertex[5]];\r\n        endVertex = [j2[0], j2[1], h2[0], h2[1], k2[0], k2[1]];\r\n\r\n    }\r\n\r\n    return {\r\n        start: startVertex,\r\n        end: endVertex\r\n    };\r\n};\r\n\r\nPath.prototype.lerp = function (a, b, t) {\r\n    var s = 1 - t;\r\n    return a * s + b * t;\r\n};\r\n\r\nPath.prototype.sumArray = function (arr) {\r\n    function add(a, b) {\r\n        return a + b;\r\n    }\r\n\r\n    return arr.reduce(add);\r\n};\r\n\r\nPath.prototype.isStraight = function (startX, startY, ctrl1X, ctrl1Y, ctrl2X, ctrl2Y, endX, endY) {\r\n    return startX === ctrl1X && startY === ctrl1Y && endX === ctrl2X && endY === ctrl2Y;\r\n};\r\n\r\nPath.prototype.setKeyframes = function (time) {\r\n};\r\n\r\nPath.prototype.reset = function (reversed) {\r\n};\r\n\r\nmodule.exports = Path;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/runtime/Path.js","'use strict';\r\n\r\nvar Path = require('./Path'),\r\n    BezierEasing = require('./BezierEasing');\r\n\r\nfunction AnimatedPath(data) {\r\n    Path.call(this, data);\r\n    this.frameCount = this.frames.length;\r\n}\r\n\r\nAnimatedPath.prototype = Object.create(Path.prototype);\r\n\r\nAnimatedPath.prototype.getValue = function (time) {\r\n    if (this.finished && time >= this.nextFrame.t) {\r\n        return this.nextFrame;\r\n    } else if (!this.started && time <= this.lastFrame.t) {\r\n        return this.lastFrame;\r\n    } else {\r\n        this.started = true;\r\n        this.finished = false;\r\n        if (time > this.nextFrame.t) {\r\n            if (this.pointer + 1 === this.frameCount) {\r\n                this.finished = true;\r\n            } else {\r\n                this.pointer++;\r\n                this.lastFrame = this.frames[this.pointer - 1];\r\n                this.nextFrame = this.frames[this.pointer];\r\n                this.onKeyframeChange();\r\n            }\r\n        } else if (time < this.lastFrame.t) {\r\n            if (this.pointer < 2) {\r\n                this.started = false;\r\n            } else {\r\n                this.pointer--;\r\n                this.lastFrame = this.frames[this.pointer - 1];\r\n                this.nextFrame = this.frames[this.pointer];\r\n                this.onKeyframeChange();\r\n            }\r\n        }\r\n        return this.getValueAtTime(time);\r\n    }\r\n};\r\n\r\nAnimatedPath.prototype.setKeyframes = function (time) {\r\n    if (time < this.frames[0].t) {\r\n        this.pointer = 1;\r\n        this.nextFrame = this.frames[this.pointer];\r\n        this.lastFrame = this.frames[this.pointer - 1];\r\n        this.onKeyframeChange();\r\n        return;\r\n    }\r\n\r\n    if (time > this.frames[this.frameCount - 1].t) {\r\n        this.pointer = this.frameCount - 1;\r\n        this.nextFrame = this.frames[this.pointer];\r\n        this.lastFrame = this.frames[this.pointer - 1];\r\n        this.onKeyframeChange();\r\n        return;\r\n    }\r\n\r\n    for (var i = 1; i < this.frameCount; i++) {\r\n        if (time >= this.frames[i - 1].t && time <= this.frames[i]) {\r\n            this.pointer = i;\r\n            this.lastFrame = this.frames[i - 1];\r\n            this.nextFrame = this.frames[i];\r\n            this.onKeyframeChange();\r\n            return;\r\n        }\r\n    }\r\n};\r\n\r\nAnimatedPath.prototype.onKeyframeChange = function () {\r\n    this.setEasing();\r\n};\r\n\r\nAnimatedPath.prototype.lerp = function (a, b, t) {\r\n    return a + t * (b - a);\r\n};\r\n\r\nAnimatedPath.prototype.setEasing = function () {\r\n    if (this.lastFrame.easeOut && this.nextFrame.easeIn) {\r\n        this.easing = new BezierEasing(this.lastFrame.easeOut[0], this.lastFrame.easeOut[1], this.nextFrame.easeIn[0], this.nextFrame.easeIn[1]);\r\n    } else {\r\n        this.easing = null;\r\n    }\r\n};\r\n\r\nAnimatedPath.prototype.getValueAtTime = function (time) {\r\n    var delta = ( time - this.lastFrame.t );\r\n    var duration = this.nextFrame.t - this.lastFrame.t;\r\n    var elapsed = delta / duration;\r\n    if (elapsed > 1) elapsed = 1;\r\n    else if (elapsed < 0) elapsed = 0;\r\n    else if (this.easing) elapsed = this.easing(elapsed);\r\n    var actualVertices = [],\r\n        actualLength = [];\r\n\r\n    for (var i = 0; i < this.verticesCount; i++) {\r\n        var cp1x = this.lerp(this.lastFrame.v[i][0], this.nextFrame.v[i][0], elapsed),\r\n            cp1y = this.lerp(this.lastFrame.v[i][1], this.nextFrame.v[i][1], elapsed),\r\n            cp2x = this.lerp(this.lastFrame.v[i][2], this.nextFrame.v[i][2], elapsed),\r\n            cp2y = this.lerp(this.lastFrame.v[i][3], this.nextFrame.v[i][3], elapsed),\r\n            x = this.lerp(this.lastFrame.v[i][4], this.nextFrame.v[i][4], elapsed),\r\n            y = this.lerp(this.lastFrame.v[i][5], this.nextFrame.v[i][5], elapsed);\r\n\r\n        actualVertices.push([cp1x, cp1y, cp2x, cp2y, x, y]);\r\n    }\r\n\r\n    for (var j = 0; j < this.verticesCount - 1; j++) {\r\n        actualLength.push(this.lerp(this.lastFrame.len[j], this.nextFrame.len[j], elapsed));\r\n    }\r\n\r\n    return {\r\n        v  : actualVertices,\r\n        len: actualLength\r\n    }\r\n};\r\n\r\nAnimatedPath.prototype.reset = function (reversed) {\r\n    this.finished = false;\r\n    this.started = false;\r\n    this.pointer = reversed ? this.frameCount - 1 : 1;\r\n    this.nextFrame = this.frames[this.pointer];\r\n    this.lastFrame = this.frames[this.pointer - 1];\r\n    this.onKeyframeChange();\r\n};\r\n\r\nmodule.exports = AnimatedPath;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/runtime/AnimatedPath.js","'use strict';\r\n\r\nvar Property = require('./Property'),\r\n    AnimatedProperty = require('./AnimatedProperty'),\r\n    Position = require('./Position');\r\n\r\nfunction Transform(data) {\r\n    if (!data) return;\r\n\r\n    //this.name = data.name;\r\n\r\n    if (data.position) {\r\n        if (data.position.length > 1) {\r\n            this.position = new Position(data.position);\r\n        } else {\r\n            this.position = new Property(data.position);\r\n        }\r\n    }\r\n\r\n    if (data.positionX) this.positionX = data.positionX.length > 1 ? new AnimatedProperty(data.positionX) : new Property(data.positionX);\r\n    if (data.positionY) this.positionY = data.positionY.length > 1 ? new AnimatedProperty(data.positionY) : new Property(data.positionY);\r\n    if (data.anchor) this.anchor = data.anchor.length > 1 ? new AnimatedProperty(data.anchor) : new Property(data.anchor);\r\n    if (data.scaleX) this.scaleX = data.scaleX.length > 1 ? new AnimatedProperty(data.scaleX) : new Property(data.scaleX);\r\n    if (data.scaleY) this.scaleY = data.scaleY.length > 1 ? new AnimatedProperty(data.scaleY) : new Property(data.scaleY);\r\n    if (data.skew) this.skew = data.skew.length > 1 ? new AnimatedProperty(data.skew) : new Property(data.skew);\r\n    if (data.skewAxis) this.skewAxis = data.skewAxis.length > 1 ? new AnimatedProperty(data.skewAxis) : new Property(data.skewAxis);\r\n    if (data.rotation) this.rotation = data.rotation.length > 1 ? new AnimatedProperty(data.rotation) : new Property(data.rotation);\r\n    if (data.opacity) this.opacity = data.opacity.length > 1 ? new AnimatedProperty(data.opacity) : new Property(data.opacity);\r\n}\r\n\r\nTransform.prototype.transform = function (ctx, time) {\r\n\r\n    var positionX, positionY,\r\n        anchor = this.anchor ? this.anchor.getValue(time) : [0, 0],\r\n        rotation = this.rotation ? this.deg2rad(this.rotation.getValue(time)) : 0,\r\n        skew = this.skew ? this.deg2rad(this.skew.getValue(time)) : 0,\r\n        skewAxis = this.skewAxis ? this.deg2rad(this.skewAxis.getValue(time)) : 0,\r\n        scaleX = this.scaleX ? this.scaleX.getValue(time) : 1,\r\n        scaleY = this.scaleY ? this.scaleY.getValue(time) : 1,\r\n        opacity = this.opacity ? this.opacity.getValue(time) * ctx.globalAlpha : ctx.globalAlpha; // FIXME wrong transparency if nested\r\n\r\n    if (this.position) {\r\n        var position = this.position.getValue(time, ctx);\r\n        positionX = position[0];\r\n        positionY = position[1];\r\n    } else {\r\n        positionX = this.positionX ? this.positionX.getValue(time) : 0;\r\n        positionY = this.positionY ? this.positionY.getValue(time) : 0;\r\n    }\r\n\r\n    // console.log(ctx, positionX, positionY, anchor, rotation, skew, skewAxis, scaleX, scaleY, opacity);\r\n\r\n    //order very very important :)\r\n    ctx.transform(1, 0, 0, 1, positionX - anchor[0], positionY - anchor[1]);\r\n    this.setRotation(ctx, rotation, anchor[0], anchor[1]);\r\n    this.setSkew(ctx, skew, skewAxis, anchor[0], anchor[1]);\r\n    this.setScale(ctx, scaleX, scaleY, anchor[0], anchor[1]);\r\n    ctx.globalAlpha = opacity;\r\n};\r\n\r\nTransform.prototype.setRotation = function (ctx, rad, x, y) {\r\n    var c = Math.cos(rad);\r\n    var s = Math.sin(rad);\r\n    var dx = x - c * x + s * y;\r\n    var dy = y - s * x - c * y;\r\n    ctx.transform(c, s, -s, c, dx, dy);\r\n};\r\n\r\nTransform.prototype.setScale = function (ctx, sx, sy, x, y) {\r\n    ctx.transform(sx, 0, 0, sy, -x * sx + x, -y * sy + y);\r\n};\r\n\r\nTransform.prototype.setSkew = function (ctx, skew, axis, x, y) {\r\n    var t = Math.tan(-skew);\r\n    this.setRotation(ctx, -axis, x, y);\r\n    ctx.transform(1, 0, t, 1, -y * t, 0);\r\n    this.setRotation(ctx, axis, x, y);\r\n};\r\n\r\nTransform.prototype.deg2rad = function (deg) {\r\n    return deg * (Math.PI / 180);\r\n};\r\n\r\nTransform.prototype.setKeyframes = function (time) {\r\n    if (this.anchor) this.anchor.setKeyframes(time);\r\n    if (this.rotation) this.rotation.setKeyframes(time);\r\n    if (this.skew) this.skew.setKeyframes(time);\r\n    if (this.skewAxis) this.skewAxis.setKeyframes(time);\r\n    if (this.position) this.position.setKeyframes(time);\r\n    if (this.positionX) this.positionX.setKeyframes(time);\r\n    if (this.positionY) this.positionY.setKeyframes(time);\r\n    if (this.scaleX) this.scaleX.setKeyframes(time);\r\n    if (this.scaleY) this.scaleY.setKeyframes(time);\r\n    if (this.opacity) this.opacity.setKeyframes(time);\r\n};\r\n\r\nTransform.prototype.reset = function (reversed) {\r\n    if (this.anchor) this.anchor.reset(reversed);\r\n    if (this.rotation) this.rotation.reset(reversed);\r\n    if (this.skew) this.skew.reset(reversed);\r\n    if (this.skewAxis) this.skewAxis.reset(reversed);\r\n    if (this.position) this.position.reset(reversed);\r\n    if (this.positionX) this.positionX.reset(reversed);\r\n    if (this.positionY) this.positionY.reset(reversed);\r\n    if (this.scaleX) this.scaleX.reset(reversed);\r\n    if (this.scaleY) this.scaleY.reset(reversed);\r\n    if (this.opacity) this.opacity.reset(reversed);\r\n};\r\n\r\nmodule.exports = Transform;\n\n\n// WEBPACK FOOTER //\n// ./src/runtime/Transform.js","'use strict';\r\n\r\nvar Stroke = require('./Stroke'),\r\n    Path = require('./Path'),\r\n    Rect = require('./Rect'),\r\n    Ellipse = require('./Ellipse'),\r\n    Polystar = require('./Polystar'),\r\n    AnimatedPath = require('./AnimatedPath'),\r\n    Fill = require('./Fill'),\r\n    GradientFill = require('./GradientFill'),\r\n    Transform = require('./Transform'),\r\n    Merge = require('./Merge'),\r\n    Trim = require('./Trim');\r\n\r\nfunction Group(data, bufferCtx, parentIn, parentOut, gradients) {\r\n\r\n    this.index = data.index;\r\n    this.in = data.in ? data.in : parentIn;\r\n    this.out = data.out ? data.out : parentOut;\r\n\r\n    if (data.parent) this.parent = data.parent;\r\n    if (data.fill) this.fill = new Fill(data.fill);\r\n    if (data.gradientFill) this.fill = new GradientFill(data.gradientFill, gradients);\r\n    if (data.stroke) this.stroke = new Stroke(data.stroke);\r\n    if (data.trim) this.trim = new Trim(data.trim);\r\n    if (data.merge) this.merge = new Merge(data.merge);\r\n\r\n    this.transform = new Transform(data.transform);\r\n    this.bufferCtx = bufferCtx;\r\n\r\n    if (data.groups) {\r\n        this.groups = [];\r\n        for (var i = 0; i < data.groups.length; i++) {\r\n            this.groups.push(new Group(data.groups[i], this.bufferCtx, this.in, this.out, gradients));\r\n        }\r\n    }\r\n\r\n    if (data.shapes) {\r\n        this.shapes = [];\r\n        for (var j = 0; j < data.shapes.length; j++) {\r\n            var shape = data.shapes[j];\r\n            if (shape.type === 'path') {\r\n                if (shape.isAnimated) this.shapes.push(new AnimatedPath(shape));\r\n                else this.shapes.push(new Path(shape));\r\n            } else if (shape.type === 'rect') {\r\n                this.shapes.push(new Rect(shape));\r\n            } else if (shape.type === 'ellipse') {\r\n                this.shapes.push(new Ellipse(shape));\r\n            } else if (shape.type === 'polystar') {\r\n                this.shapes.push(new Polystar(shape));\r\n            }\r\n        }\r\n    }\r\n\r\n    if (data.masks) {\r\n        this.masks = [];\r\n        for (var k = 0; k < data.masks.length; k++) {\r\n            var mask = data.masks[k];\r\n            if (mask.isAnimated) this.masks.push(new AnimatedPath(mask));\r\n            else this.masks.push(new Path(mask));\r\n        }\r\n    }\r\n}\r\n\r\nGroup.prototype.draw = function (ctx, time, parentFill, parentStroke, parentTrim, isBuffer) {\r\n\r\n    if (this.transform.opacity && this.transform.opacity.getValue(time) === 0) return;\r\n\r\n    var i;\r\n\r\n    ctx.save();\r\n    this.bufferCtx.save();\r\n\r\n    //TODO check if color/stroke is changing over time\r\n    var fill = this.fill || parentFill;\r\n    var stroke = this.stroke || parentStroke;\r\n    var trimValues = this.trim ? this.trim.getTrim(time) : parentTrim;\r\n\r\n    if (fill) fill.setColor(ctx, time);\r\n    if (stroke) stroke.setStroke(ctx, time);\r\n\r\n    if (!isBuffer) {\r\n        if (this.parent) this.parent.setParentTransform(ctx, time);\r\n        this.transform.transform(ctx, time);\r\n    }\r\n    this.transform.transform(this.bufferCtx, time);\r\n\r\n    if (this.merge) {\r\n        this.bufferCtx.save();\r\n        this.bufferCtx.setTransform(1, 0, 0, 1, 0, 0);\r\n        this.bufferCtx.clearRect(0, 0, this.bufferCtx.canvas.width, this.bufferCtx.canvas.height);\r\n        this.bufferCtx.restore();\r\n\r\n        if (fill) fill.setColor(this.bufferCtx, time);\r\n        if (stroke) stroke.setStroke(this.bufferCtx, time);\r\n    }\r\n\r\n    if (this.masks) {\r\n        ctx.beginPath();\r\n        for (i = 0; i < this.masks.length; i++) {\r\n            this.masks[i].draw(ctx, time);\r\n        }\r\n        ctx.clip();\r\n    }\r\n\r\n    ctx.beginPath();\r\n    if (this.shapes) this.drawShapes(ctx, time, fill, stroke, trimValues);\r\n\r\n    //TODO get order\r\n    if (fill) ctx.fill();\r\n    if (!isBuffer && stroke) ctx.stroke();\r\n\r\n    if (this.groups) this.drawGroups(ctx, time, fill, stroke, trimValues);\r\n\r\n    ctx.restore();\r\n    this.bufferCtx.restore();\r\n};\r\n\r\nGroup.prototype.drawShapes = function (ctx, time, fill, stroke, trimValues) {\r\n    var i;\r\n    if (this.merge) {\r\n        for (i = 0; i < this.shapes.length; i++) {\r\n            this.shapes[i].draw(this.bufferCtx, time, trimValues);\r\n            this.bufferCtx.closePath();\r\n            if (fill) this.bufferCtx.fill();\r\n            if (stroke) this.bufferCtx.stroke();\r\n            this.bufferCtx.beginPath();\r\n            this.merge.setCompositeOperation(this.bufferCtx);\r\n        }\r\n\r\n        ctx.restore();\r\n        ctx.save();\r\n        ctx.setTransform(1, 0, 0, 1, 0, 0);\r\n        ctx.drawImage(this.bufferCtx.canvas, 0, 0);\r\n        ctx.restore();\r\n\r\n    } else {\r\n        for (i = 0; i < this.shapes.length; i++) {\r\n            this.shapes[i].draw(ctx, time, trimValues);\r\n        }\r\n        if (this.shapes[this.shapes.length - 1].closed) {\r\n            ctx.closePath();\r\n        }\r\n    }\r\n};\r\n\r\n\r\nGroup.prototype.drawGroups = function (ctx, time, fill, stroke, trimValues) {\r\n    console.log(time);\r\n    var i;\r\n    if (this.merge) {\r\n        for (i = 0; i < this.groups.length; i++) {\r\n            if (time >= this.groups[i].in && time <= this.groups[i].out) {\r\n                this.groups[i].draw(this.bufferCtx, time, fill, stroke, trimValues, true);\r\n                this.merge.setCompositeOperation(this.bufferCtx);\r\n            } else if (time > this.groups[i].out) {\r\n                console.log('draw end');\r\n                this.groups[i].draw(this.bufferCtx, this.groups[i].out, fill, stroke, trimValues, true);\r\n            }\r\n        }\r\n        ctx.save();\r\n        ctx.setTransform(1, 0, 0, 1, 0, 0);\r\n        ctx.drawImage(this.bufferCtx.canvas, 0, 0);\r\n        ctx.restore();\r\n        this.bufferCtx.restore();\r\n    }\r\n    else {\r\n        for (i = 0; i < this.groups.length; i++) {\r\n            if (time >= this.groups[i].in && time <= this.groups[i].out) {\r\n                this.groups[i].draw(ctx, time, fill, stroke, trimValues, false);\r\n            } else if (time > this.groups[i].out) {\r\n                this.groups[i].draw(this.bufferCtx, this.groups[i].out, fill, stroke, trimValues, true);\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nGroup.prototype.setParentTransform = function (ctx, time) {\r\n    if (this.parent) this.parent.setParentTransform(ctx, time);\r\n    this.transform.transform(ctx, time);\r\n};\r\n\r\nGroup.prototype.setKeyframes = function (time) {\r\n    this.transform.setKeyframes(time);\r\n\r\n    if (this.shapes) {\r\n        for (var i = 0; i < this.shapes.length; i++) {\r\n            this.shapes[i].setKeyframes(time);\r\n        }\r\n    }\r\n    if (this.masks) {\r\n        for (var j = 0; j < this.masks.length; j++) {\r\n            this.masks[j].setKeyframes(time);\r\n        }\r\n    }\r\n    if (this.groups) {\r\n        for (var k = 0; k < this.groups.length; k++) {\r\n            this.groups[k].setKeyframes(time);\r\n        }\r\n    }\r\n\r\n    if (this.fill) this.fill.setKeyframes(time);\r\n    if (this.stroke) this.stroke.setKeyframes(time);\r\n    if (this.trim) this.trim.setKeyframes(time);\r\n};\r\n\r\nGroup.prototype.reset = function (reversed) {\r\n    this.transform.reset(reversed);\r\n\r\n    if (this.shapes) {\r\n        for (var i = 0; i < this.shapes.length; i++) {\r\n            this.shapes[i].reset(reversed);\r\n        }\r\n    }\r\n    if (this.masks) {\r\n        for (var j = 0; j < this.masks.length; j++) {\r\n            this.masks[j].reset(reversed);\r\n        }\r\n    }\r\n    if (this.groups) {\r\n        for (var k = 0; k < this.groups.length; k++) {\r\n            this.groups[k].reset(reversed);\r\n        }\r\n    }\r\n    if (this.fill) this.fill.reset(reversed);\r\n    if (this.stroke) this.stroke.reset(reversed);\r\n    if (this.trim) this.trim.reset(reversed);\r\n};\r\n\r\nmodule.exports = Group;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/runtime/Group.js","/**\r\n * BezierEasing - use bezier curve for transition easing function\r\n * is based on Firefox's nsSMILKeySpline.cpp\r\n * Usage:\r\n * var spline = BezierEasing(0.25, 0.1, 0.25, 1.0)\r\n * spline(x) => returns the easing value | x must be in [0, 1] range\r\n *\r\n */\r\n(function (definition) {\r\n    if (typeof exports === \"object\") {\r\n        module.exports = definition();\r\n    }\r\n    else if (typeof window.define === 'function' && window.define.amd) {\r\n        window.define([], definition);\r\n    } else {\r\n        window.BezierEasing = definition();\r\n    }\r\n}(function () {\r\n\r\n    // These values are established by empiricism with tests (tradeoff: performance VS precision)\r\n    var NEWTON_ITERATIONS = 4;\r\n    var NEWTON_MIN_SLOPE = 0.001;\r\n    var SUBDIVISION_PRECISION = 0.0000001;\r\n    var SUBDIVISION_MAX_ITERATIONS = 10;\r\n\r\n    var kSplineTableSize = 11;\r\n    var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\r\n\r\n    var float32ArraySupported = typeof Float32Array === \"function\";\r\n\r\n    function BezierEasing (mX1, mY1, mX2, mY2) {\r\n\r\n        // Validate arguments\r\n        if (arguments.length !== 4) {\r\n            throw new Error(\"BezierEasing requires 4 arguments.\");\r\n        }\r\n        for (var i=0; i<4; ++i) {\r\n            if (typeof arguments[i] !== \"number\" || isNaN(arguments[i]) || !isFinite(arguments[i])) {\r\n                throw new Error(\"BezierEasing arguments should be integers.\");\r\n            }\r\n        }\r\n        if (mX1 < 0 || mX1 > 1 || mX2 < 0 || mX2 > 1) {\r\n            throw new Error(\"BezierEasing x values must be in [0, 1] range.\");\r\n        }\r\n\r\n        var mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\r\n\r\n        function A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\r\n        function B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\r\n        function C (aA1)      { return 3.0 * aA1; }\r\n\r\n        // Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\r\n        function calcBezier (aT, aA1, aA2) {\r\n            return ((A(aA1, aA2)*aT + B(aA1, aA2))*aT + C(aA1))*aT;\r\n        }\r\n\r\n        // Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\r\n        function getSlope (aT, aA1, aA2) {\r\n            return 3.0 * A(aA1, aA2)*aT*aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\r\n        }\r\n\r\n        function newtonRaphsonIterate (aX, aGuessT) {\r\n            for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\r\n                var currentSlope = getSlope(aGuessT, mX1, mX2);\r\n                if (currentSlope === 0.0) return aGuessT;\r\n                var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\r\n                aGuessT -= currentX / currentSlope;\r\n            }\r\n            return aGuessT;\r\n        }\r\n\r\n        function calcSampleValues () {\r\n            for (var i = 0; i < kSplineTableSize; ++i) {\r\n                mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\r\n            }\r\n        }\r\n\r\n        function binarySubdivide (aX, aA, aB) {\r\n            var currentX, currentT, i = 0;\r\n            do {\r\n                currentT = aA + (aB - aA) / 2.0;\r\n                currentX = calcBezier(currentT, mX1, mX2) - aX;\r\n                if (currentX > 0.0) {\r\n                    aB = currentT;\r\n                } else {\r\n                    aA = currentT;\r\n                }\r\n            } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\r\n            return currentT;\r\n        }\r\n\r\n        function getTForX (aX) {\r\n            var intervalStart = 0.0;\r\n            var currentSample = 1;\r\n            var lastSample = kSplineTableSize - 1;\r\n\r\n            for (; currentSample != lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {\r\n                intervalStart += kSampleStepSize;\r\n            }\r\n            --currentSample;\r\n\r\n            // Interpolate to provide an initial guess for t\r\n            var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample+1] - mSampleValues[currentSample]);\r\n            var guessForT = intervalStart + dist * kSampleStepSize;\r\n\r\n            var initialSlope = getSlope(guessForT, mX1, mX2);\r\n            if (initialSlope >= NEWTON_MIN_SLOPE) {\r\n                return newtonRaphsonIterate(aX, guessForT);\r\n            } else if (initialSlope == 0.0) {\r\n                return guessForT;\r\n            } else {\r\n                return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize);\r\n            }\r\n        }\r\n\r\n        if (mX1 != mY1 || mX2 != mY2)\r\n            calcSampleValues();\r\n\r\n        var f = function (aX) {\r\n            if (mX1 === mY1 && mX2 === mY2) return aX; // linear\r\n            // Because JavaScript number are imprecise, we should guarantee the extremes are right.\r\n            if (aX === 0) return 0;\r\n            if (aX === 1) return 1;\r\n            return calcBezier(getTForX(aX), mY1, mY2);\r\n        };\r\n        var str = \"BezierEasing(\"+[mX1, mY1, mX2, mY2]+\")\";\r\n        f.toString = function () { return str; };\r\n\r\n        return f;\r\n    }\r\n\r\n    // CSS mapping\r\n    BezierEasing.css = {\r\n        \"ease\":        BezierEasing(0.25, 0.1, 0.25, 1.0),\r\n        \"linear\":      BezierEasing(0.00, 0.0, 1.00, 1.0),\r\n        \"ease-in\":     BezierEasing(0.42, 0.0, 1.00, 1.0),\r\n        \"ease-out\":    BezierEasing(0.00, 0.0, 0.58, 1.0),\r\n        \"ease-in-out\": BezierEasing(0.42, 0.0, 0.58, 1.0)\r\n    };\r\n\r\n    return BezierEasing;\r\n}));\n\n\n// WEBPACK FOOTER //\n// ./src/runtime/BezierEasing.js","'use strict';\r\n\r\nfunction Bezier(path) {\r\n    this.path = path;\r\n}\r\n\r\nBezier.prototype.getLength = function (len) {\r\n    this.steps = Math.max(Math.floor(len / 10), 1);\r\n    this.arcLengths = new Array(this.steps + 1);\r\n    this.arcLengths[0] = 0;\r\n\r\n    var ox = this.cubicN(0, this.path[0], this.path[2], this.path[4], this.path[6]),\r\n        oy = this.cubicN(0, this.path[1], this.path[3], this.path[5], this.path[7]),\r\n        clen = 0,\r\n        iterator = 1 / this.steps;\r\n\r\n    for (var i = 1; i <= this.steps; i += 1) {\r\n        var x = this.cubicN(i * iterator, this.path[0], this.path[2], this.path[4], this.path[6]),\r\n            y = this.cubicN(i * iterator, this.path[1], this.path[3], this.path[5], this.path[7]);\r\n\r\n        var dx = ox - x,\r\n            dy = oy - y;\r\n\r\n        clen += Math.sqrt(dx * dx + dy * dy);\r\n        this.arcLengths[i] = clen;\r\n\r\n        ox = x;\r\n        oy = y;\r\n    }\r\n\r\n    this.length = clen;\r\n};\r\n\r\nBezier.prototype.map = function (u) {\r\n    var targetLength = u * this.arcLengths[this.steps];\r\n    var low = 0,\r\n        high = this.steps,\r\n        index = 0;\r\n\r\n    while (low < high) {\r\n        index = low + (((high - low) / 2) | 0);\r\n        if (this.arcLengths[index] < targetLength) {\r\n            low = index + 1;\r\n\r\n        } else {\r\n            high = index;\r\n        }\r\n    }\r\n    if (this.arcLengths[index] > targetLength) {\r\n        index--;\r\n    }\r\n\r\n    var lengthBefore = this.arcLengths[index];\r\n    if (lengthBefore === targetLength) {\r\n        return index / this.steps;\r\n    } else {\r\n        return (index + (targetLength - lengthBefore) / (this.arcLengths[index + 1] - lengthBefore)) / this.steps;\r\n    }\r\n};\r\n\r\nBezier.prototype.getValues = function (elapsed) {\r\n    var t = this.map(elapsed),\r\n        x = this.cubicN(t, this.path[0], this.path[2], this.path[4], this.path[6]),\r\n        y = this.cubicN(t, this.path[1], this.path[3], this.path[5], this.path[7]);\r\n\r\n    return [x, y];\r\n};\r\n\r\nBezier.prototype.cubicN = function (pct, a, b, c, d) {\r\n    var t2 = pct * pct;\r\n    var t3 = t2 * pct;\r\n    return a + (-a * 3 + pct * (3 * a - a * pct)) * pct\r\n        + (3 * b + pct * (-6 * b + b * 3 * pct)) * pct\r\n        + (c * 3 - c * 3 * pct) * t2\r\n        + d * t3;\r\n};\r\n\r\nmodule.exports = Bezier;\n\n\n// WEBPACK FOOTER //\n// ./src/runtime/Bezier.js","'use strict';\r\n\r\nvar Transform = require('./Transform');\r\nvar Path = require('./Path');\r\nvar AnimatedPath = require('./AnimatedPath');\r\n\r\nfunction ImageLayer(data, parentIn, parentOut, basePath) {\r\n\r\n    this.isLoaded = false;\r\n\r\n    this.index = data.index;\r\n    this.source = basePath + data.source;\r\n    this.in = data.in ? data.in : parentIn;\r\n    this.out = data.out ? data.out : parentOut;\r\n\r\n    if (data.parent) this.parent = data.parent;\r\n\r\n    this.transform = new Transform(data.transform);\r\n\r\n    if (data.masks) {\r\n        this.masks = [];\r\n        for (var k = 0; k < data.masks.length; k++) {\r\n            var mask = data.masks[k];\r\n            if (mask.isAnimated) this.masks.push(new AnimatedPath(mask));\r\n            else this.masks.push(new Path(mask));\r\n        }\r\n    }\r\n}\r\n\r\nImageLayer.prototype.preload = function (cb) {\r\n    this.img = new Image;\r\n    this.img.onload = function () {\r\n        this.isLoaded = true;\r\n        if (typeof cb === 'function') {\r\n            cb();\r\n        }\r\n    }.bind(this);\r\n\r\n    this.img.src = this.source;\r\n};\r\n\r\nImageLayer.prototype.draw = function (ctx, time) {\r\n\r\n    if (!this.isLoaded) return;\r\n\r\n    ctx.save();\r\n    if (this.parent) this.parent.setParentTransform(ctx, time);\r\n    this.transform.transform(ctx, time);\r\n\r\n    if (this.masks) {\r\n        ctx.beginPath();\r\n        for (var i = 0; i < this.masks.length; i++) {\r\n            this.masks[i].draw(ctx, time);\r\n        }\r\n        ctx.clip();\r\n    }\r\n\r\n    ctx.drawImage(this.img, 0, 0);\r\n\r\n    ctx.restore();\r\n};\r\n\r\nImageLayer.prototype.setParentTransform = function (ctx, time) {\r\n    if (this.parent) this.parent.setParentTransform(ctx, time);\r\n    this.transform.transform(ctx, time);\r\n};\r\n\r\nImageLayer.prototype.setKeyframes = function (time) {\r\n    this.transform.setKeyframes(time);\r\n    if (this.masks) {\r\n        for (var j = 0; j < this.masks.length; j++) {\r\n            this.masks[j].setKeyframes(time);\r\n        }\r\n    }\r\n};\r\n\r\nImageLayer.prototype.reset = function (reversed) {\r\n    this.transform.reset(reversed);\r\n\r\n    if (this.masks) {\r\n        for (var j = 0; j < this.masks.length; j++) {\r\n            this.masks[j].reset(reversed);\r\n        }\r\n    }\r\n};\r\n\r\nmodule.exports = ImageLayer;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/runtime/ImageLayer.js","'use strict';\r\n\r\nvar Transform = require('./Transform');\r\nvar Path = require('./Path');\r\nvar AnimatedPath = require('./AnimatedPath');\r\n\r\nfunction TextLayer(data, parentIn, parentOut, baseFont) {\r\n    this.index = data.index;\r\n    this.text = data.text;\r\n    this.leading = data.leading;\r\n    this.fontSize = data.fontSize;\r\n    this.font = data.font;\r\n    this.color = data.color;\r\n    this.justification = data.justification;\r\n    this.in = data.in ? data.in : parentIn;\r\n    this.out = data.out ? data.out : parentOut;\r\n    this.baseFont = baseFont;\r\n\r\n    if (data.parent) this.parent = data.parent;\r\n    this.transform = new Transform(data.transform);\r\n\r\n    if (data.masks) {\r\n        this.masks = [];\r\n        for (var k = 0; k < data.masks.length; k++) {\r\n            var mask = data.masks[k];\r\n            if (mask.isAnimated) this.masks.push(new AnimatedPath(mask));\r\n            else this.masks.push(new Path(mask));\r\n        }\r\n    }\r\n}\r\n\r\nTextLayer.prototype.draw = function (ctx, time) {\r\n\r\n    ctx.save();\r\n    if (this.parent) this.parent.setParentTransform(ctx, time);\r\n    this.transform.transform(ctx, time);\r\n\r\n    if (this.masks) {\r\n        ctx.beginPath();\r\n        for (var i = 0; i < this.masks.length; i++) {\r\n            this.masks[i].draw(ctx, time);\r\n        }\r\n        ctx.clip();\r\n    }\r\n\r\n    ctx.textAlign = this.justification;\r\n    ctx.font = this.fontSize + 'px ' + this.baseFont || this.font;\r\n    ctx.fillStyle = 'rgb(' + this.color[0] + ', ' + this.color[1] + ', ' + this.color[2] + ')';\r\n    for (var j = 0; j < this.text.length; j++) {\r\n        ctx.fillText(this.text[j], 0, j * this.leading);\r\n    }\r\n\r\n    ctx.restore();\r\n};\r\n\r\nTextLayer.prototype.setParentTransform = function (ctx, time) {\r\n    if (this.parent) this.parent.setParentTransform(ctx, time);\r\n    this.transform.transform(ctx, time);\r\n};\r\n\r\nTextLayer.prototype.setKeyframes = function (time) {\r\n    this.transform.setKeyframes(time);\r\n    if (this.masks) {\r\n        for (var j = 0; j < this.masks.length; j++) {\r\n            this.masks[j].setKeyframes(time);\r\n        }\r\n    }\r\n};\r\n\r\nTextLayer.prototype.reset = function (reversed) {\r\n    this.transform.reset(reversed);\r\n\r\n    if (this.masks) {\r\n        for (var j = 0; j < this.masks.length; j++) {\r\n            this.masks[j].reset(reversed);\r\n        }\r\n    }\r\n};\r\n\r\nmodule.exports = TextLayer;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/runtime/TextLayer.js","'use strict';\r\n\r\nimport {requestAnimationFrame, cancelAnimationFrame, performance} from './shim'\r\n\r\nvar Group = require('./Group');\r\nvar ImageLayer = require('./ImageLayer');\r\nvar TextLayer = require('./TextLayer');\r\nvar Comp = require('./Comp');\r\n\r\nvar _animations = [],\r\n    _animationsLength = 0;\r\n\r\nvar _autoPlay = false;\r\nvar _rafId;\r\n\r\nfunction Animation(options) {\r\n    if (!options.data) {\r\n        console.error('no data');\r\n        return;\r\n    }\r\n\r\n    this.gradients = {};\r\n    this.pausedTime = 0;\r\n    this.duration = options.data.duration;\r\n    this.baseWidth = options.data.width;\r\n    this.baseHeight = options.data.height;\r\n    this.ratio = options.data.width / options.data.height;\r\n    this.markers = options.data.markers;\r\n    this.baseFont = options.baseFont;\r\n\r\n    this.canvas = options.canvas || document.createElement('canvas');\r\n    this.loop = options.loop || false;\r\n    this.devicePixelRatio = options.devicePixelRatio || window && window.devicePixelRatio ? window.devicePixelRatio : 1;\r\n    this.fluid = options.fluid || true;\r\n    this.reversed = options.reversed || false;\r\n    this.imageBasePath = options.imageBasePath || '';\r\n    this.onUpdate = options.onUpdate || function () {\r\n    };\r\n    this.onComplete = options.onComplete || function () {\r\n    };\r\n    this.onStop = options.onStop || function () {\r\n    };\r\n\r\n    this.ctx = this.canvas.getContext('2d');\r\n\r\n    this.canvas.width = this.baseWidth;\r\n    this.canvas.height = this.baseHeight;\r\n\r\n    this.buffer = document.createElement('canvas');\r\n    this.buffer.width = this.baseWidth;\r\n    this.buffer.height = this.baseHeight;\r\n    this.bufferCtx = this.buffer.getContext('2d');\r\n\r\n    this.layers = [];\r\n    for (var i = 0; i < options.data.layers.length; i++) {\r\n        if (options.data.layers[i].type === 'vector') {\r\n            this.layers.push(new Group(options.data.layers[i], this.bufferCtx, 0, this.duration, this.gradients));\r\n        } else if (options.data.layers[i].type === 'image') {\r\n            this.layers.push(new ImageLayer(options.data.layers[i], 0, this.duration, this.imageBasePath));\r\n        } else if (options.data.layers[i].type === 'text') {\r\n            this.layers.push(new TextLayer(options.data.layers[i], 0, this.duration, this.baseFont));\r\n        } else if (options.data.layers[i].type === 'comp') {\r\n            this.layers.push(new Comp(options.data.layers[i], this.bufferCtx, 0, this.duration, this.baseFont, this.gradients, this.imageBasePath, this.baseFont));\r\n        }\r\n    }\r\n    this.numLayers = this.layers.length;\r\n\r\n    for (var j = 0; j < this.layers.length; j++) {\r\n        var layer = this.layers[j];\r\n        if (layer.parent) {\r\n            for (var k = 0; k < this.layers.length; k++) {\r\n                //TODO stop loop\r\n                if (layer.parent === this.layers[k].index) {\r\n                    layer.parent = this.layers[k];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    this.reset(this.reversed);\r\n    this.resize();\r\n\r\n    this.isPaused = false;\r\n    this.isPlaying = false;\r\n    this.drawFrame = true;\r\n\r\n    _animations.push(this);\r\n    _animationsLength = _animations.length;\r\n}\r\n\r\nAnimation.prototype = {\r\n\r\n    play: function () {\r\n        if (!this.isPlaying) {\r\n            if (!this.isPaused) this.reset(this.reversed);\r\n            this.isPaused = false;\r\n            this.pausedTime = 0;\r\n            this.isPlaying = true;\r\n        }\r\n    },\r\n\r\n    stop: function () {\r\n        this.reset(this.reversed);\r\n        this.isPlaying = false;\r\n        this.drawFrame = true;\r\n    },\r\n\r\n    pause: function () {\r\n        if (this.isPlaying) {\r\n            this.isPaused = true;\r\n            this.pausedTime = this.compTime;\r\n            this.isPlaying = false;\r\n        }\r\n    },\r\n\r\n    gotoAndPlay: function (id) {\r\n        var marker = this.getMarker(id);\r\n        if (marker) {\r\n            this.compTime = marker.time;\r\n            this.pausedTime = 0;\r\n            this.setKeyframes(this.compTime);\r\n            this.isPlaying = true;\r\n        }\r\n    },\r\n\r\n    gotoAndStop: function (id) {\r\n        var marker = this.getMarker(id);\r\n        if (marker) {\r\n            this.isPlaying = false;\r\n            this.compTime = marker.time;\r\n            this.setKeyframes(this.compTime);\r\n            this.drawFrame = true;\r\n        }\r\n    },\r\n\r\n    getMarker: function (id) {\r\n        if (typeof id === 'number') {\r\n            return this.markers[id];\r\n        } else if (typeof id === 'string') {\r\n            for (var i = 0; i < this.markers.length; i++) {\r\n                if (this.markers[i].comment === id) {\r\n                    return this.markers[i];\r\n                }\r\n            }\r\n        }\r\n        console.warn('Marker not found');\r\n    },\r\n\r\n    checkStopMarkers: function (from, to) {\r\n        for (var i = 0; i < this.markers.length; i++) {\r\n            if (this.markers[i].stop && this.markers[i].time > from && this.markers[i].time < to) {\r\n                return this.markers[i];\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n\r\n    setStep: function (step) {\r\n        this.isPlaying = false;\r\n        this.compTime = step * this.duration;\r\n        this.pausedTime = this.compTime;\r\n        this.setKeyframes(this.compTime);\r\n        this.drawFrame = true;\r\n    },\r\n\r\n    getStep: function () {\r\n        return this.compTime / this.duration;\r\n    },\r\n\r\n    update: function (time) {\r\n        if (!this.then) this.then = time;\r\n\r\n        var delta = time - this.then;\r\n        this.then = time;\r\n\r\n        if (this.isPlaying) {\r\n            this.compTime = this.reversed ? this.compTime - delta : this.compTime + delta;\r\n\r\n            var stopMarker = this.checkStopMarkers(this.compTime - delta, this.compTime);\r\n\r\n            if (this.compTime > this.duration || this.reversed && this.compTime < 0) {\r\n                this.compTime = this.reversed ? 0 : this.duration - 1;\r\n                this.isPlaying = false;\r\n                this.onComplete();\r\n                if (this.loop) {\r\n                    this.play();\r\n                }\r\n            } else if (stopMarker) {\r\n                this.compTime = stopMarker.time;\r\n                this.onStop(stopMarker);\r\n                console.log('stop', this.compTime);\r\n                this.draw(this.compTime);\r\n                this.pause();\r\n            } else {\r\n                this.draw(this.compTime);\r\n            }\r\n            this.onUpdate();\r\n        } else if (this.drawFrame) {\r\n            this.drawFrame = false;\r\n            this.draw(this.compTime);\r\n            this.onUpdate();\r\n        }\r\n    },\r\n\r\n    draw: function (time) {\r\n        this.ctx.clearRect(0, 0, this.baseWidth, this.baseHeight);\r\n        for (var i = 0; i < this.numLayers; i++) {\r\n            if (time >= this.layers[i].in && time <= this.layers[i].out) {\r\n                this.layers[i].draw(this.ctx, time);\r\n            }\r\n        }\r\n    },\r\n\r\n    preload: function (cb) {\r\n        this.onloadCB = cb;\r\n        for (var i = 0; i < this.numLayers; i++) {\r\n            if (this.layers[i] instanceof ImageLayer) {\r\n                this.layers[i].preload(this.onload.bind(this));\r\n            }\r\n        }\r\n    },\r\n\r\n    onload: function () {\r\n        for (var i = 0; i < this.numLayers; i++) {\r\n            if (this.layers[i] instanceof ImageLayer) {\r\n                if (!this.layers[i].isLoaded) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        this.isLoaded = true;\r\n        if (typeof this.onloadCB === 'function') {\r\n            this.onloadCB();\r\n        }\r\n    },\r\n\r\n    reset: function () {\r\n        this.pausedTime = 0;\r\n        this.compTime = this.reversed ? this.duration : 0;\r\n        for (var i = 0; i < this.numLayers; i++) {\r\n            this.layers[i].reset(this.reversed);\r\n        }\r\n    },\r\n\r\n    setKeyframes: function (time) {\r\n        for (var i = 0; i < this.numLayers; i++) {\r\n            this.layers[i].setKeyframes(time);\r\n        }\r\n    },\r\n\r\n    destroy: function () {\r\n        this.isPlaying = false;\r\n        this.onComplete = null;\r\n        var i = _animations.indexOf(this);\r\n        if (i > -1) {\r\n            _animations.splice(i, 1);\r\n            _animationsLength = _animations.length;\r\n        }\r\n        if (this.canvas.parentNode) this.canvas.parentNode.removeChild(this.canvas);\r\n    },\r\n\r\n    resize: function (w) {\r\n        if (this.fluid) {\r\n            var width = w || this.canvas.clientWidth || this.baseWidth;\r\n            this.canvas.width = width * this.devicePixelRatio;\r\n            this.canvas.height = width / this.ratio * this.devicePixelRatio;\r\n\r\n            this.buffer.width = width * this.devicePixelRatio;\r\n            this.buffer.height = width / this.ratio * this.devicePixelRatio;\r\n\r\n            this.scale = width / this.baseWidth * this.devicePixelRatio;\r\n            this.ctx.transform(this.scale, 0, 0, this.scale, 0, 0);\r\n            this.bufferCtx.transform(this.scale, 0, 0, this.scale, 0, 0);\r\n            this.setKeyframes(this.compTime);\r\n            this.drawFrame = true;\r\n        }\r\n    },\r\n\r\n    setGradients: function (name, stops) {\r\n        if (!this.gradients[name]) {\r\n            console.warn('Gradient with name: ' + name + ' not found.');\r\n            return;\r\n        }\r\n\r\n        this.gradients[name].forEach(function (gradient) {\r\n            gradient.stops = stops;\r\n        });\r\n    },\r\n\r\n    get reversed() {\r\n        return this._reversed;\r\n    },\r\n\r\n    set reversed(bool) {\r\n        this._reversed = bool;\r\n        if (this.pausedTime) {\r\n            this.compTime = this.pausedTime;\r\n        } else if (!this.isPlaying) {\r\n            this.compTime = this.reversed ? this.duration : 0;\r\n        }\r\n        this.setKeyframes(this.compTime);\r\n    }\r\n\r\n};\r\n\r\n\r\nconst update = function (time) {\r\n    if (_autoPlay) {\r\n        _rafId = requestAnimationFrame(update);\r\n    }\r\n    time = time !== undefined ? time : performance.now();\r\n\r\n    for (var i = 0; i < _animationsLength; i++) {\r\n        _animations[i].update(time);\r\n    }\r\n};\r\n\r\nconst autoPlay = function (auto) {\r\n    _autoPlay = auto;\r\n    _autoPlay ? _rafId = requestAnimationFrame(update) : cancelAnimationFrame(_rafId);\r\n};\r\n\r\nexport {Animation, update, autoPlay};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/runtime/AE2Canvas.js","const root = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : this;\r\n\r\nexport const requestAnimationFrame = root.requestAnimationFrame ||\r\n    (function (fn) {\r\n        return root.setTimeout(fn, 16);\r\n    });\r\n\r\nexport const cancelAnimationFrame = root.cancelAnimationFrame ||\r\n    (function (id) {\r\n        return root.clearTimeout(id);\r\n    });\r\n\r\nexport const performance = (root.performance || {\r\n    offset: Date.now(),\r\n    now: function now(){\r\n        return Date.now() - this.offset;\r\n\r\n    }\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/runtime/shim.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 12\n// module chunks = 0","'use strict';\r\n\r\nvar Property = require('./Property'),\r\n    AnimatedProperty = require('./AnimatedProperty');\r\n\r\nfunction Stroke(data) {\r\n    if (data) {\r\n        this.join = data.join;\r\n        this.cap = data.cap;\r\n\r\n        if (data.miterLimit) {\r\n            if (data.miterLimit.length > 1) this.miterLimit = new AnimatedProperty(data.miterLimit);\r\n            else this.miterLimit = new Property(data.miterLimit);\r\n        }\r\n\r\n        if (data.color.length > 1) this.color = new AnimatedProperty(data.color);\r\n        else this.color = new Property(data.color);\r\n\r\n        if (data.opacity.length > 1) this.opacity = new AnimatedProperty(data.opacity);\r\n        else this.opacity = new Property(data.opacity);\r\n\r\n        if (data.width.length > 1) this.width = new AnimatedProperty(data.width);\r\n        else this.width = new Property(data.width);\r\n\r\n        if (data.dashes) {\r\n            this.dashes = {};\r\n\r\n            if (data.dashes.dash.length > 1) this.dashes.dash = new AnimatedProperty(data.dashes.dash);\r\n            else this.dashes.dash = new Property(data.dashes.dash);\r\n\r\n            if (data.dashes.gap.length > 1) this.dashes.gap = new AnimatedProperty(data.dashes.gap);\r\n            else this.dashes.gap = new Property(data.dashes.gap);\r\n\r\n            if (data.dashes.offset.length > 1) this.dashes.offset = new AnimatedProperty(data.dashes.offset);\r\n            else this.dashes.offset = new Property(data.dashes.offset);\r\n        }\r\n    }\r\n}\r\n\r\nStroke.prototype.getValue = function (time) {\r\n    var color = this.color.getValue(time);\r\n    var opacity = this.opacity.getValue(time);\r\n    color[0] = Math.round(color[0]);\r\n    color[1] = Math.round(color[1]);\r\n    color[2] = Math.round(color[2]);\r\n    var s = color.join(', ');\r\n\r\n    return 'rgba(' + s + ', ' + opacity + ')';\r\n};\r\n\r\nStroke.prototype.setStroke = function (ctx, time) {\r\n    var strokeColor = this.getValue(time);\r\n    var strokeWidth = this.width.getValue(time);\r\n    var strokeJoin = this.join;\r\n    if (strokeJoin === 'miter') var miterLimit = this.miterLimit.getValue(time);\r\n\r\n    ctx.lineWidth = strokeWidth;\r\n    ctx.lineJoin = strokeJoin;\r\n    if (miterLimit) ctx.miterLimit = miterLimit;\r\n    ctx.lineCap = this.cap;\r\n    ctx.strokeStyle = strokeColor;\r\n\r\n    if (this.dashes) {\r\n        ctx.setLineDash([\r\n            this.dashes.dash.getValue(time),\r\n            this.dashes.gap.getValue(time)\r\n        ]);\r\n        ctx.lineDashOffset = this.dashes.offset.getValue(time);\r\n    }\r\n};\r\n\r\nStroke.prototype.setKeyframes = function (time) {\r\n    this.color.setKeyframes(time);\r\n    this.opacity.setKeyframes(time);\r\n    this.width.setKeyframes(time);\r\n    if (this.miterLimit) this.miterLimit.setKeyframes(time);\r\n    if (this.dashes) {\r\n        this.dashes.dash.setKeyframes(time);\r\n        this.dashes.gap.setKeyframes(time);\r\n        this.dashes.offset.setKeyframes(time);\r\n    }\r\n};\r\n\r\nStroke.prototype.reset = function (reversed) {\r\n    this.color.reset(reversed);\r\n    this.opacity.reset(reversed);\r\n    this.width.reset(reversed);\r\n    if (this.miterLimit) this.miterLimit.reset(reversed);\r\n    if (this.dashes) {\r\n        this.dashes.dash.reset(reversed);\r\n        this.dashes.gap.reset(reversed);\r\n        this.dashes.offset.reset(reversed);\r\n    }\r\n};\r\n\r\nmodule.exports = Stroke;\n\n\n// WEBPACK FOOTER //\n// ./src/runtime/Stroke.js","'use strict';\r\n\r\nvar Property = require('./Property'),\r\n    AnimatedProperty = require('./AnimatedProperty');\r\n\r\nfunction Rect(data) {\r\n    //this.name = data.name;\r\n    this.closed = true;\r\n\r\n    this.size = data.size.length > 1 ? new AnimatedProperty(data.size) : new Property(data.size);\r\n\r\n    //optionals\r\n    if (data.position) this.position = data.position.length > 1 ? new AnimatedProperty(data.position) : new Property(data.position);\r\n    if (data.roundness) this.roundness = data.roundness.length > 1 ? new AnimatedProperty(data.roundness) : new Property(data.roundness);\r\n}\r\n\r\nRect.prototype.draw = function (ctx, time, trim) {\r\n\r\n    var size = this.size.getValue(time),\r\n        position = this.position ? this.position.getValue(time) : [0, 0],\r\n        roundness = this.roundness ? this.roundness.getValue(time) : 0;\r\n\r\n    if (size[0] < 2 * roundness) roundness = size[0] / 2;\r\n    if (size[1] < 2 * roundness) roundness = size[1] / 2;\r\n\r\n    var x = position[0] - size[0] / 2,\r\n        y = position[1] - size[1] / 2;\r\n\r\n    if (trim) {\r\n        var tv;\r\n        trim = this.getTrimValues(trim);\r\n        //TODO add trim\r\n    } else {\r\n        ctx.moveTo(x + roundness, y);\r\n        ctx.arcTo(x + size[0], y, x + size[0], y + size[1], roundness);\r\n        ctx.arcTo(x + size[0], y + size[1], x, y + size[1], roundness);\r\n        ctx.arcTo(x, y + size[1], x, y, roundness);\r\n        ctx.arcTo(x, y, x + size[0], y, roundness);\r\n    }\r\n\r\n};\r\n\r\nRect.prototype.setKeyframes = function (time) {\r\n    this.size.setKeyframes(time);\r\n    if (this.position) this.position.setKeyframes(time);\r\n    if (this.roundness) this.roundness.setKeyframes(time);\r\n};\r\n\r\nRect.prototype.reset = function (reversed) {\r\n    this.size.reset(reversed);\r\n    if (this.position) this.position.reset(reversed);\r\n    if (this.roundness) this.roundness.reset(reversed);\r\n};\r\n\r\nmodule.exports = Rect;\n\n\n// WEBPACK FOOTER //\n// ./src/runtime/Rect.js","'use strict';\r\n\r\nvar Path = require('./Path'),\r\n    Property = require('./Property'),\r\n    AnimatedProperty = require('./AnimatedProperty');\r\n\r\nfunction Ellipse(data) {\r\n    //this.name = data.name;\r\n    this.closed = true;\r\n\r\n    this.size = data.size.length > 1 ? new AnimatedProperty(data.size) : new Property(data.size);\r\n    //optional\r\n    if (data.position) this.position = data.position.length > 1 ? new AnimatedProperty(data.position) : new Property(data.position);\r\n}\r\n\r\nEllipse.prototype = Object.create(Path.prototype);\r\n\r\nEllipse.prototype.draw = function (ctx, time, trim) {\r\n\r\n    var size = this.size.getValue(time);\r\n    var position = this.position ? this.position.getValue(time) : [0, 0];\r\n\r\n    var i, j;\r\n\r\n    var w = size[0] / 2,\r\n        h = size[1] / 2,\r\n        x = position[0] - w,\r\n        y = position[1] - h,\r\n        ow = w * .5522848,\r\n        oh = h * .5522848;\r\n\r\n    var vertices = [\r\n        [x + w + ow, y, x + w - ow, y, x + w, y],\r\n        [x + w + w, y + h + oh, x + w + w, y + h - oh, x + w + w, y + h],\r\n        [x + w - ow, y + h + h, x + w + ow, y + h + h, x + w, y + h + h],\r\n        [x, y + h - oh, x, y + h + oh, x, y + h]\r\n    ];\r\n\r\n    if (trim) {\r\n        var tv,\r\n            len = w + h;\r\n\r\n        trim = this.getTrimValues(trim);\r\n\r\n        for (i = 0; i < 4; i++) {\r\n            j = i + 1;\r\n            if (j > 3) j = 0;\r\n            if (i > trim.startIndex && i < trim.endIndex) {\r\n                ctx.bezierCurveTo(vertices[i][0], vertices[i][1], vertices[j][2], vertices[j][3], vertices[j][4], vertices[j][5]);\r\n            } else if (i === trim.startIndex && i === trim.endIndex) {\r\n                tv = this.trim(vertices[i], vertices[j], trim.start, trim.end, len);\r\n                ctx.moveTo(tv.start[4], tv.start[5]);\r\n                ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5]);\r\n            } else if (i === trim.startIndex) {\r\n                tv = this.trim(vertices[i], vertices[j], trim.start, 1, len);\r\n                ctx.moveTo(tv.start[4], tv.start[5]);\r\n                ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5]);\r\n            } else if (i === trim.endIndex) {\r\n                tv = this.trim(vertices[i], vertices[j], 0, trim.end, len);\r\n                ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5]);\r\n            }\r\n        }\r\n    } else {\r\n        ctx.moveTo(vertices[0][4], vertices[0][5]);\r\n        for (i = 0; i < 4; i++) {\r\n            j = i + 1;\r\n            if (j > 3) j = 0;\r\n            ctx.bezierCurveTo(vertices[i][0], vertices[i][1], vertices[j][2], vertices[j][3], vertices[j][4], vertices[j][5]);\r\n        }\r\n    }\r\n};\r\n\r\nEllipse.prototype.getTrimValues = function (trim) {\r\n    var startIndex = Math.floor(trim.start * 4),\r\n        endIndex = Math.floor(trim.end * 4),\r\n        start = (trim.start - startIndex * 0.25) * 4,\r\n        end = (trim.end - endIndex * 0.25) * 4;\r\n\r\n    return {\r\n        startIndex: startIndex,\r\n        endIndex  : endIndex,\r\n        start     : start,\r\n        end       : end\r\n    };\r\n};\r\n\r\nEllipse.prototype.setKeyframes = function (time) {\r\n    this.size.setKeyframes(time);\r\n    if (this.position) this.position.setKeyframes(time);\r\n};\r\n\r\nEllipse.prototype.reset = function (reversed) {\r\n    this.size.reset(reversed);\r\n    if (this.position) this.position.reset(reversed);\r\n};\r\n\r\nmodule.exports = Ellipse;\n\n\n// WEBPACK FOOTER //\n// ./src/runtime/Ellipse.js","'use strict';\r\n\r\nvar Property = require('./Property'),\r\n    AnimatedProperty = require('./AnimatedProperty');\r\n\r\nfunction Polystar(data) {\r\n    //this.name = data.name;\r\n    this.closed = true; // TODO ??\r\n\r\n    this.starType = data.starType;\r\n    this.points = data.points.length > 1 ? new AnimatedProperty(data.points) : new Property(data.points);\r\n    this.innerRadius = data.innerRadius.length > 1 ? new AnimatedProperty(data.innerRadius) : new Property(data.innerRadius);\r\n    this.outerRadius = data.outerRadius.length > 1 ? new AnimatedProperty(data.outerRadius) : new Property(data.outerRadius);\r\n\r\n    //optinals\r\n    if (data.position) this.position = data.position.length > 1 ? new AnimatedProperty(data.position) : new Property(data.position);\r\n    if (data.rotation) this.rotation = data.rotation.length > 1 ? new AnimatedProperty(data.rotation) : new Property(data.rotation);\r\n    if (data.innerRoundness) this.innerRoundness = data.innerRoundness.length > 1 ? new AnimatedProperty(data.innerRoundness) : new Property(data.innerRoundness);\r\n    if (data.outerRoundness) this.outerRoundness = data.outerRoundness.length > 1 ? new AnimatedProperty(data.outerRoundness) : new Property(data.outerRoundness);\r\n}\r\n\r\nPolystar.prototype.draw = function (ctx, time) {\r\n\r\n    var points = this.points.getValue(time),\r\n        innerRadius = this.innerRadius.getValue(time),\r\n        outerRadius = this.outerRadius.getValue(time),\r\n        position = this.position ? this.position.getValue(time) : [0, 0],\r\n        rotation = this.rotation ? this.rotation.getValue(time) : 0,\r\n        innerRoundness = this.innerRoundness ? this.innerRoundness.getValue(time) : 0,\r\n        outerRoundness = this.outerRoundness ? this.outerRoundness.getValue(time) : 0;\r\n\r\n    rotation = this.deg2rad(rotation);\r\n    var start = this.rotatePoint(0, 0, 0, 0 - outerRadius, rotation);\r\n\r\n    ctx.save();\r\n    ctx.beginPath();\r\n    ctx.translate(position[0], position[1]);\r\n    ctx.moveTo(start[0], start[1]);\r\n\r\n    for (var i = 0; i < points; i++) {\r\n\r\n        var pInner,\r\n            pOuter,\r\n            pOuter1Tangent,\r\n            pOuter2Tangent,\r\n            pInner1Tangent,\r\n            pInner2Tangent,\r\n            outerOffset,\r\n            innerOffset,\r\n            rot;\r\n\r\n        rot = Math.PI / points * 2;\r\n\r\n        pInner = this.rotatePoint(0, 0, 0, 0 - innerRadius, (rot * (i + 1) - rot / 2) + rotation);\r\n        pOuter = this.rotatePoint(0, 0, 0, 0 - outerRadius, (rot * (i + 1)) + rotation);\r\n\r\n        //FIxME\r\n        if (!outerOffset) outerOffset = (start[0] + pInner[0]) * outerRoundness / 100 * .5522848;\r\n        if (!innerOffset) innerOffset = (start[0] + pInner[0]) * innerRoundness / 100 * .5522848;\r\n\r\n        pOuter1Tangent = this.rotatePoint(0, 0, outerOffset, 0 - outerRadius, (rot * i) + rotation);\r\n        pInner1Tangent = this.rotatePoint(0, 0, innerOffset * -1, 0 - innerRadius, (rot * (i + 1) - rot / 2) + rotation);\r\n        pInner2Tangent = this.rotatePoint(0, 0, innerOffset, 0 - innerRadius, (rot * (i + 1) - rot / 2) + rotation);\r\n        pOuter2Tangent = this.rotatePoint(0, 0, outerOffset * -1, 0 - outerRadius, (rot * (i + 1)) + rotation);\r\n\r\n        if (this.starType === 1) {\r\n            //star\r\n            ctx.bezierCurveTo(pOuter1Tangent[0], pOuter1Tangent[1], pInner1Tangent[0], pInner1Tangent[1], pInner[0], pInner[1]);\r\n            ctx.bezierCurveTo(pInner2Tangent[0], pInner2Tangent[1], pOuter2Tangent[0], pOuter2Tangent[1], pOuter[0], pOuter[1]);\r\n        } else {\r\n            //polygon\r\n            ctx.bezierCurveTo(pOuter1Tangent[0], pOuter1Tangent[1], pOuter2Tangent[0], pOuter2Tangent[1], pOuter[0], pOuter[1]);\r\n        }\r\n\r\n        //debug\r\n        //ctx.fillStyle = \"black\";\r\n        //ctx.fillRect(pInner[0], pInner[1], 5, 5);\r\n        //ctx.fillRect(pOuter[0], pOuter[1], 5, 5);\r\n        //ctx.fillStyle = \"blue\";\r\n        //ctx.fillRect(pOuter1Tangent[0], pOuter1Tangent[1], 5, 5);\r\n        //ctx.fillStyle = \"red\";\r\n        //ctx.fillRect(pInner1Tangent[0], pInner1Tangent[1], 5, 5);\r\n        //ctx.fillStyle = \"green\";\r\n        //ctx.fillRect(pInner2Tangent[0], pInner2Tangent[1], 5, 5);\r\n        //ctx.fillStyle = \"brown\";\r\n        //ctx.fillRect(pOuter2Tangent[0], pOuter2Tangent[1], 5, 5);\r\n\r\n    }\r\n\r\n    ctx.restore();\r\n};\r\n\r\nPolystar.prototype.rotatePoint = function (cx, cy, x, y, radians) {\r\n    var cos = Math.cos(radians),\r\n        sin = Math.sin(radians),\r\n        nx = (cos * (x - cx)) - (sin * (y - cy)) + cx,\r\n        ny = (sin * (x - cx)) + (cos * (y - cy)) + cy;\r\n    return [nx, ny];\r\n};\r\n\r\nPolystar.prototype.deg2rad = function (deg) {\r\n    return deg * (Math.PI / 180);\r\n};\r\n\r\nPolystar.prototype.setKeyframes = function (time) {\r\n    this.points.setKeyframes(time);\r\n    this.innerRadius.setKeyframes(time);\r\n    this.outerRadius.setKeyframes(time);\r\n    if (this.position) this.position.setKeyframes(time);\r\n    if (this.rotation) this.rotation.setKeyframes(time);\r\n    if (this.innerRoundness) this.innerRoundness.setKeyframes(time);\r\n    if (this.outerRoundness) this.outerRoundness.setKeyframes(time);\r\n};\r\n\r\nPolystar.prototype.reset = function (reversed) {\r\n    this.points.reset(reversed);\r\n    this.innerRadius.reset(reversed);\r\n    this.outerRadius.reset(reversed);\r\n    if (this.position) this.position.reset(reversed);\r\n    if (this.rotation) this.rotation.reset(reversed);\r\n    if (this.innerRoundness) this.innerRoundness.reset(reversed);\r\n    if (this.outerRoundness) this.outerRoundness.reset(reversed);\r\n};\r\n\r\nmodule.exports = Polystar;\n\n\n// WEBPACK FOOTER //\n// ./src/runtime/Polystar.js","'use strict';\r\n\r\nvar Property = require('./Property'),\r\n    AnimatedProperty = require('./AnimatedProperty');\r\n\r\nfunction Fill(data) {\r\n    this.color = data.color.length > 1 ? new AnimatedProperty(data.color) : new Property(data.color);\r\n    if (data.opacity) this.opacity = data.opacity.length > 1 ? new AnimatedProperty(data.opacity) : new Property(data.opacity);\r\n}\r\n\r\nFill.prototype.getValue = function (time) {\r\n    var color = this.color.getValue(time);\r\n    var opacity = this.opacity ? this.opacity.getValue(time) : 1;\r\n    return 'rgba(' + Math.round(color[0]) + ', ' + Math.round(color[1]) + ', ' + Math.round(color[2]) + ', ' + opacity + ')';\r\n};\r\n\r\nFill.prototype.setColor = function (ctx, time) {\r\n    var color = this.getValue(time);\r\n    ctx.fillStyle = color;\r\n};\r\n\r\nFill.prototype.setKeyframes = function (time) {\r\n    this.color.setKeyframes(time);\r\n    if (this.opacity) this.opacity.setKeyframes(time);\r\n};\r\n\r\nFill.prototype.reset = function (reversed) {\r\n    this.color.reset(reversed);\r\n    if (this.opacity) this.opacity.reset(reversed);\r\n};\r\n\r\nmodule.exports = Fill;\n\n\n// WEBPACK FOOTER //\n// ./src/runtime/Fill.js","'use strict';\r\n\r\nvar Property = require('./Property'),\r\n    AnimatedProperty = require('./AnimatedProperty');\r\n\r\nfunction GradientFill(data, gradients) {\r\n    if (!gradients[data.name]) gradients[data.name] = [];\r\n    gradients[data.name].push(this);\r\n\r\n    this.stops = data.stops;\r\n    this.type = data.type;\r\n    this.startPoint = data.startPoint.length > 1 ? new AnimatedProperty(data.startPoint) : new Property(data.startPoint);\r\n    this.endPoint = data.endPoint.length > 1 ? new AnimatedProperty(data.endPoint) : new Property(data.endPoint);\r\n    if (data.opacity) this.opacity = data.opacity.length > 1 ? new AnimatedProperty(data.opacity) : new Property(data.opacity);\r\n}\r\n\r\nGradientFill.prototype.setColor = function (ctx, time) {\r\n    var startPoint = this.startPoint.getValue(time);\r\n    var endPoint = this.endPoint.getValue(time);\r\n    var radius = 0;\r\n\r\n    if (this.type === 'radial') {\r\n        var distX = startPoint[0] - endPoint[0];\r\n        var distY = startPoint[1] - endPoint[1];\r\n        radius = Math.sqrt(distX * distX + distY * distY);\r\n    }\r\n\r\n    var gradient = this.type === 'radial' ?\r\n        ctx.createRadialGradient(startPoint[0], startPoint[1], 0, startPoint[0], startPoint[1], radius) :\r\n        ctx.createLinearGradient(startPoint[0], startPoint[1], endPoint[0], endPoint[1]);\r\n\r\n    var opacity = this.opacity ? this.opacity.getValue(time) : 1;\r\n\r\n    for (var i = 0; i < this.stops.length; i++) {\r\n        var stop = this.stops[i];\r\n        var color = stop.color;\r\n        gradient.addColorStop(stop.location, 'rgba(' + color[0] + ', ' + color[1] + ', ' + color[2] + ', ' + color[3] * opacity + ')');\r\n    }\r\n\r\n    ctx.fillStyle = gradient;\r\n};\r\n\r\nGradientFill.prototype.setKeyframes = function (time) {\r\n    if (this.opacity) this.opacity.setKeyframes(time);\r\n    this.startPoint.setKeyframes(time);\r\n    this.endPoint.setKeyframes(time);\r\n};\r\n\r\nGradientFill.prototype.reset = function (reversed) {\r\n    if (this.opacity) this.opacity.setKeyframes(reversed);\r\n    this.startPoint.setKeyframes(reversed);\r\n    this.endPoint.setKeyframes(reversed);\r\n};\r\n\r\nmodule.exports = GradientFill;\n\n\n// WEBPACK FOOTER //\n// ./src/runtime/GradientFill.js","'use strict';\r\n\r\nvar Bezier = require('./Bezier'),\r\n    AnimatedProperty = require('./AnimatedProperty');\r\n\r\nfunction Position(data) {\r\n    AnimatedProperty.call(this, data);\r\n}\r\n\r\nPosition.prototype = Object.create(AnimatedProperty.prototype);\r\n\r\nPosition.prototype.onKeyframeChange = function () {\r\n    this.setEasing();\r\n    this.setMotionPath();\r\n};\r\n\r\nPosition.prototype.getValueAtTime = function (time) {\r\n    if (this.motionpath) {\r\n        return this.motionpath.getValues(this.getElapsed(time));\r\n    } else {\r\n        return this.lerp(this.lastFrame.v, this.nextFrame.v, this.getElapsed(time));\r\n    }\r\n};\r\n\r\nPosition.prototype.setMotionPath = function () {\r\n    if (this.lastFrame.motionpath) {\r\n        this.motionpath = new Bezier(this.lastFrame.motionpath);\r\n        this.motionpath.getLength(this.lastFrame.len);\r\n    } else {\r\n        this.motionpath = null;\r\n    }\r\n};\r\n\r\nmodule.exports = Position;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/runtime/Position.js","'use strict';\r\n\r\nfunction Merge(data) {\r\n    this.type = data.type;\r\n}\r\n\r\nMerge.prototype.setCompositeOperation = function (ctx) {\r\n    switch (this.type) {\r\n        case 2:\r\n            ctx.globalCompositeOperation = 'source-over';\r\n            break;\r\n        case 3:\r\n            ctx.globalCompositeOperation = 'source-out';\r\n            break;\r\n        case 4:\r\n            ctx.globalCompositeOperation = 'source-in';\r\n            break;\r\n        case 5:\r\n            ctx.globalCompositeOperation = 'xor';\r\n            break;\r\n        default:\r\n            ctx.globalCompositeOperation = 'source-over';\r\n    }\r\n};\r\n\r\nmodule.exports = Merge;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/runtime/Merge.js","'use strict';\r\n\r\nvar Property = require('./Property'),\r\n    AnimatedProperty = require('./AnimatedProperty');\r\n\r\nfunction Trim(data) {\r\n\r\n    this.type = data.type;\r\n\r\n    if (data.start) this.start = data.start.length > 1 ? new AnimatedProperty(data.start) : new Property(data.start);\r\n    if (data.end) this.end = data.end.length > 1 ? new AnimatedProperty(data.end) : new Property(data.end);\r\n    //if (data.offset) this.offset = data.offset.length > 1 ? new AnimatedProperty(data.offset) : new Property(data.offset);\r\n\r\n}\r\n\r\nTrim.prototype.getTrim = function (time) {\r\n    var start = this.start ? this.start.getValue(time) : 0,\r\n        end = this.end ? this.end.getValue(time) : 1;\r\n\r\n    var trim = {\r\n        start: Math.min(start, end),\r\n        end: Math.max(start, end)\r\n    };\r\n\r\n    if (trim.start === 0 && trim.end === 1) {\r\n        return null;\r\n    } else {\r\n        return trim;\r\n    }\r\n};\r\n\r\nTrim.prototype.setKeyframes = function (time) {\r\n    if (this.start) this.start.setKeyframes(time);\r\n    if (this.end) this.end.setKeyframes(time);\r\n    //if (this.offset) this.offset.reset();\r\n};\r\n\r\nTrim.prototype.reset = function (reversed) {\r\n    if (this.start) this.start.reset(reversed);\r\n    if (this.end) this.end.reset(reversed);\r\n    //if (this.offset) this.offset.reset();\r\n};\r\n\r\nmodule.exports = Trim;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/runtime/Trim.js","'use strict';\r\n\r\nvar Path = require('./Path');\r\nvar AnimatedPath = require('./AnimatedPath');\r\nvar Transform = require('./Transform');\r\nvar ImageLayer = require('./ImageLayer');\r\nvar TextLayer = require('./TextLayer');\r\nvar Group = require('./Group');\r\n\r\nfunction Comp(data, bufferCtx, parentIn, parentOut, baseFont, gradients, imageBasePath) {\r\n    this.index = data.index;\r\n    this.in = data.in ? data.in : parentIn;\r\n    this.out = data.out ? data.out : parentOut;\r\n\r\n    if (data.parent) this.parent = data.parent;\r\n\r\n    this.transform = new Transform(data.transform);\r\n\r\n    if (data.masks) {\r\n        this.masks = [];\r\n        for (var k = 0; k < data.masks.length; k++) {\r\n            var mask = data.masks[k];\r\n            if (mask.isAnimated) this.masks.push(new AnimatedPath(mask));\r\n            else this.masks.push(new Path(mask));\r\n        }\r\n    }\r\n\r\n    this.layers = [];\r\n    for (var i = 0; i < data.layers.length; i++) {\r\n        if (data.layers[i].type === 'vector') {\r\n            this.layers.push(new Group(data.layers[i], bufferCtx, 0, this.duration, gradients));\r\n        } else if (data.layers[i].type === 'image') {\r\n            this.layers.push(new ImageLayer(data.layers[i], 0, this.duration, imageBasePath));\r\n        } else if (data.layers[i].type === 'text') {\r\n            this.layers.push(new TextLayer(data.layers[i], 0, this.duration, baseFont));\r\n        } else if (data.layers[i].type === 'comp') {\r\n            this.layers.push(new Comp(data.layers[i], bufferCtx, 0, this.duration, this.baseFont, gradients, imageBasePath, baseFont));\r\n        }\r\n    }\r\n    this.numLayers = this.layers.length;\r\n}\r\n\r\nComp.prototype.draw = function (ctx, time) {\r\n\r\n    ctx.save();\r\n\r\n    var i;\r\n\r\n    if (this.parent) this.parent.setParentTransform(ctx, time);\r\n    this.transform.transform(ctx, time);\r\n\r\n    if (this.masks) {\r\n        ctx.beginPath();\r\n        for (i = 0; i < this.masks.length; i++) {\r\n            this.masks[i].draw(ctx, time);\r\n        }\r\n        ctx.clip();\r\n    }\r\n\r\n    var internalTime = time - this.in;\r\n    for (i = 0; i < this.numLayers; i++) {\r\n        if (internalTime >= this.layers[i].in && internalTime <= this.layers[i].out) {\r\n            this.layers[i].draw(ctx, internalTime);\r\n        }\r\n    }\r\n\r\n    ctx.restore();\r\n\r\n};\r\n\r\nComp.prototype.setParentTransform = function (ctx, time) {\r\n    if (this.parent) this.parent.setParentTransform(ctx, time);\r\n    this.transform.transform(ctx, time);\r\n    for (var i = 0; i < this.numLayers; i++) {\r\n        this.layers[i].setParentTransform(ctx, time);\r\n    }\r\n};\r\n\r\nComp.prototype.setKeyframes = function (time) {\r\n    this.transform.setKeyframes(time);\r\n    for (var i = 0; i < this.numLayers; i++) {\r\n        this.layers[i].setKeyframes(time);\r\n    }\r\n};\r\n\r\nComp.prototype.reset = function (reversed) {\r\n    this.transform.reset(reversed);\r\n    for (var i = 0; i < this.numLayers; i++) {\r\n        this.layers[i].reset(this.reversed);\r\n    }\r\n};\r\n\r\nmodule.exports = Comp;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/runtime/Comp.js"],"sourceRoot":""}