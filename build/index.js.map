{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap ce9321cd8926d2bb2f0a","webpack:///./src/property/Property.js","webpack:///./src/property/AnimatedProperty.js","webpack:///./src/objects/Path.js","webpack:///./src/objects/AnimatedPath.js","webpack:///./src/transform/Transform.js","webpack:///./src/core.js","webpack:///./src/objects/Group.js","webpack:///./src/utils/BezierEasing.js","webpack:///./src/utils/Bezier.js","webpack:///./src/layers/ImageLayer.js","webpack:///./src/layers/TextLayer.js","webpack:///./src/index.js","webpack:///./src/utils/shim.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/Animation.js","webpack:///./src/property/Stroke.js","webpack:///./src/objects/Rect.js","webpack:///./src/objects/Ellipse.js","webpack:///./src/objects/Polystar.js","webpack:///./src/property/Fill.js","webpack:///./src/property/GradientFill.js","webpack:///./src/transform/Position.js","webpack:///./src/property/Merge.js","webpack:///./src/property/Trim.js","webpack:///./src/layers/Comp.js"],"names":["Property","constructor","data","frames","getValue","v","setKeyframes","time","reset","reversed","AnimatedProperty","frameCount","length","lerp","a","b","t","Array","arr","i","setEasing","nextFrame","easeIn","easing","lastFrame","easeOut","finished","started","pointer","onKeyframeChange","getValueAtTime","getElapsed","delta","duration","elapsed","Path","closed","verticesCount","draw","ctx","trim","frame","vertices","start","end","getTrimValues","j","nextVertex","lastVertex","tv","startIndex","moveTo","endIndex","len","bezierCurveTo","actualTrim","totalLen","sumArray","trimAtLen","from","to","isStraight","startVertex","endVertex","bezier","getLength","map","e1","f1","g1","h1","j1","k1","e2","f2","g2","h2","j2","k2","s","add","reduce","startX","startY","ctrl1X","ctrl1Y","ctrl2X","ctrl2Y","endX","endY","AnimatedPath","actualVertices","actualLength","cp1x","cp1y","cp2x","cp2y","x","y","push","Transform","position","positionX","positionY","anchor","scaleX","scaleY","skew","skewAxis","rotation","opacity","transform","deg2rad","globalAlpha","setRotation","setSkew","setScale","rad","c","Math","cos","sin","dx","dy","sx","sy","axis","tan","deg","PI","_animations","_animationsLength","_autoPlay","_rafId","update","requestAnimationFrame","undefined","performance","now","autoPlay","auto","cancelAnimationFrame","tween","remove","indexOf","splice","Group","bufferCtx","parentIn","parentOut","gradients","index","in","out","parent","fill","gradientFill","stroke","merge","groups","shapes","shape","type","isAnimated","masks","mask","parentFill","parentStroke","parentTrim","isBuffer","save","trimValues","getTrim","setColor","setStroke","setParentTransform","setTransform","clearRect","canvas","width","height","restore","beginPath","clip","drawShapes","drawGroups","closePath","setCompositeOperation","drawImage","k","definition","module","exports","window","define","amd","BezierEasing","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","Float32Array","mX1","mY1","mX2","mY2","arguments","Error","isNaN","isFinite","mSampleValues","A","aA1","aA2","B","C","calcBezier","aT","getSlope","newtonRaphsonIterate","aX","aGuessT","currentSlope","currentX","calcSampleValues","binarySubdivide","aA","aB","currentT","abs","getTForX","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","f","str","toString","css","Bezier","path","steps","max","floor","arcLengths","ox","cubicN","oy","clen","iterator","sqrt","u","targetLength","low","high","lengthBefore","getValues","pct","d","t2","t3","ImageLayer","basePath","isLoaded","source","preload","cb","img","Image","onload","src","TextLayer","baseFont","text","leading","fontSize","font","color","justification","textAlign","fillStyle","fillText","root","global","fn","setTimeout","id","clearTimeout","offset","Date","Animation","options","pausedTime","baseWidth","baseHeight","ratio","markers","document","createElement","loop","devicePixelRatio","fluid","imageBasePath","onUpdate","onComplete","onStop","getContext","buffer","layers","numLayers","layer","resize","isPaused","isPlaying","drawFrame","play","stop","pause","compTime","gotoAndPlay","marker","getMarker","gotoAndStop","comment","console","warn","checkStopMarkers","setStep","step","getStep","then","stopMarker","onloadCB","bind","destroy","parentNode","removeChild","w","clientWidth","scale","setGradients","name","stops","forEach","gradient","_reversed","bool","Stroke","join","cap","miterLimit","dashes","dash","gap","round","strokeColor","strokeWidth","strokeJoin","lineWidth","lineJoin","lineCap","strokeStyle","setLineDash","lineDashOffset","Rect","size","roundness","arcTo","Ellipse","h","ow","oh","Polystar","starType","points","innerRadius","outerRadius","innerRoundness","outerRoundness","rotatePoint","translate","pInner","pOuter","pOuter1Tangent","pOuter2Tangent","pInner1Tangent","pInner2Tangent","outerOffset","innerOffset","rot","cx","cy","radians","nx","ny","Fill","GradientFill","startPoint","endPoint","radius","distX","distY","createRadialGradient","createLinearGradient","addColorStop","location","Position","setMotionPath","motionpath","Merge","globalCompositeOperation","Trim","min","Comp","internalTime"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AE2Canvas\"] = factory();\n\telse\n\t\troot[\"AE2Canvas\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ce9321cd8926d2bb2f0a","class Property {\r\n    constructor(data) {\r\n        this.frames = data;\r\n    }\r\n\r\n    getValue() {\r\n        return this.frames[0].v;\r\n    }\r\n\r\n    setKeyframes(time) {\r\n    }\r\n\r\n    reset(reversed) {\r\n    }\r\n}\r\n\r\nexport default Property;\n\n\n// WEBPACK FOOTER //\n// ./src/property/Property.js","import Property from './Property';\r\nimport BezierEasing from '../utils/BezierEasing';\r\n\r\nclass AnimatedProperty extends Property {\r\n\r\n    constructor(data) {\r\n        super(data);\r\n        this.frameCount = this.frames.length;\r\n    }\r\n\r\n    lerp(a, b, t) {\r\n        if (a instanceof Array) {\r\n            const arr = [];\r\n            for (let i = 0; i < a.length; i++) {\r\n                arr[i] = a[i] + t * (b[i] - a[i]);\r\n            }\r\n            return arr;\r\n        } else {\r\n            return a + t * (b - a);\r\n        }\r\n    }\r\n\r\n    setEasing() {\r\n        if (this.nextFrame.easeIn) {\r\n            this.easing = new BezierEasing(this.lastFrame.easeOut[0], this.lastFrame.easeOut[1], this.nextFrame.easeIn[0], this.nextFrame.easeIn[1]);\r\n        } else {\r\n            this.easing = null;\r\n        }\r\n    }\r\n\r\n    getValue(time) {\r\n        if (this.finished && time >= this.nextFrame.t) {\r\n            return this.nextFrame.v;\r\n        } else if (!this.started && time <= this.lastFrame.t) {\r\n            return this.lastFrame.v;\r\n        } else {\r\n            this.started = true;\r\n            this.finished = false;\r\n            if (time > this.nextFrame.t) {\r\n                if (this.pointer + 1 === this.frameCount) {\r\n                    this.finished = true;\r\n                } else {\r\n                    this.pointer++;\r\n                    this.lastFrame = this.frames[this.pointer - 1];\r\n                    this.nextFrame = this.frames[this.pointer];\r\n                    this.onKeyframeChange();\r\n                }\r\n            } else if (time < this.lastFrame.t) {\r\n                if (this.pointer < 2) {\r\n                    this.started = false;\r\n                } else {\r\n                    this.pointer--;\r\n                    this.lastFrame = this.frames[this.pointer - 1];\r\n                    this.nextFrame = this.frames[this.pointer];\r\n                    this.onKeyframeChange();\r\n                }\r\n            }\r\n            return this.getValueAtTime(time);\r\n        }\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        //console.log(time, this.frames[this.frameCount - 2].t, this.frames[this.frameCount - 1].t);\r\n\r\n        if (time < this.frames[0].t) {\r\n            this.pointer = 1;\r\n            this.nextFrame = this.frames[this.pointer];\r\n            this.lastFrame = this.frames[this.pointer - 1];\r\n            this.onKeyframeChange();\r\n            return;\r\n        }\r\n\r\n        if (time > this.frames[this.frameCount - 1].t) {\r\n            this.pointer = this.frameCount - 1;\r\n            this.nextFrame = this.frames[this.pointer];\r\n            this.lastFrame = this.frames[this.pointer - 1];\r\n            this.onKeyframeChange();\r\n            return;\r\n        }\r\n\r\n        for (let i = 1; i < this.frameCount; i++) {\r\n            if (time >= this.frames[i - 1].t && time <= this.frames[i].t) {\r\n                this.pointer = i;\r\n                this.lastFrame = this.frames[i - 1];\r\n                this.nextFrame = this.frames[i];\r\n                this.onKeyframeChange();\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    onKeyframeChange() {\r\n        this.setEasing();\r\n    }\r\n\r\n    getElapsed(time) {\r\n        const delta = (time - this.lastFrame.t);\r\n        const duration = this.nextFrame.t - this.lastFrame.t;\r\n        let elapsed = delta / duration;\r\n\r\n        if (elapsed > 1) elapsed = 1;\r\n        else if (elapsed < 0) elapsed = 0;\r\n        else if (this.easing) elapsed = this.easing(elapsed);\r\n        return elapsed;\r\n    }\r\n\r\n    getValueAtTime(time) {\r\n        return this.lerp(this.lastFrame.v, this.nextFrame.v, this.getElapsed(time));\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.finished = false;\r\n        this.started = false;\r\n        this.pointer = reversed ? this.frameCount - 1 : 1;\r\n        this.nextFrame = this.frames[this.pointer];\r\n        this.lastFrame = this.frames[this.pointer - 1];\r\n        this.onKeyframeChange();\r\n    }\r\n}\r\n\r\nexport default AnimatedProperty;\n\n\n// WEBPACK FOOTER //\n// ./src/property/AnimatedProperty.js","import Bezier from '../utils/Bezier';\r\n\r\nclass Path {\r\n\r\n    constructor(data) {\r\n        //this.name = data.name;\r\n        this.closed = data.closed;\r\n        this.frames = data.frames;\r\n        this.verticesCount = this.frames[0].v.length;\r\n    }\r\n\r\n    draw(ctx, time, trim) {\r\n        const frame = this.getValue(time);\r\n        const vertices = frame.v;\r\n\r\n        if (trim) {\r\n            if ((trim.start === 0 && trim.end === 0) ||\r\n                (trim.start === 1 && trim.end === 1)) {\r\n                return;\r\n            } else {\r\n                trim = this.getTrimValues(trim, frame);\r\n            }\r\n        }\r\n\r\n        for (let j = 1; j < vertices.length; j++) {\r\n            var nextVertex = vertices[j];\r\n            const lastVertex = vertices[j - 1];\r\n\r\n            if (trim) {\r\n                let tv;\r\n\r\n                if (j === 1 && trim.startIndex !== 0) {\r\n                    ctx.moveTo(lastVertex[4], lastVertex[5]);\r\n                }\r\n                else if (j === trim.startIndex + 1 && j === trim.endIndex + 1) {\r\n                    tv = this.trim(lastVertex, nextVertex, trim.start, trim.end, frame.len[j - 1]);\r\n                    ctx.moveTo(tv.start[4], tv.start[5]);\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5]);\r\n                } else if (j === trim.startIndex + 1) {\r\n                    tv = this.trim(lastVertex, nextVertex, trim.start, 1, frame.len[j - 1]);\r\n                    ctx.moveTo(tv.start[4], tv.start[5]);\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5]);\r\n                } else if (j === trim.endIndex + 1) {\r\n                    tv = this.trim(lastVertex, nextVertex, 0, trim.end, frame.len[j - 1]);\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5]);\r\n                } else if (j > trim.startIndex + 1 && j < trim.endIndex + 1) {\r\n                    ctx.bezierCurveTo(lastVertex[0], lastVertex[1], nextVertex[2], nextVertex[3], nextVertex[4], nextVertex[5]);\r\n                }\r\n            } else {\r\n                if (j === 1) {\r\n                    ctx.moveTo(lastVertex[4], lastVertex[5]);\r\n                }\r\n                ctx.bezierCurveTo(lastVertex[0], lastVertex[1], nextVertex[2], nextVertex[3], nextVertex[4], nextVertex[5]);\r\n            }\r\n        }\r\n\r\n        if (!trim && this.closed) {\r\n            if (!nextVertex) debugger;\r\n            ctx.bezierCurveTo(nextVertex[0], nextVertex[1], vertices[0][2], vertices[0][3], vertices[0][4], vertices[0][5]);\r\n        }\r\n    }\r\n\r\n    getValue() {\r\n        return this.frames[0];\r\n    }\r\n\r\n    getTrimValues(trim, frame) {\r\n        let i;\r\n\r\n        const actualTrim = {\r\n            startIndex: 0,\r\n            endIndex: 0,\r\n            start: 0,\r\n            end: 0\r\n        };\r\n\r\n        // TODO clean up\r\n        if (trim.start === 0) {\r\n            if (trim.end === 0) {\r\n                return actualTrim;\r\n            } else if (trim.end === 1) {\r\n                actualTrim.endIndex = frame.len.length;\r\n                actualTrim.end = 1;\r\n                return actualTrim;\r\n            }\r\n        }\r\n\r\n        const totalLen = this.sumArray(frame.len);\r\n        let trimAtLen;\r\n\r\n        trimAtLen = totalLen * trim.start;\r\n\r\n        for (i = 0; i < frame.len.length; i++) {\r\n            if (trimAtLen > 0 && trimAtLen < frame.len[i]) {\r\n                actualTrim.startIndex = i;\r\n                actualTrim.start = trimAtLen / frame.len[i];\r\n            }\r\n            trimAtLen -= frame.len[i];\r\n        }\r\n\r\n        if (trim.end === 1) {\r\n            actualTrim.endIndex = frame.len.length;\r\n            actualTrim.end = 1;\r\n            return actualTrim;\r\n        } else {\r\n            trimAtLen = totalLen * trim.end;\r\n\r\n            for (i = 0; i < frame.len.length; i++) {\r\n                if (trimAtLen > 0 && trimAtLen < frame.len[i]) {\r\n                    actualTrim.endIndex = i;\r\n                    actualTrim.end = trimAtLen / frame.len[i];\r\n                }\r\n                trimAtLen -= frame.len[i];\r\n            }\r\n        }\r\n\r\n        return actualTrim;\r\n    }\r\n\r\n    trim(lastVertex, nextVertex, from, to, len) {\r\n\r\n        if (from === 0 && to === 1) {\r\n            return {\r\n                start: lastVertex,\r\n                end: nextVertex\r\n            };\r\n        }\r\n\r\n        if (this.isStraight(lastVertex[4], lastVertex[5], lastVertex[0], lastVertex[1], nextVertex[2], nextVertex[3], nextVertex[4], nextVertex[5])) {\r\n            startVertex = [\r\n                this.lerp(lastVertex[0], nextVertex[0], from),\r\n                this.lerp(lastVertex[1], nextVertex[1], from),\r\n                this.lerp(lastVertex[2], nextVertex[2], from),\r\n                this.lerp(lastVertex[3], nextVertex[3], from),\r\n                this.lerp(lastVertex[4], nextVertex[4], from),\r\n                this.lerp(lastVertex[5], nextVertex[5], from)\r\n            ];\r\n\r\n            endVertex = [\r\n                this.lerp(lastVertex[0], nextVertex[0], to),\r\n                this.lerp(lastVertex[1], nextVertex[1], to),\r\n                this.lerp(lastVertex[2], nextVertex[2], to),\r\n                this.lerp(lastVertex[3], nextVertex[3], to),\r\n                this.lerp(lastVertex[4], nextVertex[4], to),\r\n                this.lerp(lastVertex[5], nextVertex[5], to)\r\n            ];\r\n\r\n        } else {\r\n            this.bezier = new Bezier([lastVertex[4], lastVertex[5], lastVertex[0], lastVertex[1], nextVertex[2], nextVertex[3], nextVertex[4], nextVertex[5]]);\r\n            this.bezier.getLength(len);\r\n            from = this.bezier.map(from);\r\n            to = this.bezier.map(to);\r\n            to = (to - from) / (1 - from);\r\n\r\n            let e1;\r\n            let f1;\r\n            let g1;\r\n            let h1;\r\n            let j1;\r\n            let k1;\r\n            let e2;\r\n            let f2;\r\n            let g2;\r\n            let h2;\r\n            let j2;\r\n            let k2;\r\n            var startVertex;\r\n            var endVertex;\r\n\r\n            e1 = [this.lerp(lastVertex[4], lastVertex[0], from), this.lerp(lastVertex[5], lastVertex[1], from)];\r\n            f1 = [this.lerp(lastVertex[0], nextVertex[2], from), this.lerp(lastVertex[1], nextVertex[3], from)];\r\n            g1 = [this.lerp(nextVertex[2], nextVertex[4], from), this.lerp(nextVertex[3], nextVertex[5], from)];\r\n            h1 = [this.lerp(e1[0], f1[0], from), this.lerp(e1[1], f1[1], from)];\r\n            j1 = [this.lerp(f1[0], g1[0], from), this.lerp(f1[1], g1[1], from)];\r\n            k1 = [this.lerp(h1[0], j1[0], from), this.lerp(h1[1], j1[1], from)];\r\n\r\n            startVertex = [j1[0], j1[1], h1[0], h1[1], k1[0], k1[1]];\r\n            endVertex = [nextVertex[0], nextVertex[1], g1[0], g1[1], nextVertex[4], nextVertex[5]];\r\n\r\n            e2 = [this.lerp(startVertex[4], startVertex[0], to), this.lerp(startVertex[5], startVertex[1], to)];\r\n            f2 = [this.lerp(startVertex[0], endVertex[2], to), this.lerp(startVertex[1], endVertex[3], to)];\r\n            g2 = [this.lerp(endVertex[2], endVertex[4], to), this.lerp(endVertex[3], endVertex[5], to)];\r\n\r\n            h2 = [this.lerp(e2[0], f2[0], to), this.lerp(e2[1], f2[1], to)];\r\n            j2 = [this.lerp(f2[0], g2[0], to), this.lerp(f2[1], g2[1], to)];\r\n            k2 = [this.lerp(h2[0], j2[0], to), this.lerp(h2[1], j2[1], to)];\r\n\r\n            startVertex = [e2[0], e2[1], startVertex[2], startVertex[3], startVertex[4], startVertex[5]];\r\n            endVertex = [j2[0], j2[1], h2[0], h2[1], k2[0], k2[1]];\r\n        }\r\n\r\n        return {\r\n            start: startVertex,\r\n            end: endVertex\r\n        };\r\n    }\r\n\r\n    lerp(a, b, t) {\r\n        const s = 1 - t;\r\n        return a * s + b * t;\r\n    }\r\n\r\n    sumArray(arr) {\r\n        function add(a, b) {\r\n            return a + b;\r\n        }\r\n\r\n        return arr.reduce(add);\r\n    }\r\n\r\n    isStraight(startX, startY, ctrl1X, ctrl1Y, ctrl2X, ctrl2Y, endX, endY) {\r\n        return startX === ctrl1X && startY === ctrl1Y && endX === ctrl2X && endY === ctrl2Y;\r\n    }\r\n\r\n    setKeyframes(time) {\r\n    }\r\n\r\n    reset(reversed) {\r\n    }\r\n}\r\n\r\nexport default Path;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/objects/Path.js","import Path from './Path';\r\nimport BezierEasing from '../utils/BezierEasing';\r\n\r\nclass AnimatedPath extends Path {\r\n\r\n    constructor(data) {\r\n        super(data);\r\n        this.frameCount = this.frames.length;\r\n    }\r\n\r\n    getValue(time) {\r\n        if (this.finished && time >= this.nextFrame.t) {\r\n            return this.nextFrame;\r\n        } else if (!this.started && time <= this.lastFrame.t) {\r\n            return this.lastFrame;\r\n        } else {\r\n            this.started = true;\r\n            this.finished = false;\r\n            if (time > this.nextFrame.t) {\r\n                if (this.pointer + 1 === this.frameCount) {\r\n                    this.finished = true;\r\n                } else {\r\n                    this.pointer++;\r\n                    this.lastFrame = this.frames[this.pointer - 1];\r\n                    this.nextFrame = this.frames[this.pointer];\r\n                    this.onKeyframeChange();\r\n                }\r\n            } else if (time < this.lastFrame.t) {\r\n                if (this.pointer < 2) {\r\n                    this.started = false;\r\n                } else {\r\n                    this.pointer--;\r\n                    this.lastFrame = this.frames[this.pointer - 1];\r\n                    this.nextFrame = this.frames[this.pointer];\r\n                    this.onKeyframeChange();\r\n                }\r\n            }\r\n            return this.getValueAtTime(time);\r\n        }\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        if (time < this.frames[0].t) {\r\n            this.pointer = 1;\r\n            this.nextFrame = this.frames[this.pointer];\r\n            this.lastFrame = this.frames[this.pointer - 1];\r\n            this.onKeyframeChange();\r\n            return;\r\n        }\r\n\r\n        if (time > this.frames[this.frameCount - 1].t) {\r\n            this.pointer = this.frameCount - 1;\r\n            this.nextFrame = this.frames[this.pointer];\r\n            this.lastFrame = this.frames[this.pointer - 1];\r\n            this.onKeyframeChange();\r\n            return;\r\n        }\r\n\r\n        for (let i = 1; i < this.frameCount; i++) {\r\n            if (time >= this.frames[i - 1].t && time <= this.frames[i]) {\r\n                this.pointer = i;\r\n                this.lastFrame = this.frames[i - 1];\r\n                this.nextFrame = this.frames[i];\r\n                this.onKeyframeChange();\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    onKeyframeChange() {\r\n        this.setEasing();\r\n    }\r\n\r\n    lerp(a, b, t) {\r\n        return a + t * (b - a);\r\n    }\r\n\r\n    setEasing() {\r\n        if (this.lastFrame.easeOut && this.nextFrame.easeIn) {\r\n            this.easing = new BezierEasing(this.lastFrame.easeOut[0], this.lastFrame.easeOut[1], this.nextFrame.easeIn[0], this.nextFrame.easeIn[1]);\r\n        } else {\r\n            this.easing = null;\r\n        }\r\n    }\r\n\r\n    getValueAtTime(time) {\r\n        const delta = (time - this.lastFrame.t);\r\n        const duration = this.nextFrame.t - this.lastFrame.t;\r\n        let elapsed = delta / duration;\r\n        if (elapsed > 1) elapsed = 1;\r\n        else if (elapsed < 0) elapsed = 0;\r\n        else if (this.easing) elapsed = this.easing(elapsed);\r\n        const actualVertices = [];\r\n        const actualLength = [];\r\n\r\n        for (let i = 0; i < this.verticesCount; i++) {\r\n            const cp1x = this.lerp(this.lastFrame.v[i][0], this.nextFrame.v[i][0], elapsed);\r\n            const cp1y = this.lerp(this.lastFrame.v[i][1], this.nextFrame.v[i][1], elapsed);\r\n            const cp2x = this.lerp(this.lastFrame.v[i][2], this.nextFrame.v[i][2], elapsed);\r\n            const cp2y = this.lerp(this.lastFrame.v[i][3], this.nextFrame.v[i][3], elapsed);\r\n            const x = this.lerp(this.lastFrame.v[i][4], this.nextFrame.v[i][4], elapsed);\r\n            const y = this.lerp(this.lastFrame.v[i][5], this.nextFrame.v[i][5], elapsed);\r\n\r\n            actualVertices.push([cp1x, cp1y, cp2x, cp2y, x, y]);\r\n        }\r\n\r\n        for (let j = 0; j < this.verticesCount - 1; j++) {\r\n            actualLength.push(this.lerp(this.lastFrame.len[j], this.nextFrame.len[j], elapsed));\r\n        }\r\n\r\n        return {\r\n            v: actualVertices,\r\n            len: actualLength\r\n        }\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.finished = false;\r\n        this.started = false;\r\n        this.pointer = reversed ? this.frameCount - 1 : 1;\r\n        this.nextFrame = this.frames[this.pointer];\r\n        this.lastFrame = this.frames[this.pointer - 1];\r\n        this.onKeyframeChange();\r\n    }\r\n}\r\n\r\nexport default AnimatedPath;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/objects/AnimatedPath.js","import Property from '../property/Property';\r\nimport AnimatedProperty from '../property/AnimatedProperty';\r\nimport Position from './Position';\r\n\r\nclass Transform {\r\n\r\n    constructor(data) {\r\n        if (data.position) {\r\n            if (data.position.length > 1) {\r\n                this.position = new Position(data.position);\r\n            } else {\r\n                this.position = new Property(data.position);\r\n            }\r\n        }\r\n\r\n        if (data.positionX) this.positionX = data.positionX.length > 1 ? new AnimatedProperty(data.positionX) : new Property(data.positionX);\r\n        if (data.positionY) this.positionY = data.positionY.length > 1 ? new AnimatedProperty(data.positionY) : new Property(data.positionY);\r\n        if (data.anchor) this.anchor = data.anchor.length > 1 ? new AnimatedProperty(data.anchor) : new Property(data.anchor);\r\n        if (data.scaleX) this.scaleX = data.scaleX.length > 1 ? new AnimatedProperty(data.scaleX) : new Property(data.scaleX);\r\n        if (data.scaleY) this.scaleY = data.scaleY.length > 1 ? new AnimatedProperty(data.scaleY) : new Property(data.scaleY);\r\n        if (data.skew) this.skew = data.skew.length > 1 ? new AnimatedProperty(data.skew) : new Property(data.skew);\r\n        if (data.skewAxis) this.skewAxis = data.skewAxis.length > 1 ? new AnimatedProperty(data.skewAxis) : new Property(data.skewAxis);\r\n        if (data.rotation) this.rotation = data.rotation.length > 1 ? new AnimatedProperty(data.rotation) : new Property(data.rotation);\r\n        if (data.opacity) this.opacity = data.opacity.length > 1 ? new AnimatedProperty(data.opacity) : new Property(data.opacity);\r\n    }\r\n\r\n    transform(ctx, time) {\r\n        let positionX; // FIXME wrong transparency if nested\r\n        let positionY;\r\n        const anchor = this.anchor ? this.anchor.getValue(time) : [0, 0];\r\n        const rotation = this.rotation ? this.deg2rad(this.rotation.getValue(time)) : 0;\r\n        const skew = this.skew ? this.deg2rad(this.skew.getValue(time)) : 0;\r\n        const skewAxis = this.skewAxis ? this.deg2rad(this.skewAxis.getValue(time)) : 0;\r\n        const scaleX = this.scaleX ? this.scaleX.getValue(time) : 1;\r\n        const scaleY = this.scaleY ? this.scaleY.getValue(time) : 1;\r\n        const opacity = this.opacity ? this.opacity.getValue(time) * ctx.globalAlpha : ctx.globalAlpha;\r\n\r\n        if (this.position) {\r\n            const position = this.position.getValue(time, ctx);\r\n            positionX = position[0];\r\n            positionY = position[1];\r\n        } else {\r\n            positionX = this.positionX ? this.positionX.getValue(time) : 0;\r\n            positionY = this.positionY ? this.positionY.getValue(time) : 0;\r\n        }\r\n\r\n        // console.log(ctx, positionX, positionY, anchor, rotation, skew, skewAxis, scaleX, scaleY, opacity);\r\n\r\n        //order very very important :)\r\n        ctx.transform(1, 0, 0, 1, positionX - anchor[0], positionY - anchor[1]);\r\n        this.setRotation(ctx, rotation, anchor[0], anchor[1]);\r\n        this.setSkew(ctx, skew, skewAxis, anchor[0], anchor[1]);\r\n        this.setScale(ctx, scaleX, scaleY, anchor[0], anchor[1]);\r\n        ctx.globalAlpha = opacity;\r\n    }\r\n\r\n    setRotation(ctx, rad, x, y) {\r\n        const c = Math.cos(rad);\r\n        const s = Math.sin(rad);\r\n        const dx = x - c * x + s * y;\r\n        const dy = y - s * x - c * y;\r\n        ctx.transform(c, s, -s, c, dx, dy);\r\n    }\r\n\r\n    setScale(ctx, sx, sy, x, y) {\r\n        ctx.transform(sx, 0, 0, sy, -x * sx + x, -y * sy + y);\r\n    }\r\n\r\n    setSkew(ctx, skew, axis, x, y) {\r\n        const t = Math.tan(-skew);\r\n        this.setRotation(ctx, -axis, x, y);\r\n        ctx.transform(1, 0, t, 1, -y * t, 0);\r\n        this.setRotation(ctx, axis, x, y);\r\n    }\r\n\r\n    deg2rad(deg) {\r\n        return deg * (Math.PI / 180);\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        if (this.anchor) this.anchor.setKeyframes(time);\r\n        if (this.rotation) this.rotation.setKeyframes(time);\r\n        if (this.skew) this.skew.setKeyframes(time);\r\n        if (this.skewAxis) this.skewAxis.setKeyframes(time);\r\n        if (this.position) this.position.setKeyframes(time);\r\n        if (this.positionX) this.positionX.setKeyframes(time);\r\n        if (this.positionY) this.positionY.setKeyframes(time);\r\n        if (this.scaleX) this.scaleX.setKeyframes(time);\r\n        if (this.scaleY) this.scaleY.setKeyframes(time);\r\n        if (this.opacity) this.opacity.setKeyframes(time);\r\n    }\r\n\r\n    reset(reversed) {\r\n        if (this.anchor) this.anchor.reset(reversed);\r\n        if (this.rotation) this.rotation.reset(reversed);\r\n        if (this.skew) this.skew.reset(reversed);\r\n        if (this.skewAxis) this.skewAxis.reset(reversed);\r\n        if (this.position) this.position.reset(reversed);\r\n        if (this.positionX) this.positionX.reset(reversed);\r\n        if (this.positionY) this.positionY.reset(reversed);\r\n        if (this.scaleX) this.scaleX.reset(reversed);\r\n        if (this.scaleY) this.scaleY.reset(reversed);\r\n        if (this.opacity) this.opacity.reset(reversed);\r\n    }\r\n}\r\n\r\nexport default Transform;\n\n\n// WEBPACK FOOTER //\n// ./src/transform/Transform.js","import {requestAnimationFrame} from \"./utils/shim\";\r\n\r\nconst _animations = [];\r\nlet _animationsLength = 0;\r\n\r\nlet _autoPlay = false;\r\nlet _rafId;\r\n\r\nconst update = time => {\r\n    if (_autoPlay) {\r\n        _rafId = requestAnimationFrame(update);\r\n    }\r\n    time = time !== undefined ? time : performance.now();\r\n\r\n    for (let i = 0; i < _animationsLength; i++) {\r\n        _animations[i].update(time);\r\n    }\r\n};\r\n\r\nconst autoPlay = auto => {\r\n    _autoPlay = auto;\r\n    _autoPlay ? _rafId = requestAnimationFrame(update) : cancelAnimationFrame(_rafId);\r\n};\r\n\r\nfunction add(tween) {\r\n    _animations.push(tween);\r\n    _animationsLength = _animations.length;\r\n}\r\n\r\nfunction remove(tween) {\r\n    const i = _animations.indexOf(tween);\r\n    if (i > -1) {\r\n        _animations.splice(i, 1);\r\n        _animationsLength = _animations.length;\r\n    }\r\n}\r\n\r\nexport {update, autoPlay, add, remove};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core.js","import Stroke from '../property/Stroke';\r\nimport Path from './Path';\r\nimport Rect from './Rect';\r\nimport Ellipse from './Ellipse';\r\nimport Polystar from './Polystar';\r\nimport AnimatedPath from './AnimatedPath';\r\nimport Fill from '../property/Fill';\r\nimport GradientFill from '../property/GradientFill';\r\nimport Transform from '../transform/Transform';\r\nimport Merge from '../property/Merge';\r\nimport Trim from '../property/Trim';\r\n\r\nclass Group {\r\n    constructor(data, bufferCtx, parentIn, parentOut, gradients) {\r\n\r\n        this.index = data.index;\r\n        this.in = data.in ? data.in : parentIn;\r\n        this.out = data.out ? data.out : parentOut;\r\n\r\n        if (data.parent) this.parent = data.parent;\r\n        if (data.fill) this.fill = new Fill(data.fill);\r\n        if (data.gradientFill) this.fill = new GradientFill(data.gradientFill, gradients);\r\n        if (data.stroke) this.stroke = new Stroke(data.stroke);\r\n        if (data.trim) this.trim = new Trim(data.trim);\r\n        if (data.merge) this.merge = new Merge(data.merge);\r\n\r\n        this.transform = new Transform(data.transform);\r\n        this.bufferCtx = bufferCtx;\r\n\r\n        if (data.groups) {\r\n            this.groups = [];\r\n            for (let i = 0; i < data.groups.length; i++) {\r\n                this.groups.push(new Group(data.groups[i], this.bufferCtx, this.in, this.out, gradients));\r\n            }\r\n        }\r\n\r\n        if (data.shapes) {\r\n            this.shapes = [];\r\n\r\n            for (const shape of data.shapes) {\r\n                if (shape.type === 'path') {\r\n                    if (shape.isAnimated) this.shapes.push(new AnimatedPath(shape));\r\n                    else this.shapes.push(new Path(shape));\r\n                } else if (shape.type === 'rect') {\r\n                    this.shapes.push(new Rect(shape));\r\n                } else if (shape.type === 'ellipse') {\r\n                    this.shapes.push(new Ellipse(shape));\r\n                } else if (shape.type === 'polystar') {\r\n                    this.shapes.push(new Polystar(shape));\r\n                }\r\n            }\r\n        }\r\n\r\n        if (data.masks) {\r\n            this.masks = [];\r\n\r\n            for (const mask of data.masks) {\r\n                if (mask.isAnimated) this.masks.push(new AnimatedPath(mask));\r\n                else this.masks.push(new Path(mask));\r\n            }\r\n        }\r\n    }\r\n\r\n    draw(ctx, time, parentFill, parentStroke, parentTrim, isBuffer) {\r\n\r\n        if (this.transform.opacity && this.transform.opacity.getValue(time) === 0) return;\r\n\r\n        let i;\r\n\r\n        ctx.save();\r\n        this.bufferCtx.save();\r\n\r\n        //TODO check if color/stroke is changing over time\r\n        const fill = this.fill || parentFill;\r\n        const stroke = this.stroke || parentStroke;\r\n        const trimValues = this.trim ? this.trim.getTrim(time) : parentTrim;\r\n\r\n        if (fill) fill.setColor(ctx, time);\r\n        if (stroke) stroke.setStroke(ctx, time);\r\n\r\n        if (!isBuffer) {\r\n            if (this.parent) this.parent.setParentTransform(ctx, time);\r\n            this.transform.transform(ctx, time);\r\n        }\r\n        this.transform.transform(this.bufferCtx, time);\r\n\r\n        if (this.merge) {\r\n            this.bufferCtx.save();\r\n            this.bufferCtx.setTransform(1, 0, 0, 1, 0, 0);\r\n            this.bufferCtx.clearRect(0, 0, this.bufferCtx.canvas.width, this.bufferCtx.canvas.height);\r\n            this.bufferCtx.restore();\r\n\r\n            if (fill) fill.setColor(this.bufferCtx, time);\r\n            if (stroke) stroke.setStroke(this.bufferCtx, time);\r\n        }\r\n\r\n        if (this.masks) {\r\n            ctx.beginPath();\r\n            for (i = 0; i < this.masks.length; i++) {\r\n                this.masks[i].draw(ctx, time);\r\n            }\r\n            ctx.clip();\r\n        }\r\n\r\n        ctx.beginPath();\r\n        if (this.shapes) this.drawShapes(ctx, time, fill, stroke, trimValues);\r\n\r\n        //TODO get order\r\n        if (fill) ctx.fill();\r\n        if (!isBuffer && stroke) ctx.stroke();\r\n\r\n        if (this.groups) this.drawGroups(ctx, time, fill, stroke, trimValues);\r\n\r\n        ctx.restore();\r\n        this.bufferCtx.restore();\r\n    }\r\n\r\n    drawShapes(ctx, time, fill, stroke, trimValues) {\r\n        let i;\r\n        if (this.merge) {\r\n            for (i = 0; i < this.shapes.length; i++) {\r\n                this.shapes[i].draw(this.bufferCtx, time, trimValues);\r\n                this.bufferCtx.closePath();\r\n                if (fill) this.bufferCtx.fill();\r\n                if (stroke) this.bufferCtx.stroke();\r\n                this.bufferCtx.beginPath();\r\n                this.merge.setCompositeOperation(this.bufferCtx);\r\n            }\r\n\r\n            ctx.restore();\r\n            ctx.save();\r\n            ctx.setTransform(1, 0, 0, 1, 0, 0);\r\n            ctx.drawImage(this.bufferCtx.canvas, 0, 0);\r\n            ctx.restore();\r\n\r\n        } else {\r\n            for (i = 0; i < this.shapes.length; i++) {\r\n                this.shapes[i].draw(ctx, time, trimValues);\r\n            }\r\n            if (this.shapes[this.shapes.length - 1].closed) {\r\n                // ctx.closePath();\r\n            }\r\n        }\r\n    }\r\n\r\n    drawGroups(ctx, time, fill, stroke, trimValues) {\r\n        let i;\r\n        if (this.merge) {\r\n            for (i = 0; i < this.groups.length; i++) {\r\n                if (time >= this.groups[i].in && time <= this.groups[i].out) {\r\n                    this.groups[i].draw(this.bufferCtx, time, fill, stroke, trimValues, true);\r\n                    this.merge.setCompositeOperation(this.bufferCtx);\r\n                }\r\n            }\r\n            ctx.save();\r\n            ctx.setTransform(1, 0, 0, 1, 0, 0);\r\n            ctx.drawImage(this.bufferCtx.canvas, 0, 0);\r\n            ctx.restore();\r\n            this.bufferCtx.restore();\r\n        }\r\n        else {\r\n            for (i = 0; i < this.groups.length; i++) {\r\n                if (time >= this.groups[i].in && time <= this.groups[i].out) {\r\n                    this.groups[i].draw(ctx, time, fill, stroke, trimValues, false);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    setParentTransform(ctx, time) {\r\n        if (this.parent) this.parent.setParentTransform(ctx, time);\r\n        this.transform.transform(ctx, time);\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.transform.setKeyframes(time);\r\n\r\n        if (this.shapes) {\r\n            for (let i = 0; i < this.shapes.length; i++) {\r\n                this.shapes[i].setKeyframes(time);\r\n            }\r\n        }\r\n        if (this.masks) {\r\n            for (let j = 0; j < this.masks.length; j++) {\r\n                this.masks[j].setKeyframes(time);\r\n            }\r\n        }\r\n        if (this.groups) {\r\n            for (let k = 0; k < this.groups.length; k++) {\r\n                this.groups[k].setKeyframes(time);\r\n            }\r\n        }\r\n\r\n        if (this.fill) this.fill.setKeyframes(time);\r\n        if (this.stroke) this.stroke.setKeyframes(time);\r\n        if (this.trim) this.trim.setKeyframes(time);\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.transform.reset(reversed);\r\n\r\n        if (this.shapes) {\r\n            for (let i = 0; i < this.shapes.length; i++) {\r\n                this.shapes[i].reset(reversed);\r\n            }\r\n        }\r\n        if (this.masks) {\r\n            for (let j = 0; j < this.masks.length; j++) {\r\n                this.masks[j].reset(reversed);\r\n            }\r\n        }\r\n        if (this.groups) {\r\n            for (let k = 0; k < this.groups.length; k++) {\r\n                this.groups[k].reset(reversed);\r\n            }\r\n        }\r\n        if (this.fill) this.fill.reset(reversed);\r\n        if (this.stroke) this.stroke.reset(reversed);\r\n        if (this.trim) this.trim.reset(reversed);\r\n    }\r\n}\r\n\r\nexport default Group;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/objects/Group.js","/**\r\n * BezierEasing - use bezier curve for transition easing function\r\n * is based on Firefox's nsSMILKeySpline.cpp\r\n * Usage:\r\n * var spline = BezierEasing(0.25, 0.1, 0.25, 1.0)\r\n * spline(x) => returns the easing value | x must be in [0, 1] range\r\n *\r\n */\r\n(function (definition) {\r\n    if (typeof exports === \"object\") {\r\n        module.exports = definition();\r\n    }\r\n    else if (typeof window.define === 'function' && window.define.amd) {\r\n        window.define([], definition);\r\n    } else {\r\n        window.BezierEasing = definition();\r\n    }\r\n}(function () {\r\n\r\n    // These values are established by empiricism with tests (tradeoff: performance VS precision)\r\n    var NEWTON_ITERATIONS = 4;\r\n    var NEWTON_MIN_SLOPE = 0.001;\r\n    var SUBDIVISION_PRECISION = 0.0000001;\r\n    var SUBDIVISION_MAX_ITERATIONS = 10;\r\n\r\n    var kSplineTableSize = 11;\r\n    var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\r\n\r\n    var float32ArraySupported = typeof Float32Array === \"function\";\r\n\r\n    function BezierEasing (mX1, mY1, mX2, mY2) {\r\n\r\n        // Validate arguments\r\n        if (arguments.length !== 4) {\r\n            throw new Error(\"BezierEasing requires 4 arguments.\");\r\n        }\r\n        for (var i=0; i<4; ++i) {\r\n            if (typeof arguments[i] !== \"number\" || isNaN(arguments[i]) || !isFinite(arguments[i])) {\r\n                throw new Error(\"BezierEasing arguments should be integers.\");\r\n            }\r\n        }\r\n        if (mX1 < 0 || mX1 > 1 || mX2 < 0 || mX2 > 1) {\r\n            throw new Error(\"BezierEasing x values must be in [0, 1] range.\");\r\n        }\r\n\r\n        var mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\r\n\r\n        function A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\r\n        function B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\r\n        function C (aA1)      { return 3.0 * aA1; }\r\n\r\n        // Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\r\n        function calcBezier (aT, aA1, aA2) {\r\n            return ((A(aA1, aA2)*aT + B(aA1, aA2))*aT + C(aA1))*aT;\r\n        }\r\n\r\n        // Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\r\n        function getSlope (aT, aA1, aA2) {\r\n            return 3.0 * A(aA1, aA2)*aT*aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\r\n        }\r\n\r\n        function newtonRaphsonIterate (aX, aGuessT) {\r\n            for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\r\n                var currentSlope = getSlope(aGuessT, mX1, mX2);\r\n                if (currentSlope === 0.0) return aGuessT;\r\n                var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\r\n                aGuessT -= currentX / currentSlope;\r\n            }\r\n            return aGuessT;\r\n        }\r\n\r\n        function calcSampleValues () {\r\n            for (var i = 0; i < kSplineTableSize; ++i) {\r\n                mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\r\n            }\r\n        }\r\n\r\n        function binarySubdivide (aX, aA, aB) {\r\n            var currentX, currentT, i = 0;\r\n            do {\r\n                currentT = aA + (aB - aA) / 2.0;\r\n                currentX = calcBezier(currentT, mX1, mX2) - aX;\r\n                if (currentX > 0.0) {\r\n                    aB = currentT;\r\n                } else {\r\n                    aA = currentT;\r\n                }\r\n            } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\r\n            return currentT;\r\n        }\r\n\r\n        function getTForX (aX) {\r\n            var intervalStart = 0.0;\r\n            var currentSample = 1;\r\n            var lastSample = kSplineTableSize - 1;\r\n\r\n            for (; currentSample != lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {\r\n                intervalStart += kSampleStepSize;\r\n            }\r\n            --currentSample;\r\n\r\n            // Interpolate to provide an initial guess for t\r\n            var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample+1] - mSampleValues[currentSample]);\r\n            var guessForT = intervalStart + dist * kSampleStepSize;\r\n\r\n            var initialSlope = getSlope(guessForT, mX1, mX2);\r\n            if (initialSlope >= NEWTON_MIN_SLOPE) {\r\n                return newtonRaphsonIterate(aX, guessForT);\r\n            } else if (initialSlope == 0.0) {\r\n                return guessForT;\r\n            } else {\r\n                return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize);\r\n            }\r\n        }\r\n\r\n        if (mX1 != mY1 || mX2 != mY2)\r\n            calcSampleValues();\r\n\r\n        var f = function (aX) {\r\n            if (mX1 === mY1 && mX2 === mY2) return aX; // linear\r\n            // Because JavaScript number are imprecise, we should guarantee the extremes are right.\r\n            if (aX === 0) return 0;\r\n            if (aX === 1) return 1;\r\n            return calcBezier(getTForX(aX), mY1, mY2);\r\n        };\r\n        var str = \"BezierEasing(\"+[mX1, mY1, mX2, mY2]+\")\";\r\n        f.toString = function () { return str; };\r\n\r\n        return f;\r\n    }\r\n\r\n    // CSS mapping\r\n    BezierEasing.css = {\r\n        \"ease\":        BezierEasing(0.25, 0.1, 0.25, 1.0),\r\n        \"linear\":      BezierEasing(0.00, 0.0, 1.00, 1.0),\r\n        \"ease-in\":     BezierEasing(0.42, 0.0, 1.00, 1.0),\r\n        \"ease-out\":    BezierEasing(0.00, 0.0, 0.58, 1.0),\r\n        \"ease-in-out\": BezierEasing(0.42, 0.0, 0.58, 1.0)\r\n    };\r\n\r\n    return BezierEasing;\r\n}));\n\n\n// WEBPACK FOOTER //\n// ./src/utils/BezierEasing.js","class Bezier {\r\n\r\n    constructor(path) {\r\n        this.path = path;\r\n    }\r\n\r\n    getLength(len) {\r\n        this.steps = Math.max(Math.floor(len / 10), 1);\r\n        this.arcLengths = new Array(this.steps + 1);\r\n        this.arcLengths[0] = 0;\r\n\r\n        let ox = this.cubicN(0, this.path[0], this.path[2], this.path[4], this.path[6]);\r\n        let oy = this.cubicN(0, this.path[1], this.path[3], this.path[5], this.path[7]);\r\n        let clen = 0;\r\n        const iterator = 1 / this.steps;\r\n\r\n        for (let i = 1; i <= this.steps; i += 1) {\r\n            const x = this.cubicN(i * iterator, this.path[0], this.path[2], this.path[4], this.path[6]);\r\n            const y = this.cubicN(i * iterator, this.path[1], this.path[3], this.path[5], this.path[7]);\r\n            const dx = ox - x;\r\n            const dy = oy - y;\r\n\r\n            clen += Math.sqrt(dx * dx + dy * dy);\r\n            this.arcLengths[i] = clen;\r\n\r\n            ox = x;\r\n            oy = y;\r\n        }\r\n\r\n        this.length = clen;\r\n    }\r\n\r\n    map(u) {\r\n        const targetLength = u * this.arcLengths[this.steps];\r\n        let low = 0;\r\n        let high = this.steps;\r\n        let index = 0;\r\n\r\n        while (low < high) {\r\n            index = low + (((high - low) / 2) | 0);\r\n            if (this.arcLengths[index] < targetLength) {\r\n                low = index + 1;\r\n\r\n            } else {\r\n                high = index;\r\n            }\r\n        }\r\n        if (this.arcLengths[index] > targetLength) {\r\n            index--;\r\n        }\r\n\r\n        const lengthBefore = this.arcLengths[index];\r\n        if (lengthBefore === targetLength) {\r\n            return index / this.steps;\r\n        } else {\r\n            return (index + (targetLength - lengthBefore) / (this.arcLengths[index + 1] - lengthBefore)) / this.steps;\r\n        }\r\n    }\r\n\r\n    getValues(elapsed) {\r\n        const t = this.map(elapsed);\r\n        const x = this.cubicN(t, this.path[0], this.path[2], this.path[4], this.path[6]);\r\n        const y = this.cubicN(t, this.path[1], this.path[3], this.path[5], this.path[7]);\r\n\r\n        return [x, y];\r\n    }\r\n\r\n    cubicN(pct, a, b, c, d) {\r\n        const t2 = pct * pct;\r\n        const t3 = t2 * pct;\r\n        return a + (-a * 3 + pct * (3 * a - a * pct)) * pct\r\n            + (3 * b + pct * (-6 * b + b * 3 * pct)) * pct\r\n            + (c * 3 - c * 3 * pct) * t2\r\n            + d * t3;\r\n    }\r\n}\r\n\r\nexport default Bezier;\n\n\n// WEBPACK FOOTER //\n// ./src/utils/Bezier.js","import Transform from '../transform/Transform';\r\nimport Path from '../objects/Path';\r\nimport AnimatedPath from '../objects/AnimatedPath';\r\n\r\nclass ImageLayer {\r\n    constructor(data, parentIn, parentOut, basePath) {\r\n\r\n        this.isLoaded = false;\r\n\r\n        this.index = data.index;\r\n        this.source = basePath + data.source;\r\n        this.in = data.in ? data.in : parentIn;\r\n        this.out = data.out ? data.out : parentOut;\r\n\r\n        if (data.parent) this.parent = data.parent;\r\n\r\n        this.transform = new Transform(data.transform);\r\n\r\n        if (data.masks) {\r\n            this.masks = [];\r\n\r\n            for (const mask of data.masks) {\r\n                if (mask.isAnimated) this.masks.push(new AnimatedPath(mask));\r\n                else this.masks.push(new Path(mask));\r\n            }\r\n        }\r\n    }\r\n\r\n    preload(cb) {\r\n        this.img = new Image;\r\n        this.img.onload = () => {\r\n            this.isLoaded = true;\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n        };\r\n\r\n        this.img.src = this.source;\r\n    }\r\n\r\n    draw(ctx, time) {\r\n\r\n        if (!this.isLoaded) return;\r\n\r\n        ctx.save();\r\n        if (this.parent) this.parent.setParentTransform(ctx, time);\r\n        this.transform.transform(ctx, time);\r\n\r\n        if (this.masks) {\r\n            ctx.beginPath();\r\n            for (let i = 0; i < this.masks.length; i++) {\r\n                this.masks[i].draw(ctx, time);\r\n            }\r\n            ctx.clip();\r\n        }\r\n\r\n        ctx.drawImage(this.img, 0, 0);\r\n\r\n        ctx.restore();\r\n    }\r\n\r\n    setParentTransform(ctx, time) {\r\n        if (this.parent) this.parent.setParentTransform(ctx, time);\r\n        this.transform.transform(ctx, time);\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.transform.setKeyframes(time);\r\n        if (this.masks) {\r\n            for (let j = 0; j < this.masks.length; j++) {\r\n                this.masks[j].setKeyframes(time);\r\n            }\r\n        }\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.transform.reset(reversed);\r\n\r\n        if (this.masks) {\r\n            for (let j = 0; j < this.masks.length; j++) {\r\n                this.masks[j].reset(reversed);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default ImageLayer;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layers/ImageLayer.js","import Transform from '../transform/Transform';\r\nimport Path from '../objects/Path';\r\nimport AnimatedPath from '../objects/AnimatedPath';\r\n\r\nclass TextLayer {\r\n    constructor(data, parentIn, parentOut, baseFont) {\r\n        this.index = data.index;\r\n        this.text = data.text;\r\n        this.leading = data.leading;\r\n        this.fontSize = data.fontSize;\r\n        this.font = data.font;\r\n        this.color = data.color;\r\n        this.justification = data.justification;\r\n        this.in = data.in ? data.in : parentIn;\r\n        this.out = data.out ? data.out : parentOut;\r\n        this.baseFont = baseFont;\r\n\r\n        if (data.parent) this.parent = data.parent;\r\n        this.transform = new Transform(data.transform);\r\n\r\n        if (data.masks) {\r\n            this.masks = [];\r\n\r\n            for (const mask of data.masks) {\r\n                if (mask.isAnimated) this.masks.push(new AnimatedPath(mask));\r\n                else this.masks.push(new Path(mask));\r\n            }\r\n        }\r\n    }\r\n\r\n    draw(ctx, time) {\r\n\r\n        ctx.save();\r\n        if (this.parent) this.parent.setParentTransform(ctx, time);\r\n        this.transform.transform(ctx, time);\r\n\r\n        if (this.masks) {\r\n            ctx.beginPath();\r\n            for (let i = 0; i < this.masks.length; i++) {\r\n                this.masks[i].draw(ctx, time);\r\n            }\r\n            ctx.clip();\r\n        }\r\n\r\n        ctx.textAlign = this.justification;\r\n        ctx.font = `${this.fontSize}px ${this.baseFont}` || this.font;\r\n        ctx.fillStyle = `rgb(${this.color[0]}, ${this.color[1]}, ${this.color[2]})`;\r\n        for (let j = 0; j < this.text.length; j++) {\r\n            ctx.fillText(this.text[j], 0, j * this.leading);\r\n        }\r\n\r\n        ctx.restore();\r\n    }\r\n\r\n    setParentTransform(ctx, time) {\r\n        if (this.parent) this.parent.setParentTransform(ctx, time);\r\n        this.transform.transform(ctx, time);\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.transform.setKeyframes(time);\r\n        if (this.masks) {\r\n            for (let j = 0; j < this.masks.length; j++) {\r\n                this.masks[j].setKeyframes(time);\r\n            }\r\n        }\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.transform.reset(reversed);\r\n\r\n        if (this.masks) {\r\n            for (let j = 0; j < this.masks.length; j++) {\r\n                this.masks[j].reset(reversed);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default TextLayer;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layers/TextLayer.js","import {update, autoPlay, add, remove} from './core'\r\nimport Animation from './Animation';\r\nexport {Animation, update, autoPlay, add, remove};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","const root = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : this;\r\n\r\nexport const requestAnimationFrame = root.requestAnimationFrame ||\r\n    (function (fn) {\r\n        return root.setTimeout(fn, 16);\r\n    });\r\n\r\nexport const cancelAnimationFrame = root.cancelAnimationFrame ||\r\n    (function (id) {\r\n        return root.clearTimeout(id);\r\n    });\r\n\r\nexport const performance = (root.performance || {\r\n    offset: Date.now(),\r\n    now: function now(){\r\n        return Date.now() - this.offset;\r\n\r\n    }\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/utils/shim.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 13\n// module chunks = 0","import {add, remove} from './core'\r\nimport Group from './objects/Group';\r\nimport ImageLayer from './layers/ImageLayer';\r\nimport TextLayer from './layers/TextLayer';\r\nimport Comp from './layers/Comp';\r\n\r\nclass Animation {\r\n\r\n    constructor(options) {\r\n        this.gradients = {};\r\n        this.pausedTime = 0;\r\n        this.duration = options.data.duration;\r\n        this.baseWidth = options.data.width;\r\n        this.baseHeight = options.data.height;\r\n        this.ratio = options.data.width / options.data.height;\r\n        this.markers = options.data.markers;\r\n        this.baseFont = options.baseFont;\r\n\r\n        this.canvas = options.canvas || document.createElement('canvas');\r\n        this.loop = options.loop || false;\r\n        this.devicePixelRatio = options.devicePixelRatio || window && window.devicePixelRatio ? window.devicePixelRatio : 1;\r\n        this.fluid = options.fluid || true;\r\n        this.reversed = options.reversed || false;\r\n        this.imageBasePath = options.imageBasePath || '';\r\n        this.onUpdate = options.onUpdate || (() => {\r\n        });\r\n        this.onComplete = options.onComplete || (() => {\r\n        });\r\n        this.onStop = options.onStop || (() => {\r\n        });\r\n\r\n        this.ctx = this.canvas.getContext('2d');\r\n\r\n        this.canvas.width = this.baseWidth;\r\n        this.canvas.height = this.baseHeight;\r\n\r\n        this.buffer = document.createElement('canvas');\r\n        this.buffer.width = this.baseWidth;\r\n        this.buffer.height = this.baseHeight;\r\n        this.bufferCtx = this.buffer.getContext('2d');\r\n\r\n        this.layers = [];\r\n        for (let i = 0; i < options.data.layers.length; i++) {\r\n            if (options.data.layers[i].type === 'vector') {\r\n                this.layers.push(new Group(options.data.layers[i], this.bufferCtx, 0, this.duration, this.gradients));\r\n            } else if (options.data.layers[i].type === 'image') {\r\n                this.layers.push(new ImageLayer(options.data.layers[i], 0, this.duration, this.imageBasePath));\r\n            } else if (options.data.layers[i].type === 'text') {\r\n                this.layers.push(new TextLayer(options.data.layers[i], 0, this.duration, this.baseFont));\r\n            } else if (options.data.layers[i].type === 'comp') {\r\n                this.layers.push(new Comp(options.data.layers[i], this.bufferCtx, 0, this.duration, this.baseFont, this.gradients, this.imageBasePath, this.baseFont));\r\n            }\r\n        }\r\n        this.numLayers = this.layers.length;\r\n\r\n        for (const layer of this.layers) {\r\n            if (layer.parent) {\r\n                for (let k = 0; k < this.layers.length; k++) {\r\n                    //TODO stop loop\r\n                    if (layer.parent === this.layers[k].index) {\r\n                        layer.parent = this.layers[k];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        this.reset(this.reversed);\r\n        this.resize();\r\n\r\n        this.isPaused = false;\r\n        this.isPlaying = false;\r\n        this.drawFrame = true;\r\n\r\n        add(this);\r\n    }\r\n\r\n    play() {\r\n        if (!this.isPlaying) {\r\n            if (!this.isPaused) this.reset(this.reversed);\r\n            this.isPaused = false;\r\n            this.pausedTime = 0;\r\n            this.isPlaying = true;\r\n        }\r\n    }\r\n\r\n    stop() {\r\n        this.reset(this.reversed);\r\n        this.isPlaying = false;\r\n        this.drawFrame = true;\r\n    }\r\n\r\n    pause() {\r\n        if (this.isPlaying) {\r\n            this.isPaused = true;\r\n            this.pausedTime = this.compTime;\r\n            this.isPlaying = false;\r\n        }\r\n    }\r\n\r\n    gotoAndPlay(id) {\r\n        const marker = this.getMarker(id);\r\n        if (marker) {\r\n            this.compTime = marker.time;\r\n            this.pausedTime = 0;\r\n            this.setKeyframes(this.compTime);\r\n            this.isPlaying = true;\r\n        }\r\n    }\r\n\r\n    gotoAndStop(id) {\r\n        const marker = this.getMarker(id);\r\n        if (marker) {\r\n            this.isPlaying = false;\r\n            this.compTime = marker.time;\r\n            this.setKeyframes(this.compTime);\r\n            this.drawFrame = true;\r\n        }\r\n    }\r\n\r\n    getMarker(id) {\r\n        if (typeof id === 'number') {\r\n            return this.markers[id];\r\n        } else if (typeof id === 'string') {\r\n            for (let i = 0; i < this.markers.length; i++) {\r\n                if (this.markers[i].comment === id) {\r\n                    return this.markers[i];\r\n                }\r\n            }\r\n        }\r\n        console.warn('Marker not found');\r\n    }\r\n\r\n    checkStopMarkers(from, to) {\r\n        for (let i = 0; i < this.markers.length; i++) {\r\n            if (this.markers[i].stop && this.markers[i].time > from && this.markers[i].time < to) {\r\n                return this.markers[i];\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    setStep(step) {\r\n        this.isPlaying = false;\r\n        this.compTime = step * this.duration;\r\n        this.pausedTime = this.compTime;\r\n        this.setKeyframes(this.compTime);\r\n        this.drawFrame = true;\r\n    }\r\n\r\n    getStep() {\r\n        return this.compTime / this.duration;\r\n    }\r\n\r\n    update(time) {\r\n        if (!this.then) this.then = time;\r\n\r\n        const delta = time - this.then;\r\n        this.then = time;\r\n\r\n        if (this.isPlaying) {\r\n            this.compTime = this.reversed ? this.compTime - delta : this.compTime + delta;\r\n\r\n            const stopMarker = this.checkStopMarkers(this.compTime - delta, this.compTime);\r\n\r\n            if (this.compTime > this.duration || this.reversed && this.compTime < 0) {\r\n                this.compTime = this.reversed ? 0 : this.duration - 1;\r\n                this.isPlaying = false;\r\n                this.onComplete();\r\n                if (this.loop) {\r\n                    this.play();\r\n                }\r\n            } else if (stopMarker) {\r\n                this.compTime = stopMarker.time;\r\n                this.onStop(stopMarker);\r\n                this.pause();\r\n            } else {\r\n                this.draw(this.compTime);\r\n            }\r\n            this.onUpdate();\r\n        } else if (this.drawFrame) {\r\n            this.drawFrame = false;\r\n            this.draw(this.compTime);\r\n            this.onUpdate();\r\n        }\r\n    }\r\n\r\n    draw(time) {\r\n        this.ctx.clearRect(0, 0, this.baseWidth, this.baseHeight);\r\n        for (let i = 0; i < this.numLayers; i++) {\r\n            if (time >= this.layers[i].in && time <= this.layers[i].out) {\r\n                this.layers[i].draw(this.ctx, time);\r\n            }\r\n        }\r\n    }\r\n\r\n    preload(cb) {\r\n        this.onloadCB = cb;\r\n        for (let i = 0; i < this.numLayers; i++) {\r\n            if (this.layers[i] instanceof ImageLayer) {\r\n                this.layers[i].preload(this.onload.bind(this));\r\n            }\r\n        }\r\n    }\r\n\r\n    onload() {\r\n        for (let i = 0; i < this.numLayers; i++) {\r\n            if (this.layers[i] instanceof ImageLayer) {\r\n                if (!this.layers[i].isLoaded) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        this.isLoaded = true;\r\n        if (typeof this.onloadCB === 'function') {\r\n            this.onloadCB();\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        this.pausedTime = 0;\r\n        this.compTime = this.reversed ? this.duration : 0;\r\n        for (let i = 0; i < this.numLayers; i++) {\r\n            this.layers[i].reset(this.reversed);\r\n        }\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        for (let i = 0; i < this.numLayers; i++) {\r\n            this.layers[i].setKeyframes(time);\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        this.isPlaying = false;\r\n        this.onComplete = null;\r\n        if (this.canvas.parentNode) this.canvas.parentNode.removeChild(this.canvas);\r\n        remove(this);\r\n    }\r\n\r\n    resize(w) {\r\n        if (this.fluid) {\r\n            const width = w || this.canvas.clientWidth || this.baseWidth;\r\n            this.canvas.width = width * this.devicePixelRatio;\r\n            this.canvas.height = width / this.ratio * this.devicePixelRatio;\r\n\r\n            this.buffer.width = width * this.devicePixelRatio;\r\n            this.buffer.height = width / this.ratio * this.devicePixelRatio;\r\n\r\n            this.scale = width / this.baseWidth * this.devicePixelRatio;\r\n            this.ctx.transform(this.scale, 0, 0, this.scale, 0, 0);\r\n            this.bufferCtx.transform(this.scale, 0, 0, this.scale, 0, 0);\r\n            this.setKeyframes(this.compTime);\r\n            this.drawFrame = true;\r\n        }\r\n    }\r\n\r\n    setGradients(name, stops) {\r\n        if (!this.gradients[name]) {\r\n            console.warn(`Gradient with name: ${name} not found.`);\r\n            return;\r\n        }\r\n\r\n        this.gradients[name].forEach(gradient => {\r\n            gradient.stops = stops;\r\n        });\r\n    }\r\n\r\n    get reversed() {\r\n        return this._reversed;\r\n    }\r\n\r\n    set reversed(bool) {\r\n        this._reversed = bool;\r\n        if (this.pausedTime) {\r\n            this.compTime = this.pausedTime;\r\n        } else if (!this.isPlaying) {\r\n            this.compTime = this.reversed ? this.duration : 0;\r\n        }\r\n        this.setKeyframes(this.compTime);\r\n    }\r\n}\r\n\r\nexport default Animation;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Animation.js","import Property from './Property';\r\nimport AnimatedProperty from './AnimatedProperty';\r\n\r\nclass Stroke {\r\n\r\n    constructor(data) {\r\n        if (data) {\r\n            this.join = data.join;\r\n            this.cap = data.cap;\r\n\r\n            if (data.miterLimit) {\r\n                if (data.miterLimit.length > 1) this.miterLimit = new AnimatedProperty(data.miterLimit);\r\n                else this.miterLimit = new Property(data.miterLimit);\r\n            }\r\n\r\n            if (data.color.length > 1) this.color = new AnimatedProperty(data.color);\r\n            else this.color = new Property(data.color);\r\n\r\n            if (data.opacity.length > 1) this.opacity = new AnimatedProperty(data.opacity);\r\n            else this.opacity = new Property(data.opacity);\r\n\r\n            if (data.width.length > 1) this.width = new AnimatedProperty(data.width);\r\n            else this.width = new Property(data.width);\r\n\r\n            if (data.dashes) {\r\n                this.dashes = {};\r\n\r\n                if (data.dashes.dash.length > 1) this.dashes.dash = new AnimatedProperty(data.dashes.dash);\r\n                else this.dashes.dash = new Property(data.dashes.dash);\r\n\r\n                if (data.dashes.gap.length > 1) this.dashes.gap = new AnimatedProperty(data.dashes.gap);\r\n                else this.dashes.gap = new Property(data.dashes.gap);\r\n\r\n                if (data.dashes.offset.length > 1) this.dashes.offset = new AnimatedProperty(data.dashes.offset);\r\n                else this.dashes.offset = new Property(data.dashes.offset);\r\n            }\r\n        }\r\n    }\r\n\r\n    getValue(time) {\r\n        const color = this.color.getValue(time);\r\n        const opacity = this.opacity.getValue(time);\r\n        color[0] = Math.round(color[0]);\r\n        color[1] = Math.round(color[1]);\r\n        color[2] = Math.round(color[2]);\r\n        const s = color.join(', ');\r\n\r\n        return `rgba(${s}, ${opacity})`;\r\n    }\r\n\r\n    setStroke(ctx, time) {\r\n        const strokeColor = this.getValue(time);\r\n        const strokeWidth = this.width.getValue(time);\r\n        const strokeJoin = this.join;\r\n        let miterLimit;\r\n        if (strokeJoin === 'miter') miterLimit = this.miterLimit.getValue(time);\r\n\r\n        ctx.lineWidth = strokeWidth;\r\n        ctx.lineJoin = strokeJoin;\r\n        if (miterLimit) ctx.miterLimit = miterLimit;\r\n        ctx.lineCap = this.cap;\r\n        ctx.strokeStyle = strokeColor;\r\n\r\n        if (this.dashes) {\r\n            ctx.setLineDash([\r\n                this.dashes.dash.getValue(time),\r\n                this.dashes.gap.getValue(time)\r\n            ]);\r\n            ctx.lineDashOffset = this.dashes.offset.getValue(time);\r\n        }\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.color.setKeyframes(time);\r\n        this.opacity.setKeyframes(time);\r\n        this.width.setKeyframes(time);\r\n        if (this.miterLimit) this.miterLimit.setKeyframes(time);\r\n        if (this.dashes) {\r\n            this.dashes.dash.setKeyframes(time);\r\n            this.dashes.gap.setKeyframes(time);\r\n            this.dashes.offset.setKeyframes(time);\r\n        }\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.color.reset(reversed);\r\n        this.opacity.reset(reversed);\r\n        this.width.reset(reversed);\r\n        if (this.miterLimit) this.miterLimit.reset(reversed);\r\n        if (this.dashes) {\r\n            this.dashes.dash.reset(reversed);\r\n            this.dashes.gap.reset(reversed);\r\n            this.dashes.offset.reset(reversed);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Stroke;\n\n\n// WEBPACK FOOTER //\n// ./src/property/Stroke.js","import Property from '../property/Property';\r\nimport AnimatedProperty from '../property/AnimatedProperty';\r\n\r\nclass Rect {\r\n\r\n    constructor(data) {\r\n        //this.name = data.name;\r\n        this.closed = true;\r\n\r\n        this.size = data.size.length > 1 ? new AnimatedProperty(data.size) : new Property(data.size);\r\n\r\n        //optionals\r\n        if (data.position) this.position = data.position.length > 1 ? new AnimatedProperty(data.position) : new Property(data.position);\r\n        if (data.roundness) this.roundness = data.roundness.length > 1 ? new AnimatedProperty(data.roundness) : new Property(data.roundness);\r\n    }\r\n\r\n    draw(ctx, time, trim) {\r\n        const size = this.size.getValue(time);\r\n        const position = this.position ? this.position.getValue(time) : [0, 0];\r\n        let roundness = this.roundness ? this.roundness.getValue(time) : 0;\r\n\r\n        if (size[0] < 2 * roundness) roundness = size[0] / 2;\r\n        if (size[1] < 2 * roundness) roundness = size[1] / 2;\r\n\r\n        const x = position[0] - size[0] / 2;\r\n        const y = position[1] - size[1] / 2;\r\n\r\n        if (trim) {\r\n            // let tv;\r\n            // trim = this.getTrimValues(trim);\r\n            //TODO add trim\r\n        } else {\r\n            ctx.moveTo(x + roundness, y);\r\n            ctx.arcTo(x + size[0], y, x + size[0], y + size[1], roundness);\r\n            ctx.arcTo(x + size[0], y + size[1], x, y + size[1], roundness);\r\n            ctx.arcTo(x, y + size[1], x, y, roundness);\r\n            ctx.arcTo(x, y, x + size[0], y, roundness);\r\n        }\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.size.setKeyframes(time);\r\n        if (this.position) this.position.setKeyframes(time);\r\n        if (this.roundness) this.roundness.setKeyframes(time);\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.size.reset(reversed);\r\n        if (this.position) this.position.reset(reversed);\r\n        if (this.roundness) this.roundness.reset(reversed);\r\n    }\r\n}\r\n\r\nexport default Rect;\n\n\n// WEBPACK FOOTER //\n// ./src/objects/Rect.js","import Property from '../property/Property';\r\nimport AnimatedProperty from '../property/AnimatedProperty';\r\n\r\nclass Ellipse {\r\n\r\n    constructor(data) {\r\n        this.closed = true;\r\n\r\n        this.size = data.size.length > 1 ? new AnimatedProperty(data.size) : new Property(data.size);\r\n        //optional\r\n        if (data.position) this.position = data.position.length > 1 ? new AnimatedProperty(data.position) : new Property(data.position);\r\n    }\r\n\r\n    draw(ctx, time, trim) {\r\n        const size = this.size.getValue(time);\r\n        const position = this.position ? this.position.getValue(time) : [0, 0];\r\n\r\n        let i;\r\n        let j;\r\n        const w = size[0] / 2;\r\n        const h = size[1] / 2;\r\n        const x = position[0] - w;\r\n        const y = position[1] - h;\r\n        const ow = w * .5522848;\r\n        const oh = h * .5522848;\r\n\r\n        const vertices = [\r\n            [x + w + ow, y, x + w - ow, y, x + w, y],\r\n            [x + w + w, y + h + oh, x + w + w, y + h - oh, x + w + w, y + h],\r\n            [x + w - ow, y + h + h, x + w + ow, y + h + h, x + w, y + h + h],\r\n            [x, y + h - oh, x, y + h + oh, x, y + h]\r\n        ];\r\n\r\n        if (trim) {\r\n            let tv;\r\n            const len = w + h;\r\n\r\n            trim = this.getTrimValues(trim);\r\n\r\n            for (i = 0; i < 4; i++) {\r\n                j = i + 1;\r\n                if (j > 3) j = 0;\r\n                if (i > trim.startIndex && i < trim.endIndex) {\r\n                    ctx.bezierCurveTo(vertices[i][0], vertices[i][1], vertices[j][2], vertices[j][3], vertices[j][4], vertices[j][5]);\r\n                } else if (i === trim.startIndex && i === trim.endIndex) {\r\n                    tv = this.trim(vertices[i], vertices[j], trim.start, trim.end, len);\r\n                    ctx.moveTo(tv.start[4], tv.start[5]);\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5]);\r\n                } else if (i === trim.startIndex) {\r\n                    tv = this.trim(vertices[i], vertices[j], trim.start, 1, len);\r\n                    ctx.moveTo(tv.start[4], tv.start[5]);\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5]);\r\n                } else if (i === trim.endIndex) {\r\n                    tv = this.trim(vertices[i], vertices[j], 0, trim.end, len);\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5]);\r\n                }\r\n            }\r\n        } else {\r\n            ctx.moveTo(vertices[0][4], vertices[0][5]);\r\n            for (i = 0; i < 4; i++) {\r\n                j = i + 1;\r\n                if (j > 3) j = 0;\r\n                ctx.bezierCurveTo(vertices[i][0], vertices[i][1], vertices[j][2], vertices[j][3], vertices[j][4], vertices[j][5]);\r\n            }\r\n        }\r\n    }\r\n\r\n    getTrimValues(trim) {\r\n        const startIndex = Math.floor(trim.start * 4);\r\n        const endIndex = Math.floor(trim.end * 4);\r\n        const start = (trim.start - startIndex * 0.25) * 4;\r\n        const end = (trim.end - endIndex * 0.25) * 4;\r\n\r\n        return {\r\n            startIndex,\r\n            endIndex,\r\n            start,\r\n            end\r\n        };\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.size.setKeyframes(time);\r\n        if (this.position) this.position.setKeyframes(time);\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.size.reset(reversed);\r\n        if (this.position) this.position.reset(reversed);\r\n    }\r\n}\r\n\r\nexport default Ellipse;\n\n\n// WEBPACK FOOTER //\n// ./src/objects/Ellipse.js","import Property from '../property/Property';\r\nimport AnimatedProperty from '../property/AnimatedProperty';\r\n\r\nclass Polystar {\r\n\r\n    constructor(data) {\r\n        //this.name = data.name;\r\n        this.closed = true; // TODO ??\r\n\r\n        this.starType = data.starType;\r\n        this.points = data.points.length > 1 ? new AnimatedProperty(data.points) : new Property(data.points);\r\n        this.innerRadius = data.innerRadius.length > 1 ? new AnimatedProperty(data.innerRadius) : new Property(data.innerRadius);\r\n        this.outerRadius = data.outerRadius.length > 1 ? new AnimatedProperty(data.outerRadius) : new Property(data.outerRadius);\r\n        if (data.position) this.position = data.position.length > 1 ? new AnimatedProperty(data.position) : new Property(data.position);\r\n        if (data.rotation) this.rotation = data.rotation.length > 1 ? new AnimatedProperty(data.rotation) : new Property(data.rotation);\r\n        if (data.innerRoundness) this.innerRoundness = data.innerRoundness.length > 1 ? new AnimatedProperty(data.innerRoundness) : new Property(data.innerRoundness);\r\n        if (data.outerRoundness) this.outerRoundness = data.outerRoundness.length > 1 ? new AnimatedProperty(data.outerRoundness) : new Property(data.outerRoundness);\r\n    }\r\n\r\n    draw(ctx, time) {\r\n        const points = this.points.getValue(time);\r\n        const innerRadius = this.innerRadius.getValue(time);\r\n        const outerRadius = this.outerRadius.getValue(time);\r\n        const position = this.position ? this.position.getValue(time) : [0, 0];\r\n        let rotation = this.rotation ? this.rotation.getValue(time) : 0;\r\n        const innerRoundness = this.innerRoundness ? this.innerRoundness.getValue(time) : 0;\r\n        const outerRoundness = this.outerRoundness ? this.outerRoundness.getValue(time) : 0;\r\n\r\n        rotation = this.deg2rad(rotation);\r\n        const start = this.rotatePoint(0, 0, 0, 0 - outerRadius, rotation);\r\n\r\n        ctx.save();\r\n        ctx.beginPath();\r\n        ctx.translate(position[0], position[1]);\r\n        ctx.moveTo(start[0], start[1]);\r\n\r\n        for (let i = 0; i < points; i++) {\r\n            let pInner;\r\n            let pOuter;\r\n            let pOuter1Tangent;\r\n            let pOuter2Tangent;\r\n            let pInner1Tangent;\r\n            let pInner2Tangent;\r\n            let outerOffset;\r\n            let innerOffset;\r\n            let rot;\r\n\r\n            rot = Math.PI / points * 2;\r\n\r\n            pInner = this.rotatePoint(0, 0, 0, 0 - innerRadius, (rot * (i + 1) - rot / 2) + rotation);\r\n            pOuter = this.rotatePoint(0, 0, 0, 0 - outerRadius, (rot * (i + 1)) + rotation);\r\n\r\n            //FIxME\r\n            if (!outerOffset) outerOffset = (start[0] + pInner[0]) * outerRoundness / 100 * .5522848;\r\n            if (!innerOffset) innerOffset = (start[0] + pInner[0]) * innerRoundness / 100 * .5522848;\r\n\r\n            pOuter1Tangent = this.rotatePoint(0, 0, outerOffset, 0 - outerRadius, (rot * i) + rotation);\r\n            pInner1Tangent = this.rotatePoint(0, 0, innerOffset * -1, 0 - innerRadius, (rot * (i + 1) - rot / 2) + rotation);\r\n            pInner2Tangent = this.rotatePoint(0, 0, innerOffset, 0 - innerRadius, (rot * (i + 1) - rot / 2) + rotation);\r\n            pOuter2Tangent = this.rotatePoint(0, 0, outerOffset * -1, 0 - outerRadius, (rot * (i + 1)) + rotation);\r\n\r\n            if (this.starType === 1) {\r\n                //star\r\n                ctx.bezierCurveTo(pOuter1Tangent[0], pOuter1Tangent[1], pInner1Tangent[0], pInner1Tangent[1], pInner[0], pInner[1]);\r\n                ctx.bezierCurveTo(pInner2Tangent[0], pInner2Tangent[1], pOuter2Tangent[0], pOuter2Tangent[1], pOuter[0], pOuter[1]);\r\n            } else {\r\n                //polygon\r\n                ctx.bezierCurveTo(pOuter1Tangent[0], pOuter1Tangent[1], pOuter2Tangent[0], pOuter2Tangent[1], pOuter[0], pOuter[1]);\r\n            }\r\n\r\n            //debug\r\n            //ctx.fillStyle = \"black\";\r\n            //ctx.fillRect(pInner[0], pInner[1], 5, 5);\r\n            //ctx.fillRect(pOuter[0], pOuter[1], 5, 5);\r\n            //ctx.fillStyle = \"blue\";\r\n            //ctx.fillRect(pOuter1Tangent[0], pOuter1Tangent[1], 5, 5);\r\n            //ctx.fillStyle = \"red\";\r\n            //ctx.fillRect(pInner1Tangent[0], pInner1Tangent[1], 5, 5);\r\n            //ctx.fillStyle = \"green\";\r\n            //ctx.fillRect(pInner2Tangent[0], pInner2Tangent[1], 5, 5);\r\n            //ctx.fillStyle = \"brown\";\r\n            //ctx.fillRect(pOuter2Tangent[0], pOuter2Tangent[1], 5, 5);\r\n        }\r\n\r\n        ctx.restore();\r\n    }\r\n\r\n    rotatePoint(cx, cy, x, y, radians) {\r\n        const cos = Math.cos(radians);\r\n        const sin = Math.sin(radians);\r\n        const nx = (cos * (x - cx)) - (sin * (y - cy)) + cx;\r\n        const ny = (sin * (x - cx)) + (cos * (y - cy)) + cy;\r\n        return [nx, ny];\r\n    }\r\n\r\n    deg2rad(deg) {\r\n        return deg * (Math.PI / 180);\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.points.setKeyframes(time);\r\n        this.innerRadius.setKeyframes(time);\r\n        this.outerRadius.setKeyframes(time);\r\n        if (this.position) this.position.setKeyframes(time);\r\n        if (this.rotation) this.rotation.setKeyframes(time);\r\n        if (this.innerRoundness) this.innerRoundness.setKeyframes(time);\r\n        if (this.outerRoundness) this.outerRoundness.setKeyframes(time);\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.points.reset(reversed);\r\n        this.innerRadius.reset(reversed);\r\n        this.outerRadius.reset(reversed);\r\n        if (this.position) this.position.reset(reversed);\r\n        if (this.rotation) this.rotation.reset(reversed);\r\n        if (this.innerRoundness) this.innerRoundness.reset(reversed);\r\n        if (this.outerRoundness) this.outerRoundness.reset(reversed);\r\n    }\r\n}\r\n\r\nexport default Polystar;\n\n\n// WEBPACK FOOTER //\n// ./src/objects/Polystar.js","import Property from './Property';\r\nimport AnimatedProperty from './AnimatedProperty';\r\n\r\nclass Fill {\r\n\r\n    constructor(data) {\r\n        this.color = data.color.length > 1 ? new AnimatedProperty(data.color) : new Property(data.color);\r\n        if (data.opacity) this.opacity = data.opacity.length > 1 ? new AnimatedProperty(data.opacity) : new Property(data.opacity);\r\n    }\r\n\r\n    getValue(time) {\r\n        const color = this.color.getValue(time);\r\n        const opacity = this.opacity ? this.opacity.getValue(time) : 1;\r\n        return `rgba(${Math.round(color[0])}, ${Math.round(color[1])}, ${Math.round(color[2])}, ${opacity})`;\r\n    }\r\n\r\n    setColor(ctx, time) {\r\n        const color = this.getValue(time);\r\n        ctx.fillStyle = color;\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.color.setKeyframes(time);\r\n        if (this.opacity) this.opacity.setKeyframes(time);\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.color.reset(reversed);\r\n        if (this.opacity) this.opacity.reset(reversed);\r\n    }\r\n}\r\n\r\nexport default Fill;\n\n\n// WEBPACK FOOTER //\n// ./src/property/Fill.js","import Property from './Property';\r\nimport AnimatedProperty from './AnimatedProperty';\r\n\r\nclass GradientFill {\r\n\r\n    constructor(data, gradients) {\r\n        if (!gradients[data.name]) gradients[data.name] = [];\r\n        gradients[data.name].push(this);\r\n\r\n        this.stops = data.stops;\r\n        this.type = data.type;\r\n        this.startPoint = data.startPoint.length > 1 ? new AnimatedProperty(data.startPoint) : new Property(data.startPoint);\r\n        this.endPoint = data.endPoint.length > 1 ? new AnimatedProperty(data.endPoint) : new Property(data.endPoint);\r\n        if (data.opacity) this.opacity = data.opacity.length > 1 ? new AnimatedProperty(data.opacity) : new Property(data.opacity);\r\n    }\r\n\r\n    setColor(ctx, time) {\r\n        const startPoint = this.startPoint.getValue(time);\r\n        const endPoint = this.endPoint.getValue(time);\r\n        let radius = 0;\r\n\r\n        if (this.type === 'radial') {\r\n            const distX = startPoint[0] - endPoint[0];\r\n            const distY = startPoint[1] - endPoint[1];\r\n            radius = Math.sqrt(distX * distX + distY * distY);\r\n        }\r\n\r\n        const gradient = this.type === 'radial' ?\r\n            ctx.createRadialGradient(startPoint[0], startPoint[1], 0, startPoint[0], startPoint[1], radius) :\r\n            ctx.createLinearGradient(startPoint[0], startPoint[1], endPoint[0], endPoint[1]);\r\n\r\n        const opacity = this.opacity ? this.opacity.getValue(time) : 1;\r\n\r\n        for (const stop of this.stops) {\r\n            const color = stop.color;\r\n            gradient.addColorStop(stop.location, `rgba(${color[0]}, ${color[1]}, ${color[2]}, ${color[3] * opacity})`);\r\n        }\r\n\r\n        ctx.fillStyle = gradient;\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        if (this.opacity) this.opacity.setKeyframes(time);\r\n        this.startPoint.setKeyframes(time);\r\n        this.endPoint.setKeyframes(time);\r\n    }\r\n\r\n    reset(reversed) {\r\n        if (this.opacity) this.opacity.setKeyframes(reversed);\r\n        this.startPoint.setKeyframes(reversed);\r\n        this.endPoint.setKeyframes(reversed);\r\n    }\r\n}\r\n\r\nexport default GradientFill;\n\n\n// WEBPACK FOOTER //\n// ./src/property/GradientFill.js","import Bezier from '../utils/Bezier';\r\nimport AnimatedProperty from '../property/AnimatedProperty';\r\n\r\nclass Position extends AnimatedProperty{\r\n\r\n    onKeyframeChange() {\r\n        this.setEasing();\r\n        this.setMotionPath();\r\n    }\r\n\r\n    getValueAtTime(time) {\r\n        if (this.motionpath) {\r\n            return this.motionpath.getValues(this.getElapsed(time));\r\n        } else {\r\n            return this.lerp(this.lastFrame.v, this.nextFrame.v, this.getElapsed(time));\r\n        }\r\n    }\r\n\r\n    setMotionPath() {\r\n        if (this.lastFrame.motionpath) {\r\n            this.motionpath = new Bezier(this.lastFrame.motionpath);\r\n            this.motionpath.getLength(this.lastFrame.len);\r\n        } else {\r\n            this.motionpath = null;\r\n        }\r\n    }\r\n}\r\n\r\nexport default Position;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/transform/Position.js","class Merge {\r\n\r\n    constructor(data) {\r\n        this.type = data.type;\r\n    }\r\n\r\n    setCompositeOperation(ctx) {\r\n        switch (this.type) {\r\n            case 2:\r\n                ctx.globalCompositeOperation = 'source-over';\r\n                break;\r\n            case 3:\r\n                ctx.globalCompositeOperation = 'source-out';\r\n                break;\r\n            case 4:\r\n                ctx.globalCompositeOperation = 'source-in';\r\n                break;\r\n            case 5:\r\n                ctx.globalCompositeOperation = 'xor';\r\n                break;\r\n            default:\r\n                ctx.globalCompositeOperation = 'source-over';\r\n        }\r\n    }\r\n}\r\n\r\nexport default Merge;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/property/Merge.js","import Property from './Property';\r\nimport AnimatedProperty from './AnimatedProperty';\r\n\r\nclass Trim {\r\n    constructor(data) {\r\n\r\n        this.type = data.type;\r\n\r\n        if (data.start) this.start = data.start.length > 1 ? new AnimatedProperty(data.start) : new Property(data.start);\r\n        if (data.end) this.end = data.end.length > 1 ? new AnimatedProperty(data.end) : new Property(data.end);\r\n        //if (data.offset) this.offset = data.offset.length > 1 ? new AnimatedProperty(data.offset) : new Property(data.offset);\r\n\r\n    }\r\n\r\n    getTrim(time) {\r\n        const start = this.start ? this.start.getValue(time) : 0;\r\n        const end = this.end ? this.end.getValue(time) : 1;\r\n\r\n        const trim = {\r\n            start: Math.min(start, end),\r\n            end: Math.max(start, end)\r\n        };\r\n\r\n        if (trim.start === 0 && trim.end === 1) {\r\n            return null;\r\n        } else {\r\n            return trim;\r\n        }\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        if (this.start) this.start.setKeyframes(time);\r\n        if (this.end) this.end.setKeyframes(time);\r\n        //if (this.offset) this.offset.reset();\r\n    }\r\n\r\n    reset(reversed) {\r\n        if (this.start) this.start.reset(reversed);\r\n        if (this.end) this.end.reset(reversed);\r\n        //if (this.offset) this.offset.reset();\r\n    }\r\n}\r\n\r\nexport default Trim;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/property/Trim.js","import Path from '../objects/Path';\r\nimport AnimatedPath from '../objects/AnimatedPath';\r\nimport Transform from '../transform/Transform';\r\nimport ImageLayer from './ImageLayer';\r\nimport TextLayer from './TextLayer';\r\nimport Group from '../objects/Group';\r\n\r\nclass Comp {\r\n    constructor(data, bufferCtx, parentIn, parentOut, baseFont, gradients, imageBasePath) {\r\n        this.index = data.index;\r\n        this.in = data.in ? data.in : parentIn;\r\n        this.out = data.out ? data.out : parentOut;\r\n\r\n        if (data.parent) this.parent = data.parent;\r\n\r\n        this.transform = new Transform(data.transform);\r\n\r\n        if (data.masks) {\r\n            this.masks = [];\r\n\r\n            for (const mask of data.masks) {\r\n                if (mask.isAnimated) this.masks.push(new AnimatedPath(mask));\r\n                else this.masks.push(new Path(mask));\r\n            }\r\n        }\r\n\r\n        this.layers = [];\r\n        for (let i = 0; i < data.layers.length; i++) {\r\n            if (data.layers[i].type === 'vector') {\r\n                this.layers.push(new Group(data.layers[i], bufferCtx, 0, this.duration, gradients));\r\n            } else if (data.layers[i].type === 'image') {\r\n                this.layers.push(new ImageLayer(data.layers[i], 0, this.duration, imageBasePath));\r\n            } else if (data.layers[i].type === 'text') {\r\n                this.layers.push(new TextLayer(data.layers[i], 0, this.duration, baseFont));\r\n            } else if (data.layers[i].type === 'comp') {\r\n                this.layers.push(new Comp(data.layers[i], bufferCtx, 0, this.duration, this.baseFont, gradients, imageBasePath, baseFont));\r\n            }\r\n        }\r\n        this.numLayers = this.layers.length;\r\n    }\r\n\r\n    draw(ctx, time) {\r\n\r\n        ctx.save();\r\n\r\n        let i;\r\n\r\n        if (this.parent) this.parent.setParentTransform(ctx, time);\r\n        this.transform.transform(ctx, time);\r\n\r\n        if (this.masks) {\r\n            ctx.beginPath();\r\n            for (i = 0; i < this.masks.length; i++) {\r\n                this.masks[i].draw(ctx, time);\r\n            }\r\n            ctx.clip();\r\n        }\r\n\r\n        const internalTime = time - this.in;\r\n        for (i = 0; i < this.numLayers; i++) {\r\n            if (internalTime >= this.layers[i].in && internalTime <= this.layers[i].out) {\r\n                this.layers[i].draw(ctx, internalTime);\r\n            }\r\n        }\r\n\r\n        ctx.restore();\r\n\r\n    }\r\n\r\n    setParentTransform(ctx, time) {\r\n        if (this.parent) this.parent.setParentTransform(ctx, time);\r\n        this.transform.transform(ctx, time);\r\n        for (let i = 0; i < this.numLayers; i++) {\r\n            this.layers[i].setParentTransform(ctx, time);\r\n        }\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.transform.setKeyframes(time);\r\n        for (let i = 0; i < this.numLayers; i++) {\r\n            this.layers[i].setKeyframes(time);\r\n        }\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.transform.reset(reversed);\r\n        for (let i = 0; i < this.numLayers; i++) {\r\n            this.layers[i].reset(this.reversed);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Comp;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layers/Comp.js"],"sourceRoot":""}