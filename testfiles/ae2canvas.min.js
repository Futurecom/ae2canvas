!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.ae2canvas=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(a){"object"==typeof c?b.exports=a():"function"==typeof window.define&&window.define.amd?window.define([],a):window.BezierEasing=a()}(function(){function a(a,i,j,k){function l(a,b){return 1-3*b+3*a}function m(a,b){return 3*b-6*a}function n(a){return 3*a}function o(a,b,c){return((l(b,c)*a+m(b,c))*a+n(b))*a}function p(a,b,c){return 3*l(b,c)*a*a+2*m(b,c)*a+n(b)}function q(c,d){for(var e=0;b>e;++e){var f=p(d,a,j);if(0===f)return d;var g=o(d,a,j)-c;d-=g/f}return d}function r(){for(var b=0;f>b;++b)v[b]=o(b*g,a,j)}function s(b,c,f){var g,h,i=0;do h=c+(f-c)/2,g=o(h,a,j)-b,g>0?f=h:c=h;while(Math.abs(g)>d&&++i<e);return h}function t(b){for(var d=0,e=1,h=f-1;e!=h&&v[e]<=b;++e)d+=g;--e;var i=(b-v[e])/(v[e+1]-v[e]),k=d+i*g,l=p(k,a,j);return l>=c?q(b,k):0==l?k:s(b,d,d+g)}if(4!==arguments.length)throw new Error("BezierEasing requires 4 arguments.");for(var u=0;4>u;++u)if("number"!=typeof arguments[u]||isNaN(arguments[u])||!isFinite(arguments[u]))throw new Error("BezierEasing arguments should be integers.");if(0>a||a>1||0>j||j>1)throw new Error("BezierEasing x values must be in [0, 1] range.");var v=h?new Float32Array(f):new Array(f);(a!=i||j!=k)&&r();var w=function(b){return a===i&&j===k?b:0===b?0:1===b?1:o(t(b),i,k)},x="BezierEasing("+[a,i,j,k]+")";return w.toString=function(){return x},w}var b=4,c=.001,d=1e-7,e=10,f=11,g=1/(f-1),h="function"==typeof Float32Array;return a.css={ease:a(.25,.1,.25,1),linear:a(0,0,1,1),"ease-in":a(.42,0,1,1),"ease-out":a(0,0,.58,1),"ease-in-out":a(.42,0,.58,1)},a})},{}],2:[function(a,b){"use strict";function c(a){return a?(d.call(this,a),void(this.frameCount=this.frames.length)):null}var d=a("./Path"),e=a("../lib/BezierEasing");c.prototype=Object.create(d.prototype),c.prototype.getValue=function(a){return a<=this.nextFrame.t&&!this.started||this.finished?this.nextFrame.v:(this.started=!0,a>this.nextFrame.t&&(this.pointer+1===this.frameCount?this.finished=!0:(this.lastFrame=this.nextFrame,this.pointer++,this.nextFrame=this.frames[this.pointer],this.setEasing())),this.getValueAtTime(a))},c.prototype.lerp=function(a,b,c){return a+c*(b-a)},c.prototype.setEasing=function(){this.easing=this.lastFrame.easeOut&&this.nextFrame.easeIn?new e(this.lastFrame.easeOut[0],this.lastFrame.easeOut[1],this.nextFrame.easeIn[0],this.nextFrame.easeIn[1]):null},c.prototype.getValueAtTime=function(a){var b=a-this.lastFrame.t,c=this.nextFrame.t-this.lastFrame.t,d=b/c;d>1?d=1:this.easing&&(d=this.easing(d));for(var e=[],f=0;f<this.verticesCount;f++){var g=this.lerp(this.lastFrame.v[f][0],this.nextFrame.v[f][0],d),h=this.lerp(this.lastFrame.v[f][1],this.nextFrame.v[f][1],d),i=this.lerp(this.lastFrame.v[f][2],this.nextFrame.v[f][2],d),j=this.lerp(this.lastFrame.v[f][3],this.nextFrame.v[f][3],d),k=this.lerp(this.lastFrame.v[f][4],this.nextFrame.v[f][4],d),l=this.lerp(this.lastFrame.v[f][5],this.nextFrame.v[f][5],d);e.push([g,h,i,j,k,l])}return e},c.prototype.reset=function(){this.finished=!1,this.started=!1,this.pointer=0,this.nextFrame=this.frames[this.pointer],this.lastFrame=this.nextFrame,this.easing=null},b.exports=c},{"../lib/BezierEasing":1,"./Path":8}],3:[function(a,b){"use strict";function c(a){d.call(this,a),this.frameCount=this.frames.length}var d=a("./Property"),e=a("../lib/BezierEasing");c.prototype=Object.create(d.prototype),c.prototype.lerp=function(a,b,c){if(a instanceof Array){for(var d=[],e=0;e<a.length;e++)d[e]=a[e]+c*(b[e]-a[e]);return d}return a+c*(b-a)},c.prototype.setEasing=function(){this.easing=this.nextFrame.easeIn?new e(this.lastFrame.easeOut[0],this.lastFrame.easeOut[1],this.nextFrame.easeIn[0],this.nextFrame.easeIn[1]):null},c.prototype.getValue=function(a){return this.finished||a<=this.nextFrame.t&&!this.started?this.nextFrame.v:(this.started=!0,a>this.nextFrame.t&&(this.pointer+1===this.frameCount?this.finished=!0:(this.lastFrame=this.nextFrame,this.pointer++,this.nextFrame=this.frames[this.pointer],this.setEasing())),this.getValueAtTime(a))},c.prototype.getValueAtTime=function(a){var b=a-this.lastFrame.t,c=this.nextFrame.t-this.lastFrame.t,d=b/c;return d>1?d=1:this.easing&&(d=this.easing(d)),this.lerp(this.lastFrame.v,this.nextFrame.v,d)},c.prototype.reset=function(){this.finished=!1,this.started=!1,this.pointer=0,this.nextFrame=this.frames[this.pointer],this.lastFrame=this.nextFrame,this.easing=null},b.exports=c},{"../lib/BezierEasing":1,"./Property":10}],4:[function(a,b){"use strict";function c(a){this.name=a.name,this.closed=!0,this.size=a.size.length>1?new e(a.size):new d(a.size),this.position=a.position.length>1?new e(a.position):new d(a.position)}var d=a("./Property"),e=a("./AnimatedProperty");c.prototype.draw=function(a,b){var c=this.size.getValue(b),d=this.position.getValue(b),e=d[0]-c[0]/2,f=d[1]-c[1]/2,g=c[0],h=c[1],i=g/2*.5522848,j=h/2*.5522848,k=e+g,l=f+h,m=e+g/2,n=f+h/2;a.moveTo(e,n),a.bezierCurveTo(e,n-j,m-i,f,m,f),a.bezierCurveTo(m+i,f,k,n-j,k,n),a.bezierCurveTo(k,n+j,m+i,l,m,l),a.bezierCurveTo(m-i,l,e,n+j,e,n)},c.prototype.reset=function(){this.size.reset(),this.position.reset()},b.exports=c},{"./AnimatedProperty":3,"./Property":10}],5:[function(a,b){"use strict";function c(a){this.color=a.color.length>1?new e(a.color):new d(a.color),this.opacity=a.opacity.length>1?new e(a.opacity):new d(a.opacity)}var d=a("./Property"),e=a("./AnimatedProperty");c.prototype.getValue=function(a){var b=this.color.getValue(a),c=this.opacity.getValue(a);return"rgba("+Math.round(b[0])+", "+Math.round(b[1])+", "+Math.round(b[2])+", "+c+")"},c.prototype.setColor=function(a,b){var c=this.getValue(b);a.fillStyle=c},c.prototype.reset=function(){this.color.reset(),this.opacity.reset()},b.exports=c},{"./AnimatedProperty":3,"./Property":10}],6:[function(a,b){"use strict";function c(a,b){if(a){if(this.name=a.name,this.index=a.index,this.bufferCtx=b,this.in=a.in?a.in:0,this.out=a.out?a.out:5e5,a.fill&&(this.fill=new j(a.fill)),a.stroke&&(this.stroke=new d(a.stroke)),a.merge&&(this.merge=new l(a.merge)),this.transform=new k(a.transform),a.groups){this.groups=[];for(var m=0;m<a.groups.length;m++)this.groups.push(new c(a.groups[m],this.bufferCtx))}if(a.shapes){this.shapes=[];for(var n=0;n<a.shapes.length;n++){var o=a.shapes[n];"path"===o.type?this.shapes.push(o.isAnimated?new i(o):new e(o)):"rect"===o.type?this.shapes.push(new f(o)):"ellipse"===o.type?this.shapes.push(new g(o)):"polystar"===o.type&&this.shapes.push(new h(o))}}}}var d=a("./Stroke"),e=a("./Path"),f=a("./Rect"),g=a("./Ellipse"),h=a("./Polystar"),i=a("./AnimatedPath"),j=a("./Fill"),k=a("./Transform"),l=a("./Merge");c.prototype.draw=function(a,b,c,d){var e;a.save();var f=this.fill||c,g=this.stroke||d;if(f&&f.setColor(a,b),g&&g.setStroke(a,b),this.transform.transform(a,b),this.merge&&(this.bufferCtx.save(),this.bufferCtx.clearRect(0,0,this.bufferCtx.canvas.width,this.bufferCtx.canvas.height),this.transform.transform(this.bufferCtx,b),f&&f.setColor(this.bufferCtx,b),g&&g.setStroke(this.bufferCtx,b)),a.beginPath(),this.shapes)if(this.merge){for(e=0;e<this.shapes.length;e++)this.shapes[e].draw(this.bufferCtx,b),this.bufferCtx.closePath(),f&&this.bufferCtx.fill(),g&&this.bufferCtx.stroke(),this.bufferCtx.beginPath(),this.merge.setCompositeOperation(this.bufferCtx);a.restore(),a.drawImage(this.bufferCtx.canvas,0,0),this.bufferCtx.restore()}else{for(e=0;e<this.shapes.length;e++)this.shapes[e].draw(a,b);this.shapes[this.shapes.length-1].closed&&a.closePath()}if(f&&a.fill(),g&&a.stroke(),this.groups)if(this.merge){for(e=0;e<this.groups.length;e++)b>=this.groups[e].in&&b<this.groups[e].out&&(this.groups[e].draw(this.bufferCtx,b,f,g),this.merge.setCompositeOperation(this.bufferCtx));a.restore(),a.drawImage(this.bufferCtx.canvas,0,0),this.bufferCtx.restore()}else for(e=0;e<this.groups.length;e++)b>=this.groups[e].in&&b<this.groups[e].out&&this.groups[e].draw(a,b,f,g);a.restore()},c.prototype.reset=function(){if(this.transform.reset(),this.shapes)for(var a=0;a<this.shapes.length;a++)this.shapes[a].reset();if(this.groups)for(var b=0;b<this.groups.length;b++)this.groups[b].reset();this.fill&&this.fill.reset(),this.stroke&&this.stroke.reset()},b.exports=c},{"./AnimatedPath":2,"./Ellipse":4,"./Fill":5,"./Merge":7,"./Path":8,"./Polystar":9,"./Rect":11,"./Stroke":13,"./Transform":14}],7:[function(a,b){"use strict";function c(a){this.type=a.type}c.prototype.setCompositeOperation=function(a){switch(this.type){case 2:a.globalCompositeOperation="source-over";break;case 3:a.globalCompositeOperation="source-out";break;case 4:a.globalCompositeOperation="source-in";break;case 5:a.globalCompositeOperation="xor";break;default:a.globalCompositeOperation="source-over"}},b.exports=c},{}],8:[function(a,b){"use strict";function c(a){this.name=a.name,this.closed=a.closed,this.frames=a.frames,this.verticesCount=this.frames[0].v.length}c.prototype.draw=function(a,b){var c=this.getValue(b);a.moveTo(c[0][4],c[0][5]);for(var d=1;d<c.length;d++){var e=c[d],f=c[d-1];a.bezierCurveTo(f[0],f[1],e[2],e[3],e[4],e[5])}this.closed&&a.bezierCurveTo(e[0],e[1],c[0][2],c[0][3],c[0][4],c[0][5])},c.prototype.getValue=function(){return this.frames[0].v},c.prototype.reset=function(){},b.exports=c},{}],9:[function(a,b){"use strict";function c(a){this.name=a.name,this.closed=!0,this.starType=a.starType,this.points=a.points.length>1?new e(a.points):new d(a.points),this.position=a.position.length>1?new e(a.position):new d(a.position),this.rotation=a.rotation.length>1?new e(a.rotation):new d(a.rotation),this.innerRadius=a.innerRadius.length>1?new e(a.innerRadius):new d(a.innerRadius),this.outerRadius=a.outerRadius.length>1?new e(a.outerRadius):new d(a.outerRadius),this.innerRoundness=a.innerRoundness.length>1?new e(a.innerRoundness):new d(a.innerRoundness),this.outerRoundness=a.outerRoundness.length>1?new e(a.outerRoundness):new d(a.outerRoundness)}var d=a("./Property"),e=a("./AnimatedProperty");c.prototype.draw=function(a,b){var c=this.points.getValue(b),d=this.position.getValue(b),e=this.innerRadius.getValue(b),f=this.outerRadius.getValue(b),g=(this.innerRoundness.getValue(b),this.outerRoundness.getValue(b),d[0]),h=d[1],i=f/2;a.save(),a.beginPath(),a.translate(g,h),a.moveTo(0,0-f),a.save(),a.fillStyle="black",a.fillRect(0,0-f,5,5),a.restore();for(var j=0;c>j;j++){a.rotate(Math.PI/c);var k=this.rotatePoint(0,0,i,0-f,-1*Math.PI/c)[0],l=this.rotatePoint(0,0,i,0-f,-1*Math.PI/c)[1],m=0,n=0-e;a.bezierCurveTo(k,l,m,n,0,0-e),a.save(),a.fillStyle="blue",a.fillRect(k,l,5,5),a.fillRect(m,n,5,5),a.restore(),a.rotate(Math.PI/c);var o=0,p=0-e,q=-i,r=0-f;a.bezierCurveTo(o,p,q,r,0,0-f),a.save(),a.fillStyle="green",a.fillRect(o,p,5,5),a.fillRect(q,r,5,5),a.restore(),a.save(),a.fillStyle="black",a.fillRect(0,0-f,5,5),a.restore()}a.restore()},c.prototype.rotatePoint=function(a,b,c,d,e){var f=Math.cos(e),g=Math.sin(e),h=f*(c-a)-g*(d-b)+a,i=g*(c-a)+f*(d-b)+b;return[h,i]},c.prototype.reset=function(){this.points.reset(),this.position.reset(),this.innerRadius.reset(),this.outerRadius.reset(),this.innerRoundness.reset(),this.outerRoundness.reset()},b.exports=c},{"./AnimatedProperty":3,"./Property":10}],10:[function(a,b){"use strict";function c(a){return a instanceof Array?void(this.frames=a):null}c.prototype.getValue=function(){return this.frames[0].v},c.prototype.reset=function(){},b.exports=c},{}],11:[function(a,b){"use strict";function c(a){this.name=a.name,this.closed=!0,this.size=a.size.length>1?new e(a.size):new d(a.size),this.position=a.position.length>1?new e(a.position):new d(a.position),this.roundness=a.roundness.length>1?new e(a.roundness):new d(a.roundness)}var d=a("./Property"),e=a("./AnimatedProperty");c.prototype.draw=function(a,b){var c=this.size.getValue(b),d=this.position.getValue(b),e=this.roundness.getValue(b);c[0]<2*e&&(e=c[0]/2),c[1]<2*e&&(e=c[1]/2);var f=d[0]-c[0]/2,g=d[1]-c[1]/2;a.moveTo(f+e,g),a.arcTo(f+c[0],g,f+c[0],g+c[1],e),a.arcTo(f+c[0],g+c[1],f,g+c[1],e),a.arcTo(f,g+c[1],f,g,e),a.arcTo(f,g,f+c[0],g,e)},c.prototype.reset=function(){this.size.reset(),this.position.reset(),this.roundness.reset()},b.exports=c},{"./AnimatedProperty":3,"./Property":10}],12:[function(a,b){"use strict";function c(a,b){if(a){this.canvas=b,this.ctx=this.canvas.getContext("2d"),this.duration=a.duration,this.baseWidth=a.width,this.baseHeight=a.height,this.ratio=a.width/a.height,this.buffer=document.createElement("canvas"),this.buffer.width=this.baseWidth,this.buffer.height=this.baseHeight,this.bufferCtx=this.buffer.getContext("2d"),this.groups=[];for(var c=0;c<a.groups.length;c++)this.groups.push(new d(a.groups[c],this.bufferCtx));this.reset(),this.started=!1,window.addEventListener("resize",this.setWidth.bind(this),!1),this.setWidth()}}var d=a("./Group");c.prototype={start:function(){this.started||(this.startTime=this.time,this.started=!0)},stop:function(){this.reset(),this.draw(),this.started=!1},pause:function(){this.started&&(this.pausedTime=this.compTime,this.started=!1)},update:function(a){this.time=a,this.started&&(this.compTime=this.time-this.startTime+this.pausedTime,this.compTime<=this.duration?this.draw():(this.stop(),this.loop&&this.start()))},draw:function(){this.ctx.save(),this.ctx.clearRect(0,0,this.baseWidth,this.baseHeight);for(var a=0;a<this.groups.length;a++)this.compTime>=this.groups[a].in&&this.compTime<this.groups[a].out&&this.groups[a].draw(this.ctx,this.compTime);this.ctx.restore()},reset:function(){this.startTime=0,this.pausedTime=0,this.compTime=0;for(var a=0;a<this.groups.length;a++)this.groups[a].reset()},setWidth:function(){var a=1;this.isHD&&(a=2);var b=this.canvas.getBoundingClientRect().width;this.canvas.width=b*a,this.canvas.height=b/this.ratio*a,this.scale=b/this.baseWidth*a,this.ctx.transform(this.scale,0,0,this.scale,0,0)}},b.exports=c},{"./Group":6}],13:[function(a,b){"use strict";function c(a){a&&(this.join=a.join,this.cap=a.cap,a.miterLimit&&(this.miterLimit=a.miterLimit.length>1?new e(a.miterLimit):new d(a.miterLimit)),this.color=a.color.length>1?new e(a.color):new d(a.color),this.opacity=a.opacity.length>1?new e(a.opacity):new d(a.opacity),this.width=a.width.length>1?new e(a.width):new d(a.width))}var d=a("./Property"),e=a("./AnimatedProperty");c.prototype.getValue=function(a){var b=this.color.getValue(a),c=this.opacity.getValue(a);return"rgba("+Math.round(b[0])+", "+Math.round(b[1])+", "+Math.round(b[2])+", "+c+")"},c.prototype.setStroke=function(a,b){var c=this.getValue(b),d=this.width.getValue(b),e=this.join;if("miter"===e)var f=this.miterLimit.getValue(b);a.lineWidth=d,a.lineJoin=e,f&&(a.miterLimit=f),a.lineCap=this.cap,a.strokeStyle=c},c.prototype.reset=function(){this.color.reset(),this.opacity.reset(),this.width.reset(),this.miterLimit&&this.miterLimit.reset()},b.exports=c},{"./AnimatedProperty":3,"./Property":10}],14:[function(a,b){"use strict";function c(a){a&&(this.name=a.name,a.anchorX&&(this.anchorX=a.anchorX.length>1?new e(a.anchorX):new d(a.anchorX)),a.anchorY&&(this.anchorY=a.anchorY.length>1?new e(a.anchorY):new d(a.anchorY)),a.positionX&&(this.positionX=a.positionX.length>1?new e(a.positionX):new d(a.positionX)),a.positionY&&(this.positionY=a.positionY.length>1?new e(a.positionY):new d(a.positionY)),a.scaleX&&(this.scaleX=a.scaleX.length>1?new e(a.scaleX):new d(a.scaleX)),a.scaleY&&(this.scaleY=a.scaleY.length>1?new e(a.scaleY):new d(a.scaleY)),a.skew&&(this.skew=a.skew.length>1?new e(a.skew):new d(a.skew)),a.skewAxis&&(this.skewAxis=a.skewAxis.length>1?new e(a.skewAxis):new d(a.skewAxis)),a.rotation&&(this.rotation=a.rotation.length>1?new e(a.rotation):new d(a.rotation)),a.opacity&&(this.opacity=a.opacity.length>1?new e(a.opacity):new d(a.opacity)))}var d=a("./Property"),e=a("./AnimatedProperty");c.prototype.transform=function(a,b){var c=this.anchorX?this.anchorX.getValue(b):0,d=this.anchorY?this.anchorY.getValue(b):0,e=this.rotation?this.deg2rad(this.rotation.getValue(b)):0,f=this.skew?this.deg2rad(this.skew.getValue(b)):0,g=this.skewAxis?this.deg2rad(this.skewAxis.getValue(b)):0,h=this.positionX?this.positionX.getValue(b):0,i=this.positionY?this.positionY.getValue(b):0,j=this.scaleX?this.scaleX.getValue(b):1,k=this.scaleY?this.scaleY.getValue(b):1,l=this.opacity?this.opacity.getValue(b)*a.globalAlpha:a.globalAlpha;a.transform(1,0,0,1,h-c,i-d),this.setRotation(a,e,c,d),this.setSkew(a,f,g,c,d),this.setScale(a,j,k,c,d),a.globalAlpha=l},c.prototype.setRotation=function(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=c-e*c+f*d,h=d-f*c-e*d;a.transform(e,f,-f,e,g,h)},c.prototype.setScale=function(a,b,c,d,e){a.transform(b,0,0,c,-d*b+d,-e*c+e)},c.prototype.setSkew=function(a,b,c,d,e){var f=Math.tan(-b);this.setRotation(a,-c,d,e),a.transform(1,0,f,1,-e*f,0),this.setRotation(a,c,d,e)},c.prototype.deg2rad=function(a){return a*(Math.PI/180)},c.prototype.reset=function(){this.anchorX&&this.anchorX.reset(),this.anchorY&&this.anchorY.reset(),this.rotation&&this.rotation.reset(),this.skew&&this.skew.reset(),this.skewAxis&&this.skewAxis.reset(),this.positionX&&this.positionX.reset(),this.positionY&&this.positionY.reset(),this.scaleX&&this.scaleX.reset(),this.scaleY&&this.scaleY.reset(),this.opacity&&this.opacity.reset()},b.exports=c},{"./AnimatedProperty":3,"./Property":10}]},{},[12])(12)});