{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap ae7feb977cc9c33e632e","webpack:///./src/property/Property.js","webpack:///./src/property/AnimatedProperty.js","webpack:///./src/layers/BaseLayer.js","webpack:///./src/objects/Path.js","webpack:///./src/core.js","webpack:///./src/layers/ImageLayer.js","webpack:///./src/utils/Bezier.js","webpack:///./src/objects/AnimatedPath.js","webpack:///./src/utils/BezierEasing.js","webpack:///./src/layers/NullLayer.js","webpack:///./src/layers/TextLayer.js","webpack:///./src/layers/VectorLayer.js","webpack:///./src/index.js","webpack:///./src/utils/shim.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/Animation.js","webpack:///./node_modules/tiny-emitter/index.js","webpack:///./src/transform/Transform.js","webpack:///./src/transform/Position.js","webpack:///./src/effects/DropShadow.js","webpack:///./src/layers/CompLayer.js","webpack:///./src/objects/Ellipse.js","webpack:///./src/objects/Polystar.js","webpack:///./src/objects/Rect.js","webpack:///./src/property/Fill.js","webpack:///./src/property/GradientFill.js","webpack:///./src/property/Stroke.js","webpack:///./src/property/Trim.js"],"names":["Property","data","frames","v","time","reversed","AnimatedProperty","frameCount","length","a","b","t","Array","arr","i","nextFrame","easeIn","easing","lastFrame","easeOut","finished","started","pointer","onKeyframeChange","getValueAtTime","setEasing","delta","duration","elapsed","lerp","getElapsed","BaseLayer","index","in","out","parent","transform","effects","dropShadow","masks","map","mask","isAnimated","ctx","save","setParentTransform","update","setShadow","beginPath","forEach","draw","clip","setKeyframes","reset","Path","closed","verticesCount","trim","frame","getValue","vertices","nextVertex","lastVertex","start","end","getTrimValues","j","tv","startIndex","moveTo","endIndex","len","bezierCurveTo","actualTrim","totalLen","sumArray","trimAtLen","from","to","isStraight","startVertex","endVertex","bezier","getLength","e1","f1","g1","h1","j1","k1","e2","f2","g2","h2","j2","k2","s","add","reduce","startX","startY","ctrl1X","ctrl1Y","ctrl2X","ctrl2Y","endX","endY","_animations","_animationsLength","_autoPlay","_rafId","undefined","performance","now","autoPlay","auto","cancelAnimationFrame","tween","push","remove","indexOf","splice","ImageLayer","source","isLoaded","cb","Promise","resolve","reject","img","Image","onload","src","drawImage","restore","Bezier","path","steps","Math","max","floor","arcLengths","ox","cubicN","oy","clen","iterator","x","y","dx","dy","sqrt","u","targetLength","low","high","lengthBefore","pct","c","d","t2","t3","AnimatedPath","actualVertices","actualLength","cp1x","cp1y","cp2x","cp2y","definition","exports","module","window","define","amd","BezierEasing","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","Float32Array","mX1","mY1","mX2","mY2","arguments","Error","isNaN","isFinite","mSampleValues","A","aA1","aA2","B","C","calcBezier","aT","getSlope","newtonRaphsonIterate","aX","aGuessT","currentSlope","currentX","calcSampleValues","binarySubdivide","aA","aB","currentT","abs","getTForX","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","f","str","toString","css","NullLayer","TextLayer","baseFont","text","leading","fontSize","font","color","justification","textAlign","fillStyle","fillText","VectorLayer","gradients","fill","gradientFill","stroke","groups","group","shapes","shape","type","parentFill","parentStroke","parentTrim","trimValues","getTrim","Animation","root","global","requestAnimationFrame","fn","setTimeout","id","clearTimeout","offset","Date","options","pausedTime","baseWidth","width","baseHeight","height","ratio","markers","loop","devicePixelRatio","fluid","imageBasePath","comps","isPaused","isPlaying","drawFrame","canvas","document","createElement","getContext","layers","layer","parentIndex","find","resize","marker","getMarker","comment","console","warn","stop","promises","filter","preload","all","catch","error","parentNode","removeChild","w","clientWidth","scale","name","stops","gradient","fps","maxWidth","numFrames","buffer","rowsX","rowsY","ceil","indexX","indexY","step","offsetX","offsetY","clearRect","then","stopMarker","checkStopMarkers","emit","play","pause","_reversed","bool","Transform","position","positionX","positionY","anchor","scaleX","scaleY","skew","skewAxis","rotation","opacity","deg2rad","globalAlpha","setRotation","setSkew","setScale","rad","cos","sin","sx","sy","axis","tan","deg","PI","Position","setMotionPath","motionpath","getValues","DropShadow","direction","distance","softness","round","getColor","blur","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","CompLayer","sourceID","timeRemapping","internalTime","Ellipse","size","h","ow","oh","Polystar","starType","points","innerRadius","outerRadius","innerRoundness","outerRoundness","rotatePoint","translate","pInner","pOuter","pOuter1Tangent","pOuter2Tangent","pInner1Tangent","pInner2Tangent","outerOffset","innerOffset","rot","cx","cy","radians","nx","ny","Rect","roundness","arcTo","Fill","GradientFill","startPoint","endPoint","radius","distX","distY","createRadialGradient","createLinearGradient","addColorStop","location","Stroke","join","cap","miterLimit","dashes","dash","gap","strokeColor","strokeWidth","strokeJoin","lineWidth","lineJoin","lineCap","strokeStyle","setLineDash","lineDashOffset","Trim","min"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AE2Canvas\"] = factory();\n\telse\n\t\troot[\"AE2Canvas\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ae7feb977cc9c33e632e","class Property {\r\n    constructor(data) {\r\n        this.frames = data;\r\n    }\r\n\r\n    getValue() {\r\n        return this.frames[0].v;\r\n    }\r\n\r\n    setKeyframes(time) {\r\n    }\r\n\r\n    reset(reversed) {\r\n    }\r\n}\r\n\r\nexport default Property;\n\n\n// WEBPACK FOOTER //\n// ./src/property/Property.js","import Property from './Property';\r\nimport BezierEasing from '../utils/BezierEasing';\r\n\r\nclass AnimatedProperty extends Property {\r\n\r\n    constructor(data) {\r\n        super(data);\r\n        this.frameCount = this.frames.length;\r\n    }\r\n\r\n    lerp(a, b, t) {\r\n        if (a instanceof Array) {\r\n            const arr = [];\r\n            for (let i = 0; i < a.length; i++) {\r\n                arr[i] = a[i] + t * (b[i] - a[i]);\r\n            }\r\n            return arr;\r\n        } else {\r\n            return a + t * (b - a);\r\n        }\r\n    }\r\n\r\n    setEasing() {\r\n        if (this.nextFrame.easeIn) {\r\n            this.easing = new BezierEasing(this.lastFrame.easeOut[0], this.lastFrame.easeOut[1], this.nextFrame.easeIn[0], this.nextFrame.easeIn[1]);\r\n        } else {\r\n            this.easing = null;\r\n        }\r\n    }\r\n\r\n    getValue(time) {\r\n        if (this.finished && time >= this.nextFrame.t) {\r\n            return this.nextFrame.v;\r\n        } else if (!this.started && time <= this.lastFrame.t) {\r\n            return this.lastFrame.v;\r\n        } else {\r\n            this.started = true;\r\n            this.finished = false;\r\n            if (time > this.nextFrame.t) {\r\n                if (this.pointer + 1 === this.frameCount) {\r\n                    this.finished = true;\r\n                } else {\r\n                    this.pointer++;\r\n                    this.lastFrame = this.frames[this.pointer - 1];\r\n                    this.nextFrame = this.frames[this.pointer];\r\n                    this.onKeyframeChange();\r\n                }\r\n            } else if (time < this.lastFrame.t) {\r\n                if (this.pointer < 2) {\r\n                    this.started = false;\r\n                } else {\r\n                    this.pointer--;\r\n                    this.lastFrame = this.frames[this.pointer - 1];\r\n                    this.nextFrame = this.frames[this.pointer];\r\n                    this.onKeyframeChange();\r\n                }\r\n            }\r\n            return this.getValueAtTime(time);\r\n        }\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        //console.log(time, this.frames[this.frameCount - 2].t, this.frames[this.frameCount - 1].t);\r\n\r\n        if (time < this.frames[0].t) {\r\n            this.pointer = 1;\r\n            this.nextFrame = this.frames[this.pointer];\r\n            this.lastFrame = this.frames[this.pointer - 1];\r\n            this.onKeyframeChange();\r\n            return;\r\n        }\r\n\r\n        if (time > this.frames[this.frameCount - 1].t) {\r\n            this.pointer = this.frameCount - 1;\r\n            this.nextFrame = this.frames[this.pointer];\r\n            this.lastFrame = this.frames[this.pointer - 1];\r\n            this.onKeyframeChange();\r\n            return;\r\n        }\r\n\r\n        for (let i = 1; i < this.frameCount; i++) {\r\n            if (time >= this.frames[i - 1].t && time <= this.frames[i].t) {\r\n                this.pointer = i;\r\n                this.lastFrame = this.frames[i - 1];\r\n                this.nextFrame = this.frames[i];\r\n                this.onKeyframeChange();\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    onKeyframeChange() {\r\n        this.setEasing();\r\n    }\r\n\r\n    getElapsed(time) {\r\n        const delta = (time - this.lastFrame.t);\r\n        const duration = this.nextFrame.t - this.lastFrame.t;\r\n        let elapsed = delta / duration;\r\n\r\n        if (elapsed > 1) elapsed = 1;\r\n        else if (elapsed < 0) elapsed = 0;\r\n        else if (this.easing) elapsed = this.easing(elapsed);\r\n        return elapsed;\r\n    }\r\n\r\n    getValueAtTime(time) {\r\n        return this.lerp(this.lastFrame.v, this.nextFrame.v, this.getElapsed(time));\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.finished = false;\r\n        this.started = false;\r\n        this.pointer = reversed ? this.frameCount - 1 : 1;\r\n        this.nextFrame = this.frames[this.pointer];\r\n        this.lastFrame = this.frames[this.pointer - 1];\r\n        this.onKeyframeChange();\r\n    }\r\n}\r\n\r\nexport default AnimatedProperty;\n\n\n// WEBPACK FOOTER //\n// ./src/property/AnimatedProperty.js","import Path from '../objects/Path';\r\nimport AnimatedPath from '../objects/AnimatedPath';\r\nimport Transform from '../transform/Transform';\r\nimport DropShadow from '../effects/DropShadow';\r\n\r\nclass BaseLayer {\r\n\r\n    constructor(data) {\r\n        this.index = data.index;\r\n        this.in = data.in || 0;\r\n        this.out = data.out;\r\n        if (data.parent) this.parent = data.parent;\r\n        this.transform = new Transform(data.transform);\r\n\r\n        if (data.effects) {\r\n            if (data.effects.dropShadow) {\r\n                this.dropShadow = new DropShadow(data.effects.dropShadow);\r\n            }\r\n        }\r\n\r\n        if (data.masks) {\r\n            this.masks = data.masks.map(mask => mask.isAnimated ? new AnimatedPath(mask) : new Path(mask));\r\n        }\r\n    }\r\n\r\n    draw(ctx, time) {\r\n        ctx.save();\r\n\r\n        if (this.parent) this.parent.setParentTransform(ctx, time);\r\n        this.transform.update(ctx, time);\r\n\r\n        if (this.dropShadow) {\r\n            this.dropShadow.setShadow(ctx, time);\r\n        }\r\n\r\n        if (this.masks) {\r\n            ctx.beginPath();\r\n            this.masks.forEach(mask => mask.draw(ctx, time));\r\n            ctx.clip();\r\n        }\r\n    }\r\n\r\n    setParentTransform(ctx, time) {\r\n        if (this.parent) this.parent.setParentTransform(ctx, time);\r\n        this.transform.update(ctx, time);\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.transform.setKeyframes(time);\r\n        if (this.masks) this.masks.forEach(mask => mask.setKeyframes(time));\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.transform.reset(reversed);\r\n        if (this.masks) this.masks.forEach(mask => mask.reset(reversed));\r\n    }\r\n}\r\n\r\nexport default BaseLayer;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layers/BaseLayer.js","import Bezier from '../utils/Bezier'\r\n\r\nclass Path {\r\n\r\n    constructor(data) {\r\n        this.closed = data.closed\r\n        this.frames = data.frames\r\n        this.verticesCount = this.frames[0].v.length\r\n    }\r\n\r\n    draw(ctx, time, trim) {\r\n        const frame = this.getValue(time)\r\n        const vertices = frame.v\r\n        let nextVertex\r\n        let lastVertex\r\n\r\n        if (trim) {\r\n            if ((trim.start === 0 && trim.end === 0) ||\r\n                (trim.start === 1 && trim.end === 1)) {\r\n                return\r\n            } else {\r\n                trim = this.getTrimValues(trim, frame)\r\n            }\r\n        }\r\n\r\n        for (let j = 1; j < vertices.length; j++) {\r\n            nextVertex = vertices[j]\r\n            lastVertex = vertices[j - 1]\r\n\r\n            if (trim) {\r\n                let tv\r\n\r\n                if (j === 1 && trim.startIndex !== 0) {\r\n                    ctx.moveTo(lastVertex[4], lastVertex[5])\r\n                }\r\n                else if (j === trim.startIndex + 1 && j === trim.endIndex + 1) {\r\n                    tv = this.trim(lastVertex, nextVertex, trim.start, trim.end, frame.len[j - 1])\r\n                    ctx.moveTo(tv.start[4], tv.start[5])\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5])\r\n                } else if (j === trim.startIndex + 1) {\r\n                    tv = this.trim(lastVertex, nextVertex, trim.start, 1, frame.len[j - 1])\r\n                    ctx.moveTo(tv.start[4], tv.start[5])\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5])\r\n                } else if (j === trim.endIndex + 1) {\r\n                    tv = this.trim(lastVertex, nextVertex, 0, trim.end, frame.len[j - 1])\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5])\r\n                } else if (j > trim.startIndex + 1 && j < trim.endIndex + 1) {\r\n                    ctx.bezierCurveTo(lastVertex[0], lastVertex[1], nextVertex[2], nextVertex[3], nextVertex[4], nextVertex[5])\r\n                }\r\n            } else {\r\n                if (j === 1) {\r\n                    ctx.moveTo(lastVertex[4], lastVertex[5])\r\n                }\r\n                ctx.bezierCurveTo(lastVertex[0], lastVertex[1], nextVertex[2], nextVertex[3], nextVertex[4], nextVertex[5])\r\n            }\r\n        }\r\n\r\n        if (!trim && this.closed) {\r\n            if (!nextVertex) debugger\r\n            ctx.bezierCurveTo(nextVertex[0], nextVertex[1], vertices[0][2], vertices[0][3], vertices[0][4], vertices[0][5])\r\n        }\r\n    }\r\n\r\n    getValue() {\r\n        return this.frames[0]\r\n    }\r\n\r\n    getTrimValues(trim, frame) {\r\n        let i\r\n\r\n        const actualTrim = {\r\n            startIndex: 0,\r\n            endIndex: 0,\r\n            start: 0,\r\n            end: 0\r\n        }\r\n\r\n        // TODO clean up\r\n        if (trim.start === 0) {\r\n            if (trim.end === 0) {\r\n                return actualTrim\r\n            } else if (trim.end === 1) {\r\n                actualTrim.endIndex = frame.len.length\r\n                actualTrim.end = 1\r\n                return actualTrim\r\n            }\r\n        }\r\n\r\n        const totalLen = this.sumArray(frame.len)\r\n        let trimAtLen\r\n\r\n        trimAtLen = totalLen * trim.start\r\n\r\n        for (i = 0; i < frame.len.length; i++) {\r\n            if (trimAtLen > 0 && trimAtLen < frame.len[i]) {\r\n                actualTrim.startIndex = i\r\n                actualTrim.start = trimAtLen / frame.len[i]\r\n            }\r\n            trimAtLen -= frame.len[i]\r\n        }\r\n\r\n        if (trim.end === 1) {\r\n            actualTrim.endIndex = frame.len.length\r\n            actualTrim.end = 1\r\n            return actualTrim\r\n        } else {\r\n            trimAtLen = totalLen * trim.end\r\n\r\n            for (i = 0; i < frame.len.length; i++) {\r\n                if (trimAtLen > 0 && trimAtLen < frame.len[i]) {\r\n                    actualTrim.endIndex = i\r\n                    actualTrim.end = trimAtLen / frame.len[i]\r\n                }\r\n                trimAtLen -= frame.len[i]\r\n            }\r\n        }\r\n\r\n        return actualTrim\r\n    }\r\n\r\n    trim(lastVertex, nextVertex, from, to, len) {\r\n\r\n        if (from === 0 && to === 1) {\r\n            return {\r\n                start: lastVertex,\r\n                end: nextVertex\r\n            }\r\n        }\r\n\r\n        if (this.isStraight(lastVertex[4], lastVertex[5], lastVertex[0], lastVertex[1], nextVertex[2], nextVertex[3], nextVertex[4], nextVertex[5])) {\r\n            startVertex = [\r\n                this.lerp(lastVertex[0], nextVertex[0], from),\r\n                this.lerp(lastVertex[1], nextVertex[1], from),\r\n                this.lerp(lastVertex[2], nextVertex[2], from),\r\n                this.lerp(lastVertex[3], nextVertex[3], from),\r\n                this.lerp(lastVertex[4], nextVertex[4], from),\r\n                this.lerp(lastVertex[5], nextVertex[5], from)\r\n            ]\r\n\r\n            endVertex = [\r\n                this.lerp(lastVertex[0], nextVertex[0], to),\r\n                this.lerp(lastVertex[1], nextVertex[1], to),\r\n                this.lerp(lastVertex[2], nextVertex[2], to),\r\n                this.lerp(lastVertex[3], nextVertex[3], to),\r\n                this.lerp(lastVertex[4], nextVertex[4], to),\r\n                this.lerp(lastVertex[5], nextVertex[5], to)\r\n            ]\r\n\r\n        } else {\r\n            this.bezier = new Bezier([lastVertex[4], lastVertex[5], lastVertex[0], lastVertex[1], nextVertex[2], nextVertex[3], nextVertex[4], nextVertex[5]])\r\n            this.bezier.getLength(len)\r\n            from = this.bezier.map(from)\r\n            to = this.bezier.map(to)\r\n            to = (to - from) / (1 - from)\r\n\r\n            let e1\r\n            let f1\r\n            let g1\r\n            let h1\r\n            let j1\r\n            let k1\r\n            let e2\r\n            let f2\r\n            let g2\r\n            let h2\r\n            let j2\r\n            let k2\r\n            var startVertex\r\n            var endVertex\r\n\r\n            e1 = [this.lerp(lastVertex[4], lastVertex[0], from), this.lerp(lastVertex[5], lastVertex[1], from)]\r\n            f1 = [this.lerp(lastVertex[0], nextVertex[2], from), this.lerp(lastVertex[1], nextVertex[3], from)]\r\n            g1 = [this.lerp(nextVertex[2], nextVertex[4], from), this.lerp(nextVertex[3], nextVertex[5], from)]\r\n            h1 = [this.lerp(e1[0], f1[0], from), this.lerp(e1[1], f1[1], from)]\r\n            j1 = [this.lerp(f1[0], g1[0], from), this.lerp(f1[1], g1[1], from)]\r\n            k1 = [this.lerp(h1[0], j1[0], from), this.lerp(h1[1], j1[1], from)]\r\n\r\n            startVertex = [j1[0], j1[1], h1[0], h1[1], k1[0], k1[1]]\r\n            endVertex = [nextVertex[0], nextVertex[1], g1[0], g1[1], nextVertex[4], nextVertex[5]]\r\n\r\n            e2 = [this.lerp(startVertex[4], startVertex[0], to), this.lerp(startVertex[5], startVertex[1], to)]\r\n            f2 = [this.lerp(startVertex[0], endVertex[2], to), this.lerp(startVertex[1], endVertex[3], to)]\r\n            g2 = [this.lerp(endVertex[2], endVertex[4], to), this.lerp(endVertex[3], endVertex[5], to)]\r\n\r\n            h2 = [this.lerp(e2[0], f2[0], to), this.lerp(e2[1], f2[1], to)]\r\n            j2 = [this.lerp(f2[0], g2[0], to), this.lerp(f2[1], g2[1], to)]\r\n            k2 = [this.lerp(h2[0], j2[0], to), this.lerp(h2[1], j2[1], to)]\r\n\r\n            startVertex = [e2[0], e2[1], startVertex[2], startVertex[3], startVertex[4], startVertex[5]]\r\n            endVertex = [j2[0], j2[1], h2[0], h2[1], k2[0], k2[1]]\r\n        }\r\n\r\n        return {\r\n            start: startVertex,\r\n            end: endVertex\r\n        }\r\n    }\r\n\r\n    lerp(a, b, t) {\r\n        const s = 1 - t\r\n        return a * s + b * t\r\n    }\r\n\r\n    sumArray(arr) {\r\n        function add(a, b) {\r\n            return a + b\r\n        }\r\n\r\n        return arr.reduce(add)\r\n    }\r\n\r\n    isStraight(startX, startY, ctrl1X, ctrl1Y, ctrl2X, ctrl2Y, endX, endY) {\r\n        return startX === ctrl1X && startY === ctrl1Y && endX === ctrl2X && endY === ctrl2Y\r\n    }\r\n\r\n    setKeyframes(time) {\r\n    }\r\n\r\n    reset(reversed) {\r\n    }\r\n}\r\n\r\nexport default Path\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/objects/Path.js","import {requestAnimationFrame} from \"./utils/shim\";\r\n\r\nconst _animations = [];\r\nlet _animationsLength = 0;\r\n\r\nlet _autoPlay = false;\r\nlet _rafId;\r\n\r\nconst update = time => {\r\n    if (_autoPlay) {\r\n        _rafId = requestAnimationFrame(update);\r\n    }\r\n    time = time !== undefined ? time : performance.now();\r\n\r\n    for (let i = 0; i < _animationsLength; i++) {\r\n        _animations[i].update(time);\r\n    }\r\n};\r\n\r\nconst autoPlay = auto => {\r\n    _autoPlay = auto;\r\n    _autoPlay ? _rafId = requestAnimationFrame(update) : cancelAnimationFrame(_rafId);\r\n};\r\n\r\nfunction add(tween) {\r\n    _animations.push(tween);\r\n    _animationsLength = _animations.length;\r\n}\r\n\r\nfunction remove(tween) {\r\n    const i = _animations.indexOf(tween);\r\n    if (i > -1) {\r\n        _animations.splice(i, 1);\r\n        _animationsLength = _animations.length;\r\n    }\r\n}\r\n\r\nexport {update, autoPlay, add, remove};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core.js","import BaseLayer from './BaseLayer';\r\n\r\nclass ImageLayer extends BaseLayer {\r\n    constructor(data) {\r\n        super(data);\r\n        this.source = data.source;\r\n        this.isLoaded = false;\r\n    }\r\n\r\n    preload(cb) {\r\n        return new Promise((resolve, reject) => {\r\n            this.img = new Image;\r\n            this.img.onload = () => {\r\n                this.isLoaded = true;\r\n                resolve();\r\n            };\r\n            this.img.src = this.source;\r\n        });\r\n    }\r\n\r\n    draw(ctx, time) {\r\n        super.draw(ctx, time);\r\n\r\n        ctx.drawImage(this.img, 0, 0);\r\n\r\n        ctx.restore();\r\n    }\r\n}\r\n\r\nexport default ImageLayer;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layers/ImageLayer.js","class Bezier {\r\n\r\n    constructor(path) {\r\n        this.path = path;\r\n    }\r\n\r\n    getLength(len) {\r\n        this.steps = Math.max(Math.floor(len / 10), 1);\r\n        this.arcLengths = new Array(this.steps + 1);\r\n        this.arcLengths[0] = 0;\r\n\r\n        let ox = this.cubicN(0, this.path[0], this.path[2], this.path[4], this.path[6]);\r\n        let oy = this.cubicN(0, this.path[1], this.path[3], this.path[5], this.path[7]);\r\n        let clen = 0;\r\n        const iterator = 1 / this.steps;\r\n\r\n        for (let i = 1; i <= this.steps; i += 1) {\r\n            const x = this.cubicN(i * iterator, this.path[0], this.path[2], this.path[4], this.path[6]);\r\n            const y = this.cubicN(i * iterator, this.path[1], this.path[3], this.path[5], this.path[7]);\r\n            const dx = ox - x;\r\n            const dy = oy - y;\r\n\r\n            clen += Math.sqrt(dx * dx + dy * dy);\r\n            this.arcLengths[i] = clen;\r\n\r\n            ox = x;\r\n            oy = y;\r\n        }\r\n\r\n        this.length = clen;\r\n    }\r\n\r\n    map(u) {\r\n        const targetLength = u * this.arcLengths[this.steps];\r\n        let low = 0;\r\n        let high = this.steps;\r\n        let index = 0;\r\n\r\n        while (low < high) {\r\n            index = low + (((high - low) / 2) | 0);\r\n            if (this.arcLengths[index] < targetLength) {\r\n                low = index + 1;\r\n\r\n            } else {\r\n                high = index;\r\n            }\r\n        }\r\n        if (this.arcLengths[index] > targetLength) {\r\n            index--;\r\n        }\r\n\r\n        const lengthBefore = this.arcLengths[index];\r\n        if (lengthBefore === targetLength) {\r\n            return index / this.steps;\r\n        } else {\r\n            return (index + (targetLength - lengthBefore) / (this.arcLengths[index + 1] - lengthBefore)) / this.steps;\r\n        }\r\n    }\r\n\r\n    getValues(elapsed) {\r\n        const t = this.map(elapsed);\r\n        const x = this.cubicN(t, this.path[0], this.path[2], this.path[4], this.path[6]);\r\n        const y = this.cubicN(t, this.path[1], this.path[3], this.path[5], this.path[7]);\r\n\r\n        return [x, y];\r\n    }\r\n\r\n    cubicN(pct, a, b, c, d) {\r\n        const t2 = pct * pct;\r\n        const t3 = t2 * pct;\r\n        return a + (-a * 3 + pct * (3 * a - a * pct)) * pct\r\n            + (3 * b + pct * (-6 * b + b * 3 * pct)) * pct\r\n            + (c * 3 - c * 3 * pct) * t2\r\n            + d * t3;\r\n    }\r\n}\r\n\r\nexport default Bezier;\n\n\n// WEBPACK FOOTER //\n// ./src/utils/Bezier.js","import Path from './Path'\r\nimport BezierEasing from '../utils/BezierEasing'\r\n\r\nclass AnimatedPath extends Path {\r\n\r\n    constructor(data) {\r\n        super(data)\r\n        this.frameCount = this.frames.length\r\n    }\r\n\r\n    getValue(time) {\r\n        if (this.finished && time >= this.nextFrame.t) {\r\n            return this.nextFrame\r\n        } else if (!this.started && time <= this.lastFrame.t) {\r\n            return this.lastFrame\r\n        } else {\r\n            this.started = true\r\n            this.finished = false\r\n            if (time > this.nextFrame.t) {\r\n                if (this.pointer + 1 === this.frameCount) {\r\n                    this.finished = true\r\n                } else {\r\n                    this.pointer++\r\n                    this.lastFrame = this.frames[this.pointer - 1]\r\n                    this.nextFrame = this.frames[this.pointer]\r\n                    this.onKeyframeChange()\r\n                }\r\n            } else if (time < this.lastFrame.t) {\r\n                if (this.pointer < 2) {\r\n                    this.started = false\r\n                } else {\r\n                    this.pointer--\r\n                    this.lastFrame = this.frames[this.pointer - 1]\r\n                    this.nextFrame = this.frames[this.pointer]\r\n                    this.onKeyframeChange()\r\n                }\r\n            }\r\n            return this.getValueAtTime(time)\r\n        }\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        if (time < this.frames[0].t) {\r\n            this.pointer = 1\r\n            this.nextFrame = this.frames[this.pointer]\r\n            this.lastFrame = this.frames[this.pointer - 1]\r\n            this.onKeyframeChange()\r\n            return\r\n        }\r\n\r\n        if (time > this.frames[this.frameCount - 1].t) {\r\n            this.pointer = this.frameCount - 1\r\n            this.nextFrame = this.frames[this.pointer]\r\n            this.lastFrame = this.frames[this.pointer - 1]\r\n            this.onKeyframeChange()\r\n            return\r\n        }\r\n\r\n        for (let i = 1; i < this.frameCount; i++) {\r\n            if (time >= this.frames[i - 1].t && time <= this.frames[i]) {\r\n                this.pointer = i\r\n                this.lastFrame = this.frames[i - 1]\r\n                this.nextFrame = this.frames[i]\r\n                this.onKeyframeChange()\r\n                return\r\n            }\r\n        }\r\n    }\r\n\r\n    onKeyframeChange() {\r\n        this.setEasing()\r\n    }\r\n\r\n    lerp(a, b, t) {\r\n        return a + t * (b - a)\r\n    }\r\n\r\n    setEasing() {\r\n        if (this.lastFrame.easeOut && this.nextFrame.easeIn) {\r\n            this.easing = new BezierEasing(this.lastFrame.easeOut[0], this.lastFrame.easeOut[1], this.nextFrame.easeIn[0], this.nextFrame.easeIn[1])\r\n        } else {\r\n            this.easing = null\r\n        }\r\n    }\r\n\r\n    getValueAtTime(time) {\r\n        const delta = (time - this.lastFrame.t)\r\n        const duration = this.nextFrame.t - this.lastFrame.t\r\n        let elapsed = delta / duration\r\n        if (elapsed > 1) elapsed = 1\r\n        else if (elapsed < 0) elapsed = 0\r\n        else if (this.easing) elapsed = this.easing(elapsed)\r\n        const actualVertices = []\r\n        const actualLength = []\r\n\r\n        for (let i = 0; i < this.verticesCount; i++) {\r\n            const cp1x = this.lerp(this.lastFrame.v[i][0], this.nextFrame.v[i][0], elapsed)\r\n            const cp1y = this.lerp(this.lastFrame.v[i][1], this.nextFrame.v[i][1], elapsed)\r\n            const cp2x = this.lerp(this.lastFrame.v[i][2], this.nextFrame.v[i][2], elapsed)\r\n            const cp2y = this.lerp(this.lastFrame.v[i][3], this.nextFrame.v[i][3], elapsed)\r\n            const x = this.lerp(this.lastFrame.v[i][4], this.nextFrame.v[i][4], elapsed)\r\n            const y = this.lerp(this.lastFrame.v[i][5], this.nextFrame.v[i][5], elapsed)\r\n\r\n            actualVertices.push([cp1x, cp1y, cp2x, cp2y, x, y])\r\n        }\r\n\r\n        for (let j = 0; j < this.verticesCount - 1; j++) {\r\n            actualLength.push(this.lerp(this.lastFrame.len[j], this.nextFrame.len[j], elapsed))\r\n        }\r\n\r\n        return {\r\n            v: actualVertices,\r\n            len: actualLength\r\n        }\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.finished = false\r\n        this.started = false\r\n        this.pointer = reversed ? this.frameCount - 1 : 1\r\n        this.nextFrame = this.frames[this.pointer]\r\n        this.lastFrame = this.frames[this.pointer - 1]\r\n        this.onKeyframeChange()\r\n    }\r\n}\r\n\r\nexport default AnimatedPath\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/objects/AnimatedPath.js","/**\r\n * BezierEasing - use bezier curve for transition easing function\r\n * is based on Firefox's nsSMILKeySpline.cpp\r\n * Usage:\r\n * var spline = BezierEasing(0.25, 0.1, 0.25, 1.0)\r\n * spline(x) => returns the easing value | x must be in [0, 1] range\r\n *\r\n */\r\n(function (definition) {\r\n    if (typeof exports === \"object\") {\r\n        module.exports = definition();\r\n    }\r\n    else if (typeof window.define === 'function' && window.define.amd) {\r\n        window.define([], definition);\r\n    } else {\r\n        window.BezierEasing = definition();\r\n    }\r\n}(function () {\r\n\r\n    // These values are established by empiricism with tests (tradeoff: performance VS precision)\r\n    var NEWTON_ITERATIONS = 4;\r\n    var NEWTON_MIN_SLOPE = 0.001;\r\n    var SUBDIVISION_PRECISION = 0.0000001;\r\n    var SUBDIVISION_MAX_ITERATIONS = 10;\r\n\r\n    var kSplineTableSize = 11;\r\n    var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\r\n\r\n    var float32ArraySupported = typeof Float32Array === \"function\";\r\n\r\n    function BezierEasing (mX1, mY1, mX2, mY2) {\r\n\r\n        // Validate arguments\r\n        if (arguments.length !== 4) {\r\n            throw new Error(\"BezierEasing requires 4 arguments.\");\r\n        }\r\n        for (var i=0; i<4; ++i) {\r\n            if (typeof arguments[i] !== \"number\" || isNaN(arguments[i]) || !isFinite(arguments[i])) {\r\n                throw new Error(\"BezierEasing arguments should be integers.\");\r\n            }\r\n        }\r\n        if (mX1 < 0 || mX1 > 1 || mX2 < 0 || mX2 > 1) {\r\n            throw new Error(\"BezierEasing x values must be in [0, 1] range.\");\r\n        }\r\n\r\n        var mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\r\n\r\n        function A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\r\n        function B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\r\n        function C (aA1)      { return 3.0 * aA1; }\r\n\r\n        // Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\r\n        function calcBezier (aT, aA1, aA2) {\r\n            return ((A(aA1, aA2)*aT + B(aA1, aA2))*aT + C(aA1))*aT;\r\n        }\r\n\r\n        // Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\r\n        function getSlope (aT, aA1, aA2) {\r\n            return 3.0 * A(aA1, aA2)*aT*aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\r\n        }\r\n\r\n        function newtonRaphsonIterate (aX, aGuessT) {\r\n            for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\r\n                var currentSlope = getSlope(aGuessT, mX1, mX2);\r\n                if (currentSlope === 0.0) return aGuessT;\r\n                var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\r\n                aGuessT -= currentX / currentSlope;\r\n            }\r\n            return aGuessT;\r\n        }\r\n\r\n        function calcSampleValues () {\r\n            for (var i = 0; i < kSplineTableSize; ++i) {\r\n                mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\r\n            }\r\n        }\r\n\r\n        function binarySubdivide (aX, aA, aB) {\r\n            var currentX, currentT, i = 0;\r\n            do {\r\n                currentT = aA + (aB - aA) / 2.0;\r\n                currentX = calcBezier(currentT, mX1, mX2) - aX;\r\n                if (currentX > 0.0) {\r\n                    aB = currentT;\r\n                } else {\r\n                    aA = currentT;\r\n                }\r\n            } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\r\n            return currentT;\r\n        }\r\n\r\n        function getTForX (aX) {\r\n            var intervalStart = 0.0;\r\n            var currentSample = 1;\r\n            var lastSample = kSplineTableSize - 1;\r\n\r\n            for (; currentSample != lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {\r\n                intervalStart += kSampleStepSize;\r\n            }\r\n            --currentSample;\r\n\r\n            // Interpolate to provide an initial guess for t\r\n            var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample+1] - mSampleValues[currentSample]);\r\n            var guessForT = intervalStart + dist * kSampleStepSize;\r\n\r\n            var initialSlope = getSlope(guessForT, mX1, mX2);\r\n            if (initialSlope >= NEWTON_MIN_SLOPE) {\r\n                return newtonRaphsonIterate(aX, guessForT);\r\n            } else if (initialSlope == 0.0) {\r\n                return guessForT;\r\n            } else {\r\n                return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize);\r\n            }\r\n        }\r\n\r\n        if (mX1 != mY1 || mX2 != mY2)\r\n            calcSampleValues();\r\n\r\n        var f = function (aX) {\r\n            if (mX1 === mY1 && mX2 === mY2) return aX; // linear\r\n            // Because JavaScript number are imprecise, we should guarantee the extremes are right.\r\n            if (aX === 0) return 0;\r\n            if (aX === 1) return 1;\r\n            return calcBezier(getTForX(aX), mY1, mY2);\r\n        };\r\n        var str = \"BezierEasing(\"+[mX1, mY1, mX2, mY2]+\")\";\r\n        f.toString = function () { return str; };\r\n\r\n        return f;\r\n    }\r\n\r\n    // CSS mapping\r\n    BezierEasing.css = {\r\n        \"ease\":        BezierEasing(0.25, 0.1, 0.25, 1.0),\r\n        \"linear\":      BezierEasing(0.00, 0.0, 1.00, 1.0),\r\n        \"ease-in\":     BezierEasing(0.42, 0.0, 1.00, 1.0),\r\n        \"ease-out\":    BezierEasing(0.00, 0.0, 0.58, 1.0),\r\n        \"ease-in-out\": BezierEasing(0.42, 0.0, 0.58, 1.0)\r\n    };\r\n\r\n    return BezierEasing;\r\n}));\n\n\n// WEBPACK FOOTER //\n// ./src/utils/BezierEasing.js","import BaseLayer from './BaseLayer';\r\n\r\nclass NullLayer extends BaseLayer {\r\n    constructor(data) {\r\n        super(data);\r\n    }\r\n\r\n    draw(ctx, time) {\r\n        super.draw(ctx, time);\r\n        ctx.restore();\r\n    }\r\n}\r\n\r\nexport default NullLayer;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layers/NullLayer.js","import BaseLayer from './BaseLayer'\r\n\r\nclass TextLayer extends BaseLayer {\r\n    constructor(data, baseFont) {\r\n        super(data);\r\n        this.text = data.text;\r\n        this.leading = data.leading;\r\n        this.fontSize = data.fontSize;\r\n        this.font = data.font;\r\n        this.color = data.color;\r\n        this.justification = data.justification;\r\n        this.baseFont = baseFont;\r\n    }\r\n\r\n    draw(ctx, time) {\r\n        super.draw(ctx, time);\r\n\r\n        ctx.textAlign = this.justification;\r\n        ctx.font = `${this.fontSize}px ${this.baseFont}` || this.font;\r\n        ctx.fillStyle = `rgb(${this.color[0]}, ${this.color[1]}, ${this.color[2]})`;\r\n        for (let j = 0; j < this.text.length; j++) {\r\n            ctx.fillText(this.text[j], 0, j * this.leading);\r\n        }\r\n\r\n        ctx.restore();\r\n    }\r\n\r\n}\r\n\r\nexport default TextLayer;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layers/TextLayer.js","import AnimatedPath from '../objects/AnimatedPath'\r\nimport Ellipse from '../objects/Ellipse'\r\nimport Path from '../objects/Path'\r\nimport Polystar from '../objects/Polystar'\r\nimport Rect from '../objects/Rect'\r\nimport Fill from '../property/Fill'\r\nimport GradientFill from '../property/GradientFill'\r\nimport Stroke from '../property/Stroke'\r\nimport Trim from '../property/Trim'\r\nimport BaseLayer from './BaseLayer'\r\n\r\nclass VectorLayer extends BaseLayer {\r\n    constructor(data, gradients) {\r\n        super(data)\r\n\r\n        if (data.fill) this.fill = new Fill(data.fill)\r\n        if (data.gradientFill) this.fill = new GradientFill(data.gradientFill, gradients)\r\n        if (data.stroke) this.stroke = new Stroke(data.stroke)\r\n        if (data.trim) this.trim = new Trim(data.trim)\r\n\r\n        if (data.groups) {\r\n            this.groups = data.groups.map(group => new VectorLayer(group, gradients))\r\n        }\r\n\r\n        if (data.shapes) {\r\n            this.shapes = data.shapes.map(shape => {\r\n                if (shape.type === 'path') {\r\n                    return shape.isAnimated ? new AnimatedPath(shape) : new Path(shape)\r\n                } else if (shape.type === 'rect') {\r\n                    return new Rect(shape)\r\n                } else if (shape.type === 'ellipse') {\r\n                    return new Ellipse(shape)\r\n                } else if (shape.type === 'polystar') {\r\n                    return new Polystar(shape)\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    draw(ctx, time, parentFill, parentStroke, parentTrim) {\r\n        super.draw(ctx, time)\r\n\r\n        const fill = this.fill || parentFill\r\n        const stroke = this.stroke || parentStroke\r\n        const trimValues = this.trim ? this.trim.getTrim(time) : parentTrim\r\n\r\n        if (fill) fill.update(ctx, time)\r\n        if (stroke) stroke.update(ctx, time)\r\n\r\n        ctx.beginPath()\r\n        if (this.shapes) {\r\n            this.shapes.forEach(shape => shape.draw(ctx, time, trimValues))\r\n            if (this.shapes[this.shapes.length - 1].closed) {\r\n                // ctx.closePath();\r\n            }\r\n        }\r\n\r\n        if (fill) ctx.fill()\r\n        if (stroke) ctx.stroke()\r\n\r\n        if (this.groups) this.groups.forEach(group => group.draw(ctx, time, fill, stroke, trimValues))\r\n        ctx.restore()\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        super.setKeyframes(time)\r\n\r\n        if (this.shapes) this.shapes.forEach(shape => shape.setKeyframes(time))\r\n        if (this.groups) this.groups.forEach(group => group.setKeyframes(time))\r\n\r\n        if (this.fill) this.fill.setKeyframes(time)\r\n        if (this.stroke) this.stroke.setKeyframes(time)\r\n        if (this.trim) this.trim.setKeyframes(time)\r\n    }\r\n\r\n    reset(reversed) {\r\n        super.reset(reversed)\r\n\r\n        if (this.shapes) this.shapes.forEach(shape => shape.reset(reversed))\r\n        if (this.groups) this.groups.forEach(group => group.reset(reversed))\r\n\r\n        if (this.fill) this.fill.reset(reversed)\r\n        if (this.stroke) this.stroke.reset(reversed)\r\n        if (this.trim) this.trim.reset(reversed)\r\n    }\r\n}\r\n\r\nexport default VectorLayer\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layers/VectorLayer.js","import {update, autoPlay, add, remove} from './core'\r\nimport Animation from './Animation';\r\nexport {Animation, update, autoPlay, add, remove};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","const root = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : this;\r\n\r\nexport const requestAnimationFrame = root.requestAnimationFrame ||\r\n    (function (fn) {\r\n        return root.setTimeout(fn, 16);\r\n    });\r\n\r\nexport const cancelAnimationFrame = root.cancelAnimationFrame ||\r\n    (function (id) {\r\n        return root.clearTimeout(id);\r\n    });\r\n\r\nexport const performance = (root.performance || {\r\n    offset: Date.now(),\r\n    now: function now(){\r\n        return Date.now() - this.offset;\r\n\r\n    }\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/utils/shim.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 14\n// module chunks = 0","import {add, remove} from './core'\r\nimport Emitter from 'tiny-emitter'\r\nimport ImageLayer from './layers/ImageLayer';\r\nimport NullLayer from './layers/NullLayer';\r\nimport TextLayer from './layers/TextLayer';\r\nimport CompLayer from './layers/CompLayer';\r\nimport VectorLayer from './layers/VectorLayer';\r\n\r\nclass Animation extends Emitter {\r\n\r\n    constructor(options) {\r\n        super();\r\n\r\n        this.gradients = {};\r\n        this.pausedTime = 0;\r\n        this.duration = options.data.duration;\r\n        this.baseWidth = options.data.width;\r\n        this.baseHeight = options.data.height;\r\n        this.ratio = options.data.width / options.data.height;\r\n        this.markers = options.data.markers;\r\n        this.baseFont = options.baseFont;\r\n        this.loop = options.loop || false;\r\n        this.devicePixelRatio = options.devicePixelRatio || (window && window.devicePixelRatio ? window.devicePixelRatio : 1);\r\n        this.fluid = options.fluid || true;\r\n        this.imageBasePath = options.imageBasePath || '';\r\n        const comps = options.data.comps;\r\n\r\n        this.isPaused = false;\r\n        this.isPlaying = false;\r\n        this.drawFrame = true;\r\n\r\n        this.canvas = options.canvas || document.createElement('canvas');\r\n        this.canvas.width = this.baseWidth;\r\n        this.canvas.height = this.baseHeight;\r\n        this.ctx = this.canvas.getContext('2d');\r\n\r\n        this.layers = options.data.layers.map(layer => {\r\n            switch (layer.type) {\r\n                case 'vector':\r\n                    return new VectorLayer(layer, this.gradients);\r\n                case 'image':\r\n                    return new ImageLayer(layer, this.imageBasePath);\r\n                case 'text':\r\n                    return new TextLayer(layer, this.baseFont);\r\n                case 'comp':\r\n                    return new CompLayer(layer, comps, this.baseFont, this.gradients, this.imageBasePath);\r\n                case 'null':\r\n                    return new NullLayer(layer);\r\n            }\r\n        });\r\n\r\n        this.layers.forEach(layer => {\r\n            if (layer.parent) {\r\n                const parentIndex = layer.parent;\r\n                layer.parent = this.layers.find(layer => layer.index === parentIndex)\r\n            }\r\n        });\r\n\r\n        this.reversed = options.reversed || false;\r\n        this.reset(this.reversed);\r\n        this.resize();\r\n\r\n        add(this);\r\n    }\r\n\r\n    play() {\r\n        if (!this.isPlaying) {\r\n            if (!this.isPaused) this.reset(this.reversed);\r\n            this.isPaused = false;\r\n            this.pausedTime = 0;\r\n            this.isPlaying = true;\r\n        }\r\n    }\r\n\r\n    stop() {\r\n        this.reset(this.reversed);\r\n        this.isPlaying = false;\r\n        this.drawFrame = true;\r\n    }\r\n\r\n    pause() {\r\n        if (this.isPlaying) {\r\n            this.isPaused = true;\r\n            this.pausedTime = this.time;\r\n            this.isPlaying = false;\r\n        }\r\n    }\r\n\r\n    gotoAndPlay(id) {\r\n        const marker = this.getMarker(id);\r\n        if (marker) {\r\n            this.time = marker.time;\r\n            this.pausedTime = 0;\r\n            this.setKeyframes(this.time);\r\n            this.isPlaying = true;\r\n        }\r\n    }\r\n\r\n    gotoAndStop(id) {\r\n        const marker = this.getMarker(id);\r\n        if (marker) {\r\n            this.time = marker.time;\r\n            this.setKeyframes(this.time);\r\n            this.drawFrame = true;\r\n            this.isPlaying = false;\r\n        }\r\n    }\r\n\r\n    getMarker(id) {\r\n        let marker;\r\n        if (typeof id === 'number') {\r\n            marker = this.markers[id];\r\n        } else if (typeof id === 'string') {\r\n            marker = this.markers.find(marker => marker.comment === id);\r\n        }\r\n\r\n        if (marker) return marker;\r\n        console.warn('Marker not found');\r\n    }\r\n\r\n    checkStopMarkers(from, to) {\r\n        return this.markers.find(marker => marker.stop && marker.time > from && marker.time < to);\r\n    }\r\n\r\n\r\n    preload() {\r\n        const promises = this.layers.filter(layer => layer instanceof ImageLayer).map(layer => new layer.preload());\r\n        return Promise.all(promises).catch(error => console.error(error));\r\n    }\r\n\r\n    reset() {\r\n        this.pausedTime = 0;\r\n        this.time = this.reversed ? this.duration : 0;\r\n        this.layers.forEach(layer => layer.reset(this.reversed));\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.layers.forEach(layer => layer.setKeyframes(time));\r\n    }\r\n\r\n    destroy() {\r\n        this.isPlaying = false;\r\n        if (this.canvas.parentNode) this.canvas.parentNode.removeChild(this.canvas);\r\n        remove(this);\r\n    }\r\n\r\n    resize(w) {\r\n        if (this.fluid) {\r\n            const width = w || this.canvas.clientWidth || this.baseWidth;\r\n            this.canvas.width = width * this.devicePixelRatio;\r\n            this.canvas.height = width / this.ratio * this.devicePixelRatio;\r\n\r\n            this.scale = width / this.baseWidth * this.devicePixelRatio;\r\n            this.ctx.transform(this.scale, 0, 0, this.scale, 0, 0);\r\n            this.setKeyframes(this.time);\r\n            this.drawFrame = true;\r\n        }\r\n    }\r\n\r\n    setGradients(name, stops) {\r\n        if (!this.gradients[name]) {\r\n            console.warn(`Gradient with name: ${name} not found.`);\r\n            return;\r\n        }\r\n\r\n        this.gradients[name].forEach(gradient => {\r\n            gradient.stops = stops;\r\n        });\r\n    }\r\n\r\n    getSpriteSheet(fps = 25, width = 50, maxWidth = 4096) {\r\n        const ratio = width / this.baseWidth;\r\n        const height = this.baseHeight * ratio;\r\n        const numFrames = Math.floor((this.duration / 1000) * fps);\r\n        const buffer = document.createElement('canvas');\r\n        const ctx = buffer.getContext('2d');\r\n\r\n        const rowsX = Math.floor(maxWidth / width);\r\n        const rowsY = Math.ceil(numFrames / rowsX);\r\n\r\n        let indexX = 0;\r\n        let indexY = 0;\r\n\r\n        buffer.width = rowsX * width;\r\n        buffer.height = rowsY * height;\r\n\r\n        this.resize(width);\r\n\r\n        for (let i = 0; i < numFrames; i++) {\r\n            const step = i / numFrames;\r\n            const time = step * this.duration;\r\n            this.setKeyframes(time);\r\n            this.draw(time);\r\n\r\n            const x = indexX * width;\r\n            const y = indexY * height;\r\n\r\n            if ((indexX + 1) >= rowsX) {\r\n                indexX = 0;\r\n                indexY++;\r\n            } else {\r\n                indexX++;\r\n            }\r\n\r\n            ctx.drawImage(this.canvas, x, y, width, height);\r\n        }\r\n\r\n        return {\r\n            frames: numFrames,\r\n            canvas: buffer,\r\n            offsetX: width,\r\n            offsetY: height,\r\n            rowsX,\r\n            rowsY,\r\n        }\r\n    }\r\n\r\n    draw(time) {\r\n        this.ctx.clearRect(0, 0, this.baseWidth, this.baseHeight);\r\n\r\n        this.layers.forEach(layer => {\r\n            if (time >= layer.in && time <= layer.out) {\r\n                layer.draw(this.ctx, time);\r\n            }\r\n        });\r\n    }\r\n\r\n    update(time) {\r\n        if (!this.then) this.then = time;\r\n\r\n        const delta = time - this.then;\r\n        this.then = time;\r\n\r\n        if (this.isPlaying) {\r\n            this.time = this.reversed ? this.time - delta : this.time + delta;\r\n\r\n            const stopMarker = this.checkStopMarkers(this.time - delta, this.time);\r\n\r\n            if (this.time > this.duration || this.reversed && this.time < 0) {\r\n                this.time = this.reversed ? 0 : this.duration - 1;\r\n                this.isPlaying = false;\r\n                this.emit('complete');\r\n                if (this.loop) {\r\n                    this.play();\r\n                }\r\n            } else if (stopMarker) {\r\n                this.time = stopMarker.time;\r\n                this.pause();\r\n                this.emit('stop', stopMarker);\r\n            } else {\r\n                this.draw(this.time);\r\n            }\r\n            this.emit('update');\r\n        } else if (this.drawFrame) {\r\n            this.drawFrame = false;\r\n            this.draw(this.time);\r\n            this.emit('update');\r\n        }\r\n    }\r\n\r\n    set step(step) {\r\n        this.isPlaying = false;\r\n        this.time = step * this.duration;\r\n        this.pausedTime = this.time;\r\n        this.setKeyframes(this.time);\r\n        this.drawFrame = true;\r\n    }\r\n\r\n    get step() {\r\n        return this.time / this.duration;\r\n    }\r\n\r\n    get reversed() {\r\n        return this._reversed;\r\n    }\r\n\r\n    set reversed(bool) {\r\n        this._reversed = bool;\r\n        if (this.pausedTime) {\r\n            this.time = this.pausedTime;\r\n        } else if (!this.isPlaying) {\r\n            this.time = this.reversed ? this.duration : 0;\r\n        }\r\n        this.setKeyframes(this.time);\r\n    }\r\n}\r\n\r\nexport default Animation;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Animation.js","function E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/tiny-emitter/index.js\n// module id = 16\n// module chunks = 0","import Property from '../property/Property';\r\nimport AnimatedProperty from '../property/AnimatedProperty';\r\nimport Position from './Position';\r\n\r\nclass Transform {\r\n\r\n    constructor(data) {\r\n        if (data.position) {\r\n            if (data.position.length > 1) {\r\n                this.position = new Position(data.position);\r\n            } else {\r\n                this.position = new Property(data.position);\r\n            }\r\n        }\r\n\r\n        if (data.positionX) this.positionX = data.positionX.length > 1 ? new AnimatedProperty(data.positionX) : new Property(data.positionX);\r\n        if (data.positionY) this.positionY = data.positionY.length > 1 ? new AnimatedProperty(data.positionY) : new Property(data.positionY);\r\n        if (data.anchor) this.anchor = data.anchor.length > 1 ? new AnimatedProperty(data.anchor) : new Property(data.anchor);\r\n        if (data.scaleX) this.scaleX = data.scaleX.length > 1 ? new AnimatedProperty(data.scaleX) : new Property(data.scaleX);\r\n        if (data.scaleY) this.scaleY = data.scaleY.length > 1 ? new AnimatedProperty(data.scaleY) : new Property(data.scaleY);\r\n        if (data.skew) this.skew = data.skew.length > 1 ? new AnimatedProperty(data.skew) : new Property(data.skew);\r\n        if (data.skewAxis) this.skewAxis = data.skewAxis.length > 1 ? new AnimatedProperty(data.skewAxis) : new Property(data.skewAxis);\r\n        if (data.rotation) this.rotation = data.rotation.length > 1 ? new AnimatedProperty(data.rotation) : new Property(data.rotation);\r\n        if (data.opacity) this.opacity = data.opacity.length > 1 ? new AnimatedProperty(data.opacity) : new Property(data.opacity);\r\n    }\r\n\r\n    update(ctx, time) {\r\n        let positionX; // FIXME wrong transparency if nested\r\n        let positionY;\r\n        const anchor = this.anchor ? this.anchor.getValue(time) : [0, 0];\r\n        const rotation = this.rotation ? this.deg2rad(this.rotation.getValue(time)) : 0;\r\n        const skew = this.skew ? this.deg2rad(this.skew.getValue(time)) : 0;\r\n        const skewAxis = this.skewAxis ? this.deg2rad(this.skewAxis.getValue(time)) : 0;\r\n        const scaleX = this.scaleX ? this.scaleX.getValue(time) : 1;\r\n        const scaleY = this.scaleY ? this.scaleY.getValue(time) : 1;\r\n        const opacity = this.opacity ? this.opacity.getValue(time) * ctx.globalAlpha : ctx.globalAlpha;\r\n\r\n        if (this.position) {\r\n            const position = this.position.getValue(time, ctx);\r\n            positionX = position[0];\r\n            positionY = position[1];\r\n        } else {\r\n            positionX = this.positionX ? this.positionX.getValue(time) : 0;\r\n            positionY = this.positionY ? this.positionY.getValue(time) : 0;\r\n        }\r\n\r\n        // console.log(ctx, positionX, positionY, anchor, rotation, skew, skewAxis, scaleX, scaleY, opacity);\r\n\r\n        //order very very important :)\r\n        ctx.transform(1, 0, 0, 1, positionX - anchor[0], positionY - anchor[1]);\r\n        this.setRotation(ctx, rotation, anchor[0], anchor[1]);\r\n        this.setSkew(ctx, skew, skewAxis, anchor[0], anchor[1]);\r\n        this.setScale(ctx, scaleX, scaleY, anchor[0], anchor[1]);\r\n        ctx.globalAlpha = opacity;\r\n    }\r\n\r\n    setRotation(ctx, rad, x, y) {\r\n        const c = Math.cos(rad);\r\n        const s = Math.sin(rad);\r\n        const dx = x - c * x + s * y;\r\n        const dy = y - s * x - c * y;\r\n        ctx.transform(c, s, -s, c, dx, dy);\r\n    }\r\n\r\n    setScale(ctx, sx, sy, x, y) {\r\n        ctx.transform(sx, 0, 0, sy, -x * sx + x, -y * sy + y);\r\n    }\r\n\r\n    setSkew(ctx, skew, axis, x, y) {\r\n        const t = Math.tan(-skew);\r\n        this.setRotation(ctx, -axis, x, y);\r\n        ctx.transform(1, 0, t, 1, -y * t, 0);\r\n        this.setRotation(ctx, axis, x, y);\r\n    }\r\n\r\n    deg2rad(deg) {\r\n        return deg * (Math.PI / 180);\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        if (this.anchor) this.anchor.setKeyframes(time);\r\n        if (this.rotation) this.rotation.setKeyframes(time);\r\n        if (this.skew) this.skew.setKeyframes(time);\r\n        if (this.skewAxis) this.skewAxis.setKeyframes(time);\r\n        if (this.position) this.position.setKeyframes(time);\r\n        if (this.positionX) this.positionX.setKeyframes(time);\r\n        if (this.positionY) this.positionY.setKeyframes(time);\r\n        if (this.scaleX) this.scaleX.setKeyframes(time);\r\n        if (this.scaleY) this.scaleY.setKeyframes(time);\r\n        if (this.opacity) this.opacity.setKeyframes(time);\r\n    }\r\n\r\n    reset(reversed) {\r\n        if (this.anchor) this.anchor.reset(reversed);\r\n        if (this.rotation) this.rotation.reset(reversed);\r\n        if (this.skew) this.skew.reset(reversed);\r\n        if (this.skewAxis) this.skewAxis.reset(reversed);\r\n        if (this.position) this.position.reset(reversed);\r\n        if (this.positionX) this.positionX.reset(reversed);\r\n        if (this.positionY) this.positionY.reset(reversed);\r\n        if (this.scaleX) this.scaleX.reset(reversed);\r\n        if (this.scaleY) this.scaleY.reset(reversed);\r\n        if (this.opacity) this.opacity.reset(reversed);\r\n    }\r\n}\r\n\r\nexport default Transform;\n\n\n// WEBPACK FOOTER //\n// ./src/transform/Transform.js","import Bezier from '../utils/Bezier';\r\nimport AnimatedProperty from '../property/AnimatedProperty';\r\n\r\nclass Position extends AnimatedProperty{\r\n\r\n    onKeyframeChange() {\r\n        this.setEasing();\r\n        this.setMotionPath();\r\n    }\r\n\r\n    getValueAtTime(time) {\r\n        if (this.motionpath) {\r\n            return this.motionpath.getValues(this.getElapsed(time));\r\n        } else {\r\n            return this.lerp(this.lastFrame.v, this.nextFrame.v, this.getElapsed(time));\r\n        }\r\n    }\r\n\r\n    setMotionPath() {\r\n        if (this.lastFrame.motionpath) {\r\n            this.motionpath = new Bezier(this.lastFrame.motionpath);\r\n            this.motionpath.getLength(this.lastFrame.len);\r\n        } else {\r\n            this.motionpath = null;\r\n        }\r\n    }\r\n}\r\n\r\nexport default Position;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/transform/Position.js","import Property from '../property/Property';\r\nimport AnimatedProperty from '../property/AnimatedProperty';\r\n\r\nclass DropShadow {\r\n    constructor(data) {\r\n        this.color = data.color.length > 1 ? new AnimatedProperty(data.color) : new Property(data.color);\r\n        this.opacity = data.opacity.length > 1 ? new AnimatedProperty(data.opacity) : new Property(data.opacity);\r\n        this.direction = data.direction.length > 1 ? new AnimatedProperty(data.direction) : new Property(data.direction);\r\n        this.distance = data.distance.length > 1 ? new AnimatedProperty(data.distance) : new Property(data.distance);\r\n        this.softness = data.softness.length > 1 ? new AnimatedProperty(data.softness) : new Property(data.softness);\r\n    }\r\n\r\n    getColor(time) {\r\n        const color = this.color.getValue(time);\r\n        const opacity = this.opacity.getValue(time);\r\n        return `rgba(${Math.round(color[0])}, ${Math.round(color[1])}, ${Math.round(color[2])}, ${opacity})`;\r\n    }\r\n\r\n    setShadow(ctx, time) {\r\n        const color = this.getColor(time);\r\n        const dist = this.distance.getValue(time);\r\n        const blur = this.softness.getValue(time);\r\n        ctx.shadowColor = color;\r\n        ctx.shadowOffsetX = dist;\r\n        ctx.shadowOffsetY = dist;\r\n        ctx.shadowBlur = blur;\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.color.setKeyframes(time);\r\n        this.opacity.setKeyframes(time);\r\n        this.direction.setKeyframes(time);\r\n        this.distance.setKeyframes(time);\r\n        this.softness.setKeyframes(time);\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.color.reset(reversed);\r\n        this.opacity.reset(reversed);\r\n        this.direction.reset(reversed);\r\n        this.distance.reset(reversed);\r\n        this.softness.reset(reversed);\r\n    }\r\n}\r\n\r\nexport default DropShadow;\n\n\n// WEBPACK FOOTER //\n// ./src/effects/DropShadow.js","import ImageLayer from './ImageLayer'\r\nimport NullLayer from './NullLayer'\r\nimport TextLayer from './TextLayer'\r\nimport BaseLayer from './BaseLayer'\r\nimport VectorLayer from './VectorLayer'\r\nimport Property from '../property/Property'\r\nimport AnimatedProperty from '../property/AnimatedProperty'\r\n\r\nclass CompLayer extends BaseLayer {\r\n\r\n    constructor(data, comps, baseFont, gradients, imageBasePath) {\r\n        super(data)\r\n\r\n        const sourceID = data.sourceID\r\n        const layers = (comps && comps[sourceID]) ? comps[sourceID].layers : null\r\n\r\n        if (layers) {\r\n\r\n            this.layers = layers.map(layer => {\r\n                switch (layer.type) {\r\n                    case 'vector':\r\n                        return new VectorLayer(layer, gradients)\r\n                    case 'image':\r\n                        return new ImageLayer(layer, imageBasePath)\r\n                    case 'text':\r\n                        return new TextLayer(layer, baseFont)\r\n                    case 'comp':\r\n                        return new CompLayer(layer, baseFont, gradients, imageBasePath)\r\n                    case 'null':\r\n                        return new NullLayer(layer)\r\n                }\r\n            })\r\n\r\n            this.layers.forEach(layer => {\r\n                if (layer.parent) {\r\n                    const parentIndex = layer.parent\r\n                    layer.parent = this.layers.find(layer => layer.index === parentIndex)\r\n                }\r\n            })\r\n        }\r\n\r\n        if (data.timeRemapping) {\r\n            this.timeRemapping = data.timeRemapping.length > 1 ? new AnimatedProperty(data.timeRemapping) : new Property(data.timeRemapping)\r\n        }\r\n    }\r\n\r\n    draw(ctx, time) {\r\n        super.draw(ctx, time)\r\n\r\n        if (this.layers) {\r\n            let internalTime = time - this.in\r\n            if (this.timeRemapping) internalTime = this.timeRemapping.getValue(internalTime)\r\n            this.layers.forEach(layer => {\r\n                if (internalTime >= layer.in && internalTime <= layer.out) {\r\n                    layer.draw(ctx, internalTime)\r\n                }\r\n            })\r\n        }\r\n\r\n        ctx.restore()\r\n    }\r\n\r\n    setParentTransform(ctx, time) {\r\n        super.setParentTransform(ctx, time)\r\n        const internalTime = time - this.in\r\n        if (this.layers) this.layers.forEach(layer => layer.setParentTransform(ctx, internalTime))\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        super.setKeyframes(time)\r\n        const internalTime = time - this.in\r\n        if (this.timeRemapping) this.timeRemapping.setKeyframes(internalTime)\r\n        if (this.layers) this.layers.forEach(layer => layer.setKeyframes(internalTime))\r\n    }\r\n\r\n    reset(reversed) {\r\n        super.reset(reversed)\r\n        if (this.timeRemapping) this.timeRemapping.reset(reversed)\r\n        if (this.layers) this.layers.forEach(layer => layer.reset(reversed))\r\n    }\r\n}\r\n\r\nexport default CompLayer\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layers/CompLayer.js","import Property from '../property/Property';\r\nimport AnimatedProperty from '../property/AnimatedProperty';\r\nimport Path from './Path'\r\n\r\nclass Ellipse  {\r\n\r\n    constructor(data) {\r\n        this.closed = true;\r\n        this.size = data.size.length > 1 ? new AnimatedProperty(data.size) : new Property(data.size);\r\n        if (data.position) this.position = data.position.length > 1 ? new AnimatedProperty(data.position) : new Property(data.position);\r\n    }\r\n\r\n    draw(ctx, time, trim) {\r\n        const size = this.size.getValue(time);\r\n        const position = this.position ? this.position.getValue(time) : [0, 0];\r\n\r\n        let i;\r\n        let j;\r\n        const w = size[0] / 2;\r\n        const h = size[1] / 2;\r\n        const x = position[0] - w;\r\n        const y = position[1] - h;\r\n        const ow = w * .5522848;\r\n        const oh = h * .5522848;\r\n\r\n        const vertices = [\r\n            [x + w + ow, y, x + w - ow, y, x + w, y],\r\n            [x + w + w, y + h + oh, x + w + w, y + h - oh, x + w + w, y + h],\r\n            [x + w - ow, y + h + h, x + w + ow, y + h + h, x + w, y + h + h],\r\n            [x, y + h - oh, x, y + h + oh, x, y + h]\r\n        ];\r\n\r\n        if (trim) {\r\n            let tv;\r\n            const len = w + h;\r\n\r\n            trim = this.getTrimValues(trim);\r\n\r\n            for (i = 0; i < 4; i++) {\r\n                j = i + 1;\r\n                if (j > 3) j = 0;\r\n                if (i > trim.startIndex && i < trim.endIndex) {\r\n                    ctx.bezierCurveTo(vertices[i][0], vertices[i][1], vertices[j][2], vertices[j][3], vertices[j][4], vertices[j][5]);\r\n                } else if (i === trim.startIndex && i === trim.endIndex) {\r\n                    tv = this.trim(vertices[i], vertices[j], trim.start, trim.end, len);\r\n                    ctx.moveTo(tv.start[4], tv.start[5]);\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5]);\r\n                } else if (i === trim.startIndex) {\r\n                    tv = this.trim(vertices[i], vertices[j], trim.start, 1, len);\r\n                    ctx.moveTo(tv.start[4], tv.start[5]);\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5]);\r\n                } else if (i === trim.endIndex) {\r\n                    tv = this.trim(vertices[i], vertices[j], 0, trim.end, len);\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5]);\r\n                }\r\n            }\r\n        } else {\r\n            ctx.moveTo(vertices[0][4], vertices[0][5]);\r\n            for (i = 0; i < 4; i++) {\r\n                j = i + 1;\r\n                if (j > 3) j = 0;\r\n                ctx.bezierCurveTo(vertices[i][0], vertices[i][1], vertices[j][2], vertices[j][3], vertices[j][4], vertices[j][5]);\r\n            }\r\n        }\r\n    }\r\n\r\n    getTrimValues(trim) {\r\n        const startIndex = Math.floor(trim.start * 4);\r\n        const endIndex = Math.floor(trim.end * 4);\r\n        const start = (trim.start - startIndex * 0.25) * 4;\r\n        const end = (trim.end - endIndex * 0.25) * 4;\r\n\r\n        return {\r\n            startIndex,\r\n            endIndex,\r\n            start,\r\n            end\r\n        };\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.size.setKeyframes(time);\r\n        if (this.position) this.position.setKeyframes(time);\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.size.reset(reversed);\r\n        if (this.position) this.position.reset(reversed);\r\n    }\r\n}\r\n\r\nexport default Ellipse;\n\n\n// WEBPACK FOOTER //\n// ./src/objects/Ellipse.js","import Property from '../property/Property';\r\nimport AnimatedProperty from '../property/AnimatedProperty';\r\n\r\nclass Polystar {\r\n\r\n    constructor(data) {\r\n        //this.name = data.name;\r\n        this.closed = true; // TODO ??\r\n\r\n        this.starType = data.starType;\r\n        this.points = data.points.length > 1 ? new AnimatedProperty(data.points) : new Property(data.points);\r\n        this.innerRadius = data.innerRadius.length > 1 ? new AnimatedProperty(data.innerRadius) : new Property(data.innerRadius);\r\n        this.outerRadius = data.outerRadius.length > 1 ? new AnimatedProperty(data.outerRadius) : new Property(data.outerRadius);\r\n        if (data.position) this.position = data.position.length > 1 ? new AnimatedProperty(data.position) : new Property(data.position);\r\n        if (data.rotation) this.rotation = data.rotation.length > 1 ? new AnimatedProperty(data.rotation) : new Property(data.rotation);\r\n        if (data.innerRoundness) this.innerRoundness = data.innerRoundness.length > 1 ? new AnimatedProperty(data.innerRoundness) : new Property(data.innerRoundness);\r\n        if (data.outerRoundness) this.outerRoundness = data.outerRoundness.length > 1 ? new AnimatedProperty(data.outerRoundness) : new Property(data.outerRoundness);\r\n    }\r\n\r\n    draw(ctx, time) {\r\n        const points = this.points.getValue(time);\r\n        const innerRadius = this.innerRadius.getValue(time);\r\n        const outerRadius = this.outerRadius.getValue(time);\r\n        const position = this.position ? this.position.getValue(time) : [0, 0];\r\n        let rotation = this.rotation ? this.rotation.getValue(time) : 0;\r\n        const innerRoundness = this.innerRoundness ? this.innerRoundness.getValue(time) : 0;\r\n        const outerRoundness = this.outerRoundness ? this.outerRoundness.getValue(time) : 0;\r\n\r\n        rotation = this.deg2rad(rotation);\r\n        const start = this.rotatePoint(0, 0, 0, 0 - outerRadius, rotation);\r\n\r\n        ctx.save();\r\n        ctx.beginPath();\r\n        ctx.translate(position[0], position[1]);\r\n        ctx.moveTo(start[0], start[1]);\r\n\r\n        for (let i = 0; i < points; i++) {\r\n            let pInner;\r\n            let pOuter;\r\n            let pOuter1Tangent;\r\n            let pOuter2Tangent;\r\n            let pInner1Tangent;\r\n            let pInner2Tangent;\r\n            let outerOffset;\r\n            let innerOffset;\r\n            let rot;\r\n\r\n            rot = Math.PI / points * 2;\r\n\r\n            pInner = this.rotatePoint(0, 0, 0, 0 - innerRadius, (rot * (i + 1) - rot / 2) + rotation);\r\n            pOuter = this.rotatePoint(0, 0, 0, 0 - outerRadius, (rot * (i + 1)) + rotation);\r\n\r\n            //FIxME\r\n            if (!outerOffset) outerOffset = (start[0] + pInner[0]) * outerRoundness / 100 * .5522848;\r\n            if (!innerOffset) innerOffset = (start[0] + pInner[0]) * innerRoundness / 100 * .5522848;\r\n\r\n            pOuter1Tangent = this.rotatePoint(0, 0, outerOffset, 0 - outerRadius, (rot * i) + rotation);\r\n            pInner1Tangent = this.rotatePoint(0, 0, innerOffset * -1, 0 - innerRadius, (rot * (i + 1) - rot / 2) + rotation);\r\n            pInner2Tangent = this.rotatePoint(0, 0, innerOffset, 0 - innerRadius, (rot * (i + 1) - rot / 2) + rotation);\r\n            pOuter2Tangent = this.rotatePoint(0, 0, outerOffset * -1, 0 - outerRadius, (rot * (i + 1)) + rotation);\r\n\r\n            if (this.starType === 1) {\r\n                //star\r\n                ctx.bezierCurveTo(pOuter1Tangent[0], pOuter1Tangent[1], pInner1Tangent[0], pInner1Tangent[1], pInner[0], pInner[1]);\r\n                ctx.bezierCurveTo(pInner2Tangent[0], pInner2Tangent[1], pOuter2Tangent[0], pOuter2Tangent[1], pOuter[0], pOuter[1]);\r\n            } else {\r\n                //polygon\r\n                ctx.bezierCurveTo(pOuter1Tangent[0], pOuter1Tangent[1], pOuter2Tangent[0], pOuter2Tangent[1], pOuter[0], pOuter[1]);\r\n            }\r\n\r\n            //debug\r\n            //ctx.fillStyle = \"black\";\r\n            //ctx.fillRect(pInner[0], pInner[1], 5, 5);\r\n            //ctx.fillRect(pOuter[0], pOuter[1], 5, 5);\r\n            //ctx.fillStyle = \"blue\";\r\n            //ctx.fillRect(pOuter1Tangent[0], pOuter1Tangent[1], 5, 5);\r\n            //ctx.fillStyle = \"red\";\r\n            //ctx.fillRect(pInner1Tangent[0], pInner1Tangent[1], 5, 5);\r\n            //ctx.fillStyle = \"green\";\r\n            //ctx.fillRect(pInner2Tangent[0], pInner2Tangent[1], 5, 5);\r\n            //ctx.fillStyle = \"brown\";\r\n            //ctx.fillRect(pOuter2Tangent[0], pOuter2Tangent[1], 5, 5);\r\n        }\r\n\r\n        ctx.restore();\r\n    }\r\n\r\n    rotatePoint(cx, cy, x, y, radians) {\r\n        const cos = Math.cos(radians);\r\n        const sin = Math.sin(radians);\r\n        const nx = (cos * (x - cx)) - (sin * (y - cy)) + cx;\r\n        const ny = (sin * (x - cx)) + (cos * (y - cy)) + cy;\r\n        return [nx, ny];\r\n    }\r\n\r\n    deg2rad(deg) {\r\n        return deg * (Math.PI / 180);\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.points.setKeyframes(time);\r\n        this.innerRadius.setKeyframes(time);\r\n        this.outerRadius.setKeyframes(time);\r\n        if (this.position) this.position.setKeyframes(time);\r\n        if (this.rotation) this.rotation.setKeyframes(time);\r\n        if (this.innerRoundness) this.innerRoundness.setKeyframes(time);\r\n        if (this.outerRoundness) this.outerRoundness.setKeyframes(time);\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.points.reset(reversed);\r\n        this.innerRadius.reset(reversed);\r\n        this.outerRadius.reset(reversed);\r\n        if (this.position) this.position.reset(reversed);\r\n        if (this.rotation) this.rotation.reset(reversed);\r\n        if (this.innerRoundness) this.innerRoundness.reset(reversed);\r\n        if (this.outerRoundness) this.outerRoundness.reset(reversed);\r\n    }\r\n}\r\n\r\nexport default Polystar;\n\n\n// WEBPACK FOOTER //\n// ./src/objects/Polystar.js","import Property from '../property/Property';\r\nimport AnimatedProperty from '../property/AnimatedProperty';\r\n\r\nclass Rect {\r\n\r\n    constructor(data) {\r\n        //this.name = data.name;\r\n        this.closed = true;\r\n\r\n        this.size = data.size.length > 1 ? new AnimatedProperty(data.size) : new Property(data.size);\r\n\r\n        //optionals\r\n        if (data.position) this.position = data.position.length > 1 ? new AnimatedProperty(data.position) : new Property(data.position);\r\n        if (data.roundness) this.roundness = data.roundness.length > 1 ? new AnimatedProperty(data.roundness) : new Property(data.roundness);\r\n    }\r\n\r\n    draw(ctx, time, trim) {\r\n        const size = this.size.getValue(time);\r\n        const position = this.position ? this.position.getValue(time) : [0, 0];\r\n        let roundness = this.roundness ? this.roundness.getValue(time) : 0;\r\n\r\n        if (size[0] < 2 * roundness) roundness = size[0] / 2;\r\n        if (size[1] < 2 * roundness) roundness = size[1] / 2;\r\n\r\n        const x = position[0] - size[0] / 2;\r\n        const y = position[1] - size[1] / 2;\r\n\r\n        if (trim) {\r\n            // let tv;\r\n            // trim = this.getTrimValues(trim);\r\n            //TODO add trim\r\n        } else {\r\n            ctx.moveTo(x + roundness, y);\r\n            ctx.arcTo(x + size[0], y, x + size[0], y + size[1], roundness);\r\n            ctx.arcTo(x + size[0], y + size[1], x, y + size[1], roundness);\r\n            ctx.arcTo(x, y + size[1], x, y, roundness);\r\n            ctx.arcTo(x, y, x + size[0], y, roundness);\r\n        }\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.size.setKeyframes(time);\r\n        if (this.position) this.position.setKeyframes(time);\r\n        if (this.roundness) this.roundness.setKeyframes(time);\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.size.reset(reversed);\r\n        if (this.position) this.position.reset(reversed);\r\n        if (this.roundness) this.roundness.reset(reversed);\r\n    }\r\n}\r\n\r\nexport default Rect;\n\n\n// WEBPACK FOOTER //\n// ./src/objects/Rect.js","import Property from './Property';\r\nimport AnimatedProperty from './AnimatedProperty';\r\n\r\nclass Fill {\r\n\r\n    constructor(data) {\r\n        this.color = data.color.length > 1 ? new AnimatedProperty(data.color) : new Property(data.color);\r\n        if (data.opacity) this.opacity = data.opacity.length > 1 ? new AnimatedProperty(data.opacity) : new Property(data.opacity);\r\n    }\r\n\r\n    getValue(time) {\r\n        const color = this.color.getValue(time);\r\n        const opacity = this.opacity ? this.opacity.getValue(time) : 1;\r\n        return `rgba(${Math.round(color[0])}, ${Math.round(color[1])}, ${Math.round(color[2])}, ${opacity})`;\r\n    }\r\n\r\n    update(ctx, time) {\r\n        const color = this.getValue(time);\r\n        ctx.fillStyle = color;\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.color.setKeyframes(time);\r\n        if (this.opacity) this.opacity.setKeyframes(time);\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.color.reset(reversed);\r\n        if (this.opacity) this.opacity.reset(reversed);\r\n    }\r\n}\r\n\r\nexport default Fill;\n\n\n// WEBPACK FOOTER //\n// ./src/property/Fill.js","import Property from './Property';\r\nimport AnimatedProperty from './AnimatedProperty';\r\n\r\nclass GradientFill {\r\n\r\n    constructor(data, gradients) {\r\n        if (!gradients[data.name]) gradients[data.name] = [];\r\n        gradients[data.name].push(this);\r\n\r\n        this.stops = data.stops;\r\n        this.type = data.type;\r\n        this.startPoint = data.startPoint.length > 1 ? new AnimatedProperty(data.startPoint) : new Property(data.startPoint);\r\n        this.endPoint = data.endPoint.length > 1 ? new AnimatedProperty(data.endPoint) : new Property(data.endPoint);\r\n        if (data.opacity) this.opacity = data.opacity.length > 1 ? new AnimatedProperty(data.opacity) : new Property(data.opacity);\r\n    }\r\n\r\n    update(ctx, time) {\r\n        const startPoint = this.startPoint.getValue(time);\r\n        const endPoint = this.endPoint.getValue(time);\r\n        let radius = 0;\r\n\r\n        if (this.type === 'radial') {\r\n            const distX = startPoint[0] - endPoint[0];\r\n            const distY = startPoint[1] - endPoint[1];\r\n            radius = Math.sqrt(distX * distX + distY * distY);\r\n        }\r\n\r\n        const gradient = this.type === 'radial' ?\r\n            ctx.createRadialGradient(startPoint[0], startPoint[1], 0, startPoint[0], startPoint[1], radius) :\r\n            ctx.createLinearGradient(startPoint[0], startPoint[1], endPoint[0], endPoint[1]);\r\n\r\n        const opacity = this.opacity ? this.opacity.getValue(time) : 1;\r\n\r\n        for (const stop of this.stops) {\r\n            const color = stop.color;\r\n            gradient.addColorStop(stop.location, `rgba(${color[0]}, ${color[1]}, ${color[2]}, ${color[3] * opacity})`);\r\n        }\r\n\r\n        ctx.fillStyle = gradient;\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        if (this.opacity) this.opacity.setKeyframes(time);\r\n        this.startPoint.setKeyframes(time);\r\n        this.endPoint.setKeyframes(time);\r\n    }\r\n\r\n    reset(reversed) {\r\n        if (this.opacity) this.opacity.setKeyframes(reversed);\r\n        this.startPoint.setKeyframes(reversed);\r\n        this.endPoint.setKeyframes(reversed);\r\n    }\r\n}\r\n\r\nexport default GradientFill;\n\n\n// WEBPACK FOOTER //\n// ./src/property/GradientFill.js","import Property from './Property';\r\nimport AnimatedProperty from './AnimatedProperty';\r\n\r\nclass Stroke {\r\n\r\n    constructor(data) {\r\n        if (data) {\r\n            this.join = data.join;\r\n            this.cap = data.cap;\r\n\r\n            if (data.miterLimit) {\r\n                if (data.miterLimit.length > 1) this.miterLimit = new AnimatedProperty(data.miterLimit);\r\n                else this.miterLimit = new Property(data.miterLimit);\r\n            }\r\n\r\n            if (data.color.length > 1) this.color = new AnimatedProperty(data.color);\r\n            else this.color = new Property(data.color);\r\n\r\n            if (data.opacity.length > 1) this.opacity = new AnimatedProperty(data.opacity);\r\n            else this.opacity = new Property(data.opacity);\r\n\r\n            if (data.width.length > 1) this.width = new AnimatedProperty(data.width);\r\n            else this.width = new Property(data.width);\r\n\r\n            if (data.dashes) {\r\n                this.dashes = {};\r\n\r\n                if (data.dashes.dash.length > 1) this.dashes.dash = new AnimatedProperty(data.dashes.dash);\r\n                else this.dashes.dash = new Property(data.dashes.dash);\r\n\r\n                if (data.dashes.gap.length > 1) this.dashes.gap = new AnimatedProperty(data.dashes.gap);\r\n                else this.dashes.gap = new Property(data.dashes.gap);\r\n\r\n                if (data.dashes.offset.length > 1) this.dashes.offset = new AnimatedProperty(data.dashes.offset);\r\n                else this.dashes.offset = new Property(data.dashes.offset);\r\n            }\r\n        }\r\n    }\r\n\r\n    getValue(time) {\r\n        const color = this.color.getValue(time);\r\n        const opacity = this.opacity.getValue(time);\r\n        color[0] = Math.round(color[0]);\r\n        color[1] = Math.round(color[1]);\r\n        color[2] = Math.round(color[2]);\r\n        const s = color.join(', ');\r\n\r\n        return `rgba(${s}, ${opacity})`;\r\n    }\r\n\r\n    update(ctx, time) {\r\n        const strokeColor = this.getValue(time);\r\n        const strokeWidth = this.width.getValue(time);\r\n        const strokeJoin = this.join;\r\n        let miterLimit;\r\n        if (strokeJoin === 'miter') miterLimit = this.miterLimit.getValue(time);\r\n\r\n        ctx.lineWidth = strokeWidth;\r\n        ctx.lineJoin = strokeJoin;\r\n        if (miterLimit) ctx.miterLimit = miterLimit;\r\n        ctx.lineCap = this.cap;\r\n        ctx.strokeStyle = strokeColor;\r\n\r\n        if (this.dashes) {\r\n            ctx.setLineDash([\r\n                this.dashes.dash.getValue(time),\r\n                this.dashes.gap.getValue(time)\r\n            ]);\r\n            ctx.lineDashOffset = this.dashes.offset.getValue(time);\r\n        }\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.color.setKeyframes(time);\r\n        this.opacity.setKeyframes(time);\r\n        this.width.setKeyframes(time);\r\n        if (this.miterLimit) this.miterLimit.setKeyframes(time);\r\n        if (this.dashes) {\r\n            this.dashes.dash.setKeyframes(time);\r\n            this.dashes.gap.setKeyframes(time);\r\n            this.dashes.offset.setKeyframes(time);\r\n        }\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.color.reset(reversed);\r\n        this.opacity.reset(reversed);\r\n        this.width.reset(reversed);\r\n        if (this.miterLimit) this.miterLimit.reset(reversed);\r\n        if (this.dashes) {\r\n            this.dashes.dash.reset(reversed);\r\n            this.dashes.gap.reset(reversed);\r\n            this.dashes.offset.reset(reversed);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Stroke;\n\n\n// WEBPACK FOOTER //\n// ./src/property/Stroke.js","import Property from './Property';\r\nimport AnimatedProperty from './AnimatedProperty';\r\n\r\nclass Trim {\r\n    constructor(data) {\r\n\r\n        this.type = data.type;\r\n\r\n        if (data.start) this.start = data.start.length > 1 ? new AnimatedProperty(data.start) : new Property(data.start);\r\n        if (data.end) this.end = data.end.length > 1 ? new AnimatedProperty(data.end) : new Property(data.end);\r\n        //if (data.offset) this.offset = data.offset.length > 1 ? new AnimatedProperty(data.offset) : new Property(data.offset);\r\n\r\n    }\r\n\r\n    getTrim(time) {\r\n        const start = this.start ? this.start.getValue(time) : 0;\r\n        const end = this.end ? this.end.getValue(time) : 1;\r\n\r\n        const trim = {\r\n            start: Math.min(start, end),\r\n            end: Math.max(start, end)\r\n        };\r\n\r\n        if (trim.start === 0 && trim.end === 1) {\r\n            return null;\r\n        } else {\r\n            return trim;\r\n        }\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        if (this.start) this.start.setKeyframes(time);\r\n        if (this.end) this.end.setKeyframes(time);\r\n        //if (this.offset) this.offset.reset();\r\n    }\r\n\r\n    reset(reversed) {\r\n        if (this.start) this.start.reset(reversed);\r\n        if (this.end) this.end.reset(reversed);\r\n        //if (this.offset) this.offset.reset();\r\n    }\r\n}\r\n\r\nexport default Trim;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/property/Trim.js"],"sourceRoot":""}