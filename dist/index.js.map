{"version":3,"sources":["webpack://AE2Canvas/webpack/universalModuleDefinition","webpack://AE2Canvas/webpack/bootstrap","webpack://AE2Canvas/./node_modules/tiny-emitter/index.js","webpack://AE2Canvas/./src/core.js","webpack://AE2Canvas/./src/utils/Bezier.js","webpack://AE2Canvas/./src/objects/Path.js","webpack://AE2Canvas/./src/utils/BezierEasing.js","webpack://AE2Canvas/./src/objects/AnimatedPath.js","webpack://AE2Canvas/./src/property/Property.js","webpack://AE2Canvas/./src/property/AnimatedProperty.js","webpack://AE2Canvas/./src/transform/Position.js","webpack://AE2Canvas/./src/transform/Transform.js","webpack://AE2Canvas/./src/effects/DropShadow.js","webpack://AE2Canvas/./src/layers/BaseLayer.js","webpack://AE2Canvas/./src/layers/ImageLayer.js","webpack://AE2Canvas/./src/layers/NullLayer.js","webpack://AE2Canvas/./src/layers/TextLayer.js","webpack://AE2Canvas/./src/objects/Ellipse.js","webpack://AE2Canvas/./src/objects/Polystar.js","webpack://AE2Canvas/./src/objects/Rect.js","webpack://AE2Canvas/./src/property/Fill.js","webpack://AE2Canvas/./src/property/GradientFill.js","webpack://AE2Canvas/./src/property/Stroke.js","webpack://AE2Canvas/./src/property/Trim.js","webpack://AE2Canvas/./src/layers/VectorLayer.js","webpack://AE2Canvas/./src/layers/CompLayer.js","webpack://AE2Canvas/./src/Animation.js","webpack://AE2Canvas/./src/index.js"],"names":["_animations","_animationsLength","_autoPlay","_rafId","update","time","requestAnimationFrame","undefined","performance","now","i","autoPlay","auto","cancelAnimationFrame","add","tween","push","length","remove","indexOf","splice","Bezier","path","len","steps","Math","max","floor","arcLengths","Array","ox","cubicN","oy","clen","iterator","x","y","dx","dy","sqrt","u","targetLength","low","high","index","lengthBefore","elapsed","t","map","pct","a","b","c","d","t2","t3","Path","data","closed","frames","ctx","trim","frame","getValue","start","end","drawTrimmed","drawNormal","vertices","v","numVertices","lastVertex","nextVertex","moveTo","bezierCurveTo","closePath","getTrimValues","endIndex","startIndex","looped","firstRound","tv","tv1","tv2","actualTrim","totalLen","sumArray","trimStartAtLength","trimEndAtLength","from","to","values","isStraight","lerp","bezier","getLength","e1","f1","g1","h1","j1","k1","startVertex","endVertex","e2","f2","g2","h2","j2","k2","s","arr","reduce","startX","startY","ctrl1X","ctrl1Y","ctrl2X","ctrl2Y","endX","endY","reversed","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","Float32Array","BezierEasing","mX1","mY1","mX2","mY2","arguments","Error","isNaN","isFinite","mSampleValues","A","aA1","aA2","B","C","calcBezier","aT","getSlope","newtonRaphsonIterate","aX","aGuessT","currentSlope","currentX","calcSampleValues","binarySubdivide","aA","aB","currentT","abs","getTForX","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","f","str","toString","css","AnimatedPath","frameCount","verticesCount","finished","nextFrame","started","lastFrame","pointer","onKeyframeChange","getValueAtTime","setEasing","easeOut","easeIn","easing","delta","duration","actualVertices","actualLength","cp1x","cp1y","cp2x","cp2y","j","Property","AnimatedProperty","getElapsed","Position","setMotionPath","motionpath","getValues","Transform","position","positionX","positionY","anchor","scaleX","scaleY","skew","skewAxis","rotation","opacity","deg2rad","globalAlpha","transform","setRotation","setSkew","setScale","rad","cos","sin","sx","sy","axis","tan","deg","PI","setKeyframes","reset","DropShadow","color","direction","distance","softness","round","getColor","blur","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","BaseLayer","in","out","parent","effects","dropShadow","masks","mask","isAnimated","save","setParentTransform","setShadow","beginPath","forEach","draw","clip","ImageLayer","imageBasePath","source","isLoaded","cb","Promise","resolve","reject","img","Image","onload","src","drawImage","restore","NullLayer","TextLayer","baseFont","text","leading","fontSize","font","justification","textAlign","fillStyle","fillText","Ellipse","size","w","h","ow","oh","Polystar","starType","points","innerRadius","outerRadius","innerRoundness","outerRoundness","rotatePoint","translate","pInner","pOuter","pOuter1Tangent","pOuter2Tangent","pInner1Tangent","pInner2Tangent","outerOffset","innerOffset","rot","cx","cy","radians","nx","ny","Rect","roundness","arcTo","Fill","GradientFill","gradients","name","stops","type","startPoint","endPoint","radius","distX","distY","gradient","createRadialGradient","createLinearGradient","stop","addColorStop","location","Stroke","join","cap","miterLimit","width","dashes","dash","gap","offset","strokeColor","strokeWidth","strokeJoin","lineWidth","lineJoin","lineCap","strokeStyle","setLineDash","lineDashOffset","Trim","startValue","endValue","min","VectorLayer","fill","gradientFill","stroke","groups","group","shapes","shape","parentFill","parentStroke","parentTrim","trimValues","getTrim","CompLayer","comps","sourceID","layers","layer","parentIndex","find","timeRemapping","internalTime","Animation","options","pausedTime","baseWidth","baseHeight","height","ratio","markers","loop","devicePixelRatio","window","fluid","isPaused","isPlaying","drawFrame","canvas","document","createElement","getContext","resize","id","marker","getMarker","comment","console","warn","promises","filter","preload","all","catch","error","parentNode","removeChild","clientWidth","scale","fps","maxWidth","numFrames","buffer","rowsX","rowsY","ceil","indexX","indexY","step","offsetX","offsetY","clearRect","then","stopMarker","checkStopMarkers","emit","play","pause","_reversed","bool","Emitter"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"AE2Canvas\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AE2Canvas\"] = factory();\n\telse\n\t\troot[\"AE2Canvas\"] = factory();\n})((typeof self !== 'undefined' ? self : this), function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","function E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n","const _animations = [];\r\nlet _animationsLength = 0;\r\n\r\nlet _autoPlay = false;\r\nlet _rafId;\r\n\r\nconst update = time => {\r\n    if (_autoPlay) {\r\n        _rafId = requestAnimationFrame(update);\r\n    }\r\n    time = time !== undefined ? time : performance.now();\r\n\r\n    for (let i = 0; i < _animationsLength; i++) {\r\n        _animations[i].update(time);\r\n    }\r\n};\r\n\r\nconst autoPlay = auto => {\r\n    _autoPlay = auto;\r\n    _autoPlay ? _rafId = requestAnimationFrame(update) : cancelAnimationFrame(_rafId);\r\n};\r\n\r\nfunction add(tween) {\r\n    _animations.push(tween);\r\n    _animationsLength = _animations.length;\r\n}\r\n\r\nfunction remove(tween) {\r\n    const i = _animations.indexOf(tween);\r\n    if (i > -1) {\r\n        _animations.splice(i, 1);\r\n        _animationsLength = _animations.length;\r\n    }\r\n}\r\n\r\nexport {update, autoPlay, add, remove};\r\n","class Bezier {\r\n\r\n    constructor(path) {\r\n        this.path = path;\r\n    }\r\n\r\n    getLength(len) {\r\n        this.steps = Math.max(Math.floor(len / 10), 1);\r\n        this.arcLengths = new Array(this.steps + 1);\r\n        this.arcLengths[0] = 0;\r\n\r\n        let ox = this.cubicN(0, this.path[0], this.path[2], this.path[4], this.path[6]);\r\n        let oy = this.cubicN(0, this.path[1], this.path[3], this.path[5], this.path[7]);\r\n        let clen = 0;\r\n        const iterator = 1 / this.steps;\r\n\r\n        for (let i = 1; i <= this.steps; i += 1) {\r\n            const x = this.cubicN(i * iterator, this.path[0], this.path[2], this.path[4], this.path[6]);\r\n            const y = this.cubicN(i * iterator, this.path[1], this.path[3], this.path[5], this.path[7]);\r\n            const dx = ox - x;\r\n            const dy = oy - y;\r\n\r\n            clen += Math.sqrt(dx * dx + dy * dy);\r\n            this.arcLengths[i] = clen;\r\n\r\n            ox = x;\r\n            oy = y;\r\n        }\r\n\r\n        this.length = clen;\r\n    }\r\n\r\n    map(u) {\r\n        const targetLength = u * this.arcLengths[this.steps];\r\n        let low = 0;\r\n        let high = this.steps;\r\n        let index = 0;\r\n\r\n        while (low < high) {\r\n            index = low + (((high - low) / 2) | 0);\r\n            if (this.arcLengths[index] < targetLength) {\r\n                low = index + 1;\r\n\r\n            } else {\r\n                high = index;\r\n            }\r\n        }\r\n        if (this.arcLengths[index] > targetLength) {\r\n            index--;\r\n        }\r\n\r\n        const lengthBefore = this.arcLengths[index];\r\n        if (lengthBefore === targetLength) {\r\n            return index / this.steps;\r\n        } else {\r\n            return (index + (targetLength - lengthBefore) / (this.arcLengths[index + 1] - lengthBefore)) / this.steps;\r\n        }\r\n    }\r\n\r\n    getValues(elapsed) {\r\n        const t = this.map(elapsed);\r\n        const x = this.cubicN(t, this.path[0], this.path[2], this.path[4], this.path[6]);\r\n        const y = this.cubicN(t, this.path[1], this.path[3], this.path[5], this.path[7]);\r\n\r\n        return [x, y];\r\n    }\r\n\r\n    cubicN(pct, a, b, c, d) {\r\n        const t2 = pct * pct;\r\n        const t3 = t2 * pct;\r\n        return a + (-a * 3 + pct * (3 * a - a * pct)) * pct\r\n            + (3 * b + pct * (-6 * b + b * 3 * pct)) * pct\r\n            + (c * 3 - c * 3 * pct) * t2\r\n            + d * t3;\r\n    }\r\n}\r\n\r\nexport default Bezier;","import Bezier from '../utils/Bezier'\r\n\r\nclass Path {\r\n\r\n    constructor(data) {\r\n        this.closed = data.closed\r\n        this.frames = data.frames\r\n    }\r\n\r\n    draw(ctx, time, trim) {\r\n        const frame = this.getValue(time)\r\n        trim && (trim.start !== 0 || trim.end !== 1) ? this.drawTrimmed(frame, ctx, trim) : this.drawNormal(frame, ctx)\r\n    }\r\n\r\n    drawNormal(frame, ctx) {\r\n        const vertices = frame.v\r\n        const numVertices = this.closed ? vertices.length : vertices.length - 1\r\n        let lastVertex = null\r\n        let nextVertex = null\r\n\r\n        for (let i = 1; i <= numVertices; i++) {\r\n            lastVertex = vertices[i - 1]\r\n            nextVertex = vertices[i] ? vertices[i] : vertices[0]\r\n            if (i === 1) ctx.moveTo(lastVertex[4], lastVertex[5])\r\n            ctx.bezierCurveTo(lastVertex[0], lastVertex[1], nextVertex[2], nextVertex[3], nextVertex[4], nextVertex[5])\r\n        }\r\n\r\n        if (this.closed) {\r\n            if (!nextVertex) debugger\r\n            ctx.bezierCurveTo(nextVertex[0], nextVertex[1], vertices[0][2], vertices[0][3], vertices[0][4], vertices[0][5])\r\n            ctx.closePath()\r\n        }\r\n    }\r\n\r\n    drawTrimmed(frame, ctx, trim) {\r\n        if (trim.start === trim.end) return\r\n\r\n        const vertices = frame.v\r\n        const numVertices = this.closed ? vertices.length : vertices.length - 1\r\n\r\n        let nextVertex\r\n        let lastVertex\r\n\r\n        const {start, end, endIndex, startIndex, looped} = this.getTrimValues(trim, frame)\r\n\r\n        if (looped && this.closed) {\r\n            let index = startIndex\r\n            let firstRound = true\r\n\r\n            for (let i = 1; i <= numVertices + 1; i++) {\r\n                lastVertex = vertices[index]\r\n                nextVertex = vertices[index + 1] ? vertices[index + 1] : vertices[0]\r\n                const length = frame.len[index]\r\n\r\n                if (index === startIndex && firstRound) {\r\n                    firstRound = false\r\n                    const tv = this.trim(lastVertex, nextVertex, start, 1, length)\r\n                    ctx.moveTo(tv.start[4], tv.start[5])\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5])\r\n                } else if (index === startIndex && index === endIndex) {\r\n                    const tv = this.trim(lastVertex, nextVertex, 0, end, length)\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5])\r\n                } else if (index === endIndex) {\r\n                    const tv = this.trim(lastVertex, nextVertex, 0, end, length)\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5])\r\n                } else if (index < endIndex || index > startIndex) {\r\n                    ctx.bezierCurveTo(lastVertex[0], lastVertex[1], nextVertex[2], nextVertex[3], nextVertex[4], nextVertex[5])\r\n                }\r\n\r\n                index + 1 < numVertices ? index++ : index = 0\r\n            }\r\n        } else if (looped && !this.closed) {\r\n\r\n            for (let i = 1; i <= numVertices; i++) {\r\n                const index = i - 1\r\n                lastVertex = vertices[index]\r\n                nextVertex = vertices[index + 1] ? vertices[index + 1] : vertices[0]\r\n                const length = frame.len[index]\r\n\r\n                if (index === startIndex && index === endIndex) {\r\n                    const tv1 = this.trim(lastVertex, nextVertex, 0, end, length)\r\n                    ctx.bezierCurveTo(tv1.start[0], tv1.start[1], tv1.end[2], tv1.end[3], tv1.end[4], tv1.end[5])\r\n\r\n                    const tv2 = this.trim(lastVertex, nextVertex, start, 1, length)\r\n                    ctx.moveTo(tv2.start[4], tv2.start[5])\r\n                    ctx.bezierCurveTo(tv2.start[0], tv2.start[1], tv2.end[2], tv2.end[3], tv2.end[4], tv2.end[5])\r\n                } else if (index === startIndex) {\r\n                    const tv = this.trim(lastVertex, nextVertex, start, 1, length)\r\n                    ctx.moveTo(tv.start[4], tv.start[5])\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5])\r\n                } else if (index === endIndex) {\r\n                    const tv = this.trim(lastVertex, nextVertex, 0, end, length)\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5])\r\n                } else if (index < endIndex || index > startIndex) {\r\n                    ctx.bezierCurveTo(lastVertex[0], lastVertex[1], nextVertex[2], nextVertex[3], nextVertex[4], nextVertex[5])\r\n                }\r\n            }\r\n        } else {\r\n            for (let i = 1; i <= numVertices; i++) {\r\n                const index = i - 1\r\n                lastVertex = vertices[i - 1]\r\n                nextVertex = vertices[i] ? vertices[i] : vertices[0]\r\n                if (index === startIndex && index === endIndex) {\r\n                    const tv = this.trim(lastVertex, nextVertex, start, end, length)\r\n                    ctx.moveTo(tv.start[4], tv.start[5])\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5])\r\n                }\r\n                else if (index === startIndex) {\r\n                    const tv = this.trim(lastVertex, nextVertex, start, 1, length)\r\n                    ctx.moveTo(tv.start[4], tv.start[5])\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5])\r\n                }\r\n                else if (index === endIndex) {\r\n                    const tv = this.trim(lastVertex, nextVertex, 0, end, length)\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5])\r\n                }\r\n                else if (index > startIndex && index < endIndex) {\r\n                    ctx.bezierCurveTo(lastVertex[0], lastVertex[1], nextVertex[2], nextVertex[3], nextVertex[4], nextVertex[5])\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    getValue() {\r\n        return this.frames[0]\r\n    }\r\n\r\n    getTrimValues(trim, frame) {\r\n        const actualTrim = {\r\n            startIndex: 0,\r\n            endIndex: 0,\r\n            start: 0,\r\n            end: 0,\r\n            looped: false\r\n        }\r\n\r\n        if (trim.start === 0 && trim.end === 1) {\r\n            return null\r\n        }\r\n\r\n        const totalLen = this.sumArray(frame.len)\r\n        let trimStartAtLength = totalLen * trim.start\r\n\r\n        for (let i = 0; i < frame.len.length; i++) {\r\n            if (trimStartAtLength === 0 || trimStartAtLength < frame.len[i]) {\r\n                actualTrim.startIndex = i\r\n                actualTrim.start = trimStartAtLength / frame.len[i]\r\n                break\r\n            }\r\n            trimStartAtLength -= frame.len[i]\r\n        }\r\n\r\n        let trimEndAtLength = totalLen * trim.end\r\n\r\n        if (trim.end === 1) {\r\n            actualTrim.endIndex = frame.len.length\r\n            actualTrim.end = 1\r\n            return actualTrim\r\n        }\r\n\r\n        for (let i = 0; i < frame.len.length; i++) {\r\n            if (trimEndAtLength === 0 || trimEndAtLength < frame.len[i]) {\r\n                actualTrim.endIndex = i\r\n                actualTrim.end = trimEndAtLength / frame.len[i]\r\n                break\r\n            }\r\n            trimEndAtLength -= frame.len[i]\r\n        }\r\n\r\n        actualTrim.looped = actualTrim.startIndex > actualTrim.endIndex || (actualTrim.startIndex === actualTrim.endIndex && actualTrim.start >= actualTrim.end)\r\n\r\n        return actualTrim\r\n    }\r\n\r\n    trim(lastVertex, nextVertex, from, to, len) {\r\n        const values = {\r\n            start: lastVertex,\r\n            end: nextVertex,\r\n        }\r\n\r\n        if (from === 0 && to === 1) {\r\n            return values\r\n        }\r\n\r\n        if (this.isStraight(lastVertex[4], lastVertex[5], lastVertex[0], lastVertex[1], nextVertex[2], nextVertex[3], nextVertex[4], nextVertex[5])) {\r\n            values.start = [\r\n                this.lerp(lastVertex[0], nextVertex[0], from),\r\n                this.lerp(lastVertex[1], nextVertex[1], from),\r\n                this.lerp(lastVertex[2], nextVertex[2], from),\r\n                this.lerp(lastVertex[3], nextVertex[3], from),\r\n                this.lerp(lastVertex[4], nextVertex[4], from),\r\n                this.lerp(lastVertex[5], nextVertex[5], from)\r\n            ]\r\n\r\n            values.end = [\r\n                this.lerp(lastVertex[0], nextVertex[0], to),\r\n                this.lerp(lastVertex[1], nextVertex[1], to),\r\n                this.lerp(lastVertex[2], nextVertex[2], to),\r\n                this.lerp(lastVertex[3], nextVertex[3], to),\r\n                this.lerp(lastVertex[4], nextVertex[4], to),\r\n                this.lerp(lastVertex[5], nextVertex[5], to)\r\n            ]\r\n\r\n            return values\r\n\r\n        } else {\r\n            this.bezier = new Bezier([lastVertex[4], lastVertex[5], lastVertex[0], lastVertex[1], nextVertex[2], nextVertex[3], nextVertex[4], nextVertex[5]])\r\n            this.bezier.getLength(len)\r\n            from = this.bezier.map(from)\r\n            to = this.bezier.map(to)\r\n            to = (to - from) / (1 - from)\r\n\r\n            let e1 = [this.lerp(lastVertex[4], lastVertex[0], from), this.lerp(lastVertex[5], lastVertex[1], from)]\r\n            let f1 = [this.lerp(lastVertex[0], nextVertex[2], from), this.lerp(lastVertex[1], nextVertex[3], from)]\r\n            let g1 = [this.lerp(nextVertex[2], nextVertex[4], from), this.lerp(nextVertex[3], nextVertex[5], from)]\r\n            let h1 = [this.lerp(e1[0], f1[0], from), this.lerp(e1[1], f1[1], from)]\r\n            let j1 = [this.lerp(f1[0], g1[0], from), this.lerp(f1[1], g1[1], from)]\r\n            let k1 = [this.lerp(h1[0], j1[0], from), this.lerp(h1[1], j1[1], from)]\r\n\r\n            let startVertex = [j1[0], j1[1], h1[0], h1[1], k1[0], k1[1]]\r\n            let endVertex = [nextVertex[0], nextVertex[1], g1[0], g1[1], nextVertex[4], nextVertex[5]]\r\n\r\n            let e2 = [this.lerp(startVertex[4], startVertex[0], to), this.lerp(startVertex[5], startVertex[1], to)]\r\n            let f2 = [this.lerp(startVertex[0], endVertex[2], to), this.lerp(startVertex[1], endVertex[3], to)]\r\n            let g2 = [this.lerp(endVertex[2], endVertex[4], to), this.lerp(endVertex[3], endVertex[5], to)]\r\n\r\n            let h2 = [this.lerp(e2[0], f2[0], to), this.lerp(e2[1], f2[1], to)]\r\n            let j2 = [this.lerp(f2[0], g2[0], to), this.lerp(f2[1], g2[1], to)]\r\n            let k2 = [this.lerp(h2[0], j2[0], to), this.lerp(h2[1], j2[1], to)]\r\n\r\n            values.start = [e2[0], e2[1], startVertex[2], startVertex[3], startVertex[4], startVertex[5]]\r\n            values.end = [j2[0], j2[1], h2[0], h2[1], k2[0], k2[1]]\r\n\r\n            return values\r\n        }\r\n    }\r\n\r\n    lerp(a, b, t) {\r\n        const s = 1 - t\r\n        return a * s + b * t\r\n    }\r\n\r\n    sumArray(arr) {\r\n        function add(a, b) {\r\n            return a + b\r\n        }\r\n\r\n        return arr.reduce(add)\r\n    }\r\n\r\n    isStraight(startX, startY, ctrl1X, ctrl1Y, ctrl2X, ctrl2Y, endX, endY) {\r\n        return startX === ctrl1X && startY === ctrl1Y && endX === ctrl2X && endY === ctrl2Y\r\n    }\r\n\r\n    setKeyframes(time) {\r\n    }\r\n\r\n    reset(reversed) {\r\n    }\r\n}\r\n\r\nexport default Path\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","/**\r\n * BezierEasing - use bezier curve for transition easing function\r\n * is based on Firefox's nsSMILKeySpline.cpp\r\n * Usage:\r\n * var spline = BezierEasing(0.25, 0.1, 0.25, 1.0)\r\n * spline(x) => returns the easing value | x must be in [0, 1] range\r\n *\r\n */\r\n\r\n    // These values are established by empiricism with tests (tradeoff: performance VS precision)\r\n    var NEWTON_ITERATIONS = 4;\r\n    var NEWTON_MIN_SLOPE = 0.001;\r\n    var SUBDIVISION_PRECISION = 0.0000001;\r\n    var SUBDIVISION_MAX_ITERATIONS = 10;\r\n\r\n    var kSplineTableSize = 11;\r\n    var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\r\n\r\n    var float32ArraySupported = typeof Float32Array === \"function\";\r\n\r\n    function BezierEasing (mX1, mY1, mX2, mY2) {\r\n\r\n        // Validate arguments\r\n        if (arguments.length !== 4) {\r\n            throw new Error(\"BezierEasing requires 4 arguments.\");\r\n        }\r\n        for (var i=0; i<4; ++i) {\r\n            if (typeof arguments[i] !== \"number\" || isNaN(arguments[i]) || !isFinite(arguments[i])) {\r\n                throw new Error(\"BezierEasing arguments should be integers.\");\r\n            }\r\n        }\r\n        if (mX1 < 0 || mX1 > 1 || mX2 < 0 || mX2 > 1) {\r\n            throw new Error(\"BezierEasing x values must be in [0, 1] range.\");\r\n        }\r\n\r\n        var mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\r\n\r\n        function A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\r\n        function B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\r\n        function C (aA1)      { return 3.0 * aA1; }\r\n\r\n        // Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\r\n        function calcBezier (aT, aA1, aA2) {\r\n            return ((A(aA1, aA2)*aT + B(aA1, aA2))*aT + C(aA1))*aT;\r\n        }\r\n\r\n        // Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\r\n        function getSlope (aT, aA1, aA2) {\r\n            return 3.0 * A(aA1, aA2)*aT*aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\r\n        }\r\n\r\n        function newtonRaphsonIterate (aX, aGuessT) {\r\n            for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\r\n                var currentSlope = getSlope(aGuessT, mX1, mX2);\r\n                if (currentSlope === 0.0) return aGuessT;\r\n                var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\r\n                aGuessT -= currentX / currentSlope;\r\n            }\r\n            return aGuessT;\r\n        }\r\n\r\n        function calcSampleValues () {\r\n            for (var i = 0; i < kSplineTableSize; ++i) {\r\n                mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\r\n            }\r\n        }\r\n\r\n        function binarySubdivide (aX, aA, aB) {\r\n            var currentX, currentT, i = 0;\r\n            do {\r\n                currentT = aA + (aB - aA) / 2.0;\r\n                currentX = calcBezier(currentT, mX1, mX2) - aX;\r\n                if (currentX > 0.0) {\r\n                    aB = currentT;\r\n                } else {\r\n                    aA = currentT;\r\n                }\r\n            } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\r\n            return currentT;\r\n        }\r\n\r\n        function getTForX (aX) {\r\n            var intervalStart = 0.0;\r\n            var currentSample = 1;\r\n            var lastSample = kSplineTableSize - 1;\r\n\r\n            for (; currentSample != lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {\r\n                intervalStart += kSampleStepSize;\r\n            }\r\n            --currentSample;\r\n\r\n            // Interpolate to provide an initial guess for t\r\n            var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample+1] - mSampleValues[currentSample]);\r\n            var guessForT = intervalStart + dist * kSampleStepSize;\r\n\r\n            var initialSlope = getSlope(guessForT, mX1, mX2);\r\n            if (initialSlope >= NEWTON_MIN_SLOPE) {\r\n                return newtonRaphsonIterate(aX, guessForT);\r\n            } else if (initialSlope == 0.0) {\r\n                return guessForT;\r\n            } else {\r\n                return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize);\r\n            }\r\n        }\r\n\r\n        if (mX1 != mY1 || mX2 != mY2)\r\n            calcSampleValues();\r\n\r\n        var f = function (aX) {\r\n            if (mX1 === mY1 && mX2 === mY2) return aX; // linear\r\n            // Because JavaScript number are imprecise, we should guarantee the extremes are right.\r\n            if (aX === 0) return 0;\r\n            if (aX === 1) return 1;\r\n            return calcBezier(getTForX(aX), mY1, mY2);\r\n        };\r\n        var str = \"BezierEasing(\"+[mX1, mY1, mX2, mY2]+\")\";\r\n        f.toString = function () { return str; };\r\n\r\n        return f;\r\n    }\r\n\r\n    // CSS mapping\r\n    BezierEasing.css = {\r\n        \"ease\":        BezierEasing(0.25, 0.1, 0.25, 1.0),\r\n        \"linear\":      BezierEasing(0.00, 0.0, 1.00, 1.0),\r\n        \"ease-in\":     BezierEasing(0.42, 0.0, 1.00, 1.0),\r\n        \"ease-out\":    BezierEasing(0.00, 0.0, 0.58, 1.0),\r\n        \"ease-in-out\": BezierEasing(0.42, 0.0, 0.58, 1.0)\r\n    };\r\n\r\nexport default BezierEasing","import Path from './Path'\r\nimport BezierEasing from '../utils/BezierEasing'\r\n\r\nclass AnimatedPath extends Path {\r\n\r\n    constructor(data) {\r\n        super(data)\r\n        this.frameCount = this.frames.length\r\n        this.verticesCount = this.frames[0].v.length\r\n    }\r\n\r\n    getValue(time) {\r\n        if (this.finished && time >= this.nextFrame.t) {\r\n            return this.nextFrame\r\n        } else if (!this.started && time <= this.lastFrame.t) {\r\n            return this.lastFrame\r\n        } else {\r\n            this.started = true\r\n            this.finished = false\r\n            if (time > this.nextFrame.t) {\r\n                if (this.pointer + 1 === this.frameCount) {\r\n                    this.finished = true\r\n                } else {\r\n                    this.pointer++\r\n                    this.lastFrame = this.frames[this.pointer - 1]\r\n                    this.nextFrame = this.frames[this.pointer]\r\n                    this.onKeyframeChange()\r\n                }\r\n            } else if (time < this.lastFrame.t) {\r\n                if (this.pointer < 2) {\r\n                    this.started = false\r\n                } else {\r\n                    this.pointer--\r\n                    this.lastFrame = this.frames[this.pointer - 1]\r\n                    this.nextFrame = this.frames[this.pointer]\r\n                    this.onKeyframeChange()\r\n                }\r\n            }\r\n            return this.getValueAtTime(time)\r\n        }\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        if (time < this.frames[0].t) {\r\n            this.pointer = 1\r\n            this.nextFrame = this.frames[this.pointer]\r\n            this.lastFrame = this.frames[this.pointer - 1]\r\n            this.onKeyframeChange()\r\n            return\r\n        }\r\n\r\n        if (time > this.frames[this.frameCount - 1].t) {\r\n            this.pointer = this.frameCount - 1\r\n            this.nextFrame = this.frames[this.pointer]\r\n            this.lastFrame = this.frames[this.pointer - 1]\r\n            this.onKeyframeChange()\r\n            return\r\n        }\r\n\r\n        for (let i = 1; i < this.frameCount; i++) {\r\n            if (time >= this.frames[i - 1].t && time <= this.frames[i]) {\r\n                this.pointer = i\r\n                this.lastFrame = this.frames[i - 1]\r\n                this.nextFrame = this.frames[i]\r\n                this.onKeyframeChange()\r\n                return\r\n            }\r\n        }\r\n    }\r\n\r\n    onKeyframeChange() {\r\n        this.setEasing()\r\n    }\r\n\r\n    lerp(a, b, t) {\r\n        return a + t * (b - a)\r\n    }\r\n\r\n    setEasing() {\r\n        if (this.lastFrame.easeOut && this.nextFrame.easeIn) {\r\n            this.easing = new BezierEasing(this.lastFrame.easeOut[0], this.lastFrame.easeOut[1], this.nextFrame.easeIn[0], this.nextFrame.easeIn[1])\r\n        } else {\r\n            this.easing = null\r\n        }\r\n    }\r\n\r\n    getValueAtTime(time) {\r\n        const delta = (time - this.lastFrame.t)\r\n        const duration = this.nextFrame.t - this.lastFrame.t\r\n        let elapsed = delta / duration\r\n        if (elapsed > 1) elapsed = 1\r\n        else if (elapsed < 0) elapsed = 0\r\n        else if (this.easing) elapsed = this.easing(elapsed)\r\n        const actualVertices = []\r\n        const actualLength = []\r\n\r\n        for (let i = 0; i < this.verticesCount; i++) {\r\n            const cp1x = this.lerp(this.lastFrame.v[i][0], this.nextFrame.v[i][0], elapsed)\r\n            const cp1y = this.lerp(this.lastFrame.v[i][1], this.nextFrame.v[i][1], elapsed)\r\n            const cp2x = this.lerp(this.lastFrame.v[i][2], this.nextFrame.v[i][2], elapsed)\r\n            const cp2y = this.lerp(this.lastFrame.v[i][3], this.nextFrame.v[i][3], elapsed)\r\n            const x = this.lerp(this.lastFrame.v[i][4], this.nextFrame.v[i][4], elapsed)\r\n            const y = this.lerp(this.lastFrame.v[i][5], this.nextFrame.v[i][5], elapsed)\r\n\r\n            actualVertices.push([cp1x, cp1y, cp2x, cp2y, x, y])\r\n        }\r\n\r\n        for (let j = 0; j < this.verticesCount - 1; j++) {\r\n            actualLength.push(this.lerp(this.lastFrame.len[j], this.nextFrame.len[j], elapsed))\r\n        }\r\n\r\n        return {\r\n            v: actualVertices,\r\n            len: actualLength\r\n        }\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.finished = false\r\n        this.started = false\r\n        this.pointer = reversed ? this.frameCount - 1 : 1\r\n        this.nextFrame = this.frames[this.pointer]\r\n        this.lastFrame = this.frames[this.pointer - 1]\r\n        this.onKeyframeChange()\r\n    }\r\n}\r\n\r\nexport default AnimatedPath\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","class Property {\r\n    constructor(data) {\r\n        this.frames = data;\r\n    }\r\n\r\n    getValue() {\r\n        return this.frames[0].v;\r\n    }\r\n\r\n    setKeyframes(time) {\r\n    }\r\n\r\n    reset(reversed) {\r\n    }\r\n}\r\n\r\nexport default Property;","import Property from './Property';\r\nimport BezierEasing from '../utils/BezierEasing';\r\n\r\nclass AnimatedProperty extends Property {\r\n\r\n    constructor(data) {\r\n        super(data);\r\n        this.frameCount = this.frames.length;\r\n    }\r\n\r\n    lerp(a, b, t) {\r\n        if (a instanceof Array) {\r\n            const arr = [];\r\n            for (let i = 0; i < a.length; i++) {\r\n                arr[i] = a[i] + t * (b[i] - a[i]);\r\n            }\r\n            return arr;\r\n        } else {\r\n            return a + t * (b - a);\r\n        }\r\n    }\r\n\r\n    setEasing() {\r\n        if (this.nextFrame.easeIn) {\r\n            this.easing = new BezierEasing(this.lastFrame.easeOut[0], this.lastFrame.easeOut[1], this.nextFrame.easeIn[0], this.nextFrame.easeIn[1]);\r\n        } else {\r\n            this.easing = null;\r\n        }\r\n    }\r\n\r\n    getValue(time) {\r\n        if (this.finished && time >= this.nextFrame.t) {\r\n            return this.nextFrame.v;\r\n        } else if (!this.started && time <= this.lastFrame.t) {\r\n            return this.lastFrame.v;\r\n        } else {\r\n            this.started = true;\r\n            this.finished = false;\r\n            if (time > this.nextFrame.t) {\r\n                if (this.pointer + 1 === this.frameCount) {\r\n                    this.finished = true;\r\n                } else {\r\n                    this.pointer++;\r\n                    this.lastFrame = this.frames[this.pointer - 1];\r\n                    this.nextFrame = this.frames[this.pointer];\r\n                    this.onKeyframeChange();\r\n                }\r\n            } else if (time < this.lastFrame.t) {\r\n                if (this.pointer < 2) {\r\n                    this.started = false;\r\n                } else {\r\n                    this.pointer--;\r\n                    this.lastFrame = this.frames[this.pointer - 1];\r\n                    this.nextFrame = this.frames[this.pointer];\r\n                    this.onKeyframeChange();\r\n                }\r\n            }\r\n            return this.getValueAtTime(time);\r\n        }\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        //console.log(time, this.frames[this.frameCount - 2].t, this.frames[this.frameCount - 1].t);\r\n\r\n        if (time < this.frames[0].t) {\r\n            this.pointer = 1;\r\n            this.nextFrame = this.frames[this.pointer];\r\n            this.lastFrame = this.frames[this.pointer - 1];\r\n            this.onKeyframeChange();\r\n            return;\r\n        }\r\n\r\n        if (time > this.frames[this.frameCount - 1].t) {\r\n            this.pointer = this.frameCount - 1;\r\n            this.nextFrame = this.frames[this.pointer];\r\n            this.lastFrame = this.frames[this.pointer - 1];\r\n            this.onKeyframeChange();\r\n            return;\r\n        }\r\n\r\n        for (let i = 1; i < this.frameCount; i++) {\r\n            if (time >= this.frames[i - 1].t && time <= this.frames[i].t) {\r\n                this.pointer = i;\r\n                this.lastFrame = this.frames[i - 1];\r\n                this.nextFrame = this.frames[i];\r\n                this.onKeyframeChange();\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    onKeyframeChange() {\r\n        this.setEasing();\r\n    }\r\n\r\n    getElapsed(time) {\r\n        const delta = (time - this.lastFrame.t);\r\n        const duration = this.nextFrame.t - this.lastFrame.t;\r\n        let elapsed = delta / duration;\r\n\r\n        if (elapsed > 1) elapsed = 1;\r\n        else if (elapsed < 0) elapsed = 0;\r\n        else if (this.easing) elapsed = this.easing(elapsed);\r\n        return elapsed;\r\n    }\r\n\r\n    getValueAtTime(time) {\r\n        return this.lerp(this.lastFrame.v, this.nextFrame.v, this.getElapsed(time));\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.finished = false;\r\n        this.started = false;\r\n        this.pointer = reversed ? this.frameCount - 1 : 1;\r\n        this.nextFrame = this.frames[this.pointer];\r\n        this.lastFrame = this.frames[this.pointer - 1];\r\n        this.onKeyframeChange();\r\n    }\r\n}\r\n\r\nexport default AnimatedProperty;","import Bezier from '../utils/Bezier';\r\nimport AnimatedProperty from '../property/AnimatedProperty';\r\n\r\nclass Position extends AnimatedProperty{\r\n\r\n    onKeyframeChange() {\r\n        this.setEasing();\r\n        this.setMotionPath();\r\n    }\r\n\r\n    getValueAtTime(time) {\r\n        if (this.motionpath) {\r\n            return this.motionpath.getValues(this.getElapsed(time));\r\n        } else {\r\n            return this.lerp(this.lastFrame.v, this.nextFrame.v, this.getElapsed(time));\r\n        }\r\n    }\r\n\r\n    setMotionPath() {\r\n        if (this.lastFrame.motionpath) {\r\n            this.motionpath = new Bezier(this.lastFrame.motionpath);\r\n            this.motionpath.getLength(this.lastFrame.len);\r\n        } else {\r\n            this.motionpath = null;\r\n        }\r\n    }\r\n}\r\n\r\nexport default Position;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import Property from '../property/Property';\r\nimport AnimatedProperty from '../property/AnimatedProperty';\r\nimport Position from './Position';\r\n\r\nclass Transform {\r\n\r\n    constructor(data) {\r\n        if (data.position) {\r\n            if (data.position.length > 1) {\r\n                this.position = new Position(data.position);\r\n            } else {\r\n                this.position = new Property(data.position);\r\n            }\r\n        }\r\n\r\n        if (data.positionX) this.positionX = data.positionX.length > 1 ? new AnimatedProperty(data.positionX) : new Property(data.positionX);\r\n        if (data.positionY) this.positionY = data.positionY.length > 1 ? new AnimatedProperty(data.positionY) : new Property(data.positionY);\r\n        if (data.anchor) this.anchor = data.anchor.length > 1 ? new AnimatedProperty(data.anchor) : new Property(data.anchor);\r\n        if (data.scaleX) this.scaleX = data.scaleX.length > 1 ? new AnimatedProperty(data.scaleX) : new Property(data.scaleX);\r\n        if (data.scaleY) this.scaleY = data.scaleY.length > 1 ? new AnimatedProperty(data.scaleY) : new Property(data.scaleY);\r\n        if (data.skew) this.skew = data.skew.length > 1 ? new AnimatedProperty(data.skew) : new Property(data.skew);\r\n        if (data.skewAxis) this.skewAxis = data.skewAxis.length > 1 ? new AnimatedProperty(data.skewAxis) : new Property(data.skewAxis);\r\n        if (data.rotation) this.rotation = data.rotation.length > 1 ? new AnimatedProperty(data.rotation) : new Property(data.rotation);\r\n        if (data.opacity) this.opacity = data.opacity.length > 1 ? new AnimatedProperty(data.opacity) : new Property(data.opacity);\r\n    }\r\n\r\n    update(ctx, time) {\r\n        let positionX; // FIXME wrong transparency if nested\r\n        let positionY;\r\n        const anchor = this.anchor ? this.anchor.getValue(time) : [0, 0];\r\n        const rotation = this.rotation ? this.deg2rad(this.rotation.getValue(time)) : 0;\r\n        const skew = this.skew ? this.deg2rad(this.skew.getValue(time)) : 0;\r\n        const skewAxis = this.skewAxis ? this.deg2rad(this.skewAxis.getValue(time)) : 0;\r\n        const scaleX = this.scaleX ? this.scaleX.getValue(time) : 1;\r\n        const scaleY = this.scaleY ? this.scaleY.getValue(time) : 1;\r\n        const opacity = this.opacity ? this.opacity.getValue(time) * ctx.globalAlpha : ctx.globalAlpha;\r\n\r\n        if (this.position) {\r\n            const position = this.position.getValue(time, ctx);\r\n            positionX = position[0];\r\n            positionY = position[1];\r\n        } else {\r\n            positionX = this.positionX ? this.positionX.getValue(time) : 0;\r\n            positionY = this.positionY ? this.positionY.getValue(time) : 0;\r\n        }\r\n\r\n        // console.log(ctx, positionX, positionY, anchor, rotation, skew, skewAxis, scaleX, scaleY, opacity);\r\n\r\n        //order very very important :)\r\n        ctx.transform(1, 0, 0, 1, positionX - anchor[0], positionY - anchor[1]);\r\n        this.setRotation(ctx, rotation, anchor[0], anchor[1]);\r\n        this.setSkew(ctx, skew, skewAxis, anchor[0], anchor[1]);\r\n        this.setScale(ctx, scaleX, scaleY, anchor[0], anchor[1]);\r\n        ctx.globalAlpha = opacity;\r\n    }\r\n\r\n    setRotation(ctx, rad, x, y) {\r\n        const c = Math.cos(rad);\r\n        const s = Math.sin(rad);\r\n        const dx = x - c * x + s * y;\r\n        const dy = y - s * x - c * y;\r\n        ctx.transform(c, s, -s, c, dx, dy);\r\n    }\r\n\r\n    setScale(ctx, sx, sy, x, y) {\r\n        ctx.transform(sx, 0, 0, sy, -x * sx + x, -y * sy + y);\r\n    }\r\n\r\n    setSkew(ctx, skew, axis, x, y) {\r\n        const t = Math.tan(-skew);\r\n        this.setRotation(ctx, -axis, x, y);\r\n        ctx.transform(1, 0, t, 1, -y * t, 0);\r\n        this.setRotation(ctx, axis, x, y);\r\n    }\r\n\r\n    deg2rad(deg) {\r\n        return deg * (Math.PI / 180);\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        if (this.anchor) this.anchor.setKeyframes(time);\r\n        if (this.rotation) this.rotation.setKeyframes(time);\r\n        if (this.skew) this.skew.setKeyframes(time);\r\n        if (this.skewAxis) this.skewAxis.setKeyframes(time);\r\n        if (this.position) this.position.setKeyframes(time);\r\n        if (this.positionX) this.positionX.setKeyframes(time);\r\n        if (this.positionY) this.positionY.setKeyframes(time);\r\n        if (this.scaleX) this.scaleX.setKeyframes(time);\r\n        if (this.scaleY) this.scaleY.setKeyframes(time);\r\n        if (this.opacity) this.opacity.setKeyframes(time);\r\n    }\r\n\r\n    reset(reversed) {\r\n        if (this.anchor) this.anchor.reset(reversed);\r\n        if (this.rotation) this.rotation.reset(reversed);\r\n        if (this.skew) this.skew.reset(reversed);\r\n        if (this.skewAxis) this.skewAxis.reset(reversed);\r\n        if (this.position) this.position.reset(reversed);\r\n        if (this.positionX) this.positionX.reset(reversed);\r\n        if (this.positionY) this.positionY.reset(reversed);\r\n        if (this.scaleX) this.scaleX.reset(reversed);\r\n        if (this.scaleY) this.scaleY.reset(reversed);\r\n        if (this.opacity) this.opacity.reset(reversed);\r\n    }\r\n}\r\n\r\nexport default Transform;","import Property from '../property/Property';\r\nimport AnimatedProperty from '../property/AnimatedProperty';\r\n\r\nclass DropShadow {\r\n    constructor(data) {\r\n        this.color = data.color.length > 1 ? new AnimatedProperty(data.color) : new Property(data.color);\r\n        this.opacity = data.opacity.length > 1 ? new AnimatedProperty(data.opacity) : new Property(data.opacity);\r\n        this.direction = data.direction.length > 1 ? new AnimatedProperty(data.direction) : new Property(data.direction);\r\n        this.distance = data.distance.length > 1 ? new AnimatedProperty(data.distance) : new Property(data.distance);\r\n        this.softness = data.softness.length > 1 ? new AnimatedProperty(data.softness) : new Property(data.softness);\r\n    }\r\n\r\n    getColor(time) {\r\n        const color = this.color.getValue(time);\r\n        const opacity = this.opacity.getValue(time);\r\n        return `rgba(${Math.round(color[0])}, ${Math.round(color[1])}, ${Math.round(color[2])}, ${opacity})`;\r\n    }\r\n\r\n    setShadow(ctx, time) {\r\n        const color = this.getColor(time);\r\n        const dist = this.distance.getValue(time);\r\n        const blur = this.softness.getValue(time);\r\n        ctx.shadowColor = color;\r\n        ctx.shadowOffsetX = dist;\r\n        ctx.shadowOffsetY = dist;\r\n        ctx.shadowBlur = blur;\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.color.setKeyframes(time);\r\n        this.opacity.setKeyframes(time);\r\n        this.direction.setKeyframes(time);\r\n        this.distance.setKeyframes(time);\r\n        this.softness.setKeyframes(time);\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.color.reset(reversed);\r\n        this.opacity.reset(reversed);\r\n        this.direction.reset(reversed);\r\n        this.distance.reset(reversed);\r\n        this.softness.reset(reversed);\r\n    }\r\n}\r\n\r\nexport default DropShadow;","import Path from '../objects/Path';\r\nimport AnimatedPath from '../objects/AnimatedPath';\r\nimport Transform from '../transform/Transform';\r\nimport DropShadow from '../effects/DropShadow';\r\n\r\nclass BaseLayer {\r\n\r\n    constructor(data) {\r\n        this.index = data.index;\r\n        this.in = data.in || 0;\r\n        this.out = data.out;\r\n        if (data.parent) this.parent = data.parent;\r\n        this.transform = new Transform(data.transform);\r\n\r\n        if (data.effects) {\r\n            if (data.effects.dropShadow) {\r\n                this.dropShadow = new DropShadow(data.effects.dropShadow);\r\n            }\r\n        }\r\n\r\n        if (data.masks) {\r\n            this.masks = data.masks.map(mask => mask.isAnimated ? new AnimatedPath(mask) : new Path(mask));\r\n        }\r\n    }\r\n\r\n    draw(ctx, time) {\r\n        ctx.save();\r\n\r\n        if (this.parent) this.parent.setParentTransform(ctx, time);\r\n        this.transform.update(ctx, time);\r\n\r\n        if (this.dropShadow) {\r\n            this.dropShadow.setShadow(ctx, time);\r\n        }\r\n\r\n        if (this.masks) {\r\n            ctx.beginPath();\r\n            this.masks.forEach(mask => mask.draw(ctx, time));\r\n            ctx.clip();\r\n        }\r\n    }\r\n\r\n    setParentTransform(ctx, time) {\r\n        if (this.parent) this.parent.setParentTransform(ctx, time);\r\n        this.transform.update(ctx, time);\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.transform.setKeyframes(time);\r\n        if (this.masks) this.masks.forEach(mask => mask.setKeyframes(time));\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.transform.reset(reversed);\r\n        if (this.masks) this.masks.forEach(mask => mask.reset(reversed));\r\n    }\r\n}\r\n\r\nexport default BaseLayer;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import BaseLayer from './BaseLayer'\r\n\r\nclass ImageLayer extends BaseLayer {\r\n    constructor(data, imageBasePath) {\r\n        super(data);\r\n        this.source = `${imageBasePath}${data.source}`\r\n        this.isLoaded = false;\r\n    }\r\n\r\n    preload(cb) {\r\n        return new Promise((resolve, reject) => {\r\n            this.img = new Image;\r\n            this.img.onload = () => {\r\n                this.isLoaded = true;\r\n                resolve();\r\n            };\r\n            this.img.src = this.source;\r\n        });\r\n    }\r\n\r\n    draw(ctx, time) {\r\n        super.draw(ctx, time);\r\n\r\n        ctx.drawImage(this.img, 0, 0);\r\n\r\n        ctx.restore();\r\n    }\r\n}\r\n\r\nexport default ImageLayer;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import BaseLayer from './BaseLayer';\r\n\r\nclass NullLayer extends BaseLayer {\r\n    constructor(data) {\r\n        super(data);\r\n    }\r\n\r\n    draw(ctx, time) {\r\n        super.draw(ctx, time);\r\n        ctx.restore();\r\n    }\r\n}\r\n\r\nexport default NullLayer;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import BaseLayer from './BaseLayer'\r\n\r\nclass TextLayer extends BaseLayer {\r\n    constructor(data, baseFont) {\r\n        super(data);\r\n        this.text = data.text;\r\n        this.leading = data.leading;\r\n        this.fontSize = data.fontSize;\r\n        this.font = data.font;\r\n        this.color = data.color;\r\n        this.justification = data.justification;\r\n        this.baseFont = baseFont;\r\n    }\r\n\r\n    draw(ctx, time) {\r\n        super.draw(ctx, time);\r\n\r\n        ctx.textAlign = this.justification;\r\n        ctx.font = `${this.fontSize}px ${this.baseFont}` || this.font;\r\n        ctx.fillStyle = `rgb(${this.color[0]}, ${this.color[1]}, ${this.color[2]})`;\r\n        for (let j = 0; j < this.text.length; j++) {\r\n            ctx.fillText(this.text[j], 0, j * this.leading);\r\n        }\r\n\r\n        ctx.restore();\r\n    }\r\n\r\n}\r\n\r\nexport default TextLayer;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import Property from '../property/Property'\r\nimport AnimatedProperty from '../property/AnimatedProperty'\r\nimport Path from './Path'\r\n\r\nclass Ellipse extends Path {\r\n\r\n    constructor(data) {\r\n        super(data)\r\n        this.closed = true;\r\n        this.size = data.size.length > 1 ? new AnimatedProperty(data.size) : new Property(data.size);\r\n        if (data.position) this.position = data.position.length > 1 ? new AnimatedProperty(data.position) : new Property(data.position);\r\n    }\r\n\r\n    draw(ctx, time, trim) {\r\n        const size = this.size.getValue(time);\r\n        const position = this.position ? this.position.getValue(time) : [0, 0];\r\n\r\n        let i;\r\n        let j;\r\n        const w = size[0] / 2;\r\n        const h = size[1] / 2;\r\n        const x = position[0] - w;\r\n        const y = position[1] - h;\r\n        const ow = w * .5522848;\r\n        const oh = h * .5522848;\r\n\r\n        const vertices = [\r\n            [x + w + ow, y, x + w - ow, y, x + w, y],\r\n            [x + w + w, y + h + oh, x + w + w, y + h - oh, x + w + w, y + h],\r\n            [x + w - ow, y + h + h, x + w + ow, y + h + h, x + w, y + h + h],\r\n            [x, y + h - oh, x, y + h + oh, x, y + h]\r\n        ];\r\n\r\n        if (trim) {\r\n            let tv;\r\n            const len = w + h;\r\n\r\n            trim = this.getTrimValues(trim);\r\n\r\n            for (i = 0; i < 4; i++) {\r\n                j = i + 1;\r\n                if (j > 3) j = 0;\r\n                if (i > trim.startIndex && i < trim.endIndex) {\r\n                    ctx.bezierCurveTo(vertices[i][0], vertices[i][1], vertices[j][2], vertices[j][3], vertices[j][4], vertices[j][5]);\r\n                } else if (i === trim.startIndex && i === trim.endIndex) {\r\n                    tv = this.trim(vertices[i], vertices[j], trim.start, trim.end, len);\r\n                    ctx.moveTo(tv.start[4], tv.start[5]);\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5]);\r\n                } else if (i === trim.startIndex) {\r\n                    tv = this.trim(vertices[i], vertices[j], trim.start, 1, len);\r\n                    ctx.moveTo(tv.start[4], tv.start[5]);\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5]);\r\n                } else if (i === trim.endIndex) {\r\n                    tv = this.trim(vertices[i], vertices[j], 0, trim.end, len);\r\n                    ctx.bezierCurveTo(tv.start[0], tv.start[1], tv.end[2], tv.end[3], tv.end[4], tv.end[5]);\r\n                }\r\n            }\r\n        } else {\r\n            ctx.moveTo(vertices[0][4], vertices[0][5]);\r\n            for (i = 0; i < 4; i++) {\r\n                j = i + 1;\r\n                if (j > 3) j = 0;\r\n                ctx.bezierCurveTo(vertices[i][0], vertices[i][1], vertices[j][2], vertices[j][3], vertices[j][4], vertices[j][5]);\r\n            }\r\n        }\r\n    }\r\n\r\n    getTrimValues(trim) {\r\n        const startIndex = Math.floor(trim.start * 4);\r\n        const endIndex = Math.floor(trim.end * 4);\r\n        const start = (trim.start - startIndex * 0.25) * 4;\r\n        const end = (trim.end - endIndex * 0.25) * 4;\r\n\r\n        return {\r\n            startIndex,\r\n            endIndex,\r\n            start,\r\n            end\r\n        };\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.size.setKeyframes(time);\r\n        if (this.position) this.position.setKeyframes(time);\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.size.reset(reversed);\r\n        if (this.position) this.position.reset(reversed);\r\n    }\r\n}\r\n\r\nexport default Ellipse;","import Property from '../property/Property';\r\nimport AnimatedProperty from '../property/AnimatedProperty';\r\n\r\nclass Polystar {\r\n\r\n    constructor(data) {\r\n        //this.name = data.name;\r\n        this.closed = true; // TODO ??\r\n\r\n        this.starType = data.starType;\r\n        this.points = data.points.length > 1 ? new AnimatedProperty(data.points) : new Property(data.points);\r\n        this.innerRadius = data.innerRadius.length > 1 ? new AnimatedProperty(data.innerRadius) : new Property(data.innerRadius);\r\n        this.outerRadius = data.outerRadius.length > 1 ? new AnimatedProperty(data.outerRadius) : new Property(data.outerRadius);\r\n        if (data.position) this.position = data.position.length > 1 ? new AnimatedProperty(data.position) : new Property(data.position);\r\n        if (data.rotation) this.rotation = data.rotation.length > 1 ? new AnimatedProperty(data.rotation) : new Property(data.rotation);\r\n        if (data.innerRoundness) this.innerRoundness = data.innerRoundness.length > 1 ? new AnimatedProperty(data.innerRoundness) : new Property(data.innerRoundness);\r\n        if (data.outerRoundness) this.outerRoundness = data.outerRoundness.length > 1 ? new AnimatedProperty(data.outerRoundness) : new Property(data.outerRoundness);\r\n    }\r\n\r\n    draw(ctx, time) {\r\n        const points = this.points.getValue(time);\r\n        const innerRadius = this.innerRadius.getValue(time);\r\n        const outerRadius = this.outerRadius.getValue(time);\r\n        const position = this.position ? this.position.getValue(time) : [0, 0];\r\n        let rotation = this.rotation ? this.rotation.getValue(time) : 0;\r\n        const innerRoundness = this.innerRoundness ? this.innerRoundness.getValue(time) : 0;\r\n        const outerRoundness = this.outerRoundness ? this.outerRoundness.getValue(time) : 0;\r\n\r\n        rotation = this.deg2rad(rotation);\r\n        const start = this.rotatePoint(0, 0, 0, 0 - outerRadius, rotation);\r\n\r\n        ctx.save();\r\n        ctx.beginPath();\r\n        ctx.translate(position[0], position[1]);\r\n        ctx.moveTo(start[0], start[1]);\r\n\r\n        for (let i = 0; i < points; i++) {\r\n            let pInner;\r\n            let pOuter;\r\n            let pOuter1Tangent;\r\n            let pOuter2Tangent;\r\n            let pInner1Tangent;\r\n            let pInner2Tangent;\r\n            let outerOffset;\r\n            let innerOffset;\r\n            let rot;\r\n\r\n            rot = Math.PI / points * 2;\r\n\r\n            pInner = this.rotatePoint(0, 0, 0, 0 - innerRadius, (rot * (i + 1) - rot / 2) + rotation);\r\n            pOuter = this.rotatePoint(0, 0, 0, 0 - outerRadius, (rot * (i + 1)) + rotation);\r\n\r\n            //FIxME\r\n            if (!outerOffset) outerOffset = (start[0] + pInner[0]) * outerRoundness / 100 * .5522848;\r\n            if (!innerOffset) innerOffset = (start[0] + pInner[0]) * innerRoundness / 100 * .5522848;\r\n\r\n            pOuter1Tangent = this.rotatePoint(0, 0, outerOffset, 0 - outerRadius, (rot * i) + rotation);\r\n            pInner1Tangent = this.rotatePoint(0, 0, innerOffset * -1, 0 - innerRadius, (rot * (i + 1) - rot / 2) + rotation);\r\n            pInner2Tangent = this.rotatePoint(0, 0, innerOffset, 0 - innerRadius, (rot * (i + 1) - rot / 2) + rotation);\r\n            pOuter2Tangent = this.rotatePoint(0, 0, outerOffset * -1, 0 - outerRadius, (rot * (i + 1)) + rotation);\r\n\r\n            if (this.starType === 1) {\r\n                //star\r\n                ctx.bezierCurveTo(pOuter1Tangent[0], pOuter1Tangent[1], pInner1Tangent[0], pInner1Tangent[1], pInner[0], pInner[1]);\r\n                ctx.bezierCurveTo(pInner2Tangent[0], pInner2Tangent[1], pOuter2Tangent[0], pOuter2Tangent[1], pOuter[0], pOuter[1]);\r\n            } else {\r\n                //polygon\r\n                ctx.bezierCurveTo(pOuter1Tangent[0], pOuter1Tangent[1], pOuter2Tangent[0], pOuter2Tangent[1], pOuter[0], pOuter[1]);\r\n            }\r\n\r\n            //debug\r\n            //ctx.fillStyle = \"black\";\r\n            //ctx.fillRect(pInner[0], pInner[1], 5, 5);\r\n            //ctx.fillRect(pOuter[0], pOuter[1], 5, 5);\r\n            //ctx.fillStyle = \"blue\";\r\n            //ctx.fillRect(pOuter1Tangent[0], pOuter1Tangent[1], 5, 5);\r\n            //ctx.fillStyle = \"red\";\r\n            //ctx.fillRect(pInner1Tangent[0], pInner1Tangent[1], 5, 5);\r\n            //ctx.fillStyle = \"green\";\r\n            //ctx.fillRect(pInner2Tangent[0], pInner2Tangent[1], 5, 5);\r\n            //ctx.fillStyle = \"brown\";\r\n            //ctx.fillRect(pOuter2Tangent[0], pOuter2Tangent[1], 5, 5);\r\n        }\r\n\r\n        ctx.restore();\r\n    }\r\n\r\n    rotatePoint(cx, cy, x, y, radians) {\r\n        const cos = Math.cos(radians);\r\n        const sin = Math.sin(radians);\r\n        const nx = (cos * (x - cx)) - (sin * (y - cy)) + cx;\r\n        const ny = (sin * (x - cx)) + (cos * (y - cy)) + cy;\r\n        return [nx, ny];\r\n    }\r\n\r\n    deg2rad(deg) {\r\n        return deg * (Math.PI / 180);\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.points.setKeyframes(time);\r\n        this.innerRadius.setKeyframes(time);\r\n        this.outerRadius.setKeyframes(time);\r\n        if (this.position) this.position.setKeyframes(time);\r\n        if (this.rotation) this.rotation.setKeyframes(time);\r\n        if (this.innerRoundness) this.innerRoundness.setKeyframes(time);\r\n        if (this.outerRoundness) this.outerRoundness.setKeyframes(time);\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.points.reset(reversed);\r\n        this.innerRadius.reset(reversed);\r\n        this.outerRadius.reset(reversed);\r\n        if (this.position) this.position.reset(reversed);\r\n        if (this.rotation) this.rotation.reset(reversed);\r\n        if (this.innerRoundness) this.innerRoundness.reset(reversed);\r\n        if (this.outerRoundness) this.outerRoundness.reset(reversed);\r\n    }\r\n}\r\n\r\nexport default Polystar;","import Property from '../property/Property';\r\nimport AnimatedProperty from '../property/AnimatedProperty';\r\n\r\nclass Rect {\r\n\r\n    constructor(data) {\r\n        //this.name = data.name;\r\n        this.closed = true;\r\n\r\n        this.size = data.size.length > 1 ? new AnimatedProperty(data.size) : new Property(data.size);\r\n\r\n        //optionals\r\n        if (data.position) this.position = data.position.length > 1 ? new AnimatedProperty(data.position) : new Property(data.position);\r\n        if (data.roundness) this.roundness = data.roundness.length > 1 ? new AnimatedProperty(data.roundness) : new Property(data.roundness);\r\n    }\r\n\r\n    draw(ctx, time, trim) {\r\n        const size = this.size.getValue(time);\r\n        const position = this.position ? this.position.getValue(time) : [0, 0];\r\n        let roundness = this.roundness ? this.roundness.getValue(time) : 0;\r\n\r\n        if (size[0] < 2 * roundness) roundness = size[0] / 2;\r\n        if (size[1] < 2 * roundness) roundness = size[1] / 2;\r\n\r\n        const x = position[0] - size[0] / 2;\r\n        const y = position[1] - size[1] / 2;\r\n\r\n        if (trim) {\r\n            // let tv;\r\n            // trim = this.getTrimValues(trim);\r\n            //TODO add trim\r\n        } else {\r\n            ctx.moveTo(x + roundness, y);\r\n            ctx.arcTo(x + size[0], y, x + size[0], y + size[1], roundness);\r\n            ctx.arcTo(x + size[0], y + size[1], x, y + size[1], roundness);\r\n            ctx.arcTo(x, y + size[1], x, y, roundness);\r\n            ctx.arcTo(x, y, x + size[0], y, roundness);\r\n        }\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.size.setKeyframes(time);\r\n        if (this.position) this.position.setKeyframes(time);\r\n        if (this.roundness) this.roundness.setKeyframes(time);\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.size.reset(reversed);\r\n        if (this.position) this.position.reset(reversed);\r\n        if (this.roundness) this.roundness.reset(reversed);\r\n    }\r\n}\r\n\r\nexport default Rect;","import Property from './Property';\r\nimport AnimatedProperty from './AnimatedProperty';\r\n\r\nclass Fill {\r\n\r\n    constructor(data) {\r\n        this.color = data.color.length > 1 ? new AnimatedProperty(data.color) : new Property(data.color);\r\n        if (data.opacity) this.opacity = data.opacity.length > 1 ? new AnimatedProperty(data.opacity) : new Property(data.opacity);\r\n    }\r\n\r\n    getValue(time) {\r\n        const color = this.color.getValue(time);\r\n        const opacity = this.opacity ? this.opacity.getValue(time) : 1;\r\n        return `rgba(${Math.round(color[0])}, ${Math.round(color[1])}, ${Math.round(color[2])}, ${opacity})`;\r\n    }\r\n\r\n    update(ctx, time) {\r\n        const color = this.getValue(time);\r\n        ctx.fillStyle = color;\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.color.setKeyframes(time);\r\n        if (this.opacity) this.opacity.setKeyframes(time);\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.color.reset(reversed);\r\n        if (this.opacity) this.opacity.reset(reversed);\r\n    }\r\n}\r\n\r\nexport default Fill;","import Property from './Property';\r\nimport AnimatedProperty from './AnimatedProperty';\r\n\r\nclass GradientFill {\r\n\r\n    constructor(data, gradients) {\r\n        if (!gradients[data.name]) gradients[data.name] = [];\r\n        gradients[data.name].push(this);\r\n\r\n        this.stops = data.stops;\r\n        this.type = data.type;\r\n        this.startPoint = data.startPoint.length > 1 ? new AnimatedProperty(data.startPoint) : new Property(data.startPoint);\r\n        this.endPoint = data.endPoint.length > 1 ? new AnimatedProperty(data.endPoint) : new Property(data.endPoint);\r\n        if (data.opacity) this.opacity = data.opacity.length > 1 ? new AnimatedProperty(data.opacity) : new Property(data.opacity);\r\n    }\r\n\r\n    update(ctx, time) {\r\n        const startPoint = this.startPoint.getValue(time);\r\n        const endPoint = this.endPoint.getValue(time);\r\n        let radius = 0;\r\n\r\n        if (this.type === 'radial') {\r\n            const distX = startPoint[0] - endPoint[0];\r\n            const distY = startPoint[1] - endPoint[1];\r\n            radius = Math.sqrt(distX * distX + distY * distY);\r\n        }\r\n\r\n        const gradient = this.type === 'radial' ?\r\n            ctx.createRadialGradient(startPoint[0], startPoint[1], 0, startPoint[0], startPoint[1], radius) :\r\n            ctx.createLinearGradient(startPoint[0], startPoint[1], endPoint[0], endPoint[1]);\r\n\r\n        const opacity = this.opacity ? this.opacity.getValue(time) : 1;\r\n\r\n        for (const stop of this.stops) {\r\n            const color = stop.color;\r\n            gradient.addColorStop(stop.location, `rgba(${color[0]}, ${color[1]}, ${color[2]}, ${color[3] * opacity})`);\r\n        }\r\n\r\n        ctx.fillStyle = gradient;\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        if (this.opacity) this.opacity.setKeyframes(time);\r\n        this.startPoint.setKeyframes(time);\r\n        this.endPoint.setKeyframes(time);\r\n    }\r\n\r\n    reset(reversed) {\r\n        if (this.opacity) this.opacity.setKeyframes(reversed);\r\n        this.startPoint.setKeyframes(reversed);\r\n        this.endPoint.setKeyframes(reversed);\r\n    }\r\n}\r\n\r\nexport default GradientFill;","import Property from './Property';\r\nimport AnimatedProperty from './AnimatedProperty';\r\n\r\nclass Stroke {\r\n\r\n    constructor(data) {\r\n        if (data) {\r\n            this.join = data.join;\r\n            this.cap = data.cap;\r\n\r\n            if (data.miterLimit) {\r\n                if (data.miterLimit.length > 1) this.miterLimit = new AnimatedProperty(data.miterLimit);\r\n                else this.miterLimit = new Property(data.miterLimit);\r\n            }\r\n\r\n            if (data.color.length > 1) this.color = new AnimatedProperty(data.color);\r\n            else this.color = new Property(data.color);\r\n\r\n            if (data.opacity.length > 1) this.opacity = new AnimatedProperty(data.opacity);\r\n            else this.opacity = new Property(data.opacity);\r\n\r\n            if (data.width.length > 1) this.width = new AnimatedProperty(data.width);\r\n            else this.width = new Property(data.width);\r\n\r\n            if (data.dashes) {\r\n                this.dashes = {};\r\n\r\n                if (data.dashes.dash.length > 1) this.dashes.dash = new AnimatedProperty(data.dashes.dash);\r\n                else this.dashes.dash = new Property(data.dashes.dash);\r\n\r\n                if (data.dashes.gap.length > 1) this.dashes.gap = new AnimatedProperty(data.dashes.gap);\r\n                else this.dashes.gap = new Property(data.dashes.gap);\r\n\r\n                if (data.dashes.offset.length > 1) this.dashes.offset = new AnimatedProperty(data.dashes.offset);\r\n                else this.dashes.offset = new Property(data.dashes.offset);\r\n            }\r\n        }\r\n    }\r\n\r\n    getValue(time) {\r\n        const color = this.color.getValue(time);\r\n        const opacity = this.opacity.getValue(time);\r\n        color[0] = Math.round(color[0]);\r\n        color[1] = Math.round(color[1]);\r\n        color[2] = Math.round(color[2]);\r\n        const s = color.join(', ');\r\n\r\n        return `rgba(${s}, ${opacity})`;\r\n    }\r\n\r\n    update(ctx, time) {\r\n        const strokeColor = this.getValue(time);\r\n        const strokeWidth = this.width.getValue(time);\r\n        const strokeJoin = this.join;\r\n        let miterLimit;\r\n        if (strokeJoin === 'miter') miterLimit = this.miterLimit.getValue(time);\r\n\r\n        ctx.lineWidth = strokeWidth;\r\n        ctx.lineJoin = strokeJoin;\r\n        if (miterLimit) ctx.miterLimit = miterLimit;\r\n        ctx.lineCap = this.cap;\r\n        ctx.strokeStyle = strokeColor;\r\n\r\n        if (this.dashes) {\r\n            ctx.setLineDash([\r\n                this.dashes.dash.getValue(time),\r\n                this.dashes.gap.getValue(time)\r\n            ]);\r\n            ctx.lineDashOffset = this.dashes.offset.getValue(time);\r\n        }\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.color.setKeyframes(time);\r\n        this.opacity.setKeyframes(time);\r\n        this.width.setKeyframes(time);\r\n        if (this.miterLimit) this.miterLimit.setKeyframes(time);\r\n        if (this.dashes) {\r\n            this.dashes.dash.setKeyframes(time);\r\n            this.dashes.gap.setKeyframes(time);\r\n            this.dashes.offset.setKeyframes(time);\r\n        }\r\n    }\r\n\r\n    reset(reversed) {\r\n        this.color.reset(reversed);\r\n        this.opacity.reset(reversed);\r\n        this.width.reset(reversed);\r\n        if (this.miterLimit) this.miterLimit.reset(reversed);\r\n        if (this.dashes) {\r\n            this.dashes.dash.reset(reversed);\r\n            this.dashes.gap.reset(reversed);\r\n            this.dashes.offset.reset(reversed);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Stroke;","import Property from './Property'\r\nimport AnimatedProperty from './AnimatedProperty'\r\n\r\nclass Trim {\r\n    constructor(data) {\r\n\r\n        this.type = data.type\r\n\r\n        if (data.start) this.start = data.start.length > 1 ? new AnimatedProperty(data.start) : new Property(data.start)\r\n        if (data.end) this.end = data.end.length > 1 ? new AnimatedProperty(data.end) : new Property(data.end)\r\n        if (data.offset) this.offset = data.offset.length > 1 ? new AnimatedProperty(data.offset) : new Property(data.offset)\r\n    }\r\n\r\n    getTrim(time) {\r\n        const startValue = this.start ? this.start.getValue(time) : 0\r\n        const endValue = this.end ? this.end.getValue(time) : 1\r\n\r\n        let start = Math.min(startValue, endValue)\r\n        let end = Math.max(startValue, endValue)\r\n\r\n        if (this.offset) {\r\n            const offset = this.offset.getValue(time) % 1\r\n            if ((offset > 0 && offset < 1) ||\r\n                (offset > -1 && offset < 0)) {\r\n\r\n                start += offset\r\n                end += offset\r\n                start = start > 1 ? start - 1 : start\r\n                start = start < 0 ? 1 + start : start\r\n                end = end > 1 ? end - 1 : end\r\n                end = end < 0 ? 1 + end : end\r\n            }\r\n        }\r\n\r\n        if (start === 0 && end === 1) {\r\n            return null\r\n        } else {\r\n            return {start, end}\r\n        }\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        if (this.start) this.start.setKeyframes(time)\r\n        if (this.end) this.end.setKeyframes(time)\r\n        if (this.offset) this.offset.reset()\r\n    }\r\n\r\n    reset(reversed) {\r\n        if (this.start) this.start.reset(reversed)\r\n        if (this.end) this.end.reset(reversed)\r\n        if (this.offset) this.offset.reset()\r\n    }\r\n}\r\n\r\nexport default Trim\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import AnimatedPath from '../objects/AnimatedPath'\r\nimport Ellipse from '../objects/Ellipse'\r\nimport Path from '../objects/Path'\r\nimport Polystar from '../objects/Polystar'\r\nimport Rect from '../objects/Rect'\r\nimport Fill from '../property/Fill'\r\nimport GradientFill from '../property/GradientFill'\r\nimport Stroke from '../property/Stroke'\r\nimport Trim from '../property/Trim'\r\nimport BaseLayer from './BaseLayer'\r\n\r\nclass VectorLayer extends BaseLayer {\r\n    constructor(data, gradients) {\r\n        super(data)\r\n\r\n        if (data.fill) this.fill = new Fill(data.fill)\r\n        if (data.gradientFill) this.fill = new GradientFill(data.gradientFill, gradients)\r\n        if (data.stroke) this.stroke = new Stroke(data.stroke)\r\n        if (data.trim) this.trim = new Trim(data.trim)\r\n\r\n        if (data.groups) {\r\n            this.groups = data.groups.map(group => new VectorLayer(group, gradients))\r\n        }\r\n\r\n        if (data.shapes) {\r\n            this.shapes = data.shapes.map(shape => {\r\n                if (shape.type === 'path') {\r\n                    return shape.isAnimated ? new AnimatedPath(shape) : new Path(shape)\r\n                } else if (shape.type === 'rect') {\r\n                    return new Rect(shape)\r\n                } else if (shape.type === 'ellipse') {\r\n                    return new Ellipse(shape)\r\n                } else if (shape.type === 'polystar') {\r\n                    return new Polystar(shape)\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    draw(ctx, time, parentFill, parentStroke, parentTrim) {\r\n        super.draw(ctx, time)\r\n\r\n        const fill = this.fill || parentFill\r\n        const stroke = this.stroke || parentStroke\r\n        const trimValues = this.trim ? this.trim.getTrim(time) : parentTrim\r\n\r\n        if (fill) fill.update(ctx, time)\r\n        if (stroke) stroke.update(ctx, time)\r\n\r\n        ctx.beginPath()\r\n        if (this.shapes) {\r\n            this.shapes.forEach(shape => shape.draw(ctx, time, trimValues))\r\n            if (this.shapes[this.shapes.length - 1].closed) {\r\n                // ctx.closePath();\r\n            }\r\n        }\r\n\r\n        if (fill) ctx.fill()\r\n        if (stroke) ctx.stroke()\r\n\r\n        if (this.groups) this.groups.forEach(group => group.draw(ctx, time, fill, stroke, trimValues))\r\n        ctx.restore()\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        super.setKeyframes(time)\r\n\r\n        if (this.shapes) this.shapes.forEach(shape => shape.setKeyframes(time))\r\n        if (this.groups) this.groups.forEach(group => group.setKeyframes(time))\r\n\r\n        if (this.fill) this.fill.setKeyframes(time)\r\n        if (this.stroke) this.stroke.setKeyframes(time)\r\n        if (this.trim) this.trim.setKeyframes(time)\r\n    }\r\n\r\n    reset(reversed) {\r\n        super.reset(reversed)\r\n\r\n        if (this.shapes) this.shapes.forEach(shape => shape.reset(reversed))\r\n        if (this.groups) this.groups.forEach(group => group.reset(reversed))\r\n\r\n        if (this.fill) this.fill.reset(reversed)\r\n        if (this.stroke) this.stroke.reset(reversed)\r\n        if (this.trim) this.trim.reset(reversed)\r\n    }\r\n}\r\n\r\nexport default VectorLayer\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import ImageLayer from './ImageLayer'\r\nimport NullLayer from './NullLayer'\r\nimport TextLayer from './TextLayer'\r\nimport BaseLayer from './BaseLayer'\r\nimport VectorLayer from './VectorLayer'\r\nimport Property from '../property/Property'\r\nimport AnimatedProperty from '../property/AnimatedProperty'\r\n\r\nclass CompLayer extends BaseLayer {\r\n\r\n    constructor(data, comps, baseFont, gradients, imageBasePath) {\r\n        super(data)\r\n\r\n        const sourceID = data.sourceID\r\n        const layers = (comps && comps[sourceID]) ? comps[sourceID].layers : null\r\n\r\n        if (layers) {\r\n\r\n            this.layers = layers.map(layer => {\r\n                switch (layer.type) {\r\n                    case 'vector':\r\n                        return new VectorLayer(layer, gradients)\r\n                    case 'image':\r\n                        return new ImageLayer(layer, imageBasePath)\r\n                    case 'text':\r\n                        return new TextLayer(layer, baseFont)\r\n                    case 'comp':\r\n                        return new CompLayer(layer, baseFont, gradients, imageBasePath)\r\n                    case 'null':\r\n                        return new NullLayer(layer)\r\n                }\r\n            })\r\n\r\n            this.layers.forEach(layer => {\r\n                if (layer.parent) {\r\n                    const parentIndex = layer.parent\r\n                    layer.parent = this.layers.find(layer => layer.index === parentIndex)\r\n                }\r\n            })\r\n        }\r\n\r\n        if (data.timeRemapping) {\r\n            this.timeRemapping = data.timeRemapping.length > 1 ? new AnimatedProperty(data.timeRemapping) : new Property(data.timeRemapping)\r\n        }\r\n    }\r\n\r\n    draw(ctx, time) {\r\n        super.draw(ctx, time)\r\n\r\n        if (this.layers) {\r\n            let internalTime = time - this.in\r\n            if (this.timeRemapping) internalTime = this.timeRemapping.getValue(internalTime)\r\n            this.layers.forEach(layer => {\r\n                if (internalTime >= layer.in && internalTime <= layer.out) {\r\n                    layer.draw(ctx, internalTime)\r\n                }\r\n            })\r\n        }\r\n\r\n        ctx.restore()\r\n    }\r\n\r\n    setParentTransform(ctx, time) {\r\n        super.setParentTransform(ctx, time)\r\n        const internalTime = time - this.in\r\n        if (this.layers) this.layers.forEach(layer => layer.setParentTransform(ctx, internalTime))\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        super.setKeyframes(time)\r\n        const internalTime = time - this.in\r\n        if (this.timeRemapping) this.timeRemapping.setKeyframes(internalTime)\r\n        if (this.layers) this.layers.forEach(layer => layer.setKeyframes(internalTime))\r\n    }\r\n\r\n    reset(reversed) {\r\n        super.reset(reversed)\r\n        if (this.timeRemapping) this.timeRemapping.reset(reversed)\r\n        if (this.layers) this.layers.forEach(layer => layer.reset(reversed))\r\n    }\r\n}\r\n\r\nexport default CompLayer\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import {add, remove} from './core'\r\nimport Emitter from 'tiny-emitter'\r\nimport ImageLayer from './layers/ImageLayer'\r\nimport NullLayer from './layers/NullLayer'\r\nimport TextLayer from './layers/TextLayer'\r\nimport CompLayer from './layers/CompLayer'\r\nimport VectorLayer from './layers/VectorLayer'\r\n\r\nclass Animation extends Emitter {\r\n\r\n    constructor(options) {\r\n        super();\r\n\r\n        this.gradients = {};\r\n        this.pausedTime = 0;\r\n        this.duration = options.data.duration;\r\n        this.baseWidth = options.data.width;\r\n        this.baseHeight = options.data.height;\r\n        this.ratio = options.data.width / options.data.height;\r\n        this.markers = options.data.markers;\r\n        this.baseFont = options.baseFont;\r\n        this.loop = options.loop || false;\r\n        this.devicePixelRatio = options.devicePixelRatio || (typeof window !== 'undefined' && window.devicePixelRatio ? window.devicePixelRatio : 1)\r\n        this.fluid = options.fluid || true;\r\n        this.imageBasePath = options.imageBasePath || '';\r\n        const comps = options.data.comps;\r\n\r\n        this.isPaused = false;\r\n        this.isPlaying = false;\r\n        this.drawFrame = true;\r\n\r\n        this.canvas = options.canvas || document.createElement('canvas');\r\n        this.canvas.width = this.baseWidth;\r\n        this.canvas.height = this.baseHeight;\r\n        this.ctx = this.canvas.getContext('2d');\r\n\r\n        this.layers = options.data.layers.map(layer => {\r\n            switch (layer.type) {\r\n                case 'vector':\r\n                    return new VectorLayer(layer, this.gradients);\r\n                case 'image':\r\n                    return new ImageLayer(layer, this.imageBasePath);\r\n                case 'text':\r\n                    return new TextLayer(layer, this.baseFont);\r\n                case 'comp':\r\n                    return new CompLayer(layer, comps, this.baseFont, this.gradients, this.imageBasePath);\r\n                case 'null':\r\n                default :\r\n                    return new NullLayer(layer);\r\n            }\r\n        });\r\n\r\n        this.layers.forEach(layer => {\r\n            if (layer.parent) {\r\n                const parentIndex = layer.parent;\r\n                layer.parent = this.layers.find(layer => layer.index === parentIndex)\r\n            }\r\n        });\r\n\r\n        this.reversed = options.reversed || false;\r\n        this.reset(this.reversed);\r\n        this.resize();\r\n\r\n        add(this);\r\n    }\r\n\r\n    play() {\r\n        if (!this.isPlaying) {\r\n            if (!this.isPaused) this.reset(this.reversed);\r\n            this.isPaused = false;\r\n            this.pausedTime = 0;\r\n            this.isPlaying = true;\r\n        }\r\n    }\r\n\r\n    stop() {\r\n        this.reset(this.reversed);\r\n        this.isPlaying = false;\r\n        this.drawFrame = true;\r\n    }\r\n\r\n    pause() {\r\n        if (this.isPlaying) {\r\n            this.isPaused = true;\r\n            this.pausedTime = this.time;\r\n            this.isPlaying = false;\r\n        }\r\n    }\r\n\r\n    gotoAndPlay(id) {\r\n        const marker = this.getMarker(id);\r\n        if (marker) {\r\n            this.time = marker.time;\r\n            this.pausedTime = 0;\r\n            this.setKeyframes(this.time);\r\n            this.isPlaying = true;\r\n        }\r\n    }\r\n\r\n    gotoAndStop(id) {\r\n        const marker = this.getMarker(id);\r\n        if (marker) {\r\n            this.time = marker.time;\r\n            this.setKeyframes(this.time);\r\n            this.drawFrame = true;\r\n            this.isPlaying = false;\r\n        }\r\n    }\r\n\r\n    getMarker(id) {\r\n        let marker;\r\n        if (typeof id === 'number') {\r\n            marker = this.markers[id];\r\n        } else if (typeof id === 'string') {\r\n            marker = this.markers.find(marker => marker.comment === id);\r\n        }\r\n\r\n        if (marker) return marker;\r\n        console.warn('Marker not found');\r\n    }\r\n\r\n    checkStopMarkers(from, to) {\r\n        return this.markers.find(marker => marker.stop && marker.time > from && marker.time < to);\r\n    }\r\n\r\n\r\n    preload() {\r\n        const promises = this.layers.filter(layer => layer instanceof ImageLayer).map(layer => layer.preload())\r\n        return Promise.all(promises).catch(error => console.error(error));\r\n    }\r\n\r\n    reset() {\r\n        this.pausedTime = 0;\r\n        this.time = this.reversed ? this.duration : 0;\r\n        this.layers.forEach(layer => layer.reset(this.reversed));\r\n    }\r\n\r\n    setKeyframes(time) {\r\n        this.layers.forEach(layer => layer.setKeyframes(time));\r\n    }\r\n\r\n    destroy() {\r\n        this.isPlaying = false;\r\n        if (this.canvas.parentNode) this.canvas.parentNode.removeChild(this.canvas);\r\n        remove(this);\r\n    }\r\n\r\n    resize(w) {\r\n        if (this.fluid) {\r\n            const width = w || this.canvas.clientWidth || this.baseWidth;\r\n            this.canvas.width = width * this.devicePixelRatio;\r\n            this.canvas.height = width / this.ratio * this.devicePixelRatio;\r\n\r\n            this.scale = width / this.baseWidth * this.devicePixelRatio;\r\n            this.ctx.transform(this.scale, 0, 0, this.scale, 0, 0);\r\n            this.setKeyframes(this.time);\r\n            this.drawFrame = true;\r\n        }\r\n    }\r\n\r\n    setGradients(name, stops) {\r\n        if (!this.gradients[name]) {\r\n            console.warn(`Gradient with name: ${name} not found.`);\r\n            return;\r\n        }\r\n\r\n        this.gradients[name].forEach(gradient => {\r\n            gradient.stops = stops;\r\n        });\r\n    }\r\n\r\n    getSpriteSheet(fps = 25, width = 50, maxWidth = 4096) {\r\n        const ratio = width / this.baseWidth;\r\n        const height = this.baseHeight * ratio;\r\n        const numFrames = Math.floor((this.duration / 1000) * fps);\r\n        const buffer = document.createElement('canvas');\r\n        const ctx = buffer.getContext('2d');\r\n\r\n        const rowsX = Math.floor(maxWidth / width);\r\n        const rowsY = Math.ceil(numFrames / rowsX);\r\n\r\n        let indexX = 0;\r\n        let indexY = 0;\r\n\r\n        buffer.width = rowsX * width;\r\n        buffer.height = rowsY * height;\r\n\r\n        this.resize(width);\r\n\r\n        for (let i = 0; i < numFrames; i++) {\r\n            const step = i / numFrames;\r\n            const time = step * this.duration;\r\n            this.setKeyframes(time);\r\n            this.draw(time);\r\n\r\n            const x = indexX * width;\r\n            const y = indexY * height;\r\n\r\n            if ((indexX + 1) >= rowsX) {\r\n                indexX = 0;\r\n                indexY++;\r\n            } else {\r\n                indexX++;\r\n            }\r\n\r\n            ctx.drawImage(this.canvas, x, y, width, height);\r\n        }\r\n\r\n        return {\r\n            frames: numFrames,\r\n            canvas: buffer,\r\n            offsetX: width,\r\n            offsetY: height,\r\n            rowsX,\r\n            rowsY,\r\n        }\r\n    }\r\n\r\n    draw(time) {\r\n        this.ctx.clearRect(0, 0, this.baseWidth, this.baseHeight);\r\n\r\n        this.layers.forEach(layer => {\r\n            if (time >= layer.in && time <= layer.out) {\r\n                layer.draw(this.ctx, time);\r\n            }\r\n        });\r\n    }\r\n\r\n    update(time) {\r\n        if (!this.then) this.then = time;\r\n\r\n        const delta = time - this.then;\r\n        this.then = time;\r\n\r\n        if (this.isPlaying) {\r\n            this.time = this.reversed ? this.time - delta : this.time + delta;\r\n\r\n            const stopMarker = this.checkStopMarkers(this.time - delta, this.time);\r\n\r\n            if (this.time > this.duration || this.reversed && this.time < 0) {\r\n                this.time = this.reversed ? 0 : this.duration - 1;\r\n                this.isPlaying = false;\r\n                this.emit('complete');\r\n                if (this.loop) {\r\n                    this.play();\r\n                }\r\n            } else if (stopMarker) {\r\n                this.time = stopMarker.time;\r\n                this.pause();\r\n                this.emit('stop', stopMarker);\r\n            } else {\r\n                this.draw(this.time);\r\n            }\r\n            this.emit('update');\r\n        } else if (this.drawFrame) {\r\n            this.drawFrame = false;\r\n            this.draw(this.time);\r\n            this.emit('update');\r\n        }\r\n    }\r\n\r\n    set step(step) {\r\n        this.isPlaying = false;\r\n        this.time = step * this.duration;\r\n        this.pausedTime = this.time;\r\n        this.setKeyframes(this.time);\r\n        this.drawFrame = true;\r\n    }\r\n\r\n    get step() {\r\n        return this.time / this.duration;\r\n    }\r\n\r\n    get reversed() {\r\n        return this._reversed;\r\n    }\r\n\r\n    set reversed(bool) {\r\n        this._reversed = bool;\r\n        if (this.pausedTime) {\r\n            this.time = this.pausedTime;\r\n        } else if (!this.isPlaying) {\r\n            this.time = this.reversed ? this.duration : 0;\r\n        }\r\n        this.setKeyframes(this.time);\r\n    }\r\n}\r\n\r\nexport default Animation;\r\n","import {update, autoPlay, add, remove} from './core'\r\nimport Animation from './Animation';\r\nexport {Animation, update, autoPlay, add, remove};\r\n"],"sourceRoot":""}