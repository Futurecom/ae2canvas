!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("AE2Canvas",[],e):"object"==typeof exports?exports.AE2Canvas=e():t.AE2Canvas=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){function n(){}n.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var i=this;function r(){i.off(t,r),e.apply(n,arguments)}return r._=e,this.on(t,r,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,r=n.length;i<r;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],r=[];if(i&&e)for(var s=0,o=i.length;s<o;s++)i[s].fn!==e&&i[s].fn._!==e&&r.push(i[s]);return r.length?n[t]=r:delete n[t],this}},t.exports=n},function(t,e,n){"use strict";n.r(e);var i,r=[],s=0,o=!1,a=function t(e){o&&(i=requestAnimationFrame(t)),e=void 0!==e?e:performance.now();for(var n=0;n<s;n++)r[n].update(e)},h=function(t){(o=t)?i=requestAnimationFrame(a):cancelAnimationFrame(i)};function u(t){r.push(t),s=r.length}function f(t){var e=r.indexOf(t);e>-1&&(r.splice(e,1),s=r.length)}var c=n(0),l=n.n(c);function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var y=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.path=e}var e,n,i;return e=t,(n=[{key:"getLength",value:function(t){this.steps=Math.max(Math.floor(t/10),1),this.arcLengths=new Array(this.steps+1),this.arcLengths[0]=0;for(var e=this.cubicN(0,this.path[0],this.path[2],this.path[4],this.path[6]),n=this.cubicN(0,this.path[1],this.path[3],this.path[5],this.path[7]),i=0,r=1/this.steps,s=1;s<=this.steps;s+=1){var o=this.cubicN(s*r,this.path[0],this.path[2],this.path[4],this.path[6]),a=this.cubicN(s*r,this.path[1],this.path[3],this.path[5],this.path[7]),h=e-o,u=n-a;i+=Math.sqrt(h*h+u*u),this.arcLengths[s]=i,e=o,n=a}this.length=i}},{key:"map",value:function(t){for(var e=t*this.arcLengths[this.steps],n=0,i=this.steps,r=0;n<i;)r=n+((i-n)/2|0),this.arcLengths[r]<e?n=r+1:i=r;this.arcLengths[r]>e&&r--;var s=this.arcLengths[r];return s===e?r/this.steps:(r+(e-s)/(this.arcLengths[r+1]-s))/this.steps}},{key:"getValues",value:function(t){var e=this.map(t);return[this.cubicN(e,this.path[0],this.path[2],this.path[4],this.path[6]),this.cubicN(e,this.path[1],this.path[3],this.path[5],this.path[7])]}},{key:"cubicN",value:function(t,e,n,i,r){var s=t*t;return e+(3*-e+t*(3*e-e*t))*t+(3*n+t*(-6*n+3*n*t))*t+(3*i-3*i*t)*s+r*(s*t)}}])&&p(e.prototype,n),i&&p(e,i),t}();function m(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.closed=e.closed,this.frames=e.frames}var e,n,i;return e=t,(n=[{key:"draw",value:function(t,e,n){var i=this.getValue(e);!n||0===n.start&&1===n.end?this.drawNormal(i,t):this.drawTrimmed(i,t,n)}},{key:"drawNormal",value:function(t,e){for(var n=t.v,i=this.closed?n.length:n.length-1,r=null,s=null,o=1;o<=i;o++)r=n[o-1],s=n[o]?n[o]:n[0],1===o&&e.moveTo(r[4],r[5]),e.bezierCurveTo(r[0],r[1],s[2],s[3],s[4],s[5]);this.closed&&(e.bezierCurveTo(s[0],s[1],n[0][2],n[0][3],n[0][4],n[0][5]),e.closePath())}},{key:"drawTrimmed",value:function(t,e,n){if(n.start!==n.end){var i,r,s=t.v,o=this.closed?s.length:s.length-1,a=this.getTrimValues(n,t),h=a.start,u=a.end,f=a.endIndex,c=a.startIndex,l=a.looped;if(l&&this.closed)for(var p=c,y=!0,m=1;m<=o+1;m++){r=s[p],i=s[p+1]?s[p+1]:s[0];var d=t.len[p];if(p===c&&y){y=!1;var v=this.trim(r,i,h,1,d);e.moveTo(v.start[4],v.start[5]),e.bezierCurveTo(v.start[0],v.start[1],v.end[2],v.end[3],v.end[4],v.end[5])}else if(p===c&&p===f){var g=this.trim(r,i,0,u,d);e.bezierCurveTo(g.start[0],g.start[1],g.end[2],g.end[3],g.end[4],g.end[5])}else if(p===f){var b=this.trim(r,i,0,u,d);e.bezierCurveTo(b.start[0],b.start[1],b.end[2],b.end[3],b.end[4],b.end[5])}else(p<f||p>c)&&e.bezierCurveTo(r[0],r[1],i[2],i[3],i[4],i[5]);p+1<o?p++:p=0}else if(l&&!this.closed)for(var w=1;w<=o;w++){var k=w-1;r=s[k],i=s[k+1]?s[k+1]:s[0];var O=t.len[k];if(k===c&&k===f){var P=this.trim(r,i,0,u,O);e.bezierCurveTo(P.start[0],P.start[1],P.end[2],P.end[3],P.end[4],P.end[5]);var x=this.trim(r,i,h,1,O);e.moveTo(x.start[4],x.start[5]),e.bezierCurveTo(x.start[0],x.start[1],x.end[2],x.end[3],x.end[4],x.end[5])}else if(k===c){var j=this.trim(r,i,h,1,O);e.moveTo(j.start[4],j.start[5]),e.bezierCurveTo(j.start[0],j.start[1],j.end[2],j.end[3],j.end[4],j.end[5])}else if(k===f){var T=this.trim(r,i,0,u,O);e.bezierCurveTo(T.start[0],T.start[1],T.end[2],T.end[3],T.end[4],T.end[5])}else(k<f||k>c)&&e.bezierCurveTo(r[0],r[1],i[2],i[3],i[4],i[5])}else for(var F=1;F<=o;F++){var K=F-1;if(r=s[F-1],i=s[F]?s[F]:s[0],K===c&&K===f){var S=this.trim(r,i,h,u,length);e.moveTo(S.start[4],S.start[5]),e.bezierCurveTo(S.start[0],S.start[1],S.end[2],S.end[3],S.end[4],S.end[5])}else if(K===c){var _=this.trim(r,i,h,1,length);e.moveTo(_.start[4],_.start[5]),e.bezierCurveTo(_.start[0],_.start[1],_.end[2],_.end[3],_.end[4],_.end[5])}else if(K===f){var C=this.trim(r,i,0,u,length);e.bezierCurveTo(C.start[0],C.start[1],C.end[2],C.end[3],C.end[4],C.end[5])}else K>c&&K<f&&e.bezierCurveTo(r[0],r[1],i[2],i[3],i[4],i[5])}}}},{key:"getValue",value:function(){return this.frames[0]}},{key:"getTrimValues",value:function(t,e){var n={startIndex:0,endIndex:0,start:0,end:0,looped:!1};if(0===t.start&&1===t.end)return null;for(var i=this.sumArray(e.len),r=i*t.start,s=0;s<e.len.length;s++){if(0===r||r<e.len[s]){n.startIndex=s,n.start=r/e.len[s];break}r-=e.len[s]}var o=i*t.end;if(1===t.end)return n.endIndex=e.len.length,n.end=1,n;for(var a=0;a<e.len.length;a++){if(0===o||o<e.len[a]){n.endIndex=a,n.end=o/e.len[a];break}o-=e.len[a]}return n.looped=n.startIndex>n.endIndex||n.startIndex===n.endIndex&&n.start>=n.end,n}},{key:"trim",value:function(t,e,n,i,r){var s={start:t,end:e};if(0===n&&1===i)return s;if(this.isStraight(t[4],t[5],t[0],t[1],e[2],e[3],e[4],e[5]))return s.start=[this.lerp(t[0],e[0],n),this.lerp(t[1],e[1],n),this.lerp(t[2],e[2],n),this.lerp(t[3],e[3],n),this.lerp(t[4],e[4],n),this.lerp(t[5],e[5],n)],s.end=[this.lerp(t[0],e[0],i),this.lerp(t[1],e[1],i),this.lerp(t[2],e[2],i),this.lerp(t[3],e[3],i),this.lerp(t[4],e[4],i),this.lerp(t[5],e[5],i)],s;this.bezier=new y([t[4],t[5],t[0],t[1],e[2],e[3],e[4],e[5]]),this.bezier.getLength(r),n=this.bezier.map(n),i=((i=this.bezier.map(i))-n)/(1-n);var o=[this.lerp(t[4],t[0],n),this.lerp(t[5],t[1],n)],a=[this.lerp(t[0],e[2],n),this.lerp(t[1],e[3],n)],h=[this.lerp(e[2],e[4],n),this.lerp(e[3],e[5],n)],u=[this.lerp(o[0],a[0],n),this.lerp(o[1],a[1],n)],f=[this.lerp(a[0],h[0],n),this.lerp(a[1],h[1],n)],c=[this.lerp(u[0],f[0],n),this.lerp(u[1],f[1],n)],l=[f[0],f[1],u[0],u[1],c[0],c[1]],p=[e[0],e[1],h[0],h[1],e[4],e[5]],m=[this.lerp(l[4],l[0],i),this.lerp(l[5],l[1],i)],d=[this.lerp(l[0],p[2],i),this.lerp(l[1],p[3],i)],v=[this.lerp(p[2],p[4],i),this.lerp(p[3],p[5],i)],g=[this.lerp(m[0],d[0],i),this.lerp(m[1],d[1],i)],b=[this.lerp(d[0],v[0],i),this.lerp(d[1],v[1],i)],w=[this.lerp(g[0],b[0],i),this.lerp(g[1],b[1],i)];return s.start=[m[0],m[1],l[2],l[3],l[4],l[5]],s.end=[b[0],b[1],g[0],g[1],w[0],w[1]],s}},{key:"lerp",value:function(t,e,n){return t*(1-n)+e*n}},{key:"sumArray",value:function(t){return t.reduce(function(t,e){return t+e})}},{key:"isStraight",value:function(t,e,n,i,r,s,o,a){return t===n&&e===i&&o===r&&a===s}},{key:"setKeyframes",value:function(t){}},{key:"reset",value:function(t){}}])&&m(e.prototype,n),i&&m(e,i),t}(),v=4,g=.001,b=1e-7,w=10,k=11,O=1/(k-1),P="function"==typeof Float32Array;function x(t,e,n,i){if(4!==arguments.length)throw new Error("BezierEasing requires 4 arguments.");for(var r=0;r<4;++r)if("number"!=typeof arguments[r]||isNaN(arguments[r])||!isFinite(arguments[r]))throw new Error("BezierEasing arguments should be integers.");if(t<0||t>1||n<0||n>1)throw new Error("BezierEasing x values must be in [0, 1] range.");var s=P?new Float32Array(k):new Array(k);function o(t,e){return 1-3*e+3*t}function a(t,e){return 3*e-6*t}function h(t){return 3*t}function u(t,e,n){return((o(e,n)*t+a(e,n))*t+h(e))*t}function f(t,e,n){return 3*o(e,n)*t*t+2*a(e,n)*t+h(e)}function c(e){for(var i=0,r=1,o=k-1;r!=o&&s[r]<=e;++r)i+=O;var a=i+(e-s[--r])/(s[r+1]-s[r])*O,h=f(a,t,n);return h>=g?function(e,i){for(var r=0;r<v;++r){var s=f(i,t,n);if(0===s)return i;i-=(u(i,t,n)-e)/s}return i}(e,a):0==h?a:function(e,i,r){var s,o,a=0;do{(s=u(o=i+(r-i)/2,t,n)-e)>0?r=o:i=o}while(Math.abs(s)>b&&++a<w);return o}(e,i,i+O)}t==e&&n==i||function(){for(var e=0;e<k;++e)s[e]=u(e*O,t,n)}();var l=function(r){return t===e&&n===i?r:0===r?0:1===r?1:u(c(r),e,i)},p="BezierEasing("+[t,e,n,i]+")";return l.toString=function(){return p},l}x.css={ease:x(.25,.1,.25,1),linear:x(0,0,1,1),"ease-in":x(.42,0,1,1),"ease-out":x(0,0,.58,1),"ease-in-out":x(.42,0,.58,1)};var j=x;function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function K(t,e){return!e||"object"!==T(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var C=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=K(this,S(e).call(this,t))).frameCount=n.frames.length,n.verticesCount=n.frames[0].v.length,n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(e,d),n=e,(i=[{key:"getValue",value:function(t){return this.finished&&t>=this.nextFrame.t?this.nextFrame:!this.started&&t<=this.lastFrame.t?this.lastFrame:(this.started=!0,this.finished=!1,t>this.nextFrame.t?this.pointer+1===this.frameCount?this.finished=!0:(this.pointer++,this.lastFrame=this.frames[this.pointer-1],this.nextFrame=this.frames[this.pointer],this.onKeyframeChange()):t<this.lastFrame.t&&(this.pointer<2?this.started=!1:(this.pointer--,this.lastFrame=this.frames[this.pointer-1],this.nextFrame=this.frames[this.pointer],this.onKeyframeChange())),this.getValueAtTime(t))}},{key:"setKeyframes",value:function(t){if(t<this.frames[0].t)return this.pointer=1,this.nextFrame=this.frames[this.pointer],this.lastFrame=this.frames[this.pointer-1],void this.onKeyframeChange();if(t>this.frames[this.frameCount-1].t)return this.pointer=this.frameCount-1,this.nextFrame=this.frames[this.pointer],this.lastFrame=this.frames[this.pointer-1],void this.onKeyframeChange();for(var e=1;e<this.frameCount;e++)if(t>=this.frames[e-1].t&&t<=this.frames[e])return this.pointer=e,this.lastFrame=this.frames[e-1],this.nextFrame=this.frames[e],void this.onKeyframeChange()}},{key:"onKeyframeChange",value:function(){this.setEasing()}},{key:"lerp",value:function(t,e,n){return t+n*(e-t)}},{key:"setEasing",value:function(){this.lastFrame.easeOut&&this.nextFrame.easeIn?this.easing=new j(this.lastFrame.easeOut[0],this.lastFrame.easeOut[1],this.nextFrame.easeIn[0],this.nextFrame.easeIn[1]):this.easing=null}},{key:"getValueAtTime",value:function(t){var e=(t-this.lastFrame.t)/(this.nextFrame.t-this.lastFrame.t);e>1?e=1:e<0?e=0:this.easing&&(e=this.easing(e));for(var n=[],i=[],r=0;r<this.verticesCount;r++){var s=this.lerp(this.lastFrame.v[r][0],this.nextFrame.v[r][0],e),o=this.lerp(this.lastFrame.v[r][1],this.nextFrame.v[r][1],e),a=this.lerp(this.lastFrame.v[r][2],this.nextFrame.v[r][2],e),h=this.lerp(this.lastFrame.v[r][3],this.nextFrame.v[r][3],e),u=this.lerp(this.lastFrame.v[r][4],this.nextFrame.v[r][4],e),f=this.lerp(this.lastFrame.v[r][5],this.nextFrame.v[r][5],e);n.push([s,o,a,h,u,f])}for(var c=0;c<this.verticesCount-1;c++)i.push(this.lerp(this.lastFrame.len[c],this.nextFrame.len[c],e));return{v:n,len:i}}},{key:"reset",value:function(t){this.finished=!1,this.started=!1,this.pointer=t?this.frameCount-1:1,this.nextFrame=this.frames[this.pointer],this.lastFrame=this.frames[this.pointer-1],this.onKeyframeChange()}}])&&F(n.prototype,i),r&&F(n,r),e}();function R(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var E=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.frames=e}var e,n,i;return e=t,(n=[{key:"getValue",value:function(){return this.frames[0].v}},{key:"setKeyframes",value:function(t){}},{key:"reset",value:function(t){}}])&&R(e.prototype,n),i&&R(e,i),t}();function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function M(t,e){return!e||"object"!==V(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var L=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=M(this,A(e).call(this,t))).frameCount=n.frames.length,n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}(e,E),n=e,(i=[{key:"lerp",value:function(t,e,n){if(t instanceof Array){for(var i=[],r=0;r<t.length;r++)i[r]=t[r]+n*(e[r]-t[r]);return i}return t+n*(e-t)}},{key:"setEasing",value:function(){this.nextFrame.easeIn?this.easing=new j(this.lastFrame.easeOut[0],this.lastFrame.easeOut[1],this.nextFrame.easeIn[0],this.nextFrame.easeIn[1]):this.easing=null}},{key:"getValue",value:function(t){return this.finished&&t>=this.nextFrame.t?this.nextFrame.v:!this.started&&t<=this.lastFrame.t?this.lastFrame.v:(this.started=!0,this.finished=!1,t>this.nextFrame.t?this.pointer+1===this.frameCount?this.finished=!0:(this.pointer++,this.lastFrame=this.frames[this.pointer-1],this.nextFrame=this.frames[this.pointer],this.onKeyframeChange()):t<this.lastFrame.t&&(this.pointer<2?this.started=!1:(this.pointer--,this.lastFrame=this.frames[this.pointer-1],this.nextFrame=this.frames[this.pointer],this.onKeyframeChange())),this.getValueAtTime(t))}},{key:"setKeyframes",value:function(t){if(t<this.frames[0].t)return this.pointer=1,this.nextFrame=this.frames[this.pointer],this.lastFrame=this.frames[this.pointer-1],void this.onKeyframeChange();if(t>this.frames[this.frameCount-1].t)return this.pointer=this.frameCount-1,this.nextFrame=this.frames[this.pointer],this.lastFrame=this.frames[this.pointer-1],void this.onKeyframeChange();for(var e=1;e<this.frameCount;e++)if(t>=this.frames[e-1].t&&t<=this.frames[e].t)return this.pointer=e,this.lastFrame=this.frames[e-1],this.nextFrame=this.frames[e],void this.onKeyframeChange()}},{key:"onKeyframeChange",value:function(){this.setEasing()}},{key:"getElapsed",value:function(t){var e=(t-this.lastFrame.t)/(this.nextFrame.t-this.lastFrame.t);return e>1?e=1:e<0?e=0:this.easing&&(e=this.easing(e)),e}},{key:"getValueAtTime",value:function(t){return this.lerp(this.lastFrame.v,this.nextFrame.v,this.getElapsed(t))}},{key:"reset",value:function(t){this.finished=!1,this.started=!1,this.pointer=t?this.frameCount-1:1,this.nextFrame=this.frames[this.pointer],this.lastFrame=this.frames[this.pointer-1],this.onKeyframeChange()}}])&&z(n.prototype,i),r&&z(n,r),e}();function X(t){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function N(t,e){return!e||"object"!==X(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var W=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),N(this,B(e).apply(this,arguments))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(e,L),n=e,(i=[{key:"onKeyframeChange",value:function(){this.setEasing(),this.setMotionPath()}},{key:"getValueAtTime",value:function(t){return this.motionpath?this.motionpath.getValues(this.getElapsed(t)):this.lerp(this.lastFrame.v,this.nextFrame.v,this.getElapsed(t))}},{key:"setMotionPath",value:function(){this.lastFrame.motionpath?(this.motionpath=new y(this.lastFrame.motionpath),this.motionpath.getLength(this.lastFrame.len)):this.motionpath=null}}])&&Y(n.prototype,i),r&&Y(n,r),e}();function q(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var G=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.position&&(e.position.length>1?this.position=new W(e.position):this.position=new E(e.position)),e.positionX&&(this.positionX=e.positionX.length>1?new L(e.positionX):new E(e.positionX)),e.positionY&&(this.positionY=e.positionY.length>1?new L(e.positionY):new E(e.positionY)),e.anchor&&(this.anchor=e.anchor.length>1?new L(e.anchor):new E(e.anchor)),e.scaleX&&(this.scaleX=e.scaleX.length>1?new L(e.scaleX):new E(e.scaleX)),e.scaleY&&(this.scaleY=e.scaleY.length>1?new L(e.scaleY):new E(e.scaleY)),e.skew&&(this.skew=e.skew.length>1?new L(e.skew):new E(e.skew)),e.skewAxis&&(this.skewAxis=e.skewAxis.length>1?new L(e.skewAxis):new E(e.skewAxis)),e.rotation&&(this.rotation=e.rotation.length>1?new L(e.rotation):new E(e.rotation)),e.opacity&&(this.opacity=e.opacity.length>1?new L(e.opacity):new E(e.opacity))}var e,n,i;return e=t,(n=[{key:"update",value:function(t,e){var n,i,r=this.anchor?this.anchor.getValue(e):[0,0],s=this.rotation?this.deg2rad(this.rotation.getValue(e)):0,o=this.skew?this.deg2rad(this.skew.getValue(e)):0,a=this.skewAxis?this.deg2rad(this.skewAxis.getValue(e)):0,h=this.scaleX?this.scaleX.getValue(e):1,u=this.scaleY?this.scaleY.getValue(e):1,f=this.opacity?this.opacity.getValue(e)*t.globalAlpha:t.globalAlpha;if(this.position){var c=this.position.getValue(e,t);n=c[0],i=c[1]}else n=this.positionX?this.positionX.getValue(e):0,i=this.positionY?this.positionY.getValue(e):0;t.transform(1,0,0,1,n-r[0],i-r[1]),this.setRotation(t,s,r[0],r[1]),this.setSkew(t,o,a,r[0],r[1]),this.setScale(t,h,u,r[0],r[1]),t.globalAlpha=f}},{key:"setRotation",value:function(t,e,n,i){var r=Math.cos(e),s=Math.sin(e),o=n-r*n+s*i,a=i-s*n-r*i;t.transform(r,s,-s,r,o,a)}},{key:"setScale",value:function(t,e,n,i,r){t.transform(e,0,0,n,-i*e+i,-r*n+r)}},{key:"setSkew",value:function(t,e,n,i,r){var s=Math.tan(-e);this.setRotation(t,-n,i,r),t.transform(1,0,s,1,-r*s,0),this.setRotation(t,n,i,r)}},{key:"deg2rad",value:function(t){return t*(Math.PI/180)}},{key:"setKeyframes",value:function(t){this.anchor&&this.anchor.setKeyframes(t),this.rotation&&this.rotation.setKeyframes(t),this.skew&&this.skew.setKeyframes(t),this.skewAxis&&this.skewAxis.setKeyframes(t),this.position&&this.position.setKeyframes(t),this.positionX&&this.positionX.setKeyframes(t),this.positionY&&this.positionY.setKeyframes(t),this.scaleX&&this.scaleX.setKeyframes(t),this.scaleY&&this.scaleY.setKeyframes(t),this.opacity&&this.opacity.setKeyframes(t)}},{key:"reset",value:function(t){this.anchor&&this.anchor.reset(t),this.rotation&&this.rotation.reset(t),this.skew&&this.skew.reset(t),this.skewAxis&&this.skewAxis.reset(t),this.position&&this.position.reset(t),this.positionX&&this.positionX.reset(t),this.positionY&&this.positionY.reset(t),this.scaleX&&this.scaleX.reset(t),this.scaleY&&this.scaleY.reset(t),this.opacity&&this.opacity.reset(t)}}])&&q(e.prototype,n),i&&q(e,i),t}();function H(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var J=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.color=e.color.length>1?new L(e.color):new E(e.color),this.opacity=e.opacity.length>1?new L(e.opacity):new E(e.opacity),this.direction=e.direction.length>1?new L(e.direction):new E(e.direction),this.distance=e.distance.length>1?new L(e.distance):new E(e.distance),this.softness=e.softness.length>1?new L(e.softness):new E(e.softness)}var e,n,i;return e=t,(n=[{key:"getColor",value:function(t){var e=this.color.getValue(t),n=this.opacity.getValue(t);return"rgba(".concat(Math.round(e[0]),", ").concat(Math.round(e[1]),", ").concat(Math.round(e[2]),", ").concat(n,")")}},{key:"setShadow",value:function(t,e){var n=this.getColor(e),i=this.distance.getValue(e),r=this.softness.getValue(e);t.shadowColor=n,t.shadowOffsetX=i,t.shadowOffsetY=i,t.shadowBlur=r}},{key:"setKeyframes",value:function(t){this.color.setKeyframes(t),this.opacity.setKeyframes(t),this.direction.setKeyframes(t),this.distance.setKeyframes(t),this.softness.setKeyframes(t)}},{key:"reset",value:function(t){this.color.reset(t),this.opacity.reset(t),this.direction.reset(t),this.distance.reset(t),this.softness.reset(t)}}])&&H(e.prototype,n),i&&H(e,i),t}();function Q(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var U=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.index=e.index,this.in=e.in||0,this.out=e.out,e.parent&&(this.parent=e.parent),this.transform=new G(e.transform),e.effects&&e.effects.dropShadow&&(this.dropShadow=new J(e.effects.dropShadow)),e.masks&&(this.masks=e.masks.map(function(t){return t.isAnimated?new C(t):new d(t)}))}var e,n,i;return e=t,(n=[{key:"draw",value:function(t,e){t.save(),this.parent&&this.parent.setParentTransform(t,e),this.transform.update(t,e),this.dropShadow&&this.dropShadow.setShadow(t,e),this.masks&&(t.beginPath(),this.masks.forEach(function(n){return n.draw(t,e)}),t.clip())}},{key:"setParentTransform",value:function(t,e){this.parent&&this.parent.setParentTransform(t,e),this.transform.update(t,e)}},{key:"setKeyframes",value:function(t){this.transform.setKeyframes(t),this.masks&&this.masks.forEach(function(e){return e.setKeyframes(t)})}},{key:"reset",value:function(t){this.transform.reset(t),this.masks&&this.masks.forEach(function(e){return e.reset(t)})}}])&&Q(e.prototype,n),i&&Q(e,i),t}();function Z(t){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function tt(t,e){return!e||"object"!==Z(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function et(t,e,n){return(et="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nt(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function nt(t){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function it(t,e){return(it=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=tt(this,nt(e).call(this,t))).source=t.source,n.isLoaded=!1,n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&it(t,e)}(e,U),n=e,(i=[{key:"preload",value:function(t){var e=this;return new Promise(function(t,n){e.img=new Image,e.img.onload=function(){e.isLoaded=!0,t()},e.img.src=e.source})}},{key:"draw",value:function(t,n){et(nt(e.prototype),"draw",this).call(this,t,n),t.drawImage(this.img,0,0),t.restore()}}])&&$(n.prototype,i),r&&$(n,r),e}();function st(t){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function at(t,e){return!e||"object"!==st(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ht(t,e,n){return(ht="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ut(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ut(t){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ft(t,e){return(ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ct=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),at(this,ut(e).call(this,t))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ft(t,e)}(e,U),n=e,(i=[{key:"draw",value:function(t,n){ht(ut(e.prototype),"draw",this).call(this,t,n),t.restore()}}])&&ot(n.prototype,i),r&&ot(n,r),e}();function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function yt(t,e){return!e||"object"!==lt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mt(t,e,n){return(mt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dt(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function dt(t){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vt(t,e){return(vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gt=function(t){function e(t,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=yt(this,dt(e).call(this,t))).text=t.text,i.leading=t.leading,i.fontSize=t.fontSize,i.font=t.font,i.color=t.color,i.justification=t.justification,i.baseFont=n,i}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vt(t,e)}(e,U),n=e,(i=[{key:"draw",value:function(t,n){mt(dt(e.prototype),"draw",this).call(this,t,n),t.textAlign=this.justification,t.font="".concat(this.fontSize,"px ").concat(this.baseFont)||this.font,t.fillStyle="rgb(".concat(this.color[0],", ").concat(this.color[1],", ").concat(this.color[2],")");for(var i=0;i<this.text.length;i++)t.fillText(this.text[i],0,i*this.leading);t.restore()}}])&&pt(n.prototype,i),r&&pt(n,r),e}();function bt(t){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function kt(t,e){return!e||"object"!==bt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ot(t){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pt(t,e){return(Pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=kt(this,Ot(e).call(this,t))).closed=!0,n.size=t.size.length>1?new L(t.size):new E(t.size),t.position&&(n.position=t.position.length>1?new L(t.position):new E(t.position)),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pt(t,e)}(e,d),n=e,(i=[{key:"draw",value:function(t,e,n){var i,r,s=this.size.getValue(e),o=this.position?this.position.getValue(e):[0,0],a=s[0]/2,h=s[1]/2,u=o[0]-a,f=o[1]-h,c=.5522848*a,l=.5522848*h,p=[[u+a+c,f,u+a-c,f,u+a,f],[u+a+a,f+h+l,u+a+a,f+h-l,u+a+a,f+h],[u+a-c,f+h+h,u+a+c,f+h+h,u+a,f+h+h],[u,f+h-l,u,f+h+l,u,f+h]];if(n){var y,m=a+h;for(n=this.getTrimValues(n),i=0;i<4;i++)(r=i+1)>3&&(r=0),i>n.startIndex&&i<n.endIndex?t.bezierCurveTo(p[i][0],p[i][1],p[r][2],p[r][3],p[r][4],p[r][5]):i===n.startIndex&&i===n.endIndex?(y=this.trim(p[i],p[r],n.start,n.end,m),t.moveTo(y.start[4],y.start[5]),t.bezierCurveTo(y.start[0],y.start[1],y.end[2],y.end[3],y.end[4],y.end[5])):i===n.startIndex?(y=this.trim(p[i],p[r],n.start,1,m),t.moveTo(y.start[4],y.start[5]),t.bezierCurveTo(y.start[0],y.start[1],y.end[2],y.end[3],y.end[4],y.end[5])):i===n.endIndex&&(y=this.trim(p[i],p[r],0,n.end,m),t.bezierCurveTo(y.start[0],y.start[1],y.end[2],y.end[3],y.end[4],y.end[5]))}else for(t.moveTo(p[0][4],p[0][5]),i=0;i<4;i++)(r=i+1)>3&&(r=0),t.bezierCurveTo(p[i][0],p[i][1],p[r][2],p[r][3],p[r][4],p[r][5])}},{key:"getTrimValues",value:function(t){var e=Math.floor(4*t.start),n=Math.floor(4*t.end);return{startIndex:e,endIndex:n,start:4*(t.start-.25*e),end:4*(t.end-.25*n)}}},{key:"setKeyframes",value:function(t){this.size.setKeyframes(t),this.position&&this.position.setKeyframes(t)}},{key:"reset",value:function(t){this.size.reset(t),this.position&&this.position.reset(t)}}])&&wt(n.prototype,i),r&&wt(n,r),e}();function jt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Tt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.closed=!0,this.starType=e.starType,this.points=e.points.length>1?new L(e.points):new E(e.points),this.innerRadius=e.innerRadius.length>1?new L(e.innerRadius):new E(e.innerRadius),this.outerRadius=e.outerRadius.length>1?new L(e.outerRadius):new E(e.outerRadius),e.position&&(this.position=e.position.length>1?new L(e.position):new E(e.position)),e.rotation&&(this.rotation=e.rotation.length>1?new L(e.rotation):new E(e.rotation)),e.innerRoundness&&(this.innerRoundness=e.innerRoundness.length>1?new L(e.innerRoundness):new E(e.innerRoundness)),e.outerRoundness&&(this.outerRoundness=e.outerRoundness.length>1?new L(e.outerRoundness):new E(e.outerRoundness))}var e,n,i;return e=t,(n=[{key:"draw",value:function(t,e){var n=this.points.getValue(e),i=this.innerRadius.getValue(e),r=this.outerRadius.getValue(e),s=this.position?this.position.getValue(e):[0,0],o=this.rotation?this.rotation.getValue(e):0,a=this.innerRoundness?this.innerRoundness.getValue(e):0,h=this.outerRoundness?this.outerRoundness.getValue(e):0;o=this.deg2rad(o);var u=this.rotatePoint(0,0,0,0-r,o);t.save(),t.beginPath(),t.translate(s[0],s[1]),t.moveTo(u[0],u[1]);for(var f=0;f<n;f++){var c,l,p,y,m,d,v,g=void 0,b=void 0;v=Math.PI/n*2,c=this.rotatePoint(0,0,0,0-i,v*(f+1)-v/2+o),l=this.rotatePoint(0,0,0,0-r,v*(f+1)+o),g||(g=(u[0]+c[0])*h/100*.5522848),b||(b=(u[0]+c[0])*a/100*.5522848),p=this.rotatePoint(0,0,g,0-r,v*f+o),m=this.rotatePoint(0,0,-1*b,0-i,v*(f+1)-v/2+o),d=this.rotatePoint(0,0,b,0-i,v*(f+1)-v/2+o),y=this.rotatePoint(0,0,-1*g,0-r,v*(f+1)+o),1===this.starType?(t.bezierCurveTo(p[0],p[1],m[0],m[1],c[0],c[1]),t.bezierCurveTo(d[0],d[1],y[0],y[1],l[0],l[1])):t.bezierCurveTo(p[0],p[1],y[0],y[1],l[0],l[1])}t.restore()}},{key:"rotatePoint",value:function(t,e,n,i,r){var s=Math.cos(r),o=Math.sin(r);return[s*(n-t)-o*(i-e)+t,o*(n-t)+s*(i-e)+e]}},{key:"deg2rad",value:function(t){return t*(Math.PI/180)}},{key:"setKeyframes",value:function(t){this.points.setKeyframes(t),this.innerRadius.setKeyframes(t),this.outerRadius.setKeyframes(t),this.position&&this.position.setKeyframes(t),this.rotation&&this.rotation.setKeyframes(t),this.innerRoundness&&this.innerRoundness.setKeyframes(t),this.outerRoundness&&this.outerRoundness.setKeyframes(t)}},{key:"reset",value:function(t){this.points.reset(t),this.innerRadius.reset(t),this.outerRadius.reset(t),this.position&&this.position.reset(t),this.rotation&&this.rotation.reset(t),this.innerRoundness&&this.innerRoundness.reset(t),this.outerRoundness&&this.outerRoundness.reset(t)}}])&&jt(e.prototype,n),i&&jt(e,i),t}();function Ft(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Kt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.closed=!0,this.size=e.size.length>1?new L(e.size):new E(e.size),e.position&&(this.position=e.position.length>1?new L(e.position):new E(e.position)),e.roundness&&(this.roundness=e.roundness.length>1?new L(e.roundness):new E(e.roundness))}var e,n,i;return e=t,(n=[{key:"draw",value:function(t,e,n){var i=this.size.getValue(e),r=this.position?this.position.getValue(e):[0,0],s=this.roundness?this.roundness.getValue(e):0;i[0]<2*s&&(s=i[0]/2),i[1]<2*s&&(s=i[1]/2);var o=r[0]-i[0]/2,a=r[1]-i[1]/2;n||(t.moveTo(o+s,a),t.arcTo(o+i[0],a,o+i[0],a+i[1],s),t.arcTo(o+i[0],a+i[1],o,a+i[1],s),t.arcTo(o,a+i[1],o,a,s),t.arcTo(o,a,o+i[0],a,s))}},{key:"setKeyframes",value:function(t){this.size.setKeyframes(t),this.position&&this.position.setKeyframes(t),this.roundness&&this.roundness.setKeyframes(t)}},{key:"reset",value:function(t){this.size.reset(t),this.position&&this.position.reset(t),this.roundness&&this.roundness.reset(t)}}])&&Ft(e.prototype,n),i&&Ft(e,i),t}();function St(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var _t=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.color=e.color.length>1?new L(e.color):new E(e.color),e.opacity&&(this.opacity=e.opacity.length>1?new L(e.opacity):new E(e.opacity))}var e,n,i;return e=t,(n=[{key:"getValue",value:function(t){var e=this.color.getValue(t),n=this.opacity?this.opacity.getValue(t):1;return"rgba(".concat(Math.round(e[0]),", ").concat(Math.round(e[1]),", ").concat(Math.round(e[2]),", ").concat(n,")")}},{key:"update",value:function(t,e){var n=this.getValue(e);t.fillStyle=n}},{key:"setKeyframes",value:function(t){this.color.setKeyframes(t),this.opacity&&this.opacity.setKeyframes(t)}},{key:"reset",value:function(t){this.color.reset(t),this.opacity&&this.opacity.reset(t)}}])&&St(e.prototype,n),i&&St(e,i),t}();function Ct(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Rt=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n[e.name]||(n[e.name]=[]),n[e.name].push(this),this.stops=e.stops,this.type=e.type,this.startPoint=e.startPoint.length>1?new L(e.startPoint):new E(e.startPoint),this.endPoint=e.endPoint.length>1?new L(e.endPoint):new E(e.endPoint),e.opacity&&(this.opacity=e.opacity.length>1?new L(e.opacity):new E(e.opacity))}var e,n,i;return e=t,(n=[{key:"update",value:function(t,e){var n=this.startPoint.getValue(e),i=this.endPoint.getValue(e),r=0;if("radial"===this.type){var s=n[0]-i[0],o=n[1]-i[1];r=Math.sqrt(s*s+o*o)}var a="radial"===this.type?t.createRadialGradient(n[0],n[1],0,n[0],n[1],r):t.createLinearGradient(n[0],n[1],i[0],i[1]),h=this.opacity?this.opacity.getValue(e):1,u=!0,f=!1,c=void 0;try{for(var l,p=this.stops[Symbol.iterator]();!(u=(l=p.next()).done);u=!0){var y=l.value,m=y.color;a.addColorStop(y.location,"rgba(".concat(m[0],", ").concat(m[1],", ").concat(m[2],", ").concat(m[3]*h,")"))}}catch(t){f=!0,c=t}finally{try{u||null==p.return||p.return()}finally{if(f)throw c}}t.fillStyle=a}},{key:"setKeyframes",value:function(t){this.opacity&&this.opacity.setKeyframes(t),this.startPoint.setKeyframes(t),this.endPoint.setKeyframes(t)}},{key:"reset",value:function(t){this.opacity&&this.opacity.setKeyframes(t),this.startPoint.setKeyframes(t),this.endPoint.setKeyframes(t)}}])&&Ct(e.prototype,n),i&&Ct(e,i),t}();function Et(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Vt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.join=e.join,this.cap=e.cap,e.miterLimit&&(e.miterLimit.length>1?this.miterLimit=new L(e.miterLimit):this.miterLimit=new E(e.miterLimit)),e.color.length>1?this.color=new L(e.color):this.color=new E(e.color),e.opacity.length>1?this.opacity=new L(e.opacity):this.opacity=new E(e.opacity),e.width.length>1?this.width=new L(e.width):this.width=new E(e.width),e.dashes&&(this.dashes={},e.dashes.dash.length>1?this.dashes.dash=new L(e.dashes.dash):this.dashes.dash=new E(e.dashes.dash),e.dashes.gap.length>1?this.dashes.gap=new L(e.dashes.gap):this.dashes.gap=new E(e.dashes.gap),e.dashes.offset.length>1?this.dashes.offset=new L(e.dashes.offset):this.dashes.offset=new E(e.dashes.offset)))}var e,n,i;return e=t,(n=[{key:"getValue",value:function(t){var e=this.color.getValue(t),n=this.opacity.getValue(t);e[0]=Math.round(e[0]),e[1]=Math.round(e[1]),e[2]=Math.round(e[2]);var i=e.join(", ");return"rgba(".concat(i,", ").concat(n,")")}},{key:"update",value:function(t,e){var n,i=this.getValue(e),r=this.width.getValue(e),s=this.join;"miter"===s&&(n=this.miterLimit.getValue(e)),t.lineWidth=r,t.lineJoin=s,n&&(t.miterLimit=n),t.lineCap=this.cap,t.strokeStyle=i,this.dashes&&(t.setLineDash([this.dashes.dash.getValue(e),this.dashes.gap.getValue(e)]),t.lineDashOffset=this.dashes.offset.getValue(e))}},{key:"setKeyframes",value:function(t){this.color.setKeyframes(t),this.opacity.setKeyframes(t),this.width.setKeyframes(t),this.miterLimit&&this.miterLimit.setKeyframes(t),this.dashes&&(this.dashes.dash.setKeyframes(t),this.dashes.gap.setKeyframes(t),this.dashes.offset.setKeyframes(t))}},{key:"reset",value:function(t){this.color.reset(t),this.opacity.reset(t),this.width.reset(t),this.miterLimit&&this.miterLimit.reset(t),this.dashes&&(this.dashes.dash.reset(t),this.dashes.gap.reset(t),this.dashes.offset.reset(t))}}])&&Et(e.prototype,n),i&&Et(e,i),t}();function zt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Mt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e.type,e.start&&(this.start=e.start.length>1?new L(e.start):new E(e.start)),e.end&&(this.end=e.end.length>1?new L(e.end):new E(e.end)),e.offset&&(this.offset=e.offset.length>1?new L(e.offset):new E(e.offset))}var e,n,i;return e=t,(n=[{key:"getTrim",value:function(t){var e=this.start?this.start.getValue(t):0,n=this.end?this.end.getValue(t):1,i=Math.min(e,n),r=Math.max(e,n);if(this.offset){var s=this.offset.getValue(t)%1;(s>0&&s<1||s>-1&&s<0)&&(i=(i=(i+=s)>1?i-1:i)<0?1+i:i,r=(r=(r+=s)>1?r-1:r)<0?1+r:r)}return 0===i&&1===r?null:{start:i,end:r}}},{key:"setKeyframes",value:function(t){this.start&&this.start.setKeyframes(t),this.end&&this.end.setKeyframes(t),this.offset&&this.offset.reset()}},{key:"reset",value:function(t){this.start&&this.start.reset(t),this.end&&this.end.reset(t),this.offset&&this.offset.reset()}}])&&zt(e.prototype,n),i&&zt(e,i),t}();function At(t){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function It(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Lt(t,e){return!e||"object"!==At(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xt(t,e,n){return(Xt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yt(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Yt(t){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nt(t,e){return(Nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Bt=function(t){function e(t,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=Lt(this,Yt(e).call(this,t)),t.fill&&(i.fill=new _t(t.fill)),t.gradientFill&&(i.fill=new Rt(t.gradientFill,n)),t.stroke&&(i.stroke=new Vt(t.stroke)),t.trim&&(i.trim=new Mt(t.trim)),t.groups&&(i.groups=t.groups.map(function(t){return new e(t,n)})),t.shapes&&(i.shapes=t.shapes.map(function(t){return"path"===t.type?t.isAnimated?new C(t):new d(t):"rect"===t.type?new Kt(t):"ellipse"===t.type?new xt(t):"polystar"===t.type?new Tt(t):void 0})),i}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nt(t,e)}(e,U),n=e,(i=[{key:"draw",value:function(t,n,i,r,s){Xt(Yt(e.prototype),"draw",this).call(this,t,n);var o=this.fill||i,a=this.stroke||r,h=this.trim?this.trim.getTrim(n):s;o&&o.update(t,n),a&&a.update(t,n),t.beginPath(),this.shapes&&(this.shapes.forEach(function(e){return e.draw(t,n,h)}),this.shapes[this.shapes.length-1].closed),o&&t.fill(),a&&t.stroke(),this.groups&&this.groups.forEach(function(e){return e.draw(t,n,o,a,h)}),t.restore()}},{key:"setKeyframes",value:function(t){Xt(Yt(e.prototype),"setKeyframes",this).call(this,t),this.shapes&&this.shapes.forEach(function(e){return e.setKeyframes(t)}),this.groups&&this.groups.forEach(function(e){return e.setKeyframes(t)}),this.fill&&this.fill.setKeyframes(t),this.stroke&&this.stroke.setKeyframes(t),this.trim&&this.trim.setKeyframes(t)}},{key:"reset",value:function(t){Xt(Yt(e.prototype),"reset",this).call(this,t),this.shapes&&this.shapes.forEach(function(e){return e.reset(t)}),this.groups&&this.groups.forEach(function(e){return e.reset(t)}),this.fill&&this.fill.reset(t),this.stroke&&this.stroke.reset(t),this.trim&&this.trim.reset(t)}}])&&It(n.prototype,i),r&&It(n,r),e}();function Dt(t){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function qt(t,e){return!e||"object"!==Dt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gt(t,e,n){return(Gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ht(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Ht(t){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jt(t,e){return(Jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qt=function(t){function e(t,n,i,r,s){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=qt(this,Ht(e).call(this,t));var a=t.sourceID,h=n&&n[a]?n[a].layers:null;return h&&(o.layers=h.map(function(t){switch(t.type){case"vector":return new Bt(t,r);case"image":return new rt(t,s);case"text":return new gt(t,i);case"comp":return new e(t,i,r,s);case"null":return new ct(t)}}),o.layers.forEach(function(t){if(t.parent){var e=t.parent;t.parent=o.layers.find(function(t){return t.index===e})}})),t.timeRemapping&&(o.timeRemapping=t.timeRemapping.length>1?new L(t.timeRemapping):new E(t.timeRemapping)),o}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jt(t,e)}(e,U),n=e,(i=[{key:"draw",value:function(t,n){if(Gt(Ht(e.prototype),"draw",this).call(this,t,n),this.layers){var i=n-this.in;this.timeRemapping&&(i=this.timeRemapping.getValue(i)),this.layers.forEach(function(e){i>=e.in&&i<=e.out&&e.draw(t,i)})}t.restore()}},{key:"setParentTransform",value:function(t,n){Gt(Ht(e.prototype),"setParentTransform",this).call(this,t,n);var i=n-this.in;this.layers&&this.layers.forEach(function(e){return e.setParentTransform(t,i)})}},{key:"setKeyframes",value:function(t){Gt(Ht(e.prototype),"setKeyframes",this).call(this,t);var n=t-this.in;this.timeRemapping&&this.timeRemapping.setKeyframes(n),this.layers&&this.layers.forEach(function(t){return t.setKeyframes(n)})}},{key:"reset",value:function(t){Gt(Ht(e.prototype),"reset",this).call(this,t),this.timeRemapping&&this.timeRemapping.reset(t),this.layers&&this.layers.forEach(function(e){return e.reset(t)})}}])&&Wt(n.prototype,i),r&&Wt(n,r),e}();function Ut(t){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function $t(t){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function te(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ee(t,e){return(ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ne=function(t){function e(t){var n,i,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,r=$t(e).call(this),(n=!r||"object"!==Ut(r)&&"function"!=typeof r?te(i):r).gradients={},n.pausedTime=0,n.duration=t.data.duration,n.baseWidth=t.data.width,n.baseHeight=t.data.height,n.ratio=t.data.width/t.data.height,n.markers=t.data.markers,n.baseFont=t.baseFont,n.loop=t.loop||!1,n.devicePixelRatio=t.devicePixelRatio||("undefined"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1),n.fluid=t.fluid||!0,n.imageBasePath=t.imageBasePath||"";var s=t.data.comps;return n.isPaused=!1,n.isPlaying=!1,n.drawFrame=!0,n.canvas=t.canvas||document.createElement("canvas"),n.canvas.width=n.baseWidth,n.canvas.height=n.baseHeight,n.ctx=n.canvas.getContext("2d"),n.layers=t.data.layers.map(function(t){switch(t.type){case"vector":return new Bt(t,n.gradients);case"image":return new rt(t,n.imageBasePath);case"text":return new gt(t,n.baseFont);case"comp":return new Qt(t,s,n.baseFont,n.gradients,n.imageBasePath);case"null":default:return new ct(t)}}),n.layers.forEach(function(t){if(t.parent){var e=t.parent;t.parent=n.layers.find(function(t){return t.index===e})}}),n.reversed=t.reversed||!1,n.reset(n.reversed),n.resize(),u(te(n)),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ee(t,e)}(e,l.a),n=e,(i=[{key:"play",value:function(){this.isPlaying||(this.isPaused||this.reset(this.reversed),this.isPaused=!1,this.pausedTime=0,this.isPlaying=!0)}},{key:"stop",value:function(){this.reset(this.reversed),this.isPlaying=!1,this.drawFrame=!0}},{key:"pause",value:function(){this.isPlaying&&(this.isPaused=!0,this.pausedTime=this.time,this.isPlaying=!1)}},{key:"gotoAndPlay",value:function(t){var e=this.getMarker(t);e&&(this.time=e.time,this.pausedTime=0,this.setKeyframes(this.time),this.isPlaying=!0)}},{key:"gotoAndStop",value:function(t){var e=this.getMarker(t);e&&(this.time=e.time,this.setKeyframes(this.time),this.drawFrame=!0,this.isPlaying=!1)}},{key:"getMarker",value:function(t){var e;if("number"==typeof t?e=this.markers[t]:"string"==typeof t&&(e=this.markers.find(function(e){return e.comment===t})),e)return e;console.warn("Marker not found")}},{key:"checkStopMarkers",value:function(t,e){return this.markers.find(function(n){return n.stop&&n.time>t&&n.time<e})}},{key:"preload",value:function(){var t=this.layers.filter(function(t){return t instanceof rt}).map(function(t){return new t.preload});return Promise.all(t).catch(function(t){return console.error(t)})}},{key:"reset",value:function(){var t=this;this.pausedTime=0,this.time=this.reversed?this.duration:0,this.layers.forEach(function(e){return e.reset(t.reversed)})}},{key:"setKeyframes",value:function(t){this.layers.forEach(function(e){return e.setKeyframes(t)})}},{key:"destroy",value:function(){this.isPlaying=!1,this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),f(this)}},{key:"resize",value:function(t){if(this.fluid){var e=t||this.canvas.clientWidth||this.baseWidth;this.canvas.width=e*this.devicePixelRatio,this.canvas.height=e/this.ratio*this.devicePixelRatio,this.scale=e/this.baseWidth*this.devicePixelRatio,this.ctx.transform(this.scale,0,0,this.scale,0,0),this.setKeyframes(this.time),this.drawFrame=!0}}},{key:"setGradients",value:function(t,e){this.gradients[t]?this.gradients[t].forEach(function(t){t.stops=e}):console.warn("Gradient with name: ".concat(t," not found."))}},{key:"getSpriteSheet",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:25,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4096,i=e/this.baseWidth,r=this.baseHeight*i,s=Math.floor(this.duration/1e3*t),o=document.createElement("canvas"),a=o.getContext("2d"),h=Math.floor(n/e),u=Math.ceil(s/h),f=0,c=0;o.width=h*e,o.height=u*r,this.resize(e);for(var l=0;l<s;l++){var p=l/s*this.duration;this.setKeyframes(p),this.draw(p);var y=f*e,m=c*r;f+1>=h?(f=0,c++):f++,a.drawImage(this.canvas,y,m,e,r)}return{frames:s,canvas:o,offsetX:e,offsetY:r,rowsX:h,rowsY:u}}},{key:"draw",value:function(t){var e=this;this.ctx.clearRect(0,0,this.baseWidth,this.baseHeight),this.layers.forEach(function(n){t>=n.in&&t<=n.out&&n.draw(e.ctx,t)})}},{key:"update",value:function(t){this.then||(this.then=t);var e=t-this.then;if(this.then=t,this.isPlaying){this.time=this.reversed?this.time-e:this.time+e;var n=this.checkStopMarkers(this.time-e,this.time);this.time>this.duration||this.reversed&&this.time<0?(this.time=this.reversed?0:this.duration-1,this.isPlaying=!1,this.emit("complete"),this.loop&&this.play()):n?(this.time=n.time,this.pause(),this.emit("stop",n)):this.draw(this.time),this.emit("update")}else this.drawFrame&&(this.drawFrame=!1,this.draw(this.time),this.emit("update"))}},{key:"step",set:function(t){this.isPlaying=!1,this.time=t*this.duration,this.pausedTime=this.time,this.setKeyframes(this.time),this.drawFrame=!0},get:function(){return this.time/this.duration}},{key:"reversed",get:function(){return this._reversed},set:function(t){this._reversed=t,this.pausedTime?this.time=this.pausedTime:this.isPlaying||(this.time=this.reversed?this.duration:0),this.setKeyframes(this.time)}}])&&Zt(n.prototype,i),r&&Zt(n,r),e}();n.d(e,"Animation",function(){return ne}),n.d(e,"update",function(){return a}),n.d(e,"autoPlay",function(){return h}),n.d(e,"add",function(){return u}),n.d(e,"remove",function(){return f})}])});