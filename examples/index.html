<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <style>
        html {
            width: 100%;
            height: 100%;
            font-family: "helvetica neue", helvetica, arial, verdana;
            font-size: 16px;
        }

        body {
            width: 100%;
            margin: 0;
            text-align: center;
            background: #fff;
        }

        #canvasWrapper {
            width: 100%;
            max-width: 1600px;
            margin: 0 auto 30px auto;
            /*background: url(test.jpg);*/
            background-size: contain;
        }

        button, label {
            font-family: inherit;
            font-size: 16px;
        }

        canvas {
            width: 100%;
            /*max-width: 1280px;*/
        }

        #slider {
            display: block;
            margin: 30px auto;
            width: 90%;
            max-width: 600px;
        }

    </style>
</head>
<body>
<div id="canvasWrapper">
    <canvas width="1920" height="1080"></canvas>
</div>
<button id="play" type="button">Play</button>
<button id="stop" type="button">Stop</button>
<button id="pause" type="button">Pause</button>
<button id="gotoAndPlay" type="button">gotoAndPlay</button>
<button id="gotoAndStop" type="button">gotoAndStop</button>
<input id="slider" type="range" min="0" max="1" step="0.001" value="0">
<input id="reversed" type="checkbox"><label for="reversed">Reversed</label>

<script src="index.js"></script>
<script>
    var animation;
    var slider = document.getElementById('slider');
    var canvasWrapper = document.getElementById('canvasWrapper');
    var canvas = canvasWrapper.querySelector('canvas');
    var ctx = canvas.getContext('2d');
    var playButton = document.getElementById('play');
    var stopButton = document.getElementById('stop');
    var pauseButton = document.getElementById('pause');
    var gotoAndPlayButton = document.getElementById('gotoAndPlay');
    var gotoAndStopButton = document.getElementById('gotoAndStop');
    var checkbox = document.getElementById('reversed');
    var step = 0;

    AE2Canvas.autoPlay(true);

    fetch('data.json')
        .then(result => result.json())
        .then(data => {

            animation = new AE2Canvas.Animation({
                canvas: canvas,
                data,
            });

            canvasWrapper.appendChild(animation.canvas);

            window.addEventListener('resize', () => animation.resize());

            playButton.addEventListener('click', () => animation.play());

            stopButton.addEventListener('click', () => animation.stop());

            pauseButton.addEventListener('click', () => animation.pause());

            slider.addEventListener('input', () => animation.setStep(slider.value));

            checkbox.addEventListener('change', () => animation.reversed = checkbox.checked);

            gotoAndPlayButton.addEventListener('click', () => animation.gotoAndPlay('scene3'));

            gotoAndStopButton.addEventListener('click', () => animation.gotoAndStop('example marker name'));

            animation.setGradients('sunGrad', [
                {color: [253, 248, 213, 1], location: 0.65},
                {color: [70, 48, 97, 0], location: 1}
            ]);
            animation.setGradients('sun2Grad', [
                {color: [253, 248, 213, 0.5], location: 0.65},
                {color: [188, 216, 241, 0], location: 1}
            ]);
            animation.setGradients('sun3Grad', [
                {color: [253, 248, 213, 0.5], location: 0.65},
                {color: [227, 150, 167, 0], location: 1}
            ]);
            animation.setGradients('earthGrad', [
                {color: [133, 221, 255, 1], location: 0},
                {color: [74, 167, 221, 1], location: 1}
            ]);
            animation.setGradients('skyGrad', [
                {color: [160, 200, 235, 1], location: 0},
                {color: [255, 255, 255, 1], location: 1}
            ]);
            animation.setGradients('sky2Grad', [
                {color: [253, 229, 161, 1], location: 0},
                {color: [228, 150, 167, 1], location: 0.66},
                {color: [164, 97, 251675, 1], location: 1}
            ]);
            animation.setGradients('panelBgGrad', [
                {color: [199, 221, 243, 1], location: 0},
                {color: [74, 167, 221, 1], location: 1}
            ]);
            animation.setGradients('panelFgGrad', [
                {color: [0, 137, 207, 1], location: 0},
                {color: [0, 73, 123, 1], location: 1}
            ]);
            animation.setGradients('50Grad', [
                {color: [214, 221, 103, 1], location: 0},
                {color: [144, 196, 114, 1], location: 1}
            ]);
            animation.setGradients('50Grad', [
                {color: [214, 221, 103, 1], location: 0},
                {color: [144, 196, 114, 1], location: 1}
            ]);
            animation.setGradients('100Grad', [
                {color: [255, 255, 255, 1], location: 0},
                {color: [107, 190, 222, 1], location: 1}
            ]);
        });


    function update(time) {
        requestAnimationFrame(update);
        if (animation && animation.isPlaying) slider.value = animation.getStep();
    }

    requestAnimationFrame(update);

</script>
</body>
</html>